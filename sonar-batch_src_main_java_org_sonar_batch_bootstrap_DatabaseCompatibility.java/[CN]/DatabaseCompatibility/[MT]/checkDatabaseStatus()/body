{
  DatabaseVersion.Status status=version.getStatus();
  if (status == DatabaseVersion.Status.REQUIRES_DOWNGRADE) {
    throw new BadDatabaseVersion("Database relates to a more recent version of SonarQube. Please check your settings (JDBC settings, version of Maven plugin)");
  }
  if (status == DatabaseVersion.Status.REQUIRES_UPGRADE) {
    throw new BadDatabaseVersion("Database must be upgraded. Please browse " + server.getURL() + "/setup");
  }
  if (status != DatabaseVersion.Status.UP_TO_DATE) {
    throw new BadDatabaseVersion("Unknown database status: " + status);
  }
}
