{
  for (  Metric metric : metrics.getMetrics()) {
    String metricKey=metric.getKey();
    if (CoreMetrics.metrics.contains(metric)) {
      throw new ServerStartException("Found plugin, which contains metric '" + metricKey + "' from core: "+ pluginRepository.getPluginKeyForExtension(metrics));
    }
    Metrics anotherRepository=metricsByRepository.get(metricKey);
    if (anotherRepository != null) {
      String firstPlugin=pluginRepository.getPluginKeyForExtension(anotherRepository);
      String secondPlugin=pluginRepository.getPluginKeyForExtension(metrics);
      throw new ServerStartException("Found two plugins with the same metric '" + metricKey + "': "+ firstPlugin+ " and "+ secondPlugin);
    }
    metricsByRepository.put(metricKey,metrics);
  }
}
