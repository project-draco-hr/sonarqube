{
  Logs.INFO.info("cleaning alert thresholds...");
  Query query=session.createQuery("delete from " + Alert.class.getSimpleName() + " a where NOT EXISTS(FROM Metric m WHERE m=a.metric))");
  query.executeUpdate();
  query=session.createQuery("delete from " + Alert.class.getSimpleName() + " a where NOT EXISTS(FROM Metric m WHERE m=a.metric and m.enabled=true))");
  query.executeUpdate();
  session.commit();
}
