{
  TimeProfiler profiler=new TimeProfiler().start("Load metrics");
  measuresDao.disableAutomaticMetrics();
  List<Metric> metricsToRegister=Lists.newArrayList();
  metricsToRegister.addAll(CoreMetrics.getMetrics());
  Map<String,Metrics> metricsByRepository=Maps.newHashMap();
  if (metricsRepositories != null) {
    for (    Metrics metrics : metricsRepositories) {
      checkMetrics(metricsByRepository,metrics);
      metricsToRegister.addAll(metrics.getMetrics());
    }
  }
  register(metricsToRegister);
  cleanAlerts();
  profiler.stop();
}
