{
  final SimpleDateFormat format=new SimpleDateFormat("yyyy-MM-dd");
  final Date date=format.parse("2010-05-18");
  Snapshot snapshot=new Snapshot();
  snapshot.setCreatedAt(date);
  when(finderByLastAnalysis.findLastAnalysis()).thenReturn(snapshot);
  PastSnapshot variationSnapshot=finder.find(2,"last_analysis");
  verify(finderByLastAnalysis).findLastAnalysis();
  assertThat(variationSnapshot.getIndex(),is(2));
  assertThat(variationSnapshot.getMode(),is("last_analysis"));
  assertThat(variationSnapshot.getModeParameter(),is("2010-05-18"));
}
