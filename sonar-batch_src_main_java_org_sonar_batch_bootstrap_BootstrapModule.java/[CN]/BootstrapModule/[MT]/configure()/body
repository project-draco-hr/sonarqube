{
  addCoreSingleton(reactor);
  addCoreSingleton(new PropertiesConfiguration());
  addCoreSingleton(BatchSettings.class);
  addCoreSingleton(DryRun.class);
  addCoreSingleton(ServerMetadata.class);
  addCoreSingleton(TempDirectories.class);
  addCoreSingleton(HttpDownloader.class);
  addCoreSingleton(ArtifactDownloader.class);
  addCoreSingleton(JdbcDriverHolder.class);
  URLClassLoader bootstrapClassLoader=getComponentByType(JdbcDriverHolder.class).getClassLoader();
  Thread.currentThread().setContextClassLoader(bootstrapClassLoader);
  addCoreSingleton(new DriverDatabaseConnector(getComponentByType(Settings.class),bootstrapClassLoader));
  addCoreSingleton(ThreadLocalDatabaseSessionFactory.class);
  addAdapter(new DatabaseSessionProvider());
  for (  Object component : boostrapperComponents) {
    addCoreSingleton(component);
  }
  if (!isMavenPluginExecutorRegistered()) {
    addCoreSingleton(FakeMavenPluginExecutor.class);
  }
  addCoreSingleton(BatchPluginRepository.class);
  addCoreSingleton(BatchExtensionInstaller.class);
  addCoreSingleton(ProjectExtensionInstaller.class);
  addCoreSingleton(BatchSettingsEnhancer.class);
}
