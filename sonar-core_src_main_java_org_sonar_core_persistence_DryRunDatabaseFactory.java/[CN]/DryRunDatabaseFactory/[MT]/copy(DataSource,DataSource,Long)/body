{
  DbTemplate template=new DbTemplate();
  template.copyTable(source,dest,"active_rules").copyTable(source,dest,"active_rule_parameters").copyTable(source,dest,"characteristics").copyTable(source,dest,"characteristic_edges").copyTable(source,dest,"characteristic_properties").copyTable(source,dest,"metrics").copyTable(source,dest,"quality_models").copyTable(source,dest,"rules").copyTable(source,dest,"rules_parameters").copyTable(source,dest,"rules_profiles");
  if (projectId != null) {
    String projectsConditionForIssues="SELECT id from projects where id=" + projectId + " or root_id="+ projectId;
    String snapshotCondition="islast=" + database.getDialect().getTrueSqlValue() + " and (project_id="+ projectId+ " or root_project_id="+ projectId+ ")";
    template.copyTable(source,dest,"projects","(id=" + projectId + " or root_id="+ projectId+ ")").copyTable(source,dest,"issues","component_id in (" + projectsConditionForIssues + ")","status<>'" + Issue.STATUS_CLOSED + "'").copyTable(source,dest,"snapshots",snapshotCondition);
  }
}
