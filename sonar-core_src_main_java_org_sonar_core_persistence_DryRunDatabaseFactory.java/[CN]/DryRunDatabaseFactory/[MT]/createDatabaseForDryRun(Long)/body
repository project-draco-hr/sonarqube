{
  long startup=System.currentTimeMillis();
  String name=serverFileSystem.getTempDir().getAbsolutePath() + "db-" + System.nanoTime();
  try {
    DataSource source=database.getDataSource();
    BasicDataSource destination=create(DIALECT,DRIVER,USER,PASSWORD,URL + name);
    copy(source,destination,projectId);
    close(destination);
    if (LOG.isDebugEnabled()) {
      File dbFile=new File(name + ".h2.db");
      long size=dbFile.length();
      long duration=System.currentTimeMillis() - startup;
      if (projectId == null) {
        LOG.debug("Dry Run Database created in " + duration + " ms, size is "+ size+ " bytes");
      }
 else {
        LOG.debug("Dry Run Database for project " + projectId + " created in "+ duration+ " ms, size is "+ size+ " bytes");
      }
    }
    return dbFileContent(name);
  }
 catch (  SQLException e) {
    throw new SonarException("Unable to create database for DryRun",e);
  }
}
