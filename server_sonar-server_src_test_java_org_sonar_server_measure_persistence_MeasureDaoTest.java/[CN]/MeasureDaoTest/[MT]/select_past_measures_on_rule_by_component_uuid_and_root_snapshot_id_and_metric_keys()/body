{
  db.prepareDbUnit(getClass(),"past_measures_with_rule_id.xml");
  List<PastMeasureDto> measures=sut.selectByComponentUuidAndProjectSnapshotIdAndMetricIds(session,"ABCD",1000L,ImmutableSet.of(1));
  assertThat(measures).hasSize(3);
  PastMeasureDto measure1=measures.get(0);
  assertThat(measure1.getValue()).isEqualTo(60d);
  assertThat(measure1.getMetricId()).isEqualTo(1);
  assertThat(measure1.getRuleId()).isNull();
  assertThat(measure1.getCharacteristicId()).isNull();
  assertThat(measure1.getPersonId()).isNull();
  PastMeasureDto measure2=measures.get(1);
  assertThat(measure2.getValue()).isEqualTo(20d);
  assertThat(measure2.getMetricId()).isEqualTo(1);
  assertThat(measure2.getRuleId()).isEqualTo(30);
  assertThat(measure2.getCharacteristicId()).isNull();
  assertThat(measure2.getPersonId()).isNull();
  PastMeasureDto measure3=measures.get(2);
  assertThat(measure3.getValue()).isEqualTo(40d);
  assertThat(measure3.getMetricId()).isEqualTo(1);
  assertThat(measure3.getRuleId()).isEqualTo(31);
  assertThat(measure3.getCharacteristicId()).isNull();
  assertThat(measure3.getPersonId()).isNull();
}
