{
  List<PastSnapshot> projectPastSnapshots=timeMachineConfiguration.getProjectPastSnapshots();
  if (projectPastSnapshots.size() >= 1) {
    PastSnapshot pastSnapshot=projectPastSnapshots.get(0);
    Double newIssuesCount=context.getMeasure(CoreMetrics.NEW_ISSUES).getVariation1();
    if (pastSnapshot.getTargetDate() != null && newIssuesCount != null && newIssuesCount > 0) {
      DateFormat dateformat=new SimpleDateFormat("yyyy-MM-dd");
      Notification notification=new Notification("new-issues").setDefaultMessage(newIssuesCount.intValue() + " new issues on " + project.getLongName()+ ".").setFieldValue("count",String.valueOf(newIssuesCount.intValue())).setFieldValue("projectName",project.getLongName()).setFieldValue("projectKey",project.getKey()).setFieldValue("projectId",String.valueOf(project.getId())).setFieldValue("fromDate",dateformat.format(pastSnapshot.getTargetDate()));
      notificationManager.scheduleForSending(notification);
    }
  }
}
