{
  if (StringUtils.isNullOrEmpty(templateName)) {
    String errorMsg="Name can't be blank";
    throw new BadRequestException(errorMsg);
  }
  List<PermissionTemplateDto> existingTemplates=permissionTemplateDao.selectAllPermissionTemplates();
  if (existingTemplates != null) {
    for (    PermissionTemplateDto existingTemplate : existingTemplates) {
      if ((templateId == null || !existingTemplate.getId().equals(templateId)) && (existingTemplate.getName().equals(templateName))) {
        String errorMsg="A template with that name already exists";
        throw new BadRequestException(errorMsg);
      }
    }
  }
}
