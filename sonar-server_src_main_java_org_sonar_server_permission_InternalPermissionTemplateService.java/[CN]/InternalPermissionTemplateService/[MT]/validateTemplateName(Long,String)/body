{
  if (StringUtils.isNullOrEmpty(templateName)) {
    String errorMsg="Name can't be blank";
    LOG.error(errorMsg);
    throw new BadRequestException(errorMsg);
  }
  List<PermissionTemplateDto> existingTemplates=permissionDao.selectAllPermissionTemplates();
  if (existingTemplates != null) {
    for (    PermissionTemplateDto existingTemplate : existingTemplates) {
      if ((templateId == null || !existingTemplate.getId().equals(templateId)) && (existingTemplate.getName().equals(templateName))) {
        String errorMsg="A template with that name already exists";
        LOG.error(errorMsg);
        throw new BadRequestException(errorMsg);
      }
    }
  }
}
