{
  Properties p=new Properties();
  File propsFile=new File(homeDir,"conf/sonar.properties");
  if (propsFile.exists()) {
    FileReader reader=new FileReader(propsFile);
    try {
      p.load(reader);
    }
  finally {
      IOUtils.closeQuietly(reader);
    }
  }
  p.putAll(rawProperties);
  p.setProperty("sonar.path.home",homeDir.getAbsolutePath());
  p=ConfigurationUtils.interpolateVariables(p,System.getenv());
  return new Props(p);
}
