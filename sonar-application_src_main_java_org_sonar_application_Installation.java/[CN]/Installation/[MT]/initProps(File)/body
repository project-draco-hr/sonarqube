{
  Properties p=new Properties();
  File propsFile=new File(homeDir,"conf/sonar.properties");
  if (propsFile.exists()) {
    FileReader reader=new FileReader(propsFile);
    try {
      p.load(reader);
    }
  finally {
      IOUtils.closeQuietly(reader);
    }
  }
 else {
    LOG.info("Configuration file not found: " + propsFile.getAbsolutePath());
  }
  p.putAll(System.getenv());
  p.putAll(System.getProperties());
  p.setProperty("sonar.path.home",homeDir.getAbsolutePath());
  return new Props(p);
}
