{
  restoreProfile("one-issue-per-line.xml");
  restoreProfile("empty.xml");
  orchestrator.getServer().provisionProject("sample","xoo-sample");
  orchestrator.getServer().associateProjectToQualityProfile("sample","xoo","empty");
  SonarRunner runner=configureRunner("shared/xoo-sample");
  orchestrator.executeBuild(runner);
  orchestrator.getServer().associateProjectToQualityProfile("sample","xoo","one-issue-per-line");
  runner=configureRunnerIssues("shared/xoo-sample","sonar.scanAllFiles","true");
  BuildResult result=orchestrator.executeBuild(runner);
  assertThat(ItUtils.countIssuesInJsonReport(result,true)).isEqualTo(17);
  runner=configureRunner("shared/xoo-sample");
  orchestrator.executeBuild(runner);
  runner=configureRunnerIssues("shared/xoo-sample","sonar.report.export.path","sonar-report.json","sonar.scanAllFiles","true");
  result=orchestrator.executeBuild(runner);
  assertThat(ItUtils.countIssuesInJsonReport(result,true)).isEqualTo(0);
}
