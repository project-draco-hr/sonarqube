{
  cache=mock(PersistentCache.class);
  doThrow(IOException.class).when(cache).put(anyString(),any(byte[].class));
  cacheStatus=new DefaultProjectCacheStatus(cache,client);
  exception.expect(IllegalStateException.class);
  exception.expectMessage("Failed to write cache sync status");
  cacheStatus.save(PROJ_KEY);
}
