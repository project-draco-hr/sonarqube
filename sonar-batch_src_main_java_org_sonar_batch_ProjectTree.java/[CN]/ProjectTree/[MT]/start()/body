{
  projects=Lists.newArrayList();
  projectsMap=Maps.newHashMap();
  for (  ProjectDefinition def : definitions) {
    Project project=projectBuilder.create(def);
    projectsMap.put(def,project);
    projects.add(project);
  }
  for (  Map.Entry<ProjectDefinition,Project> entry : projectsMap.entrySet()) {
    ProjectDefinition def=entry.getKey();
    Project project=entry.getValue();
    for (    ProjectDefinition module : def.getModules()) {
      projectsMap.get(module).setParent(project);
    }
  }
  for (  Map.Entry<ProjectDefinition,Project> entry : projectsMap.entrySet()) {
    projectBuilder.configure(entry.getValue(),entry.getKey());
  }
  applyModuleExclusions();
}
