{
  Iterator<IRuleViolation> pmdViolationIter=report.iterator();
  while (pmdViolationIter.hasNext()) {
    IRuleViolation pmdViolation=pmdViolationIter.next();
    int lineId=pmdViolation.getBeginLine();
    String ruleKey=pmdViolation.getRule().getName();
    String message=pmdViolation.getDescription();
    String filename=pmdViolation.getFilename();
    Resource resource=JavaFile.fromAbsolutePath(filename,project.getFileSystem().getSourceDirs(),false);
    if (context.getResource(resource) != null) {
      Rule rule=rulesFinder.findByKey(CoreProperties.PMD_PLUGIN,ruleKey);
      if (rule != null) {
        Violation violation=Violation.create(rule,resource).setLineId(lineId).setMessage(message);
        context.saveViolation(violation);
      }
    }
  }
}
