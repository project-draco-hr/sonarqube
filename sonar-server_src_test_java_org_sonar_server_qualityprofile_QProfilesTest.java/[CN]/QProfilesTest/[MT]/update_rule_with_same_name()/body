{
  RuleDto rule=new RuleDto().setId(11).setRepositoryKey("squid").setRuleKey("XPath_1387869254").setParentId(10);
  when(ruleDao.selectById(11)).thenReturn(rule);
  when(ruleDao.selectByName("Rule name")).thenReturn(rule);
  Map<String,String> paramsByKey=ImmutableMap.of("max","21");
  qProfiles.updateRule(11,"Rule name",Severity.MAJOR,"Updated description",paramsByKey);
  verify(service).updateRule(eq(rule),eq("Rule name"),eq(Severity.MAJOR),eq("Updated description"),eq(paramsByKey),any(UserSession.class));
  verify(rules).getFromRuleId(11);
}
