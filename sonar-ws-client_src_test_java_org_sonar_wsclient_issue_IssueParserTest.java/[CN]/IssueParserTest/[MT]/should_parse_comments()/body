{
  String json=IOUtils.toString(getClass().getResourceAsStream("/org/sonar/wsclient/issue/IssueParserTest/issue-with-comments.json"));
  Issues issues=new IssueParser().parseIssues(json);
  assertThat(issues.size()).isEqualTo(1);
  Issue issue=issues.list().get(0);
  assertThat(issue.comments()).hasSize(2);
  IssueComment firstComment=issue.comments().get(0);
  assertThat(firstComment.key()).isEqualTo("COMMENT-1");
  assertThat(firstComment.login()).isEqualTo("morgan");
  assertThat(firstComment.htmlText()).isEqualTo("the first comment");
  assertThat(firstComment.createdAt().getDate()).isEqualTo(18);
  IssueComment secondComment=issue.comments().get(1);
  assertThat(secondComment.key()).isEqualTo("COMMENT-2");
  assertThat(secondComment.login()).isEqualTo("arthur");
  assertThat(secondComment.htmlText()).isEqualTo("the second comment");
  assertThat(secondComment.createdAt().getDate()).isEqualTo(19);
}
