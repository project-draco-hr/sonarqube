{
  indexRules(newDoc(RuleKey.of("java","S001")).setStatus(RuleStatus.BETA.name()),newDoc(RuleKey.of("java","S002")).setStatus(RuleStatus.READY.name()));
  RuleQuery query=new RuleQuery().setStatuses(asList(RuleStatus.DEPRECATED,RuleStatus.READY));
  SearchIdResult<RuleKey> results=index.search(query,new SearchOptions());
  assertThat(results.getIds()).containsOnly(RuleKey.of("java","S002"));
  query=new RuleQuery().setStatuses(singletonList(RuleStatus.DEPRECATED));
  assertThat(index.search(query,new SearchOptions()).getIds()).isEmpty();
  query=new RuleQuery().setStatuses(Collections.<RuleStatus>emptyList());
  assertThat(index.search(query,new SearchOptions()).getIds()).hasSize(2);
  query=new RuleQuery().setStatuses(null);
  assertThat(index.search(query,new SearchOptions()).getIds()).hasSize(2);
}
