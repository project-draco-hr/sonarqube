{
  List<String> existingPermissions=roleDao.selectGroupPermissions(permissionChangeQuery.getGroup());
  if (shouldSkipPermissionChange(operation,existingPermissions,permissionChangeQuery.getRole())) {
    LOG.info("Skipping permission change '{} {}' for group {} as it matches the current permission scheme",new String[]{operation,permissionChangeQuery.getRole(),permissionChangeQuery.getGroup()});
  }
 else {
    Long targetedGroup=getTargetedGroup(permissionChangeQuery.getGroup()).getId();
    GroupRoleDto groupRole=new GroupRoleDto().setRole(permissionChangeQuery.getRole()).setGroupId(targetedGroup);
    if (ADD.equals(operation)) {
      roleDao.insertGroupRole(groupRole);
    }
 else {
      roleDao.deleteGroupRole(groupRole);
    }
  }
}
