{
  UserSession.get().checkLoggedIn();
  UserSession.get().checkGlobalPermission(Permission.SYSTEM_ADMIN);
  ApplyPermissionTemplateQuery query=ApplyPermissionTemplateQuery.buildFromParams(params);
  query.validate();
  for (  String component : query.getSelectedComponents()) {
    applyPermissionTemplate(query.getTemplateKey(),component);
  }
}
