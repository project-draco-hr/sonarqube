{
  UserSession.get().checkLoggedIn();
  UserSession.get().checkGlobalPermission(GlobalPermission.SYSTEM_ADMIN);
  ApplyPermissionTemplateQuery query=ApplyPermissionTemplateQuery.buildFromParams(params);
  query.validate();
  for (  String component : query.getSelectedComponents()) {
    permissionFacade.applyPermissionTemplate(query.getTemplateKey(),Long.parseLong(component));
  }
}
