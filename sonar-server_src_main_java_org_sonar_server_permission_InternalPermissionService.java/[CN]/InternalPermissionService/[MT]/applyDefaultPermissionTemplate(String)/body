{
  UserSession.get().checkLoggedIn();
  ComponentDto component=(ComponentDto)resourceDao.findByKey(componentKey);
  badRequestIfNullResult(component,OBJECT_TYPE_COMPONENT,componentKey);
  ResourceDto provisioned=resourceDao.selectProvisionedProject(componentKey);
  if (provisioned == null) {
    checkProjectAdminPermission(component.getId());
  }
 else {
    UserSession.get().checkGlobalPermission(GlobalPermissions.PROVISIONING);
  }
  permissionFacade.grantDefaultRoles(component.getId(),component.qualifier());
}
