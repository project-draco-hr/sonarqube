{
  DbSession dbSession=db.openSession(false);
  List<UpdateRequest> requests=new ArrayList<UpdateRequest>();
  try {
    ActiveRuleDto activeRule=db.activeRuleDao().getByKey(dbSession,key);
    requests.addAll(normalize(activeRule));
    for (    ActiveRuleParamDto param : db.activeRuleDao().findParamsByActiveRuleKey(dbSession,key)) {
      requests.addAll(normalizeNested(param,key));
    }
  }
  finally {
    dbSession.close();
  }
  return requests;
}
