{
  dbTester.prepareDbUnit(getClass(),"old_semaphore.xml");
  Semaphores.Semaphore lock=dao.acquire("foo",Integer.MAX_VALUE);
  assertThat(lock.isLocked()).isFalse();
  assertThat(lock.getDurationSinceLocked()).isNotNull();
  SemaphoreDto semaphore=selectSemaphore("foo");
  assertThat(semaphore).isNotNull();
  assertThat(semaphore.getName()).isEqualTo("foo");
  assertThat(isRecent(semaphore.getCreatedAt())).isFalse();
  assertThat(isRecent(semaphore.getUpdatedAt())).isFalse();
  assertThat(isRecent(semaphore.getLockedAt())).isFalse();
}
