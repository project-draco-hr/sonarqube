{
  Semaphores.Semaphore lock=dao.acquire("foo");
  assertThat(lock.isLocked()).isTrue();
  assertThat(lock.getDurationSinceLocked()).isNull();
  SemaphoreDto semaphore=selectSemaphore("foo");
  assertThat(semaphore).isNotNull();
  assertThat(semaphore.getName()).isEqualTo("foo");
  assertThat(isRecent(semaphore.getCreatedAt())).isTrue();
  assertThat(isRecent(semaphore.getUpdatedAt())).isTrue();
  assertThat(isRecent(semaphore.getLockedAt())).isTrue();
  dao.release("foo");
  assertThat(selectSemaphore("foo")).isNull();
}
