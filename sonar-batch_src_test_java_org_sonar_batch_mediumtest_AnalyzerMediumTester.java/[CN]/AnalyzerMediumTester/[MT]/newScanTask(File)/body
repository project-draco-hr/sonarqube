{
  Properties prop=new Properties();
  FileReader reader=null;
  try {
    reader=new FileReader(sonarProps);
    prop.load(reader);
  }
 catch (  Exception e) {
    throw new IllegalStateException("Unable to read configuration file",e);
  }
 finally {
    if (reader != null) {
      IOUtils.closeQuietly(reader);
    }
  }
  TaskBuilder builder=new TaskBuilder(this);
  builder.property("sonar.task","scan");
  builder.property("sonar.projectBaseDir",sonarProps.getParentFile().getAbsolutePath());
  for (  Map.Entry entry : prop.entrySet()) {
    builder.property(entry.getKey().toString(),entry.getValue().toString());
  }
  return builder;
}
