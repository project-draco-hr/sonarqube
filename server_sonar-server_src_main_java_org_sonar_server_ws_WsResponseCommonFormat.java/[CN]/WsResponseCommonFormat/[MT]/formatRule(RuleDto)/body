{
  Common.Rule.Builder builder=Common.Rule.newBuilder().setKey(rule.getKey().toString()).setDesc(nullToEmpty(rule.getDescription())).setStatus(Common.RuleStatus.valueOf(rule.getStatus().name()));
  builder.setLang(nullToEmpty(rule.getLanguage()));
  Language lang=languages.get(rule.getLanguage());
  if (lang != null) {
    builder.setLangName(lang.getName());
  }
  String desc=rule.getDescription();
  if (desc != null) {
switch (rule.getDescriptionFormat()) {
case HTML:
      builder.setDesc(desc);
    break;
case MARKDOWN:
  builder.setDesc(Markdown.convertToHtml(desc));
break;
default :
throw new IllegalArgumentException(format("Unknown description format '%s' on rule '%s'",rule.getDescriptionFormat(),rule.getKey()));
}
}
return builder;
}
