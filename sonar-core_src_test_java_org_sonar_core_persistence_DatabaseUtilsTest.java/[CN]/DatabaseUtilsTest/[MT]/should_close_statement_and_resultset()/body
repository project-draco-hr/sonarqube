{
  Connection connection=getConnection();
  try {
    String sql="SELECT 1";
    if (Oracle.ID.equals(getDatabase().getDialect().getId())) {
      sql="SELECT 1 FROM DUAL";
    }
    PreparedStatement statement=connection.prepareStatement(sql);
    ResultSet rs=statement.executeQuery();
    DatabaseUtils.closeQuietly(rs);
    DatabaseUtils.closeQuietly(statement);
    assertThat(isClosed(statement)).isTrue();
    assertThat(isClosed(rs)).isTrue();
  }
  finally {
    DatabaseUtils.closeQuietly(connection);
  }
}
