{
  when(system2.now()).thenReturn(DateUtils.parseDate("2013-05-22").getTime());
  IssueDto dto=new IssueDto();
  dto.setComponent(new ComponentDto().setKey("struts:Action").setId(123L));
  dto.setProject(new ComponentDto().setKey("struts").setId(100L));
  dto.setRule(RuleTesting.newDto(RuleKey.of("squid","S001")).setId(200));
  dto.setKee("ABCDE");
  dto.setLine(500);
  dto.setEffortToFix(3.14);
  dto.setDebt(10L);
  dto.setResolution("FIXED");
  dto.setStatus("RESOLVED");
  dto.setSeverity("BLOCKER");
  dto.setReporter("emmerik");
  dto.setAuthorLogin("morgan");
  dto.setAssignee("karadoc");
  dto.setActionPlanKey("current_sprint");
  dto.setIssueAttributes("JIRA=FOO-1234");
  dto.setChecksum("123456789");
  dto.setMessage("the message");
  dto.setIssueCreationDate(DateUtils.parseDate("2013-05-18"));
  dto.setIssueUpdateDate(DateUtils.parseDate("2013-05-19"));
  dto.setIssueCloseDate(DateUtils.parseDate("2013-05-20"));
  dto.setCreatedAt(DateUtils.parseDate("2013-05-21"));
  dto.setUpdatedAt(DateUtils.parseDate("2013-05-22"));
  dao.insert(session,dto);
  session.commit();
  checkTables("insert",new String[]{"id"},"issues");
}
