{
  for (  Field field : fields) {
    FieldSortBuilder sortBuilder=SortBuilders.fieldSort(field.name);
    boolean effectiveAsc=asc != field.reverse;
    sortBuilder.order(effectiveAsc ? SortOrder.ASC : SortOrder.DESC);
    boolean effectiveMissingLast=asc == field.missingLast;
    sortBuilder.missing(effectiveMissingLast ? "_last" : "_first");
    request.addSort(sortBuilder);
  }
}
