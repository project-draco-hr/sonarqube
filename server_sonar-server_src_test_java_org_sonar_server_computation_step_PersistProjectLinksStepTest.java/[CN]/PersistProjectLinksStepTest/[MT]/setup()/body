{
  session=dbTester.myBatis().openSession(false);
  dao=new ComponentLinkDao();
  projectSettings=new Settings();
  languageRepository=mock(LanguageRepository.class);
  dbClient=new DbClient(dbTester.database(),dbTester.myBatis(),dao);
  i18n=mock(I18n.class);
  when(i18n.message(Locale.ENGLISH,"project_links.homepage",null)).thenReturn("Home");
  when(i18n.message(Locale.ENGLISH,"project_links.scm",null)).thenReturn("Sources");
  when(i18n.message(Locale.ENGLISH,"project_links.scm_dev",null)).thenReturn("Developer connection");
  when(i18n.message(Locale.ENGLISH,"project_links.ci",null)).thenReturn("Continuous integration");
  when(i18n.message(Locale.ENGLISH,"project_links.issue",null)).thenReturn("Issues");
  dbComponentsRefCache=new DbComponentsRefCache();
  step=new PersistProjectLinksStep(dbClient,i18n,dbComponentsRefCache,reportReader);
}
