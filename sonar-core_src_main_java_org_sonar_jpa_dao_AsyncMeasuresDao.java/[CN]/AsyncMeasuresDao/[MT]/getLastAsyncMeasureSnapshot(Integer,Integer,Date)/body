{
  try {
    return (AsyncMeasureSnapshot)getSession().createQuery("SELECT ams FROM AsyncMeasureSnapshot ams " + "WHERE ams.projectId=:projectId " + "AND ams.metricId=:metricId "+ "AND ams.measureDate<:date "+ "ORDER BY ams.measureDate DESC").setParameter("projectId",projetcId).setParameter("metricId",metricId).setParameter("date",date).setMaxResults(1).getSingleResult();
  }
 catch (  NoResultException ex) {
    return null;
  }
}
