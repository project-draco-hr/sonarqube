{
  thrown.expect(IllegalStateException.class);
  thrown.expectMessage("foo");
  ServletFilter filter=mock(ServletFilter.class);
  doThrow(new IllegalStateException("foo")).when(filter).init(any(FilterConfig.class));
  FilterConfig config=mock(FilterConfig.class);
  ServletFilters filters=new ServletFilters();
  filters.init(config,Arrays.asList(filter));
}
