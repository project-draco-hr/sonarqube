{
  if (batchMeasure.hasCharactericId() && batchMeasure.hasRuleKey()) {
    throw new IllegalArgumentException("Measure with both characteristicId and ruleKey are not supported");
  }
  if (batchMeasure.hasCharactericId()) {
    return Measure.newMeasureBuilder().forCharacteristic(batchMeasure.getCharactericId());
  }
  if (batchMeasure.hasRuleKey()) {
    RuleDto ruleDto=ruleCache.get(RuleKey.parse(batchMeasure.getRuleKey()));
    return Measure.newMeasureBuilder().forRule(ruleDto.getId());
  }
  return Measure.newMeasureBuilder();
}
