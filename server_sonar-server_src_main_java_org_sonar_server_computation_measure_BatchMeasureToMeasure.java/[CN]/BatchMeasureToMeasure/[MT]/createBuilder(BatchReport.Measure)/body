{
  if (batchMeasure.hasCharactericId() && batchMeasure.hasRuleKey()) {
    throw new IllegalArgumentException("Measure with both characteristicId and ruleKey are not supported");
  }
  if (batchMeasure.hasCharactericId()) {
    return MeasureImpl.builder().forCharacteristic(batchMeasure.getCharactericId());
  }
  if (batchMeasure.hasRuleKey()) {
    RuleDto ruleDto=ruleCache.get(RuleKey.parse(batchMeasure.getRuleKey()));
    return MeasureImpl.builder().forRule(ruleDto.getId());
  }
  return MeasureImpl.builder();
}
