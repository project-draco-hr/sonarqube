{
  RuleSets rulesets=new RuleSets();
  RuleSetFactory ruleSetFactory=new RuleSetFactory();
  List<String> rulesetPaths=configuration.getRulesets();
  LOG.info("PMD configuration: " + StringUtils.join(rulesetPaths,", "));
  for (  String rulesetPath : rulesetPaths) {
    InputStream rulesInput=openRuleset(rulesetPath);
    rulesets.addRuleSet(ruleSetFactory.createRuleSet(rulesInput));
    IOUtils.closeQuietly(rulesInput);
  }
  return rulesets;
}
