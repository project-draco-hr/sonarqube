{
  String javaVersion=JavaUtils.getSourceVersion(project);
  if (StringUtils.isNotBlank(javaVersion)) {
    if ("1.1".equals(javaVersion) || "1.2".equals(javaVersion)) {
      javaVersion="1.3";
    }
  }
  if (javaVersion != null) {
    SourceType sourceType=SourceType.getSourceTypeForId("java " + javaVersion);
    if (sourceType != null) {
      LOG.info("Java version: " + javaVersion);
      pmd.setJavaVersion(sourceType);
    }
 else {
      throw new RuntimeException("Unsupported Java version for PMD: " + javaVersion);
    }
  }
}
