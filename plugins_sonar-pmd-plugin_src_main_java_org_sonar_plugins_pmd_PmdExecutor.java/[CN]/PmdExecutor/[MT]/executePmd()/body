{
  Report report=new Report();
  RuleContext context=new RuleContext();
  context.setReport(report);
  PmdTemplate pmdFactory=createPmdTemplate();
  executeRules(pmdFactory,context,projectFileSystem.mainFiles(Java.KEY),PmdConstants.REPOSITORY_KEY);
  executeRules(pmdFactory,context,projectFileSystem.testFiles(Java.KEY),PmdConstants.TEST_REPOSITORY_KEY);
  pmdConfiguration.dumpXmlReport(report);
  return report;
}
