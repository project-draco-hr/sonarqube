{
  try {
    File file=new File(rulesetPath);
    boolean found;
    if (file.exists()) {
      found=true;
    }
 else {
      file=new File(project.getFileSystem().getBasedir(),rulesetPath);
      found=file.exists();
    }
    if (found) {
      return new FileInputStream(file);
    }
    InputStream stream=PmdExecutor.class.getResourceAsStream(rulesetPath);
    if (stream == null) {
      throw new SonarException("The PMD ruleset can not be found: " + rulesetPath);
    }
    return stream;
  }
 catch (  FileNotFoundException e) {
    throw new SonarException("The PMD ruleset can not be found: " + rulesetPath,e);
  }
}
