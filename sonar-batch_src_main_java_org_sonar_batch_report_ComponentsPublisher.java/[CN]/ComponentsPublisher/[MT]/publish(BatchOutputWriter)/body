{
  BatchResource rootProject=resourceCache.get(reactor.getRoot().getKeyWithBranch());
  BatchReport.Metadata metadata=BatchReport.Metadata.newBuilder().setAnalysisDate(((Project)rootProject.resource()).getAnalysisDate().getTime()).setProjectKey(((Project)rootProject.resource()).key()).setRootComponentRef(rootProject.batchId()).build();
  writer.writeMetadata(metadata);
  recursiveWriteComponent(rootProject,writer);
}
