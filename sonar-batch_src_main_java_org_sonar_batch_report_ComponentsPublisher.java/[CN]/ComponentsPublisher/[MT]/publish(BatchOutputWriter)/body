{
  BatchResource rootProject=resourceCache.get(reactor.getRoot().getKeyWithBranch());
  BatchOutput.ReportMetadata metadata=BatchOutput.ReportMetadata.newBuilder().setAnalysisDate(((Project)rootProject.resource()).getAnalysisDate().getTime()).setProjectKey(((Project)rootProject.resource()).key()).setRootComponentRef(rootProject.batchId()).build();
  writer.writeMetadata(metadata);
  recursiveWriteComponent(rootProject,writer);
}
