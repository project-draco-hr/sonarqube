{
  Resource r=batchResource.resource();
  BatchReport.Component.Builder builder=BatchReport.Component.newBuilder();
  builder.setRef(batchResource.batchId());
  builder.setType(getType(r));
  String uuid=r.getUuid();
  if (uuid != null) {
    builder.setUuid(uuid);
  }
  Integer sid=batchResource.snapshotId();
  if (sid != null) {
    builder.setSnapshotId(sid);
  }
  if (ResourceUtils.isFile(r)) {
    builder.setIsTest(ResourceUtils.isUnitTestClass(r));
  }
  String name=getName(r);
  if (name != null) {
    builder.setName(name);
  }
  String path=r.getPath();
  if (path != null) {
    builder.setPath(path);
  }
  String lang=getLanguageKey(r);
  if (lang != null) {
    builder.setLanguage(lang);
  }
  for (  BatchResource child : batchResource.children()) {
    builder.addChildRefs(child.batchId());
  }
  if (ResourceUtils.isProject(r)) {
    ProjectDefinition def=reactor.getProject(r.getKey());
    ComponentLink.Builder linkBuilder=ComponentLink.newBuilder();
    writeProjectLink(builder,def,linkBuilder,CoreProperties.LINKS_HOME_PAGE,ComponentLinkType.HOME);
    writeProjectLink(builder,def,linkBuilder,CoreProperties.LINKS_CI,ComponentLinkType.CI);
    writeProjectLink(builder,def,linkBuilder,CoreProperties.LINKS_ISSUE_TRACKER,ComponentLinkType.ISSUE);
    writeProjectLink(builder,def,linkBuilder,CoreProperties.LINKS_SOURCES,ComponentLinkType.SCM);
    writeProjectLink(builder,def,linkBuilder,CoreProperties.LINKS_SOURCES_DEV,ComponentLinkType.SCM_DEV);
  }
  writer.writeComponent(builder.build());
  for (  BatchResource child : batchResource.children()) {
    recursiveWriteComponent(child,writer);
  }
}
