{
  StringBuffer tag=new StringBuffer("<base href=\"");
  if (ref.equals(REF_SITE)) {
    StringBuffer contextBase=new StringBuffer(((HttpServletRequest)pageContext.getRequest()).getContextPath());
    contextBase.append("/");
    tag.append(RequestUtils.createServerUriStringBuffer(scheme,serverName,port,contextBase.toString()).toString());
  }
 else {
    tag.append(RequestUtils.createServerUriStringBuffer(scheme,serverName,port,uri).toString());
  }
  tag.append("\"");
  if (this.target != null) {
    tag.append(" target=\"");
    tag.append(this.target);
    tag.append("\"");
  }
  if (TagUtils.getInstance().isXhtml(this.pageContext)) {
    tag.append(" />");
  }
 else {
    tag.append(">");
  }
  return tag.toString();
}
