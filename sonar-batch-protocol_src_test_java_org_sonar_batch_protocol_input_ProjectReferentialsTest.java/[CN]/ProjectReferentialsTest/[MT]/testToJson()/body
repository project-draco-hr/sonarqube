{
  ProjectReferentials ref=new ProjectReferentials();
  ref.metrics().add(new Metric("ncloc","INT"));
  ref.addQProfile(new QProfile("squid-java","Java","java",new SimpleDateFormat("dd/MM/yyyy").parse("14/03/1984")));
  ref.addSettings("foo",new HashMap<String,String>());
  ref.settings("foo").put("prop","value");
  ref.addActiveRule(new ActiveRule("repo","rule","MAJOR","rule","java"));
  ref.setTimestamp(10);
  System.out.println(ref.toJson());
  JSONAssert.assertEquals("{timestamp:10,metrics:[{key:ncloc,valueType:INT}]," + "qprofilesByLanguage:{java:{key:\"squid-java\",name:Java,language:java,rulesUpdatedAt:\"Mar 14, 1984 12:00:00 AM\"}}," + "activeRules:[{repositoryKey:repo,ruleKey:rule,severity:MAJOR,internalKey:rule,language:java,params:{}}],"+ "settingsByModule:{foo:{prop:value}}}",ref.toJson(),true);
}
