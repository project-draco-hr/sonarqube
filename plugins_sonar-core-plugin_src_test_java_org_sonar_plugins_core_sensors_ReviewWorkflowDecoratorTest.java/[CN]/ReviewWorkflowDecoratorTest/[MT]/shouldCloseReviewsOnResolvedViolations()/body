{
  setupData("shouldCloseReviewsOnResolvedViolations");
  DecoratorContext context=mock(DecoratorContext.class);
  when(context.getViolations(any(ViolationQuery.class))).thenReturn(Collections.<Violation>emptyList());
  Resource resource=new JavaFile("org.foo.Bar");
  decorator.decorate(resource,context);
  verify(notifications,times(2)).notifyClosed(any(ReviewDto.class),any(Project.class),eq(resource));
  checkTables("shouldCloseReviewsOnResolvedViolations",new String[]{"updated_at"},"reviews");
}
