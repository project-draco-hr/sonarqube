{
  setupData("shouldReopenViolations");
  DecoratorContext context=mock(DecoratorContext.class);
  Violation violation=new Violation(new Rule());
  violation.setPermanentId(1000);
  when(context.getViolations(any(ViolationQuery.class))).thenReturn(Lists.newArrayList(violation));
  Resource resource=new JavaFile("org.foo.Bar");
  decorator.decorate(resource,context);
  verify(notifications).notifyReopened(any(ReviewDto.class),any(Project.class),eq(resource));
  checkTables("shouldReopenViolations",new String[]{"updated_at"},"reviews");
}
