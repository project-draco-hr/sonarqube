{
  when(fakeDashboardTemplate.createDashboard()).thenReturn(Dashboard.create());
  DashboardDto dashboardDto=task.register("Fake",fakeDashboardTemplate.createDashboard());
  verify(dashboardDao).insert(dashboardDto);
  verify(loadedTemplateDao).insert(eq(new LoadedTemplateDto("Fake",LoadedTemplateDto.DASHBOARD_TYPE)));
}
