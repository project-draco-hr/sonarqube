{
  DefaultInputFile file=new DefaultInputFile(PROJECT_KEY,"src/foo.java").setLines(3).setOriginalLineOffsets(new long[]{0,4,7});
  SyntaxHighlightingData highlighting=new SyntaxHighlightingDataBuilder().registerHighlightingRule(0,3,TypeOfText.ANNOTATION).registerHighlightingRule(4,9,TypeOfText.COMMENT).registerHighlightingRule(10,16,TypeOfText.CONSTANT).build();
  String[] highlightingPerLine=sourcePersister.computeHighlightingPerLine(file,highlighting);
  assertThat(highlightingPerLine).containsOnly("0,3,a","0,3,cd","0,2,cd;3,9,c");
}
