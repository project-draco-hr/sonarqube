{
  List<Issue> issues=newArrayList();
  issues.add(new DefaultIssue().setRuleKey(ruleA1.ruleKey()).setStatus(Issue.STATUS_CONFIRMED).setSeverity(RulePriority.CRITICAL.name()));
  issues.add(new DefaultIssue().setRuleKey(ruleA1.ruleKey()).setStatus(Issue.STATUS_REOPENED).setSeverity(RulePriority.CRITICAL.name()));
  issues.add(new DefaultIssue().setRuleKey(ruleA2.ruleKey()).setStatus(Issue.STATUS_CONFIRMED).setSeverity(RulePriority.CRITICAL.name()));
  when(issuable.issues()).thenReturn(issues);
  decorator.decorate(resource,context);
  verify(context).saveMeasure(CoreMetrics.CONFIRMED_ISSUES,2.0);
}
