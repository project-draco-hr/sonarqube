{
  this.index=index;
  this.scrollId=response.getScrollId();
  this.facets=LinkedListMultimap.create();
  this.total=(int)response.getHits().totalHits();
  this.hits=new ArrayList<K>();
  if (index != null) {
    for (    SearchHit hit : response.getHits()) {
      this.hits.add(index.toDoc(hit.getSource()));
    }
  }
  if (response.getAggregations() != null) {
    for (    Map.Entry<String,Aggregation> facet : response.getAggregations().asMap().entrySet()) {
      this.processAggregation(facet.getValue());
    }
  }
}
