{
  Snapshot currentSnapshot=resourcePersister.getSnapshot(resource);
  if (currentSnapshot != null) {
    int resourceId=currentSnapshot.getResourceId();
    int snapshotId=currentSnapshot.getId();
    Query query=databaseSession.createNativeQuery(generateSqlRequest(resourceId,snapshotId));
    int rowUpdated=query.executeUpdate();
    LOG.debug("- {} reviews set to 'closed' on resource #{}",rowUpdated,resourceId);
    databaseSession.commit();
  }
}
