{
  final File jarFile=getFile("sonar-checkstyle-plugin-2.8.jar");
  final File toDir=temp.newFolder();
  PluginInfo pluginInfo=new PluginInfo().setKey("checkstyle").setFile(jarFile);
  PluginUnzipper unzipper=new PluginUnzipper(){
    @Override public UnzippedPlugin unzip(    PluginInfo info){
      try {
        ZipUtils.unzip(jarFile,toDir,newLibFilter());
        return UnzippedPlugin.createFromUnzippedDir(info.getKey(),info.getFile(),toDir);
      }
 catch (      Exception e) {
        throw new IllegalStateException(e);
      }
    }
  }
;
  UnzippedPlugin unzipped=unzipper.unzip(pluginInfo);
  assertThat(unzipped.getKey()).isEqualTo("checkstyle");
  assertThat(unzipped.getLibs()).extracting("name").containsOnly("antlr-2.7.6.jar","checkstyle-5.1.jar","commons-cli-1.0.jar");
  assertThat(unzipped.getMain()).isSameAs(jarFile);
}
