{
  MavenSession session=mock(MavenSession.class);
  MavenProject rootProject=mock(MavenProject.class);
  MavenProject module1=mock(MavenProject.class);
  MavenProject module2=mock(MavenProject.class);
  when(rootProject.isExecutionRoot()).thenReturn(true);
  when(module1.isExecutionRoot()).thenReturn(false);
  when(module2.isExecutionRoot()).thenReturn(false);
  when(session.getSortedProjects()).thenReturn(Arrays.asList(module1,module2,rootProject));
  MavenProjectConverter mavenProjectConverter=mock(MavenProjectConverter.class);
  ProjectDefinition projectDefinition=ProjectDefinition.create();
  when(mavenProjectConverter.configure(any(List.class),any(MavenProject.class))).thenReturn(projectDefinition);
  MavenProjectBootstrapper builder=new MavenProjectBootstrapper(session,mavenProjectConverter);
  assertThat(builder.bootstrap().getRoot()).isEqualTo(projectDefinition);
  ArgumentCaptor<List> argument=ArgumentCaptor.forClass(List.class);
  verify(mavenProjectConverter).configure(argument.capture(),eq(rootProject));
  assertThat(argument.getValue()).contains(module1,module2,rootProject);
}
