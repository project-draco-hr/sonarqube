{
  IssueStorage issueStorage=issueStorageFactory.newComputeEngineIssueStorage(context.getProject());
  File issuesFile=new File(context.getReportDirectory(),"issues.json");
  List<DefaultIssue> issues=new ArrayList<>(MAX_ISSUES_SIZE);
  try {
    InputStream issuesStream=new FileInputStream(issuesFile);
    JsonReader reader=new JsonReader(new InputStreamReader(issuesStream));
    reader.beginArray();
    while (reader.hasNext()) {
      ReportIssue reportIssue=gson.fromJson(reader,ReportIssue.class);
      DefaultIssue defaultIssue=toIssue(context,reportIssue);
      issues.add(defaultIssue);
      if (shouldPersistIssues(issues,reader)) {
        issueStorage.save(issues);
        issues.clear();
      }
    }
    reader.endArray();
    reader.close();
  }
 catch (  IOException e) {
    throw new IllegalStateException("Failed to read issues",e);
  }
}
