{
  RuleDto ruleDto=ruleDao.getByKey(ruleKey,session);
  QualityProfileDto profileDto=profileDao.selectByNameAndLanguage(profileKey.name(),profileKey.lang(),session);
  ActiveRuleDto activeRule=ActiveRuleDto.createFor(profileDto,ruleDto).setSeverity(severity);
  activeRuleDao.insert(activeRule,session);
  List<RuleParamDto> ruleParams=ruleDao.findRuleParamsByRuleKey(ruleKey,session);
  List<ActiveRuleParamDto> activeRuleParams=newArrayList();
  for (  RuleParamDto ruleParam : ruleParams) {
    ActiveRuleParamDto activeRuleParam=ActiveRuleParamDto.createFor(ruleParam).setKey(ruleParam.getName()).setValue(ruleParam.getDefaultValue());
    activeRuleParams.add(activeRuleParam);
    activeRuleDao.addParam(activeRule,activeRuleParam,session);
  }
  return activeRule;
}
