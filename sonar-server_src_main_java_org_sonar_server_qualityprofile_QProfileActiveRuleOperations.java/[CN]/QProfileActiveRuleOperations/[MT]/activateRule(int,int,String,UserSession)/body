{
  validatePermission(userSession);
  validateSeverity(severity);
  QProfile profile=findProfileNotNull(profileId);
  QProfileRule rule=findRuleNotNull(ruleId);
  ActiveRuleDto activeRule=findActiveRule(profileId,ruleId);
  if (activeRule == null) {
    activeRule=createActiveRule(profile,rule,severity,userSession);
  }
 else {
    updateSeverity(activeRule,severity,userSession);
  }
  return activeRuleChanged(profile,activeRule.getId());
}
