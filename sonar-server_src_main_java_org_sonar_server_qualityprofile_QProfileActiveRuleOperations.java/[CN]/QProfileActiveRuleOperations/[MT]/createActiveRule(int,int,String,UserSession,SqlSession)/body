{
  ActiveRuleDto activeRule=new ActiveRuleDto().setProfileId(profileId).setRuleId(ruleId).setSeverity(severity);
  activeRuleDao.insert(activeRule,session);
  List<RuleParamDto> ruleParams=ruleDao.selectParametersByRuleId(ruleId,session);
  List<ActiveRuleParamDto> activeRuleParams=newArrayList();
  for (  RuleParamDto ruleParam : ruleParams) {
    ActiveRuleParamDto activeRuleParam=new ActiveRuleParamDto().setActiveRuleId(activeRule.getId()).setRulesParameterId(ruleParam.getId()).setKey(ruleParam.getName()).setValue(ruleParam.getDefaultValue());
    activeRuleParams.add(activeRuleParam);
    activeRuleDao.insert(activeRuleParam,session);
  }
  session.commit();
  ProfilesManager.RuleInheritanceActions actions=profilesManager.activated(profileId,activeRule.getId(),getLoggedName(userSession));
  reindexInheritanceResult(actions,session);
  return activeRule;
}
