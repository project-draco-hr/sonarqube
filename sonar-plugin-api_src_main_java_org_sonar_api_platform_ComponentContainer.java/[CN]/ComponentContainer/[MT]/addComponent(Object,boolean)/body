{
  Object key=componentKeys.of(component);
  if (component instanceof ComponentAdapter) {
    pico.addAdapter((ComponentAdapter)component);
  }
 else {
    try {
      pico.as(singleton ? Characteristics.CACHE : Characteristics.NO_CACHE).addComponent(key,component);
    }
 catch (    Throwable t) {
      throw new IllegalStateException("Unable to register component " + getName(component),t);
    }
    declareExtension(null,component);
  }
  return this;
}
