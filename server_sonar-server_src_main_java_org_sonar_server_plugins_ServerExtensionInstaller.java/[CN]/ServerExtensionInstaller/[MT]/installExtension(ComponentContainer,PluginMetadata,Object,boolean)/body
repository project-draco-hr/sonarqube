{
  if (isType(extension,ServerExtension.class)) {
    if (!acceptProvider && isExtensionProvider(extension)) {
      throw new IllegalStateException("ExtensionProvider can not include providers itself: " + extension);
    }
    container.addExtension(pluginMetadata,extension);
    return extension;
  }
  return null;
}
