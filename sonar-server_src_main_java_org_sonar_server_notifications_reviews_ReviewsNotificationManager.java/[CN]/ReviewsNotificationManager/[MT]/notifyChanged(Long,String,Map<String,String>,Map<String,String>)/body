{
  Notification notification=new Notification("review-changed").setFieldValue("reviewId",String.valueOf(reviewId)).setFieldValue("project",newValues.get("project")).setFieldValue("resource",newValues.get("resource")).setFieldValue("title",newValues.get("title")).setFieldValue("author",author).setFieldValue("creator",newValues.get("creator")).setFieldValue("severity",newValues.get("severity")).setFieldValue("assignee",newValues.get("assignee"));
  Set<String> fields=Sets.newHashSet();
  fields.addAll(oldValues.keySet());
  fields.addAll(newValues.keySet());
  for (  String field : fields) {
    String oldValue=oldValues.get(field);
    String newValue=newValues.get(field);
    if (!StringUtils.equals(oldValue,newValue)) {
      notification.setFieldValue("new." + field,newValue);
      notification.setFieldValue("old." + field,oldValue);
    }
  }
  notificationManager.scheduleForSending(notification);
}
