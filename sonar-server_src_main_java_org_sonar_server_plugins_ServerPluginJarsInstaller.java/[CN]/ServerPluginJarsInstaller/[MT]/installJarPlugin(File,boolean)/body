{
  File destDir=fileSystem.getUserPluginsDir();
  File destFile=new File(destDir,jar.getName());
  if (destFile.exists()) {
    FileUtils.deleteQuietly(destFile);
  }
  try {
    if (deleteSource) {
      FileUtils.moveFileToDirectory(jar,destDir,true);
    }
 else {
      FileUtils.copyFileToDirectory(jar,destDir,true);
    }
    registerPlugin(destFile,false,true);
  }
 catch (  IOException e) {
    LOG.error("Fail to move plugin: " + jar.getAbsolutePath() + " to "+ destDir.getAbsolutePath(),e);
  }
}
