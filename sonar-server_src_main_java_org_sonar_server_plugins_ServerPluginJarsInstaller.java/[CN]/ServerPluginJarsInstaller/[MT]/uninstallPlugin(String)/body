{
  PluginMetadata metadata=pluginByKeys.get(pluginKey);
  if ((metadata != null) && !metadata.isCore()) {
    try {
      File masterFile=new File(fileSystem.getUserPluginsDir(),metadata.getFile().getName());
      FileUtils.moveFileToDirectory(masterFile,fileSystem.getRemovedPluginsDir(),true);
    }
 catch (    IOException e) {
      throw new IllegalStateException("Fail to uninstall plugin: " + pluginKey,e);
    }
  }
}
