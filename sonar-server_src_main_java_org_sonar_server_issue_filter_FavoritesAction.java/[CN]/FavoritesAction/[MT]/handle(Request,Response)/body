{
  UserSession session=UserSession.get();
  JsonWriter json=response.newJsonWriter();
  json.beginObject().name("favoriteFilters").beginArray();
  if (session.isLoggedIn()) {
    for (    DefaultIssueFilter favorite : service.findFavoriteFilters(session)) {
      json.beginObject();
      json.prop("id",favorite.id());
      json.prop("name",favorite.name());
      json.prop("user",favorite.user());
      json.prop("shared",favorite.shared());
      json.endObject();
    }
  }
  json.endArray().endObject().close();
}
