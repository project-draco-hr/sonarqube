{
  ProjectDefinition rootProject=loadProjectDefinition("multi-module-definitions-in-each-module");
  assertThat(rootProject.getKey()).isEqualTo("com.foo.project");
  assertThat(rootProject.getName()).isEqualTo("Foo Project");
  assertThat(rootProject.getVersion()).isEqualTo("1.0-SNAPSHOT");
  assertThat(rootProject.getDescription()).isEqualTo("Description of Foo Project");
  assertThat(rootProject.sources().contains("sources")).isFalse();
  assertThat(rootProject.tests().contains("tests")).isFalse();
  assertThat(rootProject.properties().get("module1.sonar.projectKey")).isNull();
  assertThat(rootProject.properties().get("module2.sonar.projectKey")).isNull();
  List<ProjectDefinition> modules=rootProject.getSubProjects();
  assertThat(modules.size()).isEqualTo(2);
  ProjectDefinition module1=modules.get(0);
  assertThat(module1.getBaseDir().getCanonicalFile()).isEqualTo(TestUtils.getResource(this.getClass(),"multi-module-definitions-in-each-module/module1"));
  assertThat(module1.getKey()).isEqualTo("com.foo.project:com.foo.project.module1");
  assertThat(module1.getName()).isEqualTo("Foo Module 1");
  assertThat(module1.getVersion()).isEqualTo("1.0-SNAPSHOT");
  assertThat(module1.getDescription()).isEqualTo("Description of Module 1");
  assertThat(module1.sources()).contains("sources");
  assertThat(module1.tests()).contains("tests");
  assertThat(module1.properties().get("module1.sonar.projectKey")).isNull();
  assertThat(module1.properties().get("module2.sonar.projectKey")).isNull();
  ProjectDefinition module2=modules.get(1);
  assertThat(module2.getBaseDir().getCanonicalFile()).isEqualTo(TestUtils.getResource(this.getClass(),"multi-module-definitions-in-each-module/module2/newBaseDir"));
  assertThat(module2.getKey()).isEqualTo("com.foo.project:com.foo.project.module2");
  assertThat(module2.getName()).isEqualTo("Foo Module 2");
  assertThat(module2.getVersion()).isEqualTo("1.0-SNAPSHOT");
  assertThat(module2.getDescription()).isEqualTo("Description of Module 2");
  assertThat(module2.sources()).contains("src");
  assertThat(module2.tests()).contains("tests");
  assertThat(module2.properties().get("module1.sonar.projectKey")).isNull();
  assertThat(module2.properties().get("module2.sonar.projectKey")).isNull();
}
