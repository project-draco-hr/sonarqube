{
  MockUserSession.set().addComponentPermission(UserRole.CODEVIEWER,PROJECT_KEY,COMPONENT_KEY);
  when(snapshotSourceDao.selectSnapshotSourceByComponentKey(COMPONENT_KEY,session)).thenReturn("line1\nline2");
  List<String> result=service.getLinesAsTxt(session,COMPONENT_KEY);
  assertThat(result).contains("line1","line2");
}
