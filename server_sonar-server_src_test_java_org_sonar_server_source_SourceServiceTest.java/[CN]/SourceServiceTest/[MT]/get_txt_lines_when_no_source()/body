{
  MockUserSession.set().addComponentPermission(UserRole.CODEVIEWER,PROJECT_KEY,COMPONENT_KEY);
  when(snapshotSourceDao.selectSnapshotSourceByComponentKey(COMPONENT_KEY,session)).thenReturn(null);
  List<String> result=service.getLinesAsTxt(COMPONENT_KEY);
  assertThat(result).isEmpty();
}
