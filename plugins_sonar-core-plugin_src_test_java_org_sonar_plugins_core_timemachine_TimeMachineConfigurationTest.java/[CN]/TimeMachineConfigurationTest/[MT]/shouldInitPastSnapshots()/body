{
  PropertiesConfiguration conf=new PropertiesConfiguration();
  PastSnapshotFinder pastSnapshotFinder=mock(PastSnapshotFinder.class);
  when(pastSnapshotFinder.find(null,conf,1)).thenReturn(new PastSnapshot("days",new Date(),newSnapshot("2010-10-15")));
  when(pastSnapshotFinder.find(null,conf,3)).thenReturn(new PastSnapshot("days",new Date(),newSnapshot("2010-10-13")));
  TimeMachineConfiguration timeMachineConfiguration=new TimeMachineConfiguration(conf,pastSnapshotFinder,null);
  verify(pastSnapshotFinder).find(null,conf,1);
  verify(pastSnapshotFinder).find(null,conf,2);
  verify(pastSnapshotFinder).find(null,conf,3);
  assertThat(timeMachineConfiguration.getProjectPastSnapshots().size(),is(2));
}
