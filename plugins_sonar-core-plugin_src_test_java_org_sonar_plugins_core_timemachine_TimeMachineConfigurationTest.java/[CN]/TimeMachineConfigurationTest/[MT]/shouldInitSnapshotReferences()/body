{
  PropertiesConfiguration conf=new PropertiesConfiguration();
  VariationSnapshotFinder snapshotReferenceFinder=mock(VariationSnapshotFinder.class);
  when(snapshotReferenceFinder.find(conf,1)).thenReturn(new VariationSnapshot(1,"days",null));
  when(snapshotReferenceFinder.find(conf,3)).thenReturn(new VariationSnapshot(3,"days",null));
  TimeMachineConfiguration timeMachineConfiguration=new TimeMachineConfiguration(conf,snapshotReferenceFinder);
  verify(snapshotReferenceFinder).find(conf,1);
  verify(snapshotReferenceFinder).find(conf,2);
  verify(snapshotReferenceFinder).find(conf,3);
  assertThat(timeMachineConfiguration.getVariationSnapshots().size(),is(2));
}
