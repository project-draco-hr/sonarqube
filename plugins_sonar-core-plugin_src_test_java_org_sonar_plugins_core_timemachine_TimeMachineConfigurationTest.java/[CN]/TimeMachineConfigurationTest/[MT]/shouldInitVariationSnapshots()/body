{
  PropertiesConfiguration conf=new PropertiesConfiguration();
  PastSnapshotFinder snapshotReferenceFinder=mock(PastSnapshotFinder.class);
  when(snapshotReferenceFinder.find(conf,1)).thenReturn(new PastSnapshot("days",null,newSnapshot("2010-10-15")));
  when(snapshotReferenceFinder.find(conf,3)).thenReturn(new PastSnapshot("days",null,newSnapshot("2010-10-13")));
  TimeMachineConfiguration timeMachineConfiguration=new TimeMachineConfiguration(conf,snapshotReferenceFinder);
  verify(snapshotReferenceFinder).find(conf,1);
  verify(snapshotReferenceFinder).find(conf,2);
  verify(snapshotReferenceFinder).find(conf,3);
  assertThat(timeMachineConfiguration.getProjectPastSnapshots().size(),is(2));
}
