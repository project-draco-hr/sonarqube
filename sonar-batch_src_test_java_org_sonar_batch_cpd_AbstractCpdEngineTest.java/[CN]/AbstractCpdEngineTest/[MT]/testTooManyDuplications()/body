{
  List<CloneGroup> dups=new ArrayList<>(AbstractCpdEngine.MAX_CLONE_GROUP_PER_FILE + 1);
  for (int i=0; i < AbstractCpdEngine.MAX_CLONE_GROUP_PER_FILE + 1; i++) {
    ClonePart clonePart=new ClonePart(batchComponent1.key(),i,i,i + 1);
    ClonePart dupPart=new ClonePart(batchComponent1.key(),i + 1,i + 1,i + 2);
    dups.add(newCloneGroup(clonePart,dupPart));
  }
  engine.saveDuplications(inputFile1,dups);
  assertThat(reader.readComponentDuplications(batchComponent1.batchId())).hasSize(AbstractCpdEngine.MAX_CLONE_GROUP_PER_FILE);
  assertThat(logTester.logs(LoggerLevel.WARN)).contains("Too many duplication groups on file " + inputFile1.relativePath() + ". Keep only the first "+ AbstractCpdEngine.MAX_CLONE_GROUP_PER_FILE+ " groups.");
}
