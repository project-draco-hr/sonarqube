{
  RuleIndex index=tester.get(RuleIndex.class);
  Rule templateRule=index.getByKey(RuleKey.of("xoo","template1"));
  RuleKey customRuleKey=tester.get(RuleCreator.class).create(NewRule.createForCustomRule("CUSTOM_RULE",templateRule.key()).setName("My custom").setHtmlDescription("Some description").setSeverity(Severity.MAJOR).setStatus(RuleStatus.READY).setParameters(ImmutableMap.of("format","txt")));
  dbSession.commit();
  dbSession.clearCache();
  Date updatedAt=index.getByKey(customRuleKey).updatedAt();
  tester.get(Platform.class).executeStartupTasks();
  Rule customRuleReloaded=index.getByKey(customRuleKey);
  assertThat(customRuleReloaded.updatedAt()).isEqualTo(updatedAt);
}
