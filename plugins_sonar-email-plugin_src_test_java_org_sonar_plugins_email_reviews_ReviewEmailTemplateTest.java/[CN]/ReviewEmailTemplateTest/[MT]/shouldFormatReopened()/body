{
  Notification notification=new Notification("review-changed").setFieldValue("reviewId","1").setFieldValue("old.resolution","FIXED").setFieldValue("new.resolution",null).setFieldValue("old.status","RESOLVED").setFieldValue("new.status","REOPENED");
  EmailMessage message=template.format(notification);
  assertThat(message.getMessageId(),is("review/1"));
  assertThat(message.getSubject(),is("Review #1"));
  assertThat(message.getFrom(),nullValue());
  assertThat(message.getMessage(),is("Status: REOPENED (was RESOLVED)\nResolution:  (was FIXED)\n\n--\nSee it in Sonar: http://nemo.sonarsource.org/review/view/1\n"));
}
