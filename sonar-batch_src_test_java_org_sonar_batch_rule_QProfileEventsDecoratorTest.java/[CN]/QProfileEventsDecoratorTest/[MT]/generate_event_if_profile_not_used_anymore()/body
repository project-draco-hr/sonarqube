{
  Measure previousMeasure=new Measure(CoreMetrics.QUALITY_PROFILES,"[" + JAVA_V1_JSON + "]");
  Measure newMeasure=new Measure(CoreMetrics.QUALITY_PROFILES,"[" + JAVA_OTHER_JSON + "]");
  when(timeMachine.getMeasures(any(TimeMachineQuery.class))).thenReturn(Arrays.asList(previousMeasure));
  when(decoratorContext.getMeasure(CoreMetrics.QUALITY_PROFILES)).thenReturn(newMeasure);
  when(languages.get("java")).thenReturn(Java.INSTANCE);
  decorator.decorate(project,decoratorContext);
  verify(decoratorContext).createEvent(eq("Stop using Java One (Java)"),eq("Java One no more used for Java"),same(Event.CATEGORY_PROFILE),any(Date.class));
}
