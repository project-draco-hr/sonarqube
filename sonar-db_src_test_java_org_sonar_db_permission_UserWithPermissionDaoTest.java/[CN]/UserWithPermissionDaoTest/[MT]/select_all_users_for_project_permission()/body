{
  dbTester.prepareDbUnit(getClass(),"users_with_permissions.xml");
  PermissionQuery query=PermissionQuery.builder().permission("user").build();
  List<UserWithPermissionDto> result=selectUsers(session,query,COMPONENT_ID);
  assertThat(result).hasSize(3);
  UserWithPermissionDto user1=result.get(0);
  assertThat(user1.getLogin()).isEqualTo("user1");
  assertThat(user1.getName()).isEqualTo("User1");
  assertThat(user1.getPermission()).isNotNull();
  UserWithPermissionDto user2=result.get(1);
  assertThat(user2.getLogin()).isEqualTo("user2");
  assertThat(user2.getName()).isEqualTo("User2");
  assertThat(user2.getPermission()).isNotNull();
  UserWithPermissionDto user3=result.get(2);
  assertThat(user3.getLogin()).isEqualTo("user3");
  assertThat(user3.getName()).isEqualTo("User3");
  assertThat(user3.getPermission()).isNull();
}
