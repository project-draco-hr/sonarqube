{
  PermissionTemplateDto permissionTemplateDto=permissionDao.selectTemplateById(templateId);
  if (permissionTemplateDto == null) {
    throw new IllegalArgumentException("Could not retrieve permission template with id " + templateId);
  }
  PermissionTemplateDto templateWithPermissions=permissionDao.selectPermissionTemplate(permissionTemplateDto.getName());
  if (templateWithPermissions == null) {
    throw new IllegalArgumentException("Could not retrieve permissions for template with id " + templateId);
  }
  return templateWithPermissions;
}
