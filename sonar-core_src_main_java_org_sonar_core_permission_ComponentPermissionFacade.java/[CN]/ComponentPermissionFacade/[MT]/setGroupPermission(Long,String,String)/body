{
  SqlSession session=myBatis.openSession();
  try {
    GroupRoleDto groupRole=new GroupRoleDto().setRole(permission).setResourceId(Long.valueOf(resourceId));
    if (DefaultGroups.isAnyone(groupName)) {
      roleDao.deleteGroupRole(groupRole,session);
      roleDao.insertGroupRole(groupRole,session);
      session.commit();
    }
 else {
      GroupDto group=userDao.selectGroupByName(groupName,session);
      if (group != null) {
        groupRole.setGroupId(group.getId());
        roleDao.deleteGroupRole(groupRole,session);
        roleDao.insertGroupRole(groupRole,session);
        session.commit();
      }
    }
  }
  finally {
    MyBatis.closeQuietly(session);
  }
}
