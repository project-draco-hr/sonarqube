{
  File ioFile=inputFile.file();
  File scmDataFile=new java.io.File(ioFile.getParentFile(),ioFile.getName() + SCM_EXTENSION);
  if (!scmDataFile.exists()) {
    LOG.debug("Skipping SCM data injection for " + inputFile.relativePath());
    return;
  }
  FileLinesContext fileLinesContext=fileLinesContextFactory.createFor(inputFile);
  try {
    List<String> lines=FileUtils.readLines(scmDataFile,Charsets.UTF_8.name());
    int lineNumber=0;
    for (    String line : lines) {
      lineNumber++;
      if (StringUtils.isNotBlank(line)) {
        String[] fields=StringUtils.split(line,',');
        if (fields.length < 3) {
          throw new IllegalStateException("Not enough fields on line " + lineNumber);
        }
        String revision=fields[0];
        String author=fields[1];
        Date date=DateUtils.parseDate(fields[2]);
        fileLinesContext.setStringValue(CoreMetrics.SCM_REVISIONS_BY_LINE_KEY,lineNumber,revision);
        fileLinesContext.setStringValue(CoreMetrics.SCM_AUTHORS_BY_LINE_KEY,lineNumber,author);
        fileLinesContext.setStringValue(CoreMetrics.SCM_LAST_COMMIT_DATETIMES_BY_LINE_KEY,lineNumber,DateUtils.formatDateTime(date));
      }
    }
  }
 catch (  IOException e) {
    throw new IllegalStateException(e);
  }
  fileLinesContext.save();
}
