{
  Type type=new TypeToken<Map<String,String>>(){
  }
.getType();
  Gson gson=GsonHelper.create();
  try {
    return (Map<String,String>)gson.fromJson(json,type);
  }
 catch (  JsonSyntaxException e) {
    throw new BadRequestException(String.format("JSON '%s' does not respect expected format for setting '%s'. Ex: {\"field1\":\"value1\", \"field2\":\"value2\"}",json,key));
  }
}
