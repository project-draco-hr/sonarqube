{
  String lang=languageRecognizer.of(file);
  if (lang == null) {
    return null;
  }
  Map<String,String> attributes=Maps.newHashMap();
  set(attributes,InputFile.ATTRIBUTE_TYPE,type);
  set(attributes,InputFile.ATTRIBUTE_LANGUAGE,lang);
  set(attributes,InputFile.ATTRIBUTE_SOURCEDIR_PATH,PathUtils.canonicalPath(sourceDir));
  set(attributes,InputFile.ATTRIBUTE_SOURCE_RELATIVE_PATH,pathResolver.relativePath(sourceDir,file));
  initStatus(file,fileSystem.sourceCharset(),path,attributes);
  return DefaultInputFile.create(file,path,attributes);
}
