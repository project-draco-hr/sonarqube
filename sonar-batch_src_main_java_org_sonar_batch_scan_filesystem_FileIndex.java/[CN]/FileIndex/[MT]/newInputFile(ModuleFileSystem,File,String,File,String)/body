{
  String extension=FilenameUtils.getExtension(file.getName());
  String lang=languageRecognizer.ofExtension(extension);
  if (lang == null) {
    return null;
  }
  Map<String,String> attributes=Maps.newHashMap();
  set(attributes,InputFile.ATTRIBUTE_EXTENSION,extension);
  set(attributes,InputFile.ATTRIBUTE_TYPE,type);
  set(attributes,InputFile.ATTRIBUTE_LANGUAGE,lang);
  set(attributes,InputFile.ATTRIBUTE_SOURCEDIR_PATH,PathUtils.canonicalPath(file));
  set(attributes,InputFile.ATTRIBUTE_SOURCE_RELATIVE_PATH,pathResolver.relativePath(sourceDir,file));
  initStatus(file,fileSystem.sourceCharset(),baseRelativePath,attributes);
  return DefaultInputFile.create(file,baseRelativePath,attributes);
}
