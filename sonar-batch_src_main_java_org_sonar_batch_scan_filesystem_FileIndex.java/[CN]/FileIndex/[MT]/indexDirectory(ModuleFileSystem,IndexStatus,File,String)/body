{
  Collection<File> files=FileUtils.listFiles(sourceDir,FILE_FILTER,DIR_FILTER);
  for (  File file : files) {
    String relativePath=pathResolver.relativePath(fileSystem.baseDir(),file);
    if (!cache.containsFile(fileSystem.moduleKey(),relativePath)) {
      InputFile input=newInputFile(fileSystem,sourceDir,type,file);
      if (accept(input)) {
        cache.put(fileSystem.moduleKey(),input);
        status.markAsIndexed(relativePath);
      }
    }
  }
}
