{
  String publicRootUrl=server.getPublicRootUrl();
  if (publicRootUrl.startsWith("http:") && !server.isDev()) {
    throw new IllegalStateException(String.format("The server url should be configured in https, please update the property '%s'",SERVER_BASE_URL));
  }
  return publicRootUrl + OAuth2CallbackFilter.CALLBACK_PATH + "/"+ identityProvider.getKey();
}
