{
  QgateProjectFinder.Association associations=projectFinder.find(ProjectQgateAssociationQuery.builder().gateId(request.mandatoryParam(QualityGatesWsParameters.PARAM_GATE_ID)).membership(request.param(QualityGatesWsParameters.PARAM_QUERY) == null ? request.param(Param.SELECTED) : ProjectQgateAssociationQuery.ANY).projectSearch(request.param(QualityGatesWsParameters.PARAM_QUERY)).pageIndex(request.paramAsInt(QualityGatesWsParameters.PARAM_PAGE)).pageSize(request.paramAsInt(QualityGatesWsParameters.PARAM_PAGE_SIZE)).build());
  JsonWriter writer=response.newJsonWriter();
  writer.beginObject().prop("more",associations.hasMoreResults());
  writer.name("results").beginArray();
  for (  ProjectQgateAssociation project : associations.projects()) {
    writer.beginObject().prop("id",project.id()).prop("name",project.name()).prop(Param.SELECTED,project.isMember()).endObject();
  }
  writer.endArray().endObject().close();
}
