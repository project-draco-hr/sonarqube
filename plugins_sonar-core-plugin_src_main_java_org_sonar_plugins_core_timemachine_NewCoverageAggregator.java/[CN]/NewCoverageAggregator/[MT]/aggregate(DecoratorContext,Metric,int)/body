{
  int[] variations={0,0,0,0,0};
  boolean[] hasValues={false,false,false,false,false};
  for (  Measure child : context.getChildrenMeasures(metric)) {
    for (int indexPeriod=1; indexPeriod <= maxPeriods; indexPeriod++) {
      Double variation=child.getVariation(indexPeriod);
      if (variation != null) {
        variations[indexPeriod - 1]=variations[indexPeriod - 1] + variation.intValue();
        hasValues[indexPeriod - 1]=true;
      }
    }
  }
  if (ArrayUtils.contains(hasValues,true)) {
    Measure measure=new Measure(metric);
    for (int index=0; index < 5; index++) {
      if (hasValues[index]) {
        measure.setVariation(index + 1,(double)variations[index]);
      }
    }
    context.saveMeasure(measure);
  }
}
