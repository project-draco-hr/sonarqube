{
  for (  Map.Entry<String,Measure> measure : batchReportMeasures.entrySet()) {
    String metricKey=measure.getKey();
    if (FORBIDDEN_METRIC_KEYS.contains(metricKey)) {
      throw new IllegalStateException(String.format("Measures on metric '%s' cannot be send in the report",metricKey));
    }
    Metric metric=metricRepository.getByKey(metricKey);
    MeasureDto measureDto=MeasureToMeasureDto.INSTANCE.toMeasureDto(measure.getValue(),metric,componentId,snapshotId);
    dbClient.measureDao().insert(session,measureDto);
  }
}
