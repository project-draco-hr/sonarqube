{
  LOGGER.info(String.format("Create index %s",newIndex.getName()));
  ImmutableSettings.Builder settings=newIndex.getSettings();
  settings.put(SETTING_HASH,new IndexHash().of(newIndex));
  client.prepareCreate(newIndex.getName()).setSettings(settings).get();
  for (  Map.Entry<String,NewIndex.NewMapping> entry : newIndex.getMappings().entrySet()) {
    LOGGER.info(String.format("Create type %s/%s",newIndex.getName(),entry.getKey()));
    client.preparePutMapping(newIndex.getName()).setType(entry.getKey()).setIgnoreConflicts(false).setSource(entry.getValue().getAttributes()).get();
  }
}
