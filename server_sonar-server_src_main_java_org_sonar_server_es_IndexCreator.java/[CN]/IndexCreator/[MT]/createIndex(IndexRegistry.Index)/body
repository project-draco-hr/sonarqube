{
  LOGGER.info(String.format("Create index %s",index.getName()));
  ImmutableSettings.Builder settings=ImmutableSettings.builder();
  settings.put(index.getSettings());
  settings.put(SETTING_HASH,new IndexHash().of(index));
  client.prepareCreate(index.getName()).setSettings(settings).get();
  for (  Map.Entry<String,IndexRegistry.IndexType> entry : index.getTypes().entrySet()) {
    LOGGER.info(String.format("Create type %s/%s",index.getName(),entry.getKey()));
    client.preparePutMapping(index.getName()).setType(entry.getKey()).setIgnoreConflicts(false).setSource(entry.getValue().getAttributes()).get();
  }
}
