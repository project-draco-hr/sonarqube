{
  Date analysisDate=loadAnalysisDate(projectConfiguration);
  DefaultProjectFileSystem fs=new DefaultProjectFileSystem(project);
  MavenProject pom=project.getPom();
  if (pom != null) {
    fs.setBaseDir(pom.getBasedir());
    fs.setBuildDir(pom.getBuild().getDirectory());
    projectConfiguration.setProperty("project.build.outputDirectory",pom.getBuild().getOutputDirectory());
    if (pom.getReporting() != null) {
      projectConfiguration.setProperty("project.reporting.outputDirectory",pom.getReporting().getOutputDirectory());
    }
    projectConfiguration.setProperty("sonar.java.sourceVersion",MavenUtils.getJavaSourceVersion(pom));
    projectConfiguration.setProperty("sonar.java.targetVersion",MavenUtils.getJavaVersion(pom));
  }
  project.setConfiguration(projectConfiguration).setExclusionPatterns(loadExclusionPatterns(projectConfiguration)).setAnalysisDate(analysisDate).setLatestAnalysis(isLatestAnalysis(project.getKey(),analysisDate)).setAnalysisVersion(loadAnalysisVersion(projectConfiguration,pom)).setAnalysisType(loadAnalysisType(projectConfiguration)).setLanguageKey(loadLanguageKey(projectConfiguration)).setFileSystem(fs);
}
