{
  RemoteIssue issue=new RemoteIssue();
  issue.setKey("FOO-789");
  issue.setType(JiraSOAPClient.TASK_ISSUE_TYPE);
  issue.setPriority("3");
  issue.setSummary("Sonar Review #456");
  issue.setDescription("The Cyclomatic Complexity of this method is 14 which is greater than 10 authorized.");
  JiraSoapService jiraSoapService=mock(JiraSoapService.class);
  when(jiraSoapService.createIssue(anyString(),any(RemoteIssue.class))).thenReturn(issue);
  SOAPSession soapSession=mock(SOAPSession.class);
  when(soapSession.getJiraSoapService()).thenReturn(jiraSoapService);
  RemoteIssue returnedIssue=soapClient.doCreateIssue(review,soapSession);
  verify(soapSession).connect("admin","admin");
  verify(soapSession).getJiraSoapService();
  verify(soapSession).getAuthenticationToken();
  assertThat(returnedIssue,is(issue));
}
