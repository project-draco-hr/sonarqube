{
  ProgrammaticLogbackValve valve=new ProgrammaticLogbackValve();
  valve.setContainer(mock(Container.class));
  LogbackHelper helper=new LogbackHelper();
  ConsoleAppender<IAccessEvent> appender=helper.newConsoleAppender(valve,"CONSOLE","combined");
  valve.addAppender(appender);
  valve.start();
  assertThat(valve.isStarted()).isTrue();
  valve.stop();
  assertThat(valve.isStarted()).isFalse();
}
