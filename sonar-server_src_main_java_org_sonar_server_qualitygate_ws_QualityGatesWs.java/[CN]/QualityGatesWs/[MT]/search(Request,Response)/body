{
  Association associations=projectFinder.find(ProjectQgateAssociationQuery.builder().gateId(request.requiredParam(PARAM_GATE_ID)).membership(request.param(PARAM_SELECTED)).projectSearch(request.param(PARAM_QUERY)).pageIndex(request.intParam(PARAM_PAGE)).pageSize(request.intParam(PARAM_PAGE_SIZE)).build());
  JsonWriter writer=response.newJsonWriter();
  writer.beginObject().prop("more",associations.hasMoreResults());
  writer.name("results").beginArray();
  for (  ProjectQgateAssociation project : associations.projects()) {
    writer.beginObject().prop("id",project.id()).prop("name",project.name()).prop(PARAM_SELECTED,project.isMember()).endObject();
  }
  writer.endArray().endObject().close();
}
