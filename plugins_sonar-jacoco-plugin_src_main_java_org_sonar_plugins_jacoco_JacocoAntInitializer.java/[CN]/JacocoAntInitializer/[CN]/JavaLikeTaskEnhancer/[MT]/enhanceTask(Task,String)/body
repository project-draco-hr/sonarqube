{
  final RuntimeConfigurable configurableWrapper=task.getRuntimeConfigurableWrapper();
  final String forkValue=(String)configurableWrapper.getAttributeMap().get("fork");
  if (forkValue == null || !org.apache.tools.ant.Project.toBoolean(forkValue)) {
    throw new BuildException("Coverage can only be applied on a forked VM");
  }
  super.enhanceTask(task,jvmArg);
}
