{
  URL secretKeyUrl=getClass().getResource("/settings/SettingsTest/sonar-secret.txt");
  orchestrator=Orchestrator.builderEnv().addPlugin(pluginArtifact("settings-plugin")).addPlugin(pluginArtifact("license-plugin")).setServerProperty("sonar.secretKeyPath",secretKeyUrl.getFile()).build();
  orchestrator.start();
  Navigation.get(orchestrator).openHomepage().logIn().asAdmin().openSettings(null).assertMenuContains("General").assertSettingDisplayed("sonar.dbcleaner.cleanDirectory").assertSettingNotDisplayed("settings.extension.hidden").assertSettingNotDisplayed("settings.extension.global");
  Selenese selenese=Selenese.builder().setHtmlTestsInClasspath("test_settings","/settings/SettingsTest/generate-secret-key.html","/settings/SettingsTest/encrypt-text.html").build();
  new SeleneseTest(selenese).runOn(orchestrator);
}
