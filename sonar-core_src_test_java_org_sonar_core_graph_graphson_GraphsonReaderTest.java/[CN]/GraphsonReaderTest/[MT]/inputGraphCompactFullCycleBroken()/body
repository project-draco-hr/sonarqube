{
  TinkerGraph graph=TinkerGraphFactory.createTinkerGraph();
  StringWriter stream=new StringWriter();
  Set<String> edgeKeys=new HashSet<String>();
  edgeKeys.add(GraphsonTokens._IN_V);
  edgeKeys.add(GraphsonTokens._OUT_V);
  edgeKeys.add(GraphsonTokens._LABEL);
  Set<String> vertexKeys=Sets.newHashSet();
  GraphsonWriter writer=new GraphsonWriter();
  writer.write(graph,stream,GraphsonMode.COMPACT,vertexKeys,edgeKeys);
  stream.flush();
  stream.close();
  String jsonString=writer.toString();
  StringReader input=new StringReader(jsonString);
  TinkerGraph emptyGraph=new TinkerGraph();
  new GraphsonReader().read(input,emptyGraph);
}
