{
  projectBootstrapper=mock(ProjectBootstrapper.class);
  bootstrapProperties=new BootstrapProperties(Collections.<String,String>emptyMap());
  AnalysisMode analysisMode=new AnalysisMode(bootstrapProperties);
  when(projectBootstrapper.bootstrap()).thenReturn(new ProjectReactor(ProjectDefinition.create()));
  parentContainer=new ComponentContainer();
  parentContainer.add(System2.INSTANCE);
  parentContainer.add(bootstrapProperties);
  parentContainer.add(analysisMode);
  parentContainer.add(new PropertiesConfiguration());
  SettingsReferential settingsReferential=mock(SettingsReferential.class);
  settings=new GlobalSettings(bootstrapProperties,new PropertyDefinitions(),settingsReferential,new PropertiesConfiguration(),analysisMode);
  parentContainer.add(settings);
  parentContainer.add(settingsReferential);
  ProjectReferentialsLoader projectReferentialsLoader=new ProjectReferentialsLoader(){
    @Override public ProjectReferentials load(    ProjectReactor reactor,    Settings settings,    Languages languages){
      return new ProjectReferentials();
    }
  }
;
  parentContainer.add(projectReferentialsLoader);
  container=new ProjectScanContainer(parentContainer);
}
