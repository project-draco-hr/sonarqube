{
  projectBootstrapper=mock(ProjectBootstrapper.class);
  bootstrapProperties=new BootstrapProperties(Collections.<String,String>emptyMap());
  DefaultAnalysisMode analysisMode=new DefaultAnalysisMode(bootstrapProperties);
  when(projectBootstrapper.bootstrap()).thenReturn(new ProjectReactor(ProjectDefinition.create()));
  parentContainer=new ComponentContainer();
  parentContainer.add(System2.INSTANCE);
  parentContainer.add(bootstrapProperties);
  parentContainer.add(analysisMode);
  GlobalRepositories globalRef=new GlobalRepositories();
  settings=new GlobalSettings(bootstrapProperties,new PropertyDefinitions(),globalRef,analysisMode);
  parentContainer.add(settings);
  ProjectRepositoriesLoader projectReferentialsLoader=new ProjectRepositoriesLoader(){
    @Override public ProjectRepositories load(    ProjectReactor reactor,    TaskProperties taskProperties){
      return new ProjectRepositories();
    }
  }
;
  parentContainer.add(projectReferentialsLoader);
  parentContainer.add(mock(TaskProperties.class));
  container=new ProjectScanContainer(parentContainer);
}
