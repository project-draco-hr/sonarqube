{
  query.setQueryText(request.param(Param.TEXT_QUERY));
  query.setSeverities(request.paramAsStrings(PARAM_SEVERITIES));
  query.setRepositories(request.paramAsStrings(PARAM_REPOSITORIES));
  query.setAvailableSince(request.hasParam(PARAM_AVAILABLE_SINCE) ? request.paramAsDate(PARAM_AVAILABLE_SINCE).getTime() : null);
  query.setStatuses(request.paramAsEnums(PARAM_STATUSES,RuleStatus.class));
  query.setLanguages(request.paramAsStrings(PARAM_LANGUAGES));
  query.setActivation(request.paramAsBoolean(PARAM_ACTIVATION));
  query.setQProfileKey(request.param(PARAM_QPROFILE));
  query.setTags(request.paramAsStrings(PARAM_TAGS));
  query.setInheritance(request.paramAsStrings(PARAM_INHERITANCE));
  query.setActiveSeverities(request.paramAsStrings(PARAM_ACTIVE_SEVERITIES));
  query.setIsTemplate(request.paramAsBoolean(PARAM_IS_TEMPLATE));
  query.setTemplateKey(request.param(PARAM_TEMPLATE_KEY));
  query.setTypes(request.paramAsEnums(PARAM_TYPES,RuleType.class));
  query.setKey(request.param(PARAM_RULE_KEY));
  String sortParam=request.param(Param.SORT);
  if (sortParam != null) {
    query.setSortField(sortParam);
    query.setAscendingSort(request.mandatoryParamAsBoolean(Param.ASCENDING));
  }
  return query;
}
