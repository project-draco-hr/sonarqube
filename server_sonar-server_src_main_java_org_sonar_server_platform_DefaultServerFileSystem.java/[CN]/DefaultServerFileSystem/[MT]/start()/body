{
  LOGGER.info("SonarQube home: " + homeDir.getAbsolutePath());
  if (!homeDir.isDirectory() || !homeDir.exists()) {
    throw new IllegalStateException("SonarQube home directory does not exist");
  }
  try {
    if (getDeployDir() == null) {
      throw new IllegalArgumentException("Web app directory does not exist: " + getDeployDir());
    }
    LOGGER.info("Deploy dir: " + getDeployDir().getAbsolutePath());
    FileUtils.forceMkdir(getDeployDir());
    for (    File subDirectory : getDeployDir().listFiles((FileFilter)FileFilterUtils.directoryFileFilter())) {
      FileUtils.cleanDirectory(subDirectory);
    }
  }
 catch (  IOException e) {
    throw new IllegalStateException("The following directory can not be created: " + getDeployDir().getAbsolutePath(),e);
  }
  File deprecated=getDeprecatedPluginsDir();
  try {
    FileUtils.forceMkdir(deprecated);
    FileUtils.cleanDirectory(deprecated);
  }
 catch (  IOException e) {
    throw new IllegalStateException("The following directory can not be created: " + deprecated.getAbsolutePath(),e);
  }
}
