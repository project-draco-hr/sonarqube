{
  WorkUnit technicalDebt=new WorkUnit.Builder().setDays(1).build();
  Issue issue=createIssue("rule1","repo1").setTechnicalDebt(technicalDebt);
  when(issuable.issues()).thenReturn(newArrayList(issue));
  Requirement requirement=mock(Requirement.class);
  when(defaultTechnicalDebtModel.requirementsByRule(RuleKey.of("repo1","rule1"))).thenReturn(requirement);
  doReturn(newArrayList(requirement)).when(defaultTechnicalDebtModel).requirements();
  decorator.decorate(resource,context);
  verify(context).saveMeasure(argThat(new IsCharacteristicMeasure(CoreMetrics.TECHNICAL_DEBT,1.0)));
  verify(context).saveMeasure(argThat(new IsCharacteristicMeasure(CoreMetrics.TECHNICAL_DEBT,null,requirement,1.0)));
}
