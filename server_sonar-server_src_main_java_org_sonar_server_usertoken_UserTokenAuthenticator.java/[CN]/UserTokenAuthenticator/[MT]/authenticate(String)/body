{
  String tokenHash=tokenGenerator.hash(token);
  DbSession dbSession=dbClient.openSession(false);
  try {
    Optional<UserTokenDto> userToken=dbClient.userTokenDao().selectByTokenHash(dbSession,tokenHash);
    if (userToken.isPresent()) {
      return java.util.Optional.of(userToken.get().getLogin());
    }
    return java.util.Optional.empty();
  }
  finally {
    dbClient.closeSession(dbSession);
  }
}
