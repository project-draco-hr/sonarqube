{
  Preconditions.checkState(!done,"done() already called");
  tokens.add(TokenEntry.getEOF());
  TokenEntry.clearImages();
  List<TokensLine> tokensLines=TokenizerBridge.convert(tokens);
  List<Block> blocks=blockChunker.chunk(((DefaultInputFile)inputFile).key(),tokensLines);
  cache.put(((DefaultInputFile)inputFile).key(),new FileBlocks(((DefaultInputFile)inputFile).key(),blocks));
  tokens.clear();
}
