{
  ComponentDto componentDto=createComponentDto(reportComponent,module);
  componentDto.setScope(Scopes.PROJECT);
  componentDto.setQualifier(Qualifiers.MODULE);
  componentDto.setName(reportComponent.getName());
  componentDto.setLongName(componentDto.name());
  if (reportComponent.hasPath()) {
    componentDto.setPath(reportComponent.getPath());
  }
  if (reportComponent.hasDescription()) {
    componentDto.setDescription(reportComponent.getDescription());
  }
  componentDto.setParentProjectId(project.getId());
  componentDto.setProjectUuid(lastModule.projectUuid());
  componentDto.setModuleUuid(lastModule.uuid());
  componentDto.setModuleUuidPath(lastModule.moduleUuidPath() + componentDto.uuid() + ComponentDto.MODULE_UUID_PATH_SEP);
  ComponentDto moduleDto=persistComponent(module.getReportAttributes().getRef(),componentDto);
  addToCache(module,moduleDto);
  return moduleDto;
}
