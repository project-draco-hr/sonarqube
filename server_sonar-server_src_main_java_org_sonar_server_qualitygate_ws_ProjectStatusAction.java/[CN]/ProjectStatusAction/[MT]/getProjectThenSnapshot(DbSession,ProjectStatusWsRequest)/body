{
  ComponentDto projectDto=componentFinder.getByUuidOrKey(dbSession,request.getProjectId(),request.getProjectKey(),ParamNames.PROJECT_ID_AND_KEY);
  SnapshotDto snapshotDto=dbClient.snapshotDao().selectLastSnapshotByComponentId(dbSession,projectDto.getId());
  checkState(snapshotDto != null,"Last analysis of project '%s' not found",projectDto.getKey());
  return new ProjectAndSnapshot(projectDto,snapshotDto);
}
