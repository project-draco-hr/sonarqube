{
  when(server.getPublicRootUrl()).thenReturn(SECURED_PUBLIC_ROOT_URL);
  OAuth2IdentityProvider.CallbackContext callback=underTest.newCallback(request,response,identityProvider);
  assertThat(callback.getRequest()).isEqualTo(request);
  assertThat(callback.getResponse()).isEqualTo(response);
  assertThat(callback.getCallbackUrl()).isEqualTo("https://mydomain.com/oauth2/callback/github");
}
