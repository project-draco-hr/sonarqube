{
  DbSession session=dbClient.openSession(true);
  try {
    int rootComponentRef=computationContext.getReportMetadata().getRootComponentRef();
    TestContext context=new TestContext(computationContext,session,dbComponentsRefCache);
    recursivelyProcessComponent(context,rootComponentRef);
    session.commit();
    if (context.hasUnprocessedCoverageDetails) {
      LOG.warn("Some coverage tests are not taken into account during analysis of project '{}'",computationContext.getProjectKey());
    }
  }
  finally {
    MyBatis.closeQuietly(session);
  }
}
