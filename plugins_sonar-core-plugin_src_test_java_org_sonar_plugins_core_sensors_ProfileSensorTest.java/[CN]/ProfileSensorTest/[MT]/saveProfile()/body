{
  RulesProfile profile=mock(RulesProfile.class);
  when(profile.getId()).thenReturn(22);
  when(profile.getName()).thenReturn("fake");
  when(profile.getVersion()).thenReturn(2);
  SensorContext context=mock(SensorContext.class);
  DatabaseSession session=mock(DatabaseSession.class);
  ProfileSensor sensor=new ProfileSensor(profile,session);
  sensor.analyse(null,context);
  verify(context).saveMeasure(argThat(new IsMeasure(CoreMetrics.PROFILE,22d)));
  verify(context).saveMeasure(argThat(new IsMeasure(CoreMetrics.PROFILE_VERSION,2d)));
}
