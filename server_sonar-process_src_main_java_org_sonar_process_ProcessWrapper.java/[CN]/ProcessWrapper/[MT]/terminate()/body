{
  if (processMXBean != null) {
    ScheduledExecutorService killer=Executors.newScheduledThreadPool(1);
    try {
      Runnable killerTask=new Runnable(){
        @Override public void run(){
          ProcessUtils.destroyQuietly(process);
        }
      }
;
      ScheduledFuture killerFuture=killer.schedule(killerTask,30,TimeUnit.SECONDS);
      LOGGER.info("Stopping {} process",getName());
      processMXBean.terminate();
      killerFuture.cancel(true);
      processMXBean=null;
      LOGGER.info("{} process stopped",getName());
    }
 catch (    Exception e) {
      LOGGER.warn("Failed to terminate " + getName(),e);
    }
 finally {
      killer.shutdownNow();
    }
  }
 else {
    ProcessUtils.destroyQuietly(process);
  }
}
