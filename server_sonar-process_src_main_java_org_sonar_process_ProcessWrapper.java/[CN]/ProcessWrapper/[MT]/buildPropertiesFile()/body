{
  try {
    propertiesFile=File.createTempFile("sq-conf","properties");
    Properties props=new Properties();
    props.putAll(properties);
    props.put(Process.NAME_PROPERTY,processName);
    props.put(Process.PORT_PROPERTY,String.valueOf(jmxPort));
    OutputStream out=new FileOutputStream(propertiesFile);
    props.store(out,"Temporary properties file for Process [" + getName() + "]");
    out.close();
    return propertiesFile;
  }
 catch (  IOException e) {
    throw new IllegalStateException("Cannot write temporary settings to " + propertiesFile,e);
  }
}
