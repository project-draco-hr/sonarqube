{
  File propertyFile=new File(FileUtils.getTempDirectory(),UUID.randomUUID().toString());
  try {
    Properties props=new Properties();
    for (    Map.Entry<String,String> property : properties.entrySet()) {
      props.put(property.getKey(),property.getValue());
    }
    props.put(Process.SONAR_HOME,workDir);
    props.put(Process.NAME_PROPERTY,this.getName());
    props.put(Process.PORT_PROPERTY,Integer.toString(port));
    OutputStream out=new FileOutputStream(propertyFile);
    props.store(out,"Temporary properties file for Process [" + getName() + "]");
    out.close();
    return propertyFile.getAbsolutePath();
  }
 catch (  IOException e) {
    throw new IllegalStateException("Cannot write to propertyFile",e);
  }
}
