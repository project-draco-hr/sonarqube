{
  ModelFinder modelFinder=mock(ModelFinder.class);
  Model persistedModel=createModel();
  when(modelFinder.findByName(TechnicalDebtModel.MODEL_NAME)).thenReturn(persistedModel);
  TechnicalDebtModel technicalDebtModel=new TechnicalDebtModel(modelFinder);
  assertThat(technicalDebtModel.getCharacteristics()).hasSize(2);
  assertThat(technicalDebtModel.getAllRequirements()).hasSize(1);
  assertThat(technicalDebtModel.getRequirementByRule("repo","check1").getRule().getKey()).isEqualTo("check1");
  assertThat(technicalDebtModel.getRequirementByRule("repo","check1").getParent().getKey()).isEqualTo("CPU_EFFICIENCY");
  assertThat(technicalDebtModel.getCharacteristics()).excludes(disabledCharacteristic);
  assertThat(technicalDebtModel.getRequirementByRule("repo","check2")).isNull();
}
