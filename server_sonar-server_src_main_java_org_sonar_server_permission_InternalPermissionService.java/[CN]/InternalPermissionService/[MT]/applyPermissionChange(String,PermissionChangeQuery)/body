{
  DbSession session=dbClient.openSession(false);
  boolean changed;
  try {
    if (permissionChangeQuery.targetsUser()) {
      changed=applyUserPermissionChange(session,operation,permissionChangeQuery);
    }
 else {
      changed=applyGroupPermissionChange(session,operation,permissionChangeQuery);
    }
    if (changed) {
      session.commit();
    }
  }
  finally {
    session.close();
  }
  String project=permissionChangeQuery.component();
  if (changed && project != null) {
    synchronizePermissions(project);
  }
}
