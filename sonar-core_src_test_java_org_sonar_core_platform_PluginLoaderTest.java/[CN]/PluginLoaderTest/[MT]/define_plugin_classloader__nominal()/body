{
  PluginInfo info=new PluginInfo("foo").setName("Foo").setMainClass("org.foo.FooPlugin");
  File jarFile=temp.newFile();
  info.setFile(jarFile);
  PluginLoader loader=new PluginLoader(new BasicPluginUnzipper());
  Map<String,PluginLoader.ClassloaderDef> defs=loader.defineClassloaders(ImmutableMap.of("foo",info));
  assertThat(defs).containsOnlyKeys("foo");
  PluginLoader.ClassloaderDef def=defs.get("foo");
  assertThat(def.basePluginKey).isEqualTo("foo");
  assertThat(def.selfFirstStrategy).isFalse();
  assertThat(def.files).containsOnly(jarFile);
  assertThat(def.mainClassesByPluginKey).containsOnly(MapEntry.entry("foo","org.foo.FooPlugin"));
}
