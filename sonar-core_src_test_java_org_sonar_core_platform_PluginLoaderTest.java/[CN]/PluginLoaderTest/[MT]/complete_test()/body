{
  File checkstyleJar=FileUtils.toFile(getClass().getResource("/org/sonar/core/plugins/sonar-checkstyle-plugin-2.8.jar"));
  PluginInfo checkstyleInfo=PluginInfo.create(checkstyleJar);
  PluginLoader loader=new PluginLoader(new TempPluginUnzipper());
  Map<String,Plugin> instances=loader.load(ImmutableMap.of("checkstyle",checkstyleInfo));
  assertThat(instances).containsOnlyKeys("checkstyle");
  Plugin checkstyleInstance=instances.get("checkstyle");
  assertThat(checkstyleInstance.getClass().getName()).isEqualTo("org.sonar.plugins.checkstyle.CheckstylePlugin");
  loader.unload(instances.values());
}
