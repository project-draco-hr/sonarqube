{
  String sonarHome=props.of(SONAR_HOME,System.getenv(SONAR_HOME));
  if (StringUtils.isEmpty(sonarHome)) {
    throw new IllegalStateException("variable SONAR_HOME is not set.");
  }
  File home=new File(sonarHome);
  if (!home.exists()) {
    throw new IllegalStateException("Directory SONAR_HOME '" + sonarHome + "' is not set");
  }
  if (!home.canWrite()) {
    throw new IllegalStateException("Directory SONAR_HOME '" + sonarHome + "' is not writable");
  }
}
