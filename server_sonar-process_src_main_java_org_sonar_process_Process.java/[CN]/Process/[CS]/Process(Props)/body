{
  this.props=props;
  this.name=props.of(NAME_PROPERTY,null);
  this.port=props.intOf(PORT_PROPERTY);
  if (StringUtils.isEmpty(this.name)) {
    throw new IllegalStateException(MISSING_NAME_ARGUMENT);
  }
  if (this.port != null) {
    this.monitoringThread=new Thread(new Monitor(this));
  }
 else {
    this.monitoringThread=null;
  }
  MBeanServer mbeanServer=ManagementFactory.getPlatformMBeanServer();
  try {
    mbeanServer.registerMBean(this,this.getObjectName());
  }
 catch (  InstanceAlreadyExistsException e) {
    throw new IllegalStateException("Process already exists in current JVM",e);
  }
catch (  MBeanRegistrationException e) {
    throw new IllegalStateException("Could not register process as MBean",e);
  }
catch (  NotCompliantMBeanException e) {
    throw new IllegalStateException("Process is not a compliant MBean",e);
  }
}
