{
  when(server.getVersion()).thenReturn("3.4");
  doReturn(Arrays.<Violation>asList()).when(dryRunExporter).getViolations(resource);
  StringWriter output=new StringWriter();
  dryRunExporter.writeJson(ImmutableSet.of(resource),output);
  String json=output.toString();
  assertThat(json).isEqualTo("{\"version\":\"3.4\",\"violations_per_resource\":{}}");
}
