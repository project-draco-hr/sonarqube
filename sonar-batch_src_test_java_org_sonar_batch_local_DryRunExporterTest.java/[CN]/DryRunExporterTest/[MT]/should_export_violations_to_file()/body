{
  File sonarDirectory=temporaryFolder.newFolder("sonar");
  when(server.getVersion()).thenReturn("3.4");
  doReturn(Arrays.<Violation>asList()).when(dryRunExporter).getViolations(resource);
  settings.setProperty("sonar.dryRun.export.path","output.json");
  when(projectFileSystem.getSonarWorkingDirectory()).thenReturn(sonarDirectory);
  dryRunExporter.execute(sensorContext);
  assertThat(new File(sonarDirectory,"output.json")).exists();
}
