{
  userSession.login("john").setGlobalPermissions(PROVISIONING);
  ComponentDto project=newProjectDto("project-uuid");
  dbClient.componentDao().insert(dbSession,project);
  SnapshotDto snapshot=dbClient.snapshotDao().insert(dbSession,newSnapshotForProject(project));
  dbSession.commit();
  expectedException.expect(ForbiddenException.class);
  newRequest(snapshot.getId().toString());
}
