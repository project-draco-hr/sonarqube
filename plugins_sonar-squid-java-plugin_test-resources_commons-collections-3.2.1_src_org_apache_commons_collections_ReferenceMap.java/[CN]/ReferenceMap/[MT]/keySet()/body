{
  if (keySet != null)   return keySet;
  keySet=new AbstractSet(){
    public int size(){
      return ReferenceMap.this.size();
    }
    public Iterator iterator(){
      return new KeyIterator();
    }
    public boolean contains(    Object o){
      return containsKey(o);
    }
    public boolean remove(    Object o){
      Object r=ReferenceMap.this.remove(o);
      return r != null;
    }
    public void clear(){
      ReferenceMap.this.clear();
    }
    public Object[] toArray(){
      return toArray(new Object[0]);
    }
    public Object[] toArray(    Object[] array){
      Collection c=new ArrayList(size());
      for (Iterator it=iterator(); it.hasNext(); ) {
        c.add(it.next());
      }
      return c.toArray(array);
    }
  }
;
  return keySet;
}
