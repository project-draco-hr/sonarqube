{
  componentDbTester.insertComponent(newProjectDto("PROJECT_1"));
  userSession.addComponentUuidPermission(UserRole.USER,"PROJECT_1","PROJECT_1");
  insertActivity("T1","PROJECT_1",CeActivityDto.Status.SUCCESS);
  insertActivity("T2","PROJECT_2",CeActivityDto.Status.FAILED);
  insertActivity("T3","PROJECT_1",CeActivityDto.Status.FAILED);
  insertQueue("T4","PROJECT_1",CeQueueDto.Status.IN_PROGRESS);
  insertQueue("T5","PROJECT_1",CeQueueDto.Status.PENDING);
  TestResponse wsResponse=ws.newRequest().setParam("componentId","PROJECT_1").setMediaType(MediaTypes.PROTOBUF).execute();
  WsCe.ProjectResponse response=Protobuf.read(wsResponse.getInputStream(),WsCe.ProjectResponse.parser());
  assertThat(response.getQueueCount()).isEqualTo(2);
  assertThat(response.getQueue(0).getId()).isEqualTo("T4");
  assertThat(response.getQueue(1).getId()).isEqualTo("T5");
  assertThat(response.hasCurrent()).isTrue();
  assertThat(response.getCurrent().getId()).isEqualTo("T3");
}
