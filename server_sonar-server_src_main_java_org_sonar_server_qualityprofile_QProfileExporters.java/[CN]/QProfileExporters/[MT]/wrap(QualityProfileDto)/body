{
  RulesProfile target=new RulesProfile(profile.getName(),profile.getLanguage());
  for (Iterator<ActiveRuleDoc> activeRuleIterator=loader.findActiveRulesByProfile(profile.getKey()); activeRuleIterator.hasNext(); ) {
    ActiveRule activeRule=activeRuleIterator.next();
    Rule rule=ruleFinder.findByKey(activeRule.key().ruleKey());
    org.sonar.api.rules.ActiveRule wrappedActiveRule=target.activateRule(rule,RulePriority.valueOf(activeRule.severity()));
    for (    Map.Entry<String,String> entry : activeRule.params().entrySet()) {
      wrappedActiveRule.setParameter(entry.getKey(),entry.getValue());
    }
  }
  return target;
}
