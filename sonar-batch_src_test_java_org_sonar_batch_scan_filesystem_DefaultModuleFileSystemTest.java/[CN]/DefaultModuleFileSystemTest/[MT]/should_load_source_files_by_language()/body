{
  File basedir=new File("test-resources/DefaultModuleFileSystemTest/main_and_test_files");
  DefaultModuleFileSystem fileSystem=new DefaultModuleFileSystem.Builder().baseDir(basedir).sourceCharset(Charsets.UTF_8).workingDir(temp.newFolder()).addSourceDir(new File(basedir,"src/main/java")).addTestDir(new File(basedir,"src/test/java")).languageFilters(new LanguageFilters(new Languages(new Java(),new Php()))).build();
  List<File> files=fileSystem.files(FileQuery.onSource().onLanguage("java"));
  assertThat(files).hasSize(2);
  for (  File sourceFiles : files) {
    assertThat(sourceFiles).exists().isFile();
    assertThat(sourceFiles.getName()).isIn("Hello.java","Foo.java");
  }
  assertThat(fileSystem.files(FileQuery.onSource().onLanguage("php"))).isEmpty();
}
