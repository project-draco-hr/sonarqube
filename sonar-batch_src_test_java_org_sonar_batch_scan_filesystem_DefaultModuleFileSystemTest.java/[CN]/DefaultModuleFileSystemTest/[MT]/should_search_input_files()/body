{
  DefaultModuleFileSystem fs=new DefaultModuleFileSystem(moduleInputFileCache,new Project("foo"),settings,fileIndexer,initializer,componentIndexer);
  File mainFile=temp.newFile();
  InputFile mainInput=new DefaultInputFile("Main.java").setFile(mainFile).setType(InputFile.Type.MAIN);
  InputFile testInput=new DefaultInputFile("Test.java").setFile(temp.newFile()).setType(InputFile.Type.TEST);
  when(moduleInputFileCache.inputFiles()).thenReturn(Lists.newArrayList(mainInput,testInput));
  fs.index();
  Iterable<InputFile> inputFiles=fs.inputFiles(fs.predicates().hasType(InputFile.Type.MAIN));
  assertThat(inputFiles).containsOnly(mainInput);
  Iterable<File> files=fs.files(fs.predicates().hasType(InputFile.Type.MAIN));
  assertThat(files).containsOnly(mainFile);
}
