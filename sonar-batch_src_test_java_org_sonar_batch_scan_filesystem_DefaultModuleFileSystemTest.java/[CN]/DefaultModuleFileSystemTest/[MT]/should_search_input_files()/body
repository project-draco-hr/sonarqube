{
  DefaultModuleFileSystem fs=new DefaultModuleFileSystem("foo",settings,fileCache,fileIndexer);
  File mainFile=temp.newFile();
  InputFile mainInput=InputFile.create(mainFile,"Main.java",ImmutableMap.of(InputFile.ATTRIBUTE_TYPE,InputFile.TYPE_SOURCE));
  InputFile testInput=InputFile.create(temp.newFile(),"Test.java",ImmutableMap.of(InputFile.ATTRIBUTE_TYPE,InputFile.TYPE_TEST));
  when(fileCache.byModule("foo")).thenReturn(Lists.newArrayList(mainInput,testInput));
  Iterable<InputFile> inputFiles=fs.inputFiles(FileQuery.onSource());
  assertThat(inputFiles).containsOnly(mainInput);
  List<File> files=fs.files(FileQuery.onSource());
  assertThat(files).containsOnly(mainFile);
}
