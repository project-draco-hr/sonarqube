{
  DefaultModuleFileSystem fs=new DefaultModuleFileSystem(moduleInputFileCache,new Project("foo"),settings,fileIndexer,initializer,componentIndexer);
  File baseDir=temp.newFile();
  InputFile mainInput=new DeprecatedDefaultInputFile("foo","Main.java").setModuleBaseDir(baseDir.toPath()).setType(InputFile.Type.MAIN);
  InputFile testInput=new DeprecatedDefaultInputFile("foo","Test.java").setModuleBaseDir(baseDir.toPath()).setType(InputFile.Type.TEST);
  when(moduleInputFileCache.inputFiles()).thenReturn(Lists.newArrayList(mainInput,testInput));
  fs.index();
  Iterable<InputFile> inputFiles=fs.inputFiles(fs.predicates().hasType(InputFile.Type.MAIN));
  assertThat(inputFiles).containsOnly(mainInput);
  Iterable<File> files=fs.files(fs.predicates().hasType(InputFile.Type.MAIN));
  assertThat(files).containsOnly(new File(baseDir,"Main.java"));
}
