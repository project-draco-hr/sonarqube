{
  DefaultModuleFileSystem fs=new DefaultModuleFileSystem(new Project("foo"),settings,fileIndex,initializer,mode,componentIndexer);
  File mainFile=temp.newFile();
  InputFile mainInput=DefaultInputFile.create(mainFile,Charsets.UTF_8,"Main.java",ImmutableMap.of(InputFile.ATTRIBUTE_TYPE,InputFile.TYPE_MAIN));
  InputFile testInput=DefaultInputFile.create(temp.newFile(),Charsets.UTF_8,"Test.java",ImmutableMap.of(InputFile.ATTRIBUTE_TYPE,InputFile.TYPE_TEST));
  when(fileIndex.inputFiles("foo")).thenReturn(Lists.newArrayList(mainInput,testInput));
  fs.index();
  Iterable<InputFile> inputFiles=fs.inputFiles(FileQuery.onSource());
  assertThat(inputFiles).containsOnly(mainInput);
  List<File> files=fs.files(FileQuery.onSource());
  assertThat(files).containsOnly(mainFile);
}
