{
  if (!"new-violations".equals(notification.getType())) {
    return null;
  }
  StringBuilder sb=new StringBuilder();
  String projectName=notification.getFieldValue("projectName");
  String violationsCount=notification.getFieldValue("count");
  String fromDate=notification.getFieldValue("fromDate");
  String toDate=notification.getFieldValue("toDate");
  sb.append("Project: ").append(projectName).append('\n');
  sb.append(violationsCount).append(" new violations on last analysis");
  sb.append(" (introduced between ").append(fromDate).append(" and ").append(toDate).append(")").append('\n');
  appendFooter(sb,notification);
  EmailMessage message=new EmailMessage().setMessageId("new-violations/" + notification.getFieldValue("projectId")).setSubject("New violations for project " + projectName).setMessage(sb.toString());
  return message;
}
