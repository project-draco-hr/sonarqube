{
  if (!"new-violations".equals(notification.getType())) {
    return null;
  }
  StringBuilder sb=new StringBuilder();
  String projectName=notification.getFieldValue("projectName");
  appendLine(sb,"Project",projectName);
  appendLine(sb,"New violations on last analysis",notification.getFieldValue("count"));
  appendFooter(sb,notification);
  EmailMessage message=new EmailMessage().setMessageId("new-violations/" + notification.getFieldValue("projectId")).setSubject("New violations for project " + projectName).setMessage(sb.toString());
  return message;
}
