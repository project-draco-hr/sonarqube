{
  String templateRuleKey=request.param(PARAM_TEMPLATE_KEY);
  NewRule newRule=new NewRule().setTemplateKey(templateRuleKey != null ? RuleKey.parse(templateRuleKey) : null).setName(request.mandatoryParam(PARAM_NAME)).setHtmlDescription(request.mandatoryParam(PARAM_DESCRIPTION)).setSeverity(request.mandatoryParam(PARAM_SEVERITY)).setStatus(RuleStatus.valueOf(request.mandatoryParam(PARAM_STATUS)));
  String params=request.param(PARAMS);
  if (params != null) {
    newRule.setParameters(KeyValueFormat.parse(params));
  }
  service.create(newRule);
}
