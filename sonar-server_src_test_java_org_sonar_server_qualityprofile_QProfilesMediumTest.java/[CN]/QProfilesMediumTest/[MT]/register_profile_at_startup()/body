{
  QProfiles qProfiles=serverTester.get(QProfiles.class);
  List<QProfile> profiles=qProfiles.profilesByLanguage("xoo");
  assertThat(profiles).hasSize(1);
  QProfile profile=profiles.get(0);
  assertThat(profile.id()).isNotNull();
  assertThat(profile.name()).isEqualTo("Basic");
  assertThat(profile.language()).isEqualTo("xoo");
  assertThat(qProfiles.defaultProfile("xoo").name()).isEqualTo("Basic");
  assertThat(qProfiles.searchProfileRules(ProfileRuleQuery.create(profile.id()),Paging.create(10,1)).rules()).hasSize(2);
  QProfileRule qProfileRule1=qProfiles.searchProfileRules(ProfileRuleQuery.create(profile.id()).setNameOrKey("x1"),Paging.create(10,1)).rules().get(0);
  assertThat(qProfileRule1.key()).isEqualTo("x1");
  assertThat(qProfileRule1.severity()).isEqualTo("MAJOR");
  assertThat(qProfileRule1.params()).hasSize(1);
  QProfileRuleParam qProfileRule1Param=qProfileRule1.params().get(0);
  assertThat(qProfileRule1Param.key()).isEqualTo("acceptWhitespace");
  assertThat(qProfileRule1Param.value()).isEqualTo("true");
  QProfileRule qProfileRule2=qProfiles.searchProfileRules(ProfileRuleQuery.create(profile.id()).setNameOrKey("x2"),Paging.create(10,1)).rules().get(0);
  assertThat(qProfileRule2.key()).isEqualTo("x2");
  assertThat(qProfileRule2.severity()).isEqualTo("BLOCKER");
  assertThat(qProfileRule2.params()).isEmpty();
}
