{
  DbSession session=mock(DbSession.class);
  String componentKey="org.sonar.Sample";
  when(issueDao.findRulesByComponent(componentKey,session)).thenReturn(newArrayList(RuleDto.createFor(RuleKey.of("repo","rule")).setName("Rule name"),RuleDto.createFor(RuleKey.of("repo","rule")).setName("Rule name")));
  RulesAggregation result=issueService.findRulesByComponent(componentKey,session);
  assertThat(result.rules()).hasSize(1);
}
