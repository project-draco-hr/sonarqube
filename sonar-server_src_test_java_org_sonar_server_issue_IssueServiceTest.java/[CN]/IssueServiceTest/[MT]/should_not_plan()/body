{
  grantAccess();
  String actionPlanKey="EFGH";
  when(actionPlanService.findByKey(actionPlanKey,userSession)).thenReturn(new DefaultActionPlan());
  when(issueUpdater.plan(eq(issue),eq(actionPlanKey),any(IssueChangeContext.class))).thenReturn(false);
  Issue result=issueService.plan("ABCD",actionPlanKey,userSession);
  assertThat(result).isNotNull();
  verify(issueUpdater).plan(eq(issue),eq(actionPlanKey),any(IssueChangeContext.class));
  verifyZeroInteractions(issueStorage);
  verifyZeroInteractions(issueNotifications);
}
