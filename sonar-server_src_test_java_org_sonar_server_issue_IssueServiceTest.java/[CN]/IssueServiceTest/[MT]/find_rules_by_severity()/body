{
  DbSession session=mock(DbSession.class);
  String componentKey="org.sonar.Sample";
  Date date=new Date();
  when(issueDao.findSeveritiesByComponent(componentKey,date,session)).thenReturn(newArrayList("MAJOR","MAJOR","INFO"));
  Multiset<String> result=issueService.findSeveritiesByComponent(componentKey,date,session);
  assertThat(result.count("MAJOR")).isEqualTo(2);
  assertThat(result.count("INFO")).isEqualTo(1);
  assertThat(result.count("UNKNOWN")).isEqualTo(0);
}
