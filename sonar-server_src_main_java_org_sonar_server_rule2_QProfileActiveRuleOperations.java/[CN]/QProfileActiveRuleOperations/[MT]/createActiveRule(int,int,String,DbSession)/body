{
  RuleDto rule=ruleDao.getById(ruleId,session);
  QualityProfileDto profile=profileDao.selectById(profileId,session);
  ActiveRuleDto activeRule=ActiveRuleDto.createFor(profile,rule).setSeverity(severity);
  activeRuleDao.insert(activeRule,session);
  List<RuleParamDto> ruleParams=ruleDao.findRuleParamsByRuleKey(rule.getKey(),session);
  List<ActiveRuleParamDto> activeRuleParams=newArrayList();
  for (  RuleParamDto ruleParam : ruleParams) {
    ActiveRuleParamDto activeRuleParam=ActiveRuleParamDto.createFor(ruleParam).setKey(ruleParam.getName()).setValue(ruleParam.getDefaultValue());
    activeRuleParams.add(activeRuleParam);
    activeRuleDao.addParam(activeRule,activeRuleParam,session);
  }
  return activeRule;
}
