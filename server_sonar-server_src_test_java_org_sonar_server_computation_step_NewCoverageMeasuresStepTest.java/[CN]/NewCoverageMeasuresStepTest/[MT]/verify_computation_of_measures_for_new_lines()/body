{
  treeRootHolder.setRoot(FILE_COMPONENT);
  reportReader.putChangesets(BatchReport.Changesets.newBuilder().setComponentRef(1).addChangeset(Changesets.Changeset.newBuilder().build()).addChangeset(Changesets.Changeset.newBuilder().setDate(parseDate("2007-01-15").getTime()).build()).addChangeset(Changesets.Changeset.newBuilder().setDate(parseDate("2011-01-01").getTime()).build()).addChangesetIndexByLine(0).addChangesetIndexByLine(0).addChangesetIndexByLine(0).addChangesetIndexByLine(0).addChangesetIndexByLine(0).addChangesetIndexByLine(0).addChangesetIndexByLine(0).addChangesetIndexByLine(0).addChangesetIndexByLine(0).addChangesetIndexByLine(1).addChangesetIndexByLine(2).build());
  measureRepository.addRawMeasure(FILE_COMPONENT.getRef(),COVERAGE_LINE_HITS_DATA_KEY,newMeasureBuilder().create("10=2;11=3"));
  underTest.execute();
  assertThat(toEntries(measureRepository.getNewRawMeasures(FILE_COMPONENT.getRef()))).containsOnly(entryOf(NEW_LINES_TO_COVER_KEY,createMeasure(1d,null)),entryOf(NEW_UNCOVERED_LINES_KEY,createMeasure(0d,null)),entryOf(NEW_CONDITIONS_TO_COVER_KEY,createMeasure(0d,null)),entryOf(NEW_UNCOVERED_CONDITIONS_KEY,createMeasure(0d,null)));
}
