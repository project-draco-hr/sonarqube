{
  treeRootHolder.setRoot(FILE_COMPONENT);
  reportReader.putChangesets(Changesets.newBuilder().setComponentRef(FILE_COMPONENT.getRef()).addChangeset(Changesets.Changeset.newBuilder().build()).addChangeset(Changesets.Changeset.newBuilder().setDate(parseDate("2007-01-15").getTime()).build()).addChangeset(Changesets.Changeset.newBuilder().setDate(parseDate("2011-01-01").getTime()).build()).addChangesetIndexByLine(0).addChangesetIndexByLine(2).addChangesetIndexByLine(1).addChangesetIndexByLine(2).build());
  measureRepository.addRawMeasure(FILE_COMPONENT.getRef(),coverageLineHitsData,newMeasureBuilder().create("2=0;3=2;4=3"));
  underTest.execute();
  assertThat(measureRepository.getAddedRawMeasure(FILE_COMPONENT.getRef(),newLinesToCover).get().getVariations().getVariation2()).isEqualTo(2d);
  assertThat(measureRepository.getAddedRawMeasure(FILE_COMPONENT.getRef(),newLinesToCover).get().getVariations().hasVariation5()).isFalse();
  assertThat(measureRepository.getAddedRawMeasure(FILE_COMPONENT.getRef(),newUncoveredLines).get().getVariations().getVariation2()).isEqualTo(1d);
  assertThat(measureRepository.getAddedRawMeasure(FILE_COMPONENT.getRef(),newUncoveredLines).get().getVariations().hasVariation5()).isFalse();
  assertThat(measureRepository.getAddedRawMeasure(FILE_COMPONENT.getRef(),newConditionsToCover).get().getVariations().getVariation2()).isEqualTo(0d);
  assertThat(measureRepository.getAddedRawMeasure(FILE_COMPONENT.getRef(),newConditionsToCover).get().getVariations().hasVariation5()).isFalse();
  assertThat(measureRepository.getAddedRawMeasure(FILE_COMPONENT.getRef(),newUncoveredConditions).get().getVariations().getVariation2()).isEqualTo(0d);
  assertThat(measureRepository.getAddedRawMeasure(FILE_COMPONENT.getRef(),newUncoveredConditions).get().getVariations().hasVariation5()).isFalse();
}
