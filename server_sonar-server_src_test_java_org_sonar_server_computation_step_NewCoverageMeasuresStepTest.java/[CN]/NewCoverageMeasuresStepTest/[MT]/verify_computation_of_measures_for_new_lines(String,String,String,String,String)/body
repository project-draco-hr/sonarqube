{
  treeRootHolder.setRoot(FILE_COMPONENT);
  reportReader.putChangesets(Changesets.newBuilder().setComponentRef(FILE_COMPONENT.getRef()).addChangeset(Changesets.Changeset.newBuilder().build()).addChangeset(Changesets.Changeset.newBuilder().setDate(parseDate("2007-01-15").getTime()).build()).addChangeset(Changesets.Changeset.newBuilder().setDate(parseDate("2011-01-01").getTime()).build()).addChangesetIndexByLine(0).addChangesetIndexByLine(2).addChangesetIndexByLine(1).addChangesetIndexByLine(2).build());
  measureRepository.addRawMeasure(FILE_COMPONENT.getRef(),coverageLineHitsData,newMeasureBuilder().create("2=0;3=2;4=3"));
  underTest.execute();
  assertThat(toEntries(measureRepository.getAddedRawMeasures(FILE_COMPONENT.getRef()))).containsOnly(entryOf(newLinesToCover,createMeasure(2d,null)),entryOf(newUncoveredLines,createMeasure(1d,null)),entryOf(newConditionsToCover,createMeasure(0d,null)),entryOf(newUncoveredConditions,createMeasure(0d,null)));
}
