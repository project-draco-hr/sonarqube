{
  DefaultInputFile inputFile=mock(DefaultInputFile.class);
  byte[][] hashes=computeHashes(load(newSource));
  when(inputFile.lineHashes()).thenReturn(hashes);
  when(inputFile.key()).thenReturn("foo:Action.java");
  when(lastSnapshots.getLineHashes("foo:Action.java")).thenReturn(computeHexHashes(load(reference)));
  sourceHashHolder=new SourceHashHolder(inputFile,lastSnapshots);
}
