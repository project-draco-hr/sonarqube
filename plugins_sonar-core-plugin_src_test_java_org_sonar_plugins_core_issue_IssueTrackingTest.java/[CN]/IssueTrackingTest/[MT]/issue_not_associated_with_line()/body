{
  when(lastSnapshots.getSource(project)).thenReturn(load("example2-v1"));
  when(index.getSource(project)).thenReturn(load("example2-v2"));
  sourceHashHolder=new SourceHashHolder(index,lastSnapshots,project);
  DefaultIssue newIssue=newDefaultIssue("1 branch need to be covered",null,RuleKey.of("squid","AvoidCycle"),null);
  IssueDto referenceIssue=newReferenceIssue("2 branches need to be covered",null,"squid","AvoidCycle",null);
  IssueTrackingResult result=new IssueTrackingResult();
  tracking.mapIssues(newArrayList(newIssue),newArrayList(referenceIssue),sourceHashHolder,result);
  assertThat(result.matching(newIssue)).isEqualTo(referenceIssue);
}
