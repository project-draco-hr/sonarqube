{
  when(lastSnapshots.getSource(project)).thenReturn(load("example2-v1"));
  when(index.getSource(project)).thenReturn(load("example2-v2"));
  sourceHashHolder=new SourceHashHolder(index,lastSnapshots,project);
  IssueDto referenceIssue1=newReferenceIssue("SystemPrintln",5,"squid","AvoidCycle",null);
  DefaultIssue newIssue1=newDefaultIssue("SystemPrintln",6,RuleKey.of("squid","AvoidCycle"),null);
  DefaultIssue newIssue2=newDefaultIssue("SystemPrintln",10,RuleKey.of("squid","AvoidCycle"),null);
  DefaultIssue newIssue3=newDefaultIssue("SystemPrintln",14,RuleKey.of("squid","AvoidCycle"),null);
  IssueTrackingResult result=new IssueTrackingResult();
  tracking.mapIssues(Arrays.asList(newIssue1,newIssue2,newIssue3),Arrays.asList(referenceIssue1),sourceHashHolder,result);
  assertThat(result.matching(newIssue1)).isNull();
  assertThat(result.matching(newIssue2)).isSameAs(referenceIssue1);
  assertThat(result.matching(newIssue3)).isNull();
}
