{
  if (!measure.hasValueType() || !measure.hasMetricKey()) {
    throw newIllegalStateException(measure);
  }
  boolean hasValueOrData=false;
switch (measure.getValueType()) {
case DOUBLE:
    hasValueOrData=measure.hasDoubleValue();
  break;
case INT:
hasValueOrData=measure.hasIntValue();
break;
case LONG:
hasValueOrData=measure.hasLongValue();
break;
case STRING:
hasValueOrData=measure.hasStringValue();
break;
case BOOLEAN:
hasValueOrData=measure.hasBooleanValue();
break;
}
if (!hasValueOrData) {
throw newIllegalStateException(measure);
}
}
