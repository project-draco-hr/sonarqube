{
  File projectDir=temp.newFolder();
  javaUnzip(new File("test-repos/dummy-git.zip"),projectDir);
  JGitBlameCommand jGitBlameCommand=new JGitBlameCommand(new PathResolver());
  File baseDir=new File(projectDir,"dummy-git");
  fs.setBaseDir(baseDir);
  String relativePath=DUMMY_JAVA;
  DefaultInputFile inputFile=new DefaultInputFile("foo",relativePath).setFile(new File(baseDir,relativePath));
  fs.add(inputFile);
  FileUtils.write(new File(baseDir,relativePath),"modification and \n some new line",true);
  BlameOutput blameResult=mock(BlameOutput.class);
  thrown.expect(IllegalStateException.class);
  thrown.expectMessage("Unable to blame file " + relativePath + ". No blame info at line 27. Is file commited?");
  when(input.filesToBlame()).thenReturn(Arrays.<InputFile>asList(inputFile));
  jGitBlameCommand.blame(input,blameResult);
}
