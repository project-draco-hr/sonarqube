{
  ORCHESTRATOR.resetData();
  ORCHESTRATOR.getServer().restoreProfile(FileLocation.ofClasspath("/issue/with-many-rules.xml"));
  ORCHESTRATOR.getServer().provisionProject(PROJECT_KEY,PROJECT_KEY);
  ORCHESTRATOR.getServer().associateProjectToQualityProfile(PROJECT_KEY,"xoo","with-many-rules");
  runProjectAnalysis(ORCHESTRATOR,"shared/xoo-multi-modules-sample");
  ORCHESTRATOR.getServer().provisionProject(PROJECT_KEY2,PROJECT_KEY2);
  ORCHESTRATOR.getServer().associateProjectToQualityProfile(PROJECT_KEY2,"xoo","with-many-rules");
  runProjectAnalysis(ORCHESTRATOR,"shared/xoo-multi-modules-sample","sonar.projectKey",PROJECT_KEY2);
  adminIssueClient().assign(searchRandomIssue().key(),"admin");
  adminIssueClient().doTransition(searchRandomIssue().key(),"resolve");
  createManualRule();
  adminIssueClient().create(NewIssue.create().component("com.sonarsource.it.samples:multi-modules-sample:module_a:module_a1:src/main/xoo/com/sonar/it/samples/modules/a1/HelloA1.xoo").rule("manual:invalidclassname").line(3).severity("CRITICAL").message("The name of the class is invalid"));
}
