{
  PropertiesConfiguration configuration=new PropertiesConfiguration();
  configuration.setProperty(CoreProperties.CORE_AUTHENTICATOR_CLASS,FailAuthenticator.class.getName());
  configuration.setProperty(CoreProperties.CORE_AUTHENTICATOR_IGNORE_STARTUP_FAILURE,Boolean.TRUE.toString());
  AuthenticatorFactory factory=new AuthenticatorFactory(configuration,new LoginPasswordAuthenticator[]{new FakeAuthenticator(),new FailAuthenticator()});
  factory.start();
  assertThat(factory.getAuthenticator(),not(nullValue()));
}
