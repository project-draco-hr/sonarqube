{
  tester.get(ActivityService.class).write(dbSession,Activity.Type.QPROFILE,ActiveRuleChange.createFor(ActiveRuleChange.Type.ACTIVATED,ActiveRuleKey.of("java-default",RuleTesting.XOO_X1)));
  tester.get(ActivityService.class).write(dbSession,Activity.Type.QPROFILE,ActiveRuleChange.createFor(ActiveRuleChange.Type.ACTIVATED,ActiveRuleKey.of("java-toto",RuleTesting.XOO_X1)));
  dbSession.commit();
  assertThat(service.searchActivities(new QProfileActivityQuery(),new QueryContext()).getHits()).hasSize(2);
  List<QProfileActivity> result=service.searchActivities(new QProfileActivityQuery().setQprofileKeys(ImmutableSet.of("java-default")),new QueryContext()).getHits();
  assertThat(result).hasSize(1);
  assertThat(service.searchActivities(new QProfileActivityQuery().setQprofileKeys(ImmutableSet.of("java-default","java-toto")),new QueryContext()).getHits()).hasSize(2);
}
