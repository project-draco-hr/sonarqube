{
  userSessionRule.login("david").setGlobalPermissions(GlobalPermissions.QUALITY_PROFILE_ADMIN);
  db.ruleDao().getByKey(dbSession,RuleTesting.XOO_X1);
  dbSession.commit();
  tester.get(ActivityService.class).save(ActiveRuleChange.createFor(ActiveRuleChange.Type.ACTIVATED,ActiveRuleKey.of(XOO_P1_KEY,RuleTesting.XOO_X1)).setSeverity(Severity.MAJOR).setParameter("max","10").toActivity());
  Result<QProfileActivity> activities=service.searchActivities(new QProfileActivityQuery(),new SearchOptions());
  assertThat(activities.getHits()).hasSize(1);
  QProfileActivity activity=activities.getHits().get(0);
  assertThat(activity.getLogin()).isEqualTo("david");
  assertThat(activity.authorName()).isNull();
}
