{
  I18nManager i18n=mock(I18nManager.class);
  when(i18n.getPropertyKeys()).thenReturn(Sets.newHashSet("rule.pmd.Header.name","rule.checkstyle.AnnotationUseStyleCheck.name"));
  when(i18n.message(Locale.ENGLISH,"rule.pmd.Header.name",null)).thenReturn("HEADER PMD CHECK");
  when(i18n.message(Locale.ENGLISH,"rule.checkstyle.AnnotationUseStyleCheck.name",null)).thenReturn("check annotation style");
  when(i18n.message(Locale.FRENCH,"rule.checkstyle.AnnotationUseStyleCheck.name",null)).thenReturn("v??rifie le style des annotations");
  RuleI18nManager ruleI18n=new RuleI18nManager(i18n);
  ruleI18n.start();
  List<RuleI18nManager.RuleKey> result=ruleI18n.searchNames("annotation",Locale.FRENCH);
  assertThat(result.size(),Is.is(1));
  assertThat(result.get(0).getKey(),Is.is("AnnotationUseStyleCheck"));
  result=ruleI18n.searchNames("v??rifie",Locale.FRENCH);
  assertThat(result.size(),Is.is(1));
  assertThat(result.get(0).getKey(),Is.is("AnnotationUseStyleCheck"));
}
