{
  List<MetricDtoWithBestValue> metricDtosWithBestValueMeasure=from(metrics).filter(MetricDtoFunctions.isOptimizedForBestValue()).transform(new MetricDtoToMetricDtoWithBestValue(periods)).toList();
  if (metricDtosWithBestValueMeasure.isEmpty()) {
    return;
  }
  List<ComponentDtoWithSnapshotId> componentsEligibleForBestValue=from(components).filter(IsFileComponent.INSTANCE).toList();
  for (  ComponentDtoWithSnapshotId component : componentsEligibleForBestValue) {
    for (    MetricDtoWithBestValue metricWithBestValue : metricDtosWithBestValueMeasure) {
      if (measuresByComponentUuidAndMetric.get(component.uuid(),metricWithBestValue.getMetric()) == null) {
        measuresByComponentUuidAndMetric.put(component.uuid(),metricWithBestValue.getMetric(),metricWithBestValue.getBestValue());
      }
    }
  }
}
