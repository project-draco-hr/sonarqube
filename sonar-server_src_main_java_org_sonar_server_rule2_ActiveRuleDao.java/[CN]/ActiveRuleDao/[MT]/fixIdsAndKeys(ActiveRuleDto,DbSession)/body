{
  if (item.getKey() != null) {
    if (item.getProfileId() == null) {
      QualityProfileDto profile=profileDao.selectByNameAndLanguage(item.getKey().qProfile().name(),item.getKey().qProfile().lang(),session);
      item.setProfileId(profile.getId());
    }
    if (item.getRulId() == null) {
      RuleDto rule=ruleDao.getByKey(item.getKey().ruleKey(),session);
      item.setRuleId(rule.getId());
    }
  }
 else {
    if (item.getProfileId() != null && item.getRulId() != null) {
      QualityProfileDto profile=profileDao.selectById(item.getProfileId(),session);
      RuleDto rule=ruleDao.getById(item.getRulId(),session);
      RuleKey ruleKey=ruleDao.getKey(rule,session);
      item.setKey(ActiveRuleKey.of(QualityProfileKey.of(profile.getName(),profile.getLanguage()),ruleKey));
    }
  }
}
