{
  String[] cpdExclusions=settings.getStringArray(CoreProperties.CPD_EXCLUSIONS);
  logExclusions(cpdExclusions,LOG);
  Iterable<InputFile> sourceFiles=fs.inputFiles(FilePredicates.and(FilePredicates.hasType(InputFile.Type.MAIN),FilePredicates.hasLanguage(languageKey),FilePredicates.doesNotMatchPathPatterns(cpdExclusions)));
  if (!sourceFiles.iterator().hasNext()) {
    return;
  }
  SonarDuplicationsIndex index=createIndex(project,sourceFiles);
  detect(index,context,sourceFiles);
}
