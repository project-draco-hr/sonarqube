{
  String[] cpdExclusions=settings.getStringArray(CoreProperties.CPD_EXCLUSIONS);
  logExclusions(cpdExclusions,LOG);
  List<File> sourceFiles=fileSystem.files(FileQuery.onSource().onLanguage(project.getLanguageKey()).withExclusions(cpdExclusions));
  if (sourceFiles.isEmpty()) {
    return;
  }
  SonarDuplicationsIndex index=createIndex(project,sourceFiles);
  detect(index,context,project,sourceFiles);
}
