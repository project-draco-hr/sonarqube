{
  Map<String,Object> inconsistentParams=Maps.newHashMap();
  inconsistentParams.put("user","my_login");
  inconsistentParams.put("component","org.sample.Sample");
  inconsistentParams.put("permission","invalid");
  PermissionChangeQuery query=PermissionChangeQuery.buildFromParams(inconsistentParams);
  thrown.expect(BadRequestException.class);
  thrown.expectMessage("Invalid permission key invalid. Valid ones are : [admin, codeviewer, user]");
  query.validate();
}
