{
  when(lastSnapshots.getSource(project)).thenReturn(load("example2-v1"));
  String source=load("example2-v2");
  RuleFailureModel referenceViolation1=newReferenceViolation("2 branches need to be covered",null,50);
  Violation newViolation1=newViolation("1 branch need to be covered",null,50);
  Map<Violation,RuleFailureModel> mapping=decorator.mapViolations(Arrays.asList(newViolation1),Arrays.asList(referenceViolation1),source,project);
  assertThat(newViolation1.isNew(),is(false));
  assertThat(mapping.get(newViolation1),equalTo(referenceViolation1));
}
