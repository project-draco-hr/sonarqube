{
  String componentUuid=wsRequest.param(PARAM_COMPONENT_UUID);
  String componentQuery=wsRequest.param(PARAM_COMPONENT_QUERY);
  if (componentUuid != null && componentQuery != null) {
    throw new BadRequestException(format("Only one of parameters must be set: %s or %s",PARAM_COMPONENT_UUID,PARAM_COMPONENT_QUERY));
  }
  if (componentUuid != null) {
    query.setComponentUuid(componentUuid);
  }
  if (componentQuery != null) {
    ComponentQuery componentDtoQuery=new ComponentQuery(dbClient.getDatabase(),componentQuery,Qualifiers.PROJECT,Qualifiers.VIEW);
    List<ComponentDto> componentDtos=dbClient.componentDao().selectByQuery(dbSession,componentDtoQuery,0,CeActivityQuery.MAX_COMPONENT_UUIDS);
    query.setComponentUuids(Lists.transform(componentDtos,ComponentDtoFunctions.toUuid()));
  }
}
