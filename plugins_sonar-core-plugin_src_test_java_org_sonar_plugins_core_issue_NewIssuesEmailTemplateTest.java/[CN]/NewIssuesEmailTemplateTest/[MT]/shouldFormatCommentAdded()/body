{
  Notification notification=new Notification("new-issues").setFieldValue("count","32").setFieldValue("projectName","Foo").setFieldValue("projectKey","org.sonar.foo:foo").setFieldValue("projectId","45");
  EmailMessage message=template.format(notification);
  assertThat(message.getMessageId(),is("new-issues/45"));
  assertThat(message.getSubject(),is("New issues for project Foo"));
  assertThat(message.getMessage(),is("" + "Project: Foo\n" + "32 new issues\n"+ "\n"+ "See it in Sonar: http://nemo.sonarsource.org/drilldown/measures/org.sonar.foo:foo?metric=new_violations\n"));
}
