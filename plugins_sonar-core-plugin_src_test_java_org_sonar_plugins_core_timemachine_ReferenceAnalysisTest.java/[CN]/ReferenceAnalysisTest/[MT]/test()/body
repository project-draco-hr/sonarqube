{
  setupData("shared");
  ReferenceAnalysis referenceAnalysis=new ReferenceAnalysis(getSession());
  Resource resource=new JavaFile("");
  resource.setEffectiveKey("project:org.foo.Bar");
  assertThat(referenceAnalysis.getViolations(resource).size(),is(1));
  assertThat(referenceAnalysis.getSource(resource),is("this is the file content"));
  resource.setEffectiveKey("project:no-such-resource");
  assertThat(referenceAnalysis.getViolations(resource).size(),is(0));
  assertThat(referenceAnalysis.getSource(resource),is(""));
}
