{
  validateManualRule(newRule);
  RuleKey customRuleKey=RuleKey.of(RuleDoc.MANUAL_REPOSITORY,newRule.ruleKey());
  RuleDto existingRule=loadRule(customRuleKey,dbSession);
  if (existingRule != null) {
    updateExistingRule(existingRule,newRule,dbSession);
  }
 else {
    createManualRule(customRuleKey,newRule,dbSession);
  }
  dbSession.commit();
  return customRuleKey;
}
