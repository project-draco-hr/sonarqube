{
  final List<org.sonar.api.rules.Rule> inputRules=buildRulesFixture();
  List<ActiveRule> activeRulesExpected=buildActiveRulesFixture(inputRules);
  List<ActiveRule> activeRules=new ArrayList<ActiveRule>();
  PmdRuleset ruleset=buildModuleTreeFixture();
  repository.buildActiveRulesFromModuleTree(ruleset,activeRules,inputRules);
  assertThat(activeRulesExpected.size(),is(activeRules.size()));
  assertActiveRulesAreEquals(activeRulesExpected,activeRules);
}
