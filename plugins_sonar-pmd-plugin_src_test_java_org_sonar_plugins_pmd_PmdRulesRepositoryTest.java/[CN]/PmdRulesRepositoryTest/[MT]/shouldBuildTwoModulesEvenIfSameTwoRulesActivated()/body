{
  org.sonar.api.rules.Rule dbRule1=new org.sonar.api.rules.Rule();
  dbRule1.setPluginName(CoreProperties.PMD_PLUGIN);
  dbRule1.setConfigKey("rulesets/coupling.xml/CouplingBetweenObjects");
  ActiveRule activeRule1=new ActiveRule(null,dbRule1,RulePriority.CRITICAL);
  org.sonar.api.rules.Rule dbRule2=new org.sonar.api.rules.Rule();
  dbRule2.setPluginName(CoreProperties.PMD_PLUGIN);
  dbRule2.setConfigKey("rulesets/coupling.xml/CouplingBetweenObjects");
  ActiveRule activeRule2=new ActiveRule(null,dbRule2,RulePriority.CRITICAL);
  PmdRuleset tree=repository.buildModuleTree(Arrays.asList(activeRule1,activeRule2));
  assertThat(tree.getRules().size(),is(2));
  PmdRule rule1=tree.getRules().get(0);
  assertThat(rule1.getRef(),is("rulesets/coupling.xml/CouplingBetweenObjects"));
  PmdRule rule2=tree.getRules().get(1);
  assertThat(rule2.getRef(),is("rulesets/coupling.xml/CouplingBetweenObjects"));
}
