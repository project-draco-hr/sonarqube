{
  org.sonar.api.rules.Rule rule1=new org.sonar.api.rules.Rule();
  rule1.setPluginName(CoreProperties.PMD_PLUGIN);
  rule1.setConfigKey("rulesets/design.xml/CloseResource");
  ActiveRule activeRule1=new ActiveRule(null,rule1,RulePriority.MAJOR);
  org.sonar.api.rules.Rule rule2=new org.sonar.api.rules.Rule();
  rule2.setPluginName(CoreProperties.PMD_PLUGIN);
  rule2.setConfigKey("rulesets/braces.xml/IfElseStmtsMustUseBraces");
  ActiveRule activeRule2=new ActiveRule(null,rule2,RulePriority.MAJOR);
  Ruleset ruleset=repository.buildModuleTree(Arrays.asList(activeRule1,activeRule2));
  assertThat(ruleset.getRules().size(),is(2));
  assertThat(ruleset.getRules().get(0).getRef(),is("rulesets/design.xml/CloseResource"));
  assertThat(ruleset.getRules().get(1).getRef(),is("rulesets/braces.xml/IfElseStmtsMustUseBraces"));
}
