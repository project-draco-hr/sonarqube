{
  FunctorUtils.validate(predicates);
  FunctorUtils.validate(transformers);
  if (predicates.length != transformers.length) {
    throw new IllegalArgumentException("The predicate and transformer arrays must be the same size");
  }
  if (predicates.length == 0) {
    return (defaultTransformer == null ? ConstantTransformer.NULL_INSTANCE : defaultTransformer);
  }
  predicates=FunctorUtils.copy(predicates);
  transformers=FunctorUtils.copy(transformers);
  return new SwitchTransformer(predicates,transformers,defaultTransformer);
}
