{
  Command cl=Command.create("svn");
  for (  Entry<String,String> env : System.getenv().entrySet()) {
    cl.setEnvironmentVariable(env.getKey(),env.getValue());
  }
  cl.setEnvironmentVariable("LC_MESSAGES","en");
  cl.setDirectory(baseDir);
  cl.addArgument("blame");
  cl.addArgument("--xml");
  if (configuration.useMergeHistory()) {
    cl.addArgument("--use-merge-history");
  }
  cl.addArgument("--non-interactive");
  cl.addArgument("-x");
  cl.addArgument("-w");
  String configDir=configuration.configDir();
  if (configDir != null) {
    cl.addArgument("--config-dir");
    cl.addArgument(configDir);
  }
  String username=configuration.username();
  if (username != null) {
    cl.addArgument("--username");
    cl.addMaskedArgument(username);
    String password=configuration.password();
    if (password != null) {
      cl.addArgument("--password");
      cl.addMaskedArgument(password);
    }
  }
  if (configuration.trustServerCert()) {
    cl.addArgument("--trust-server-cert");
  }
  cl.addArgument(filename);
  return cl;
}
