{
  CodeReaderConfiguration configuration=new CodeReaderConfiguration();
  configuration.setTabWidth(4);
  CodeBuffer reader=new CodeBuffer("pa\n\tc",configuration);
  assertEquals('\n',reader.charAt(2));
  assertEquals('\t',reader.charAt(3));
  assertEquals('c',reader.charAt(4));
  assertThat(reader.getColumnPosition(),is(0));
  assertThat(reader.getLinePosition(),is(1));
  reader.pop();
  reader.pop();
  assertThat(reader.getColumnPosition(),is(2));
  assertThat(reader.getLinePosition(),is(1));
  reader.peek();
  reader.lastChar();
  assertThat(reader.getColumnPosition(),is(2));
  assertThat(reader.getLinePosition(),is(1));
  reader.pop();
  assertThat(reader.getColumnPosition(),is(0));
  assertThat(reader.getLinePosition(),is(2));
  reader.pop();
  assertThat(reader.getColumnPosition(),is(4));
  assertThat(reader.getLinePosition(),is(2));
  reader.pop();
  assertThat(reader.getColumnPosition(),is(5));
  assertThat(reader.getLinePosition(),is(2));
}
