{
  when(authorizationDao.selectAuthorizedRootProjectsIds(anyInt(),anyString(),any(SqlSession.class))).thenReturn(Collections.<Integer>emptySet());
  IssueQuery query=IssueQuery.builder().pageSize(100).requiredRole(UserRole.USER).build();
  IssueDto issue1=new IssueDto().setId(1L).setRuleId(50).setResourceId(123).setProjectId(100).setComponentKey_unit_test_only("Action.java").setProjectKey_unit_test_only("struts").setRuleKey_unit_test_only("squid","AvoidCycle").setStatus("OPEN").setResolution("OPEN");
  when(issueDao.selectByIds(anyCollection(),any(IssueQuery.Sort.class),anyBoolean(),any(SqlSession.class))).thenReturn(newArrayList(issue1));
  finder.find(query);
  verify(issueDao).selectIssueAndProjectIds(eq(query),eq(Collections.<Integer>emptySet()),any(SqlSession.class));
}
