{
  JavaFile javaFile=JavaFile.fromRelativePath("UndocumentedApi.java",true);
  when(context.isIndexed(javaFile,true)).thenReturn(true);
  Mockito.doThrow(new SonarException("Duplicate source for resource")).when(context).saveSource(any(JavaFile.class),anyString());
  thrown.expect(SonarException.class);
  thrown.expectMessage("Duplicate source for resource");
  thrown.expectMessage(", on file:");
  thrown.expectMessage("UndocumentedApi.java");
  importer.importSource(context,javaFile,inputFile,Charset.defaultCharset());
}
