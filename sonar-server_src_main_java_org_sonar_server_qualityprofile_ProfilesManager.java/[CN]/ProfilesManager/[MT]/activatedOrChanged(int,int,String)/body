{
  RuleInheritanceActions actions=new RuleInheritanceActions();
  ActiveRule parentActiveRule=getSession().getEntity(ActiveRule.class,activeRuleId);
  if (parentActiveRule.isInherited()) {
    parentActiveRule.setInheritance(ActiveRule.OVERRIDES);
    getSession().saveWithoutFlush(parentActiveRule);
  }
  actions.addToIndex(activeRuleId);
  for (  RulesProfile child : getChildren(parentProfileId)) {
    actions.add(activateOrChange(child,parentActiveRule,userName));
  }
  getSession().commit();
  dryRunCache.reportGlobalModification();
  return actions;
}
