{
  BatchPluginRepository pluginRepository=mock(BatchPluginRepository.class);
  when(pluginRepository.getPlugins()).thenReturn(Arrays.asList((Plugin)new SonarPlugin(){
    public List getExtensions(){
      return Arrays.asList(InvalidCoverageExtension.class);
    }
  }
));
  Module module=new FakeModule().init();
  BatchExtensionInstaller installer=new BatchExtensionInstaller(pluginRepository,new EnvironmentInformation("ant","1.7"),new DryRun(false));
  installer.install(module);
}
