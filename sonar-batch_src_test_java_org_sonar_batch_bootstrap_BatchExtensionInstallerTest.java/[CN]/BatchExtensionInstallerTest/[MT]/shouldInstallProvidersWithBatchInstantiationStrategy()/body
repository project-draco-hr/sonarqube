{
  BatchPluginRepository pluginRepository=mock(BatchPluginRepository.class);
  when(pluginRepository.getPluginsByMetadata()).thenReturn(newPlugin(BatchServiceProvider.class,ProjectServiceProvider.class));
  Module module=new FakeModule().init();
  BatchExtensionInstaller installer=new BatchExtensionInstaller(pluginRepository,new EnvironmentInformation("ant","1.7"),new DryRun(false));
  installer.install(module);
  assertThat(module.getComponentByType(BatchService.class),not(nullValue()));
  assertThat(module.getComponentByType(ProjectService.class),nullValue());
  assertThat(module.getComponentByType(ServerService.class),nullValue());
}
