{
  writer.writeDuplicationBlocks(COMPONENT_REF,of(DUPLICATION_BLOCK));
  try (CloseableIterator<BatchReport.DuplicationBlock> res=underTest.readComponentDuplicationBlocks(COMPONENT_REF)){
    assertThat(res.next()).isEqualTo(DUPLICATION_BLOCK);
    assertThat(res.hasNext()).isFalse();
  }
 }
