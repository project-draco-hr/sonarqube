{
  SemaphoreDao dao=mock(SemaphoreDao.class);
  SemaphoreUpdater updater=mock(SemaphoreUpdater.class);
  Semaphores.Semaphore semaphore=new Semaphores.Semaphore();
  when(dao.acquire(anyString(),anyInt())).thenReturn(semaphore);
  SemaphoresImpl impl=new SemaphoresImpl(dao,updater);
  impl.acquire("do-xxx",50000,10);
  verify(dao).acquire("do-xxx",50000);
  impl.acquire("do-xxx");
  verify(dao).acquire("do-xxx");
  impl.release("do-xxx");
  verify(dao).release("do-xxx");
}
