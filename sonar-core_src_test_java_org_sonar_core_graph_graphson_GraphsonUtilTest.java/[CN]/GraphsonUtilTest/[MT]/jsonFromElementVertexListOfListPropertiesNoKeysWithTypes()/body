{
  Vertex v=this.graph.addVertex(1);
  List<Integer> list=new ArrayList<Integer>();
  list.add(1);
  list.add(1);
  list.add(1);
  List<List<Integer>> listList=new ArrayList<List<Integer>>();
  listList.add(list);
  v.setProperty("keyList",listList);
  JSONObject json=GraphsonUtil.jsonFromElement(v,null,GraphonMode.EXTENDED);
  assertThat(json).isNotNull();
  assertThat(json.get(GraphSONTokens._ID)).isEqualTo("1");
  assertThat(json.containsKey("keyList")).isTrue();
  JSONObject listWithTypeAsJson=(JSONObject)json.get("keyList");
  assertThat(listWithTypeAsJson.containsKey(GraphSONTokens.TYPE)).isTrue();
  assertThat(listWithTypeAsJson.get(GraphSONTokens.TYPE)).isEqualTo(GraphSONTokens.TYPE_LIST);
  assertThat(listWithTypeAsJson.containsKey(GraphSONTokens.VALUE)).isTrue();
  JSONArray array=(JSONArray)listWithTypeAsJson.get(GraphSONTokens.VALUE);
  JSONObject obj=(JSONObject)array.get(0);
  JSONArray listAsJSON=(JSONArray)obj.get(GraphSONTokens.VALUE);
  assertThat(listAsJSON).isNotNull();
  assertThat(listAsJSON).hasSize(3);
  for (int ix=0; ix < listAsJSON.size(); ix++) {
    JSONObject valueAsJson=(JSONObject)listAsJSON.get(ix);
    assertThat(valueAsJson).isNotNull();
    assertThat(valueAsJson.containsKey(GraphSONTokens.TYPE)).isTrue();
    assertThat(valueAsJson.get(GraphSONTokens.TYPE)).isEqualTo(GraphSONTokens.TYPE_INTEGER);
    assertThat(valueAsJson.containsKey(GraphSONTokens.VALUE)).isTrue();
    assertThat(valueAsJson.get(GraphSONTokens.VALUE)).isEqualTo(1);
  }
}
