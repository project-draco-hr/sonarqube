{
  componentDb.insertProjectAndSnapshot(newProjectDto().setName("apache struts").setUuid("P1"));
  componentDb.insertProjectAndSnapshot(newProjectDto().setName("apache zookeeper").setUuid("P2"));
  componentDb.insertProjectAndSnapshot(newProjectDto().setName("eclipse").setUuid("P3"));
  dbTester.commit();
  componentDb.indexProjects();
  userSession.setGlobalPermissions(GlobalPermissions.SYSTEM_ADMIN);
  insertActivity("T1","P1",CeActivityDto.Status.SUCCESS);
  insertActivity("T2","P2",CeActivityDto.Status.SUCCESS);
  insertActivity("T3","P3",CeActivityDto.Status.SUCCESS);
  ActivityResponse activityResponse=call(ws.newRequest().setParam(PARAM_COMPONENT_QUERY,"apac"));
  assertThat(activityResponse.getTasksList()).extracting("id").containsOnly("T1","T2");
}
