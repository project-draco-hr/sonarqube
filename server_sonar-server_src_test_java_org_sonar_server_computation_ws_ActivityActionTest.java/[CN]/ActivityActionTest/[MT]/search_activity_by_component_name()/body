{
  componentDb.insertProjectAndSnapshot(newProjectDto().setName("apache struts").setUuid("P1"));
  componentDb.insertProjectAndSnapshot(newProjectDto().setName("apache zookeeper").setUuid("P2"));
  componentDb.insertProjectAndSnapshot(newProjectDto().setName("eclipse").setUuid("P3"));
  dbTester.commit();
  componentDb.indexProjects();
  userSession.setGlobalPermissions(GlobalPermissions.SYSTEM_ADMIN);
  insertActivity("T1","P1",CeActivityDto.Status.SUCCESS);
  insertActivity("T2","P2",CeActivityDto.Status.SUCCESS);
  insertActivity("T3","P3",CeActivityDto.Status.SUCCESS);
  TestResponse wsResponse=ws.newRequest().setParam("componentQuery","apac").setMediaType(MediaTypes.PROTOBUF).execute();
  WsCe.ActivityResponse activityResponse=WsCe.ActivityResponse.parseFrom(wsResponse.getInputStream());
  assertThat(activityResponse.getTasksList()).extracting("id").containsOnly("T1","T2");
}
