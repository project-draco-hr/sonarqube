{
  ComponentDto component=dbClient.componentDao().selectNonNullByUuid(session,issue.componentUuid());
  Long parentProjectId=component.parentProjectId();
  Optional<ComponentDto> parentProject=parentProjectId != null ? dbClient.componentDao().selectById(session,parentProjectId) : Optional.<ComponentDto>absent();
  ComponentDto project=dbClient.componentDao().selectNonNullByUuid(session,component.projectUuid());
  String projectName=project.longName() != null ? project.longName() : project.name();
  boolean displayParentProjectName=parentProject.isPresent() && !parentProject.get().getId().equals(project.getId());
  String parentProjectKey=displayParentProjectName ? parentProject.get().key() : null;
  String parentProjectName=displayParentProjectName ? projectName(parentProject.get()) : null;
  json.prop("component",component.key()).prop("componentLongName",component.longName()).prop("componentQualifier",component.qualifier()).prop("componentEnabled",component.isEnabled()).prop("project",project.key()).prop("projectName",projectName).prop("subProject",parentProjectKey).prop("subProjectName",parentProjectName);
}
