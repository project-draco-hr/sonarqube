{
  IdentityProvider identityProvider=providersByKey.get(key);
  if (identityProvider != null && IsEnabledFilter.INSTANCE.apply(identityProvider)) {
    return identityProvider;
  }
  throw new IllegalArgumentException(String.format("Identity provider %s does not exist or is not enabled",key));
}
