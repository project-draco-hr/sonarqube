{
  ComponentDto project=insertComponent(ComponentTesting.newProjectDto("ABCD").setKey("MyProject"));
  setDefaultProjectPermission(project);
  ComponentDto file=insertComponent(ComponentTesting.newFileDto(project,"BCDE").setKey("MyComponent"));
  insertIssue(IssueTesting.newDto(newRule(),file,project).setKee("82fd47d4-b650-4037-80bc-7b112bd4eac2"));
  ComponentDto view=insertComponent(ComponentTesting.newProjectDto("CDEF").setQualifier(Qualifiers.VIEW).setKey("MyView"));
  indexView(view.uuid(),newArrayList(project.uuid()));
  ComponentDto subView=insertComponent(ComponentTesting.newProjectDto("DEFG").setQualifier(Qualifiers.SUBVIEW).setKey("MySubView"));
  indexView(subView.uuid(),newArrayList(project.uuid()));
  setAnyoneProjectPermission(view,UserRole.USER);
  MockUserSession.set().setLogin("john").addComponentUuidPermission(UserRole.CODEVIEWER,view.uuid(),subView.uuid());
  wsTester.newGetRequest(IssuesWs.API_ENDPOINT,SearchAction.SEARCH_ACTION).setParam(IssueFilterParameters.COMPONENT_UUIDS,subView.uuid()).execute().assertJson(this.getClass(),"no_issue.json",false);
}
