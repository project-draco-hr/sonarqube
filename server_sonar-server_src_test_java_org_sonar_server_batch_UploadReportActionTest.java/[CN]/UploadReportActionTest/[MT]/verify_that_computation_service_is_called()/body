{
  Response response=mock(Response.class);
  Request request=mock(Request.class);
  when(request.mandatoryParam(UploadReportAction.PARAM_PROJECT_KEY)).thenReturn(DEFAULT_PROJECT_KEY);
  when(request.mandatoryParam(UploadReportAction.PARAM_SNAPSHOT)).thenReturn("123");
  sut.handle(request,response);
  verify(queue).add(DEFAULT_PROJECT_KEY,123L,null);
  verify(analysisTaskLauncher).startAnalysisTaskNow();
}
