{
  ResourceModel persistedProject=databaseSession.getSingleResult(ResourceModel.class,"key",projectKey,"enabled",true);
  if (persistedProject != null) {
    Snapshot lastSnapshot=databaseSession.getSingleResult(Snapshot.class,"resourceId",persistedProject.getId(),"last",true);
    return lastSnapshot == null || lastSnapshot.getCreatedAt().before(analysisDate);
  }
  return true;
}
