{
  monitor=newDefaultMonitor();
  HttpProcessClient p1=new HttpProcessClient("p1"), p2=new HttpProcessClient("p2",-1,NetworkUtils.freePort());
  try {
    monitor.start(Arrays.asList(p1.newCommand(),p2.newCommand()));
    fail();
  }
 catch (  Exception expected) {
    assertThat(p1.wasReady()).isTrue();
    assertThat(p2.wasReady()).isFalse();
    assertThat(p1.wasGracefullyTerminated()).isTrue();
    assertThat(p2.wasGracefullyTerminated()).isTrue();
  }
}
