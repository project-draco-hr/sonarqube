{
  monitor=newDefaultMonitor();
  int jmxPort=NetworkUtils.freePort();
  HttpProcessClient p1=new HttpProcessClient("p1",NetworkUtils.freePort(),jmxPort);
  HttpProcessClient p2=new HttpProcessClient("p2",NetworkUtils.freePort(),jmxPort);
  try {
    monitor.start(Arrays.asList(p1.newCommand(),p2.newCommand()));
    fail();
  }
 catch (  Exception expected) {
    assertThat(p1.wasReady()).isTrue();
    assertThat(p2.wasReady()).isFalse();
    assertThat(p1.isReady()).isFalse();
    assertThat(p2.isReady()).isFalse();
  }
}
