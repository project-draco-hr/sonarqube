{
  monitor=newDefaultMonitor();
  HttpProcessClient client=new HttpProcessClient("test");
  monitor.start(Arrays.asList(client.newCommand()));
  assertThat(client).isReady().wasStartedBefore(System.currentTimeMillis());
  monitor.stop();
  assertThat(client).isNotReady().wasGracefullyTerminated();
  assertThat(monitor.getState()).isEqualTo(State.STOPPED);
}
