{
  monitor=newDefaultMonitor();
  HttpProcessClient client=new HttpProcessClient("test");
  monitor.start(Arrays.asList(client.newCommand()));
  assertThat(client.isReady()).isTrue();
  assertThat(client.wasReadyAt()).isLessThanOrEqualTo(System.currentTimeMillis());
  monitor.stop();
  assertThat(client.isReady()).isFalse();
  assertThat(client.wasGracefullyTerminated()).isTrue();
  assertThat(monitor.getState()).isEqualTo(State.STOPPED);
}
