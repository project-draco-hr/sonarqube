{
  thrown.expect(SonarException.class);
  ServerClient server=mock(ServerClient.class);
  doThrow(new SonarException()).when(server).request("/deploy/plugins/index.txt");
  new PluginDownloader(mock(FileCache.class),server).downloadPluginIndex();
}
