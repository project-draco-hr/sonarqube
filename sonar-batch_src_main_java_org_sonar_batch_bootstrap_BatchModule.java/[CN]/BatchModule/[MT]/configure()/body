{
  addComponent(ProjectConfiguration.class);
  addComponent(ProjectTree.class);
  addComponent(DefaultResourceCreationLock.class);
  addComponent(DefaultIndex.class);
  if (dryRun) {
    addComponent(ReadOnlyPersistenceManager.class);
  }
 else {
    addComponent(DefaultPersistenceManager.class);
    addComponent(DependencyPersister.class);
    addComponent(EventPersister.class);
    addComponent(LinkPersister.class);
    addComponent(MeasurePersister.class);
    addComponent(MemoryOptimizer.class);
    addComponent(DefaultResourcePersister.class);
    addComponent(SourcePersister.class);
  }
  addComponent(Plugins.class);
  addComponent(ServerHttpClient.class);
  addComponent(MeasuresDao.class);
  addComponent(CacheRuleFinder.class);
  addComponent(CacheMetricFinder.class);
  addComponent(PastSnapshotFinderByDate.class);
  addComponent(PastSnapshotFinderByDays.class);
  addComponent(PastSnapshotFinderByPreviousAnalysis.class);
  addComponent(PastSnapshotFinderByVersion.class);
  addComponent(PastMeasuresLoader.class);
  addComponent(PastSnapshotFinder.class);
  addComponent(DefaultNotificationManager.class);
  addComponent(DefaultUserFinder.class);
  addCoreMetrics();
  addBatchExtensions();
}
