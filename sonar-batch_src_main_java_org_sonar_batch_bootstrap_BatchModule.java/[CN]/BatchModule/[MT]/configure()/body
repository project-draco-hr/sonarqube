{
  addCoreSingleton(ProjectTree.class);
  addCoreSingleton(ProjectFilter.class);
  addCoreSingleton(ProjectConfigurator.class);
  addCoreSingleton(DefaultResourceCreationLock.class);
  addCoreSingleton(DefaultIndex.class);
  addCoreSingleton(DefaultFileLinesContextFactory.class);
  if (dryRun) {
    addCoreSingleton(ReadOnlyPersistenceManager.class);
  }
 else {
    addCoreSingleton(DefaultPersistenceManager.class);
    addCoreSingleton(DependencyPersister.class);
    addCoreSingleton(EventPersister.class);
    addCoreSingleton(LinkPersister.class);
    addCoreSingleton(MeasurePersister.class);
    addCoreSingleton(MemoryOptimizer.class);
    addCoreSingleton(DefaultResourcePersister.class);
    addCoreSingleton(SourcePersister.class);
  }
  addCoreSingleton(Plugins.class);
  addCoreSingleton(ServerHttpClient.class);
  addCoreSingleton(MeasuresDao.class);
  addCoreSingleton(CacheRuleFinder.class);
  addCoreSingleton(CacheMetricFinder.class);
  addCoreSingleton(PastSnapshotFinderByDate.class);
  addCoreSingleton(PastSnapshotFinderByDays.class);
  addCoreSingleton(PastSnapshotFinderByPreviousAnalysis.class);
  addCoreSingleton(PastSnapshotFinderByVersion.class);
  addCoreSingleton(PastSnapshotFinderByPreviousVersion.class);
  addCoreSingleton(PastMeasuresLoader.class);
  addCoreSingleton(PastSnapshotFinder.class);
  addCoreSingleton(DefaultNotificationManager.class);
  addCoreSingleton(DefaultUserFinder.class);
  addCoreSingleton(ResourceTypes.class);
  addCoreMetrics();
  addBatchExtensions();
}
