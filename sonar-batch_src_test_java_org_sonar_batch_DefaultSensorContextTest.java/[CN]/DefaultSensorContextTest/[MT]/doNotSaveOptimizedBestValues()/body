{
  setup("doNotSaveOptimizedBestValues");
  assertThat(CoreMetrics.VIOLATIONS.getBestValue(),is(0.0));
  assertThat(CoreMetrics.BLOCKER_VIOLATIONS.getBestValue(),is(0.0));
  assertThat(CoreMetrics.VIOLATIONS.isOptimizedBestValue(),is(true));
  assertThat(CoreMetrics.BLOCKER_VIOLATIONS.isOptimizedBestValue(),is(true));
  final Resource javaFile=new JavaFile("org.foo.Bar");
  assertThat(context.getMeasure(javaFile,CoreMetrics.VIOLATIONS),nullValue());
  context.saveMeasure(javaFile,CoreMetrics.VIOLATIONS,60.0);
  assertThat(context.getMeasure(javaFile,CoreMetrics.VIOLATIONS).getValue(),is(60.0));
  assertThat(context.getMeasure(javaFile,CoreMetrics.BLOCKER_VIOLATIONS),nullValue());
  context.saveMeasure(javaFile,CoreMetrics.BLOCKER_VIOLATIONS,0.0);
  assertThat(context.getMeasure(javaFile,CoreMetrics.BLOCKER_VIOLATIONS).getValue(),is(0.0));
  check("doNotSaveOptimizedBestValues","projects","snapshots","project_measures");
}
