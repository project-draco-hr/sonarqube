{
  String componentKey="project:src/File.xoo";
  MockUserSession.set().setLogin("polop").addComponentPermission(UserRole.CODEVIEWER,"palap",componentKey);
  when(componentDao.getByKey(any(DbSession.class),eq(componentKey))).thenThrow(NotFoundException.class);
  try {
    WsTester.TestRequest request=tester.newGetRequest("api/sources","hash").setParam("key",componentKey);
    request.execute();
    fail();
  }
 catch (  Exception e) {
    assertThat(e).isInstanceOf(NotFoundException.class);
  }
}
