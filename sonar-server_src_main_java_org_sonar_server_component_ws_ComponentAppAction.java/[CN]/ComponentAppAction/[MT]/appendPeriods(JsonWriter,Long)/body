{
  json.name("periods").beginArray();
  SnapshotDto snapshotDto=resourceDao.getLastSnapshotByResourceId(projectId);
  if (snapshotDto != null) {
    for (int i=1; i <= 5; i++) {
      String mode=snapshotDto.getPeriodMode(i);
      if (mode != null) {
        String label=periods.label(mode,snapshotDto.getPeriodModeParameter(i),snapshotDto.getPeriodDate(i));
        if (label != null) {
          json.beginObject().prop(Integer.toString(i),label).endObject();
        }
      }
    }
  }
  json.endArray();
}
