{
  List<PropertyDto> propertyDtos=dbClient.getDao(PropertiesDao.class).selectByQuery(PropertyQuery.builder().setKey("favourite").setComponentId(component.getId()).setUserId(userSession.userId()).build(),session);
  boolean isFavourite=propertyDtos.size() == 1;
  json.prop("key",component.key());
  json.prop("path",component.path());
  json.prop("name",component.name());
  json.prop("q",component.qualifier());
  Component subProject=componentById(component.subProjectId(),session);
  json.prop("subProjectName",subProject != null ? subProject.longName() : null);
  Component project=componentById(component.projectId(),session);
  json.prop("projectName",project.longName());
  json.prop("fav",isFavourite);
  json.prop("scmAvailable",sourceService.hasScmData(component.key(),session));
}
