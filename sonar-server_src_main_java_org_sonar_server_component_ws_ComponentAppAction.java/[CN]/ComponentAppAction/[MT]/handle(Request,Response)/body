{
  String fileKey=request.mandatoryParam(KEY);
  UserSession userSession=UserSession.get();
  JsonWriter json=response.newJsonWriter();
  json.beginObject();
  DbSession session=dbClient.openSession(false);
  try {
    ComponentDto component=dbClient.componentDao().getNullableByKey(session,fileKey);
    if (component == null) {
      throw new NotFoundException(String.format("Component '%s' does not exists.",fileKey));
    }
    userSession.checkComponentPermission(UserRole.USER,fileKey);
    appendComponent(json,component,userSession,session);
    appendPermissions(json,component,userSession);
    appendPeriods(json,component.projectId(),session);
    appendIssuesAggregation(json,component.key(),session);
    appendMeasures(json,component,session);
    appendExtensions(json,component,userSession);
  }
  finally {
    MyBatis.closeQuietly(session);
  }
  json.endObject();
  json.close();
}
