{
  Map<String,ClassLoader> bundleToClassLoaders=Maps.newHashMap();
  bundleToClassLoaders.put(BUNDLE_PACKAGE + "core",getClass().getClassLoader());
  bundleToClassLoaders.put(BUNDLE_PACKAGE + "checkstyle",getClass().getClassLoader());
  bundleToClassLoaders.put(BUNDLE_PACKAGE + "sqale",getClass().getClassLoader());
  I18nManager i18n=new I18nManager(bundleToClassLoaders);
  i18n.start();
  assertThat(i18n.extractBundleFromKey("by"),Is.is(BUNDLE_PACKAGE + "core"));
  assertThat(i18n.extractBundleFromKey("violations_drilldown.page"),Is.is(BUNDLE_PACKAGE + "core"));
  assertThat(i18n.extractBundleFromKey("checkstyle.rule1.name"),Is.is(BUNDLE_PACKAGE + "checkstyle"));
  assertThat(i18n.extractBundleFromKey("sqale.console.page"),Is.is(BUNDLE_PACKAGE + "sqale"));
}
