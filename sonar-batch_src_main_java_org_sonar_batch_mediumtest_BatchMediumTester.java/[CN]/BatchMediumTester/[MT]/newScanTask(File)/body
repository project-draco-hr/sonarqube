{
  Properties prop=new Properties();
  try (Reader reader=new InputStreamReader(new FileInputStream(sonarProps),Charsets.UTF_8)){
    prop.load(reader);
  }
 catch (  Exception e) {
    throw new IllegalStateException("Unable to read configuration file",e);
  }
  TaskBuilder builder=new TaskBuilder(this);
  builder.property("sonar.task","scan");
  builder.property("sonar.projectBaseDir",sonarProps.getParentFile().getAbsolutePath());
  for (  Map.Entry entry : prop.entrySet()) {
    builder.property(entry.getKey().toString(),entry.getValue().toString());
  }
  return builder;
}
