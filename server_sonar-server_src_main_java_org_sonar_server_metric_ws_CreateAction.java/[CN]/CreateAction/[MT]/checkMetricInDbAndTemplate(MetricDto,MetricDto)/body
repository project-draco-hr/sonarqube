{
  if (template.getValueType().isEmpty() || template.getShortName().isEmpty() || template.getKey().isEmpty()) {
    throw new IllegalArgumentException(String.format("The mandatory arguments '%s','%s' and '%s' must not be empty",PARAM_KEY,PARAM_NAME,PARAM_TYPE));
  }
  if (metricInDb == null) {
    return;
  }
  if (metricInDb.isEnabled()) {
    throw new ServerException(HttpURLConnection.HTTP_CONFLICT,"An active metric already exist with key: " + metricInDb.getKey());
  }
  if (!metricInDb.isUserManaged()) {
    throw new ServerException(HttpURLConnection.HTTP_CONFLICT,"An non custom metric already exist with key: " + metricInDb.getKey());
  }
  if (!metricInDb.getValueType().equals(template.getValueType())) {
    throw new ServerException(HttpURLConnection.HTTP_CONFLICT,"An existing metric exist with a different type: " + metricInDb.getValueType());
  }
}
