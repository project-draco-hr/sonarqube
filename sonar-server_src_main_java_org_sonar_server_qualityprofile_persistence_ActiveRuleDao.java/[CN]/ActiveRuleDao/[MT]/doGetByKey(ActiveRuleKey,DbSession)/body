{
  QualityProfileDto qDto=profileDao.selectByNameAndLanguage(key.qProfile().name(),key.qProfile().lang(),session);
  RuleDto ruleDto=ruleDao.getByKey(key.ruleKey(),session);
  ActiveRuleDto activeRule=mapper(session).selectByProfileAndRule(qDto.getId(),ruleDto.getId());
  if (activeRule.getKey() == null) {
    activeRule.setKey(key);
  }
  return activeRule;
}
