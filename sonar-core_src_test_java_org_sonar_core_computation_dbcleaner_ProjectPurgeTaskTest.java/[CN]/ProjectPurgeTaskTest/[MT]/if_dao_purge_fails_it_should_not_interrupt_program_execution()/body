{
  when(dao.purge(any(PurgeConfiguration.class))).thenThrow(NullPointerException.class);
  sut.purge(mock(DbSession.class),mock(PurgeConfiguration.class),mock(Settings.class));
  verify(dao,times(1)).purge(any(DbSession.class),any(PurgeConfiguration.class));
}
