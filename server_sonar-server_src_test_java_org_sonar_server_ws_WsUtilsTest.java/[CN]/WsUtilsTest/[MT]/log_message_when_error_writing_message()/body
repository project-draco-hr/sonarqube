{
  TestRequest request=new TestRequest();
  request.setMediaType(MediaTypes.PROTOBUF);
  WsPermissions.Permission message=WsPermissions.Permission.newBuilder().setName("permission-name").build();
  try {
    WsUtils.writeProtobuf(message,null,new DumbResponse());
  }
 catch (  Exception e) {
    assertThat(e).isInstanceOf(NullPointerException.class);
    assertThat(logger.logs()).contains("Error while writing protobuf message org.sonarqube.ws.WsPermissions.Permission[name: \"permission-name\"]");
  }
}
