{
  File testPlan=new File(baseDir,"test/fooTest.xoo.testplan");
  FileUtils.write(testPlan,"test1:UNIT:OK:::10\ntest2:INTEGRATION:ERROR:message:stack:15\n\n#comment");
  DefaultInputFile testFile=new DefaultInputFile("foo","test/fooTest.xoo").setLanguage("xoo").setType(Type.TEST);
  fileSystem.add(testFile);
  final SensorStorage sensorStorage=mock(SensorStorage.class);
  when(context.newTestCaseExecution()).thenAnswer(new Answer<TestCaseExecution>(){
    @Override public TestCaseExecution answer(    InvocationOnMock invocation) throws Throwable {
      return new DefaultTestCaseExecution(sensorStorage);
    }
  }
);
  sensor.execute(context);
  verify(sensorStorage).store(new DefaultTestCaseExecution(null).inTestFile(testFile).name("test1").durationInMs(10));
  verify(sensorStorage).store(new DefaultTestCaseExecution(null).inTestFile(testFile).name("test2").ofType(TestCaseExecution.Type.INTEGRATION).status(TestCaseExecution.Status.ERROR).message("message").stackTrace("stack").durationInMs(15));
}
