{
  when(profileFinder.find(any(Request.class))).thenReturn(QProfileTesting.newXooP1());
  ChangelogLoader.Change change1=new ChangelogLoader.Change("C1","ACTIVATED",A_DATE,"MAJOR","marcel","Marcel","INHERITED",RuleTesting.XOO_X1,"X One");
  change1.getParams().put("foo","foo_value");
  change1.getParams().put("bar","bar_value");
  List<ChangelogLoader.Change> changes=asList(change1);
  when(changelogLoader.load(any(QProfileChangeQuery.class))).thenReturn(new ChangelogLoader.Changelog(10,changes));
  wsTester.newGetRequest(QProfilesWs.API_ENDPOINT,"changelog").setParam("profileKey",XOO_P1_KEY).execute().assertJson(getClass(),"changelog_full.json");
}
