{
  AsyncMeasuresDao dao=new AsyncMeasuresDao(session);
  MeasureModel measure=dao.getAsyncMeasure(id);
  AsyncMeasureSnapshot pastAsyncMeasureSnapshot=dao.getLastAsyncMeasureSnapshot(measure.getProjectId(),measure.getMetric().getId(),measure.getMeasureDate());
  dao.deleteAsyncMeasure(measure);
  if (pastAsyncMeasureSnapshot != null) {
    MeasureModel pastAsyncMeasure=dao.getAsyncMeasure(pastAsyncMeasureSnapshot.getMeasureId());
    dao.deleteAsyncMeasureSnapshots(pastAsyncMeasureSnapshot.getMeasureId());
    registerMeasure(pastAsyncMeasure,dao);
  }
  session.commit();
}
