{
  String projectKey="org.sonar.sample";
  String componentKey="org.sonar.sample:Sample";
  MockUserSession.set().addProjectPermissions(UserRole.CODEVIEWER,projectKey);
  when(resourceDao.getRootProjectByComponentKey(componentKey)).thenReturn(new ResourceDto().setKey(projectKey));
  service.getSourcesByComponent(componentKey,1,2);
  verify(sourceDecorator).getDecoratedSourceAsHtml(componentKey,1,2);
}
