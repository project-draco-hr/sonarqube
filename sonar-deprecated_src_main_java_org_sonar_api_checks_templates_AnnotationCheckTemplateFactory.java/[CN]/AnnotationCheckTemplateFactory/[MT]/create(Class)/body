{
  org.sonar.check.Check checkAnnotation=AnnotationIntrospector.getCheckAnnotation(annotatedClass);
  if (checkAnnotation == null) {
    LOG.warn("The class " + annotatedClass.getCanonicalName() + " is not a check template. It should be annotated with "+ CheckTemplate.class);
    return null;
  }
  BundleCheckTemplate check=toTemplate(annotatedClass,checkAnnotation);
  Field[] fields=annotatedClass.getDeclaredFields();
  if (fields != null) {
    for (    Field field : fields) {
      BundleCheckTemplateProperty property=toProperty(check,field);
      if (property != null) {
        check.addProperty(property);
      }
    }
  }
  return check;
}
