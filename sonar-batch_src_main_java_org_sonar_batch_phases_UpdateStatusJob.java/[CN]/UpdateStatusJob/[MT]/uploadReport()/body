{
  if (analysisMode.isPreview()) {
    return;
  }
  String url="/batch_bootstrap/evict?project=" + project.getId();
  try {
    LOG.debug("Upload report");
    server.request(url,"POST");
  }
 catch (  Exception e) {
    throw new IllegalStateException("Unable to evict preview database: " + url,e);
  }
  url="/batch/upload_report?project=" + project.getEffectiveKey() + "&snapshot="+ snapshot.getId();
  try {
    LOG.debug("Publish results");
    server.request(url,"POST",true,0);
  }
 catch (  Exception e) {
    throw new IllegalStateException("Unable to publish results: " + url,e);
  }
}
