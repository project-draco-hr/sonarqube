{
  InputStreamReader reader=new InputStreamReader(getClass().getResourceAsStream("/org/sonar/api/server/rule/RuleDefinitionsFromXmlTest/deprecated.xml"),Charsets.UTF_8.name());
  RuleDefinitions.Repository repository=load(reader);
  assertThat(repository.rules()).hasSize(1);
  RuleDefinitions.Rule rule=repository.rules().get(0);
  assertThat(rule.key()).isEqualTo("org.sonar.it.checkstyle.MethodsCountCheck");
  assertThat(rule.internalKey()).isEqualTo("Checker/TreeWalker/org.sonar.it.checkstyle.MethodsCountCheck");
  assertThat(rule.severity()).isEqualTo(Severity.CRITICAL);
  assertThat(rule.htmlDescription()).isEqualTo("Count methods");
  assertThat(rule.param("minMethodsCount")).isNotNull();
}
