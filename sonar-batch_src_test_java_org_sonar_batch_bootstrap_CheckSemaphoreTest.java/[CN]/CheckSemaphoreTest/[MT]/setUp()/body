{
  lock=mock(Lock.class);
  semaphoreDao=mock(SemaphoreDao.class);
  when(semaphoreDao.acquire(anyString())).thenReturn(lock);
  when(semaphoreDao.acquire(anyString(),anyInt())).thenReturn(lock);
  projectTree=mock(ProjectTree.class);
  settings=new Settings();
  setDryRunMode(false);
  setForceMode(false);
  project=new Project("key","branch","name");
  when(projectTree.getRootProject()).thenReturn(project);
  checkSemaphore=new CheckSemaphore(semaphoreDao,projectTree,settings);
}
