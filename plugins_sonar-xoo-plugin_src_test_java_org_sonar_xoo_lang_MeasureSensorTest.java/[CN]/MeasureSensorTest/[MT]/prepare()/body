{
  baseDir=temp.newFolder();
  metricFinder=mock(MetricFinder.class);
  sensor=new MeasureSensor(metricFinder);
  fileSystem=new DefaultFileSystem();
  when(context.fileSystem()).thenReturn(fileSystem);
  storage=mock(SensorStorage.class);
  when(context.newMeasure()).then(new Answer<DefaultMeasure>(){
    @Override public DefaultMeasure answer(    InvocationOnMock invocation) throws Throwable {
      return new DefaultMeasure(storage);
    }
  }
);
}
