{
  when(fs.inputFiles(FileQuery.all())).thenReturn((Iterable)Arrays.asList(newInputFile("src/foo/bar/Foo.cbl","","foo/bar/Foo.cbl","cobol",false),newInputFile("src2/foo/bar/Foo.cbl","","foo/bar/Foo.cbl","cobol",false),newInputFile("src/test/foo/bar/FooTest.cbl","","foo/bar/FooTest.cbl","cobol",true)));
  when(project.getLanguageKey()).thenReturn("cobol");
  FileIndexer indexer=new FileIndexer(project,fs,new Languages(cobolLanguage),sonarIndex,settings,mock(ResourceKeyMigration.class));
  indexer.execute();
  verify(sonarIndex).index(org.sonar.api.resources.File.create("/src/foo/bar/Foo.cbl","foo/bar/Foo.cbl",cobolLanguage,false));
  verify(sonarIndex).index(org.sonar.api.resources.File.create("/src2/foo/bar/Foo.cbl","foo/bar/Foo.cbl",cobolLanguage,false));
  verify(sonarIndex).index(org.sonar.api.resources.File.create("/src/test/foo/bar/FooTest.cbl","foo/bar/FooTest.cbl",cobolLanguage,true));
}
