{
  File propertiesFile=new File(sonarHome,"conf/sonar.properties");
  if (!propertiesFile.isFile() || !propertiesFile.exists()) {
    throw new IllegalStateException("Properties file does not exist: " + propertiesFile);
  }
  try {
    Properties p=ConfigurationUtils.openProperties(propertiesFile);
    p=ConfigurationUtils.interpolateEnvVariables(p);
    for (    Map.Entry<Object,Object> entry : p.entrySet()) {
      properties.put(entry.getKey().toString(),entry.getValue().toString());
    }
  }
 catch (  Exception e) {
    throw new IllegalStateException("Fail to load configuration file: " + propertiesFile,e);
  }
}
