{
  File propertiesFile=new File(sonarHome,"conf/sonar.properties");
  if (!propertiesFile.isFile() || !propertiesFile.exists()) {
    throw new IllegalStateException("Properties file does not exist: " + propertiesFile);
  }
  try {
    Properties p=ConfigurationUtils.openProperties(propertiesFile);
    addProperties(ConfigurationUtils.interpolateEnvVariables(p));
  }
 catch (  Exception e) {
    throw new IllegalStateException("Fail to load configuration file: " + propertiesFile,e);
  }
}
