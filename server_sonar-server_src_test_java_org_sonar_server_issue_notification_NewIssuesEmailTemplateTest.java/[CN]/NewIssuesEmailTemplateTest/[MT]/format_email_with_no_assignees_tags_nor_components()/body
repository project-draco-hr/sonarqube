{
  Notification notification=newNotification();
  when(i18n.message(any(Locale.class),eq("severity.BLOCKER"),anyString())).thenReturn("Blocker");
  when(i18n.message(any(Locale.class),eq("severity.CRITICAL"),anyString())).thenReturn("Critical");
  when(i18n.message(any(Locale.class),eq("severity.MAJOR"),anyString())).thenReturn("Major");
  when(i18n.message(any(Locale.class),eq("severity.MINOR"),anyString())).thenReturn("Minor");
  when(i18n.message(any(Locale.class),eq("severity.INFO"),anyString())).thenReturn("Info");
  EmailMessage message=template.format(notification);
  assertThat(message.getMessageId()).isEqualTo("new-issues/org.apache:struts");
  assertThat(message.getSubject()).isEqualTo("Struts: 32 new issues");
  assertThat(message.getMessage()).startsWith("" + EMAIL_HEADER + EMAIL_TOTAL_ISSUES+ EMAIL_ISSUES+ EMAIL_FOOTER);
}
