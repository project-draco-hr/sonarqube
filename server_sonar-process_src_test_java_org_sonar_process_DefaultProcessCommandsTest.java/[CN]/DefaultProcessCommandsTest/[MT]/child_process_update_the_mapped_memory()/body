{
  File dir=temp.newFolder();
  DefaultProcessCommands commands=new DefaultProcessCommands(dir,1);
  assertThat(commands.isReady()).isFalse();
  assertThat(commands.mappedByteBuffer.get(commands.offset())).isEqualTo(DefaultProcessCommands.EMPTY);
  assertThat(commands.mappedByteBuffer.getLong(2 + commands.offset())).isEqualTo(0L);
  commands.setReady();
  assertThat(commands.isReady()).isTrue();
  assertThat(commands.mappedByteBuffer.get(commands.offset())).isEqualTo(DefaultProcessCommands.READY);
  long currentTime=System.currentTimeMillis();
  commands.ping();
  assertThat(commands.mappedByteBuffer.getLong(2 + commands.offset())).isGreaterThanOrEqualTo(currentTime);
}
