{
  server=mock(ServerClient.class);
  when(server.getURL()).thenReturn("http://localhost:9000");
  when(server.request("/api/server")).thenReturn("{\"id\":\"123456\",\"version\":\"3.1\",\"status\":\"UP\"}");
  settings=new Settings();
  settings.setProperty(DatabaseProperties.PROP_URL,"jdbc:postgresql://localhost/foo");
  settings.setProperty(DatabaseProperties.PROP_USER,"bar");
  propertiesDao=mock(PropertiesDao.class);
  when(propertiesDao.selectGlobalProperty(CoreProperties.SERVER_ID)).thenReturn(new PropertyDto().setValue("123456"));
  mode=mock(DefaultAnalysisMode.class);
  databaseVersion=mock(DatabaseVersion.class);
}
