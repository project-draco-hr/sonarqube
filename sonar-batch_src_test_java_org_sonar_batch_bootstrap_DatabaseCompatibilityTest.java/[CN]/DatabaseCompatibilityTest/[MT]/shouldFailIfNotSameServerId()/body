{
  when(propertiesDao.selectGlobalProperty(CoreProperties.SERVER_ID)).thenReturn(new PropertyDto().setValue("11111111"));
  thrown.expect(MessageException.class);
  thrown.expectMessage("The current batch process and the configured remote server do not share the same DB configuration.");
  thrown.expectMessage("- Batch side: jdbc:postgresql://localhost/foo (bar / *****)");
  thrown.expectMessage("- Server side: check the configuration at http://localhost:9000/system");
  new DatabaseCompatibility(databaseVersion,server,settings,propertiesDao,mode).start();
}
