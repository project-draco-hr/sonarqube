{
  File sonarDirectory=temporaryFolder.newFolder("sonar");
  when(server.getVersion()).thenReturn("3.4");
  doReturn(Arrays.<DefaultIssue>asList()).when(deprecatedJsonReport).getIssues(resource);
  settings.setProperty("sonar.dryRun.export.path","output.json");
  when(fileSystem.workingDir()).thenReturn(sonarDirectory);
  deprecatedJsonReport.execute();
  assertThat(new File(sonarDirectory,"output.json")).exists();
}
