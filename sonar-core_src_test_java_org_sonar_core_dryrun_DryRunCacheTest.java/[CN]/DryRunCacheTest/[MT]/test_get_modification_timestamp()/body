{
  when(propertiesDao.selectGlobalProperty(DryRunCache.SONAR_DRY_RUN_CACHE_LAST_UPDATE_KEY)).thenReturn(null);
  assertThat(dryRunCache.getModificationTimestamp(null)).isEqualTo(0L);
  when(propertiesDao.selectGlobalProperty(DryRunCache.SONAR_DRY_RUN_CACHE_LAST_UPDATE_KEY)).thenReturn(new PropertyDto().setValue("123456"));
  assertThat(dryRunCache.getModificationTimestamp(null)).isEqualTo(123456L);
  when(resourceDao.getRootProjectByComponentId(123L)).thenReturn(new ResourceDto().setId(456L));
  when(propertiesDao.selectProjectProperty(456L,DryRunCache.SONAR_DRY_RUN_CACHE_LAST_UPDATE_KEY)).thenReturn(null);
  assertThat(dryRunCache.getModificationTimestamp(123L)).isEqualTo(0L);
  when(propertiesDao.selectProjectProperty(456L,DryRunCache.SONAR_DRY_RUN_CACHE_LAST_UPDATE_KEY)).thenReturn(new PropertyDto().setValue("123456"));
  assertThat(dryRunCache.getModificationTimestamp(123L)).isEqualTo(123456L);
}
