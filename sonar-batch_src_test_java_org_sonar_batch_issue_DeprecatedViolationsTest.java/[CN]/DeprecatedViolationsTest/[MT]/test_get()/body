{
  RuleKey ruleKey=RuleKey.of("squid","AvoidCycles");
  when(ruleFinder.findByKey(ruleKey)).thenReturn(new Rule("squid","AvoidCycles"));
  when(resourceCache.get("org.apache:struts")).thenReturn(new BatchResource(1,new Project("org.apache:struts"),null));
  when(issueCache.byComponent("org.apache:struts")).thenReturn(Arrays.asList(newIssue(ruleKey)));
  List<Violation> violations=deprecatedViolations.get("org.apache:struts");
  assertThat(violations).hasSize(1);
}
