{
  when(crossProjectDuplicationStatusHolder.isEnabled()).thenReturn(false);
  analysisMetadataHolder.setBaseProjectSnapshot(baseProjectSnapshot);
  ComponentDto otherProject=createProject("OTHER_PROJECT_KEY");
  SnapshotDto otherProjectSnapshot=createProjectSnapshot(otherProject);
  ComponentDto otherFIle=createFile("OTHER_FILE_KEY",otherProject);
  SnapshotDto otherFileSnapshot=createFileSnapshot(otherFIle,otherProjectSnapshot);
  String hash="a8998353e96320ec";
  DuplicationUnitDto duplicate=new DuplicationUnitDto().setHash(hash).setStartLine(40).setEndLine(55).setIndexInFile(0).setProjectSnapshotId(otherProjectSnapshot.getId()).setSnapshotId(otherFileSnapshot.getId());
  dbClient.duplicationDao().insert(dbSession,singletonList(duplicate));
  dbSession.commit();
  BatchReport.CpdTextBlock originBlock=BatchReport.CpdTextBlock.newBuilder().setHash(hash).setStartLine(30).setEndLine(45).setStartTokenIndex(0).setEndTokenIndex(10).build();
  batchReportReader.putDuplicationBlocks(FILE_REF,asList(originBlock));
  underTest.execute();
  verifyZeroInteractions(integrateCrossProjectDuplications);
}
