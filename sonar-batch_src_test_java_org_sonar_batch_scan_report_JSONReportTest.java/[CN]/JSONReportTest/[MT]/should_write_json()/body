{
  TrackedIssue issue=new TrackedIssue();
  issue.setKey("200");
  issue.setComponentKey("struts:src/main/java/org/apache/struts/Action.java");
  issue.setRuleKey(RuleKey.of("squid","AvoidCycles"));
  issue.setMessage("There are 2 cycles");
  issue.setSeverity("MINOR");
  issue.setStatus(Issue.STATUS_OPEN);
  issue.setResolution(null);
  issue.setStartLine(1);
  issue.setEndLine(2);
  issue.setStartLineOffset(3);
  issue.setEndLineOffset(4);
  issue.setEffortToFix(3.14);
  issue.setReporter("julien");
  issue.setAssignee("simon");
  issue.setCreationDate(SIMPLE_DATE_FORMAT.parse("2013-04-24"));
  issue.setNew(false);
  when(issueCache.all()).thenReturn(Lists.newArrayList(issue));
  BatchInput.User user1=BatchInput.User.newBuilder().setLogin("julien").setName("Julien").build();
  BatchInput.User user2=BatchInput.User.newBuilder().setLogin("simon").setName("Simon").build();
  when(userRepository.load("julien")).thenReturn(user1);
  when(userRepository.load("simon")).thenReturn(user2);
  StringWriter writer=new StringWriter();
  jsonReport.writeJson(writer);
  JsonAssert.assertJson(writer.toString()).isSimilarTo(this.getClass().getResource(this.getClass().getSimpleName() + "/report.json"));
}
