{
  ComponentDto project=newProjectDto("project-uuid").setKey("project-key");
  componentDb.insertProjectAndSnapshot(project);
  ComponentDto developer=newDeveloper("developer","developer-uuid");
  componentDb.insertDeveloperAndSnapshot(developer);
  componentDb.insertComponent(newDevProjectCopy("project-uuid-copy",project,developer));
  insertNclocMetric();
  db.commit();
  ComponentTreeWsResponse response=call(ws.newRequest().setParam(PARAM_BASE_COMPONENT_ID,developer.uuid()).setParam(PARAM_METRIC_KEYS,"ncloc"));
  assertThat(response.getComponentsCount()).isEqualTo(1);
  WsMeasures.Component projectCopy=response.getComponents(0);
  assertThat(projectCopy.getId()).isEqualTo("project-uuid-copy");
  assertThat(projectCopy.getRefId()).isEqualTo("project-uuid");
  assertThat(projectCopy.getRefKey()).isEqualTo("project-key");
}
