{
  componentDb.insertProjectAndSnapshot(newProjectDto("project-uuid"));
  expectedException.expect(BadRequestException.class);
  expectedException.expectMessage("To sort by the 'complexity' metric, it must be in the list of metric keys in the 'metricKeys' parameter");
  call(ws.newRequest().setParam(PARAM_BASE_COMPONENT_ID,"project-uuid").setParam(PARAM_METRIC_KEYS,"ncloc,violations").setParam(PARAM_METRIC_SORT,"complexity").setParam(Param.SORT,METRIC_SORT));
}
