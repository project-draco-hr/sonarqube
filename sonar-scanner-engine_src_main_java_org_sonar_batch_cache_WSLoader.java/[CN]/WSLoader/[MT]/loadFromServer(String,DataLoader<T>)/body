{
  if (isOffline()) {
    throw new NotAvailableException("Server not available");
  }
  try {
    T t=loader.load(id);
    switchToOnline();
    return new WSLoaderResult<>(t,false);
  }
 catch (  HttpException|MessageException e) {
    throw e;
  }
catch (  IllegalStateException e) {
    switchToOffline();
    throw new NotAvailableException(e);
  }
catch (  Exception e) {
    throw new IllegalStateException(e);
  }
}
