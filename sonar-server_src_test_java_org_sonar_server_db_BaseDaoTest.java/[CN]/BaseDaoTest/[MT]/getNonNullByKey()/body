{
  BaseDao dao=mock(BaseDao.class);
  FakeDto dto=new FakeDto("ki");
  when(dao.doGetNullableByKey(dbSession,"ki")).thenReturn(dto);
  when(dao.getByKey(any(DbSession.class),anyString())).thenCallRealMethod();
  assertThat(dao.getByKey(dbSession,"ki")).isSameAs(dto);
  try {
    dao.getByKey(dbSession,"unknown");
    fail();
  }
 catch (  NotFoundException e) {
    assertThat(e).hasMessage("Key 'unknown' not found");
  }
}
