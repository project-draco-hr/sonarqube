{
  File homeDir=temp.newFolder();
  Props props=new Props(new Properties());
  props.set(EsSettings.PROP_TCP_PORT,"1234");
  props.set(EsSettings.SONAR_PATH_HOME,homeDir.getAbsolutePath());
  props.set(EsSettings.PROP_CLUSTER_NAME,"test");
  EsSettings esSettings=new EsSettings(props);
  assertThat(esSettings.inCluster()).isFalse();
  assertThat(esSettings.clusterName()).isEqualTo("test");
  assertThat(esSettings.tcpPort()).isEqualTo(1234);
  Settings generated=esSettings.build();
  assertThat(generated.get("transport.tcp.port")).isEqualTo("1234");
  assertThat(generated.get("cluster.name")).isEqualTo("test");
  assertThat(generated.get("path.data")).isNotNull();
  assertThat(generated.get("path.logs")).isNotNull();
  assertThat(generated.get("path.work")).isNotNull();
  assertThat(generated.get("http.enabled")).isEqualTo("false");
  assertThat(generated.get("index.number_of_replicas")).isEqualTo("0");
  assertThat(generated.get("discovery.zen.ping.unicast.hosts")).isNull();
  assertThat(generated.get("node.name")).isNotEmpty();
}
