{
  DbTemplate template=new DbTemplate(profiling);
  template.copyTable(source,dest,"characteristics").copyTable(source,dest,"permission_templates").copyTable(source,dest,"perm_templates_users").copyTable(source,dest,"perm_templates_groups").copyTable(source,dest,"rules").copyTable(source,dest,"rules_parameters").copyTableColumns(source,dest,"users",new String[]{"id","login","name","active"});
  if (projectId != null) {
    template.copyTable(source,dest,"projects",projectQuery(projectId,false));
    template.copyTable(source,dest,"events","SELECT * FROM events WHERE resource_id=" + projectId);
    StringBuilder snapshotQuery=new StringBuilder().append("SELECT * FROM snapshots WHERE project_id=").append(projectId);
    template.copyTable(source,dest,"snapshots",snapshotQuery.toString());
    template.copyTable(source,dest,"project_measures","SELECT m.* FROM project_measures m INNER JOIN snapshots s on m.snapshot_id=s.id " + "WHERE s.project_id=" + projectId);
    StringBuilder issueQuery=new StringBuilder().append("SELECT issues.* FROM issues").append(" INNER JOIN (").append(projectQuery(projectId,true)).append(") resources").append(" ON issues.component_uuid=resources.uuid").append(" AND status <> '").append(Issue.STATUS_CLOSED).append("'");
    template.copyTable(source,dest,"issues",issueQuery.toString());
  }
}
