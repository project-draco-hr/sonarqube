{
  setupData("sharedFixture","testGetNextSnapshotsUntilDate");
  AsyncMeasuresDao asyncMeasuresDao=new AsyncMeasuresDao(getSession());
  MeasureModel asyncMeasure=getSession().getEntityManager().find(MeasureModel.class,1l);
  List<Snapshot> snapshotIds=asyncMeasuresDao.getNextSnapshotsUntilDate(asyncMeasure,stringToDate("2008-12-06 12:00:00.00"));
  assertThat(snapshotIds.size(),is(2));
  assertThat(snapshotIds.get(0).getId(),is(2));
  assertThat(snapshotIds.get(1).getId(),is(4));
}
