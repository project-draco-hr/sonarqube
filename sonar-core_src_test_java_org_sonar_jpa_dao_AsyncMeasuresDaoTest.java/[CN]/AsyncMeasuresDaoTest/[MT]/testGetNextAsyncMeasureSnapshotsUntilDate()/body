{
  setupData("sharedFixture","testGetNextAsyncMeasureSnapshotsUntilDate");
  AsyncMeasuresDao asyncMeasuresDao=new AsyncMeasuresDao(getSession());
  MeasureModel asyncMeasure=getSession().getEntityManager().find(MeasureModel.class,3l);
  List<AsyncMeasureSnapshot> asyncMeasureSnapshots=asyncMeasuresDao.getNextAsyncMeasureSnapshotsUntilDate(asyncMeasure,stringToDate("2008-12-06 08:00:00.00"));
  assertThat(asyncMeasureSnapshots.size(),is(2));
  assertThat(asyncMeasureSnapshots.get(0).getId(),is(2));
  assertThat(asyncMeasureSnapshots.get(1).getId(),is(3));
}
