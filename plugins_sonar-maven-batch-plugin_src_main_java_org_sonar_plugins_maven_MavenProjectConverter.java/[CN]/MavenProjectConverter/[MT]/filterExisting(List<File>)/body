{
  Collection<File> filtered=Collections2.filter(files,new Predicate<File>(){
    @Override public boolean apply(    File file){
      return file != null && file.exists();
    }
  }
);
  Collection<String> paths=Collections2.transform(filtered,new Function<File,String>(){
    @Override public String apply(    File file){
      return file.getAbsolutePath();
    }
  }
);
  return paths.toArray(new String[paths.size()]);
}
