{
  Map<String,MavenProject> paths=Maps.newHashMap();
  Map<MavenProject,ProjectDefinition> defs=Maps.newHashMap();
  configureModules(poms,paths,defs);
  rebuildModuleHierarchy(paths,defs);
  ProjectDefinition rootProject=defs.get(root);
  if (rootProject == null) {
    throw new IllegalStateException(UNABLE_TO_DETERMINE_PROJECT_STRUCTURE_EXCEPTION_MESSAGE);
  }
  return rootProject;
}
