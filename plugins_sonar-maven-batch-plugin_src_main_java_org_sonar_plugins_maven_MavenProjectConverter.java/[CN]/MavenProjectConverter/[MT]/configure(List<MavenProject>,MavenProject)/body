{
  Map<String,MavenProject> paths=Maps.newHashMap();
  Map<MavenProject,ProjectDefinition> defs=Maps.newHashMap();
  try {
    configureModules(poms,paths,defs);
    rebuildModuleHierarchy(paths,defs);
  }
 catch (  IOException e) {
    throw new SonarException(e);
  }
  ProjectDefinition rootProject=defs.get(root);
  if (rootProject == null) {
    throw new IllegalStateException(UNABLE_TO_DETERMINE_PROJECT_STRUCTURE_EXCEPTION_MESSAGE);
  }
  return rootProject;
}
