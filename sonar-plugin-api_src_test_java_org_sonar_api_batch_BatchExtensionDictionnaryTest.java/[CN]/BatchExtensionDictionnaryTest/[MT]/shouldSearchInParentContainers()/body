{
  ComponentContainer grandParent=new ComponentContainer();
  grandParent.addSingleton(CoreMetrics.NCLOC);
  ComponentContainer parent=grandParent.createChild();
  parent.addSingleton(CoreMetrics.COVERAGE);
  ComponentContainer child=parent.createChild();
  child.addSingleton(CoreMetrics.COMPLEXITY);
  BatchExtensionDictionnary dictionnary=new BatchExtensionDictionnary(child);
  assertThat(dictionnary.select(Metric.class).size(),is(3));
  assertThat(dictionnary.select(Metric.class),hasItems(CoreMetrics.NCLOC,CoreMetrics.COVERAGE,CoreMetrics.COMPLEXITY));
}
