{
  userSessionRule.setGlobalPermissions(UserRole.ADMIN);
  ComponentDto analyzedProject=ComponentTesting.newProjectDto("analyzed-uuid-1");
  componentDao.insert(dbSession,newProvisionedProject("1"),newProvisionedProject("2"));
  analyzedProject=dbClient.componentDao().insert(dbSession,analyzedProject);
  SnapshotDto snapshot=SnapshotTesting.createForProject(analyzedProject);
  dbClient.snapshotDao().insert(dbSession,snapshot);
  dbSession.commit();
  WsTester.Result result=ws.newGetRequest("api/projects","provisioned").execute();
  result.assertJson(getClass(),"all-projects.json");
  assertThat(result.outputAsString()).doesNotContain("analyzed-uuid-1");
}
