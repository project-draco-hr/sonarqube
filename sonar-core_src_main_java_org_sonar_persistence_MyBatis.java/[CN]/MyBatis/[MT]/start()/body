{
  Configuration conf=new Configuration();
  conf.setEnvironment(new Environment("production",createTransactionFactory(),database.getDataSource()));
  conf.setUseGeneratedKeys(true);
  conf.setLazyLoadingEnabled(false);
  loadMapper(conf,DuplicationMapper.class,"Duplication",Duplication.class);
  loadMapper(conf,RuleMapper.class,"Rule",Rule.class);
  sessionFactory=new SqlSessionFactoryBuilder().build(conf);
  return this;
}
