{
  DefaultIssue issue=new DefaultIssue();
  init(issue);
  issue.setRuleKey(RuleKey.of(reportIssue.getRuleRepository(),reportIssue.getRuleKey()));
  if (reportIssue.hasLine()) {
    issue.setLine(reportIssue.getLine());
    issue.setChecksum(lineHashSeq.getHashForLine(reportIssue.getLine()));
  }
 else {
    issue.setChecksum("");
  }
  if (reportIssue.hasMsg()) {
    issue.setMessage(reportIssue.getMsg());
  }
  if (reportIssue.hasSeverity()) {
    issue.setSeverity(reportIssue.getSeverity().name());
  }
  if (reportIssue.hasEffortToFix()) {
    issue.setEffortToFix(reportIssue.getEffortToFix());
  }
  if (reportIssue.hasAttributes()) {
    issue.setAttributes(KeyValueFormat.parse(reportIssue.getAttributes()));
  }
  DbIssues.Locations.Builder dbLocationsBuilder=DbIssues.Locations.newBuilder();
  if (reportIssue.hasTextRange()) {
    dbLocationsBuilder.setTextRange(convertTextRange(reportIssue.getTextRange()));
  }
  for (  BatchReport.Flow flow : reportIssue.getFlowList()) {
    DbIssues.Flow.Builder dbFlowBuilder=DbIssues.Flow.newBuilder();
    for (    BatchReport.IssueLocation location : flow.getLocationList()) {
      dbFlowBuilder.addLocation(convertLocation(location));
    }
    dbLocationsBuilder.addFlow(dbFlowBuilder);
  }
  issue.setLocations(dbLocationsBuilder.build());
  return issue;
}
