{
  String fileKey="src/Foo.java";
  userSessionRule.addComponentPermission(UserRole.CODEVIEWER,"polop",fileKey);
  when(componentDao.selectByKey(session,fileKey)).thenReturn(Optional.of(file));
  when(sourceService.getLinesAsHtml(file.uuid(),1,5)).thenReturn(newArrayList(" */","","public class <span class=\"sym-31 sym\">HelloWorld</span> {"));
  WsTester.TestRequest request=tester.newGetRequest("api/sources","show").setParam("key",fileKey).setParam("from","0").setParam("to","5");
  request.execute();
  verify(sourceService).getLinesAsHtml(file.uuid(),1,5);
}
