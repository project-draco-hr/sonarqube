{
  String fileKey="src/Foo.java";
  userSessionRule.addProjectUuidPermissions(UserRole.CODEVIEWER,project.uuid());
  when(componentDao.selectByKey(session,fileKey)).thenReturn(Optional.of(file));
  when(sourceService.getLinesAsHtml(eq(session),eq(file.uuid()),anyInt(),anyInt())).thenReturn(Optional.of((Iterable<String>)newArrayList("/*"," * Header"," */","","public class <span class=\"sym-31 sym\">HelloWorld</span> {","}")));
  WsTester.TestRequest request=tester.newGetRequest("api/sources","show").setParam("key",fileKey);
  request.execute().assertJson(getClass(),"show_source.json");
}
