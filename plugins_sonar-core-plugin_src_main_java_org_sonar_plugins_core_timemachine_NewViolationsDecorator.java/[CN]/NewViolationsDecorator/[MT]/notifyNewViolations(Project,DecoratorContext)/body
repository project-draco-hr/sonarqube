{
  List<PastSnapshot> projectPastSnapshots=timeMachineConfiguration.getProjectPastSnapshots();
  if (projectPastSnapshots.size() >= 1) {
    PastSnapshot pastSnapshot=projectPastSnapshots.get(0);
    Double newViolationsCount=context.getMeasure(CoreMetrics.NEW_VIOLATIONS).getVariation1();
    if (pastSnapshot.getTargetDate() != null && newViolationsCount != null && newViolationsCount > 0) {
      DateFormat dateformat=new SimpleDateFormat("yyyy-MM-dd");
      Notification notification=new Notification("new-violations").setFieldValue("count",String.valueOf(newViolationsCount.intValue())).setFieldValue("projectName",project.getLongName()).setFieldValue("projectKey",project.getKey()).setFieldValue("projectId",String.valueOf(project.getId())).setFieldValue("fromDate",dateformat.format(pastSnapshot.getTargetDate()));
      notificationManager.scheduleForSending(notification);
    }
  }
}
