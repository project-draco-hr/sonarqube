{
  Measure measure=new Measure(CoreMetrics.NEW_VIOLATIONS);
  for (  VariationTarget variationTarget : timeMachineConfiguration.getVariationTargets()) {
    Date date=variationTarget.getDate();
    double value=countViolationsAfterDate(context.getViolations(),date) + sumChildren(context,variationTarget.getIndex());
    measure.setVariation(variationTarget.getIndex(),value);
  }
  context.saveMeasure(measure);
}
