{
  GroupDto admins=insertGroup("admins");
  GroupDto users=insertGroup("users");
  UserDto user=insertUser("my-admin");
  insertMember(users.getId(),user.getId());
  session.commit();
  userSession.login("admin").setGlobalPermissions(GlobalPermissions.SYSTEM_ADMIN);
  tester.newPostRequest("api/usergroups","add_user").setParam("id",admins.getId().toString()).setParam("login",user.getLogin()).execute().assertNoContent();
  assertThat(groupMembershipDao.selectGroupsByLogins(session,Arrays.asList(user.getLogin())).get(user.getLogin())).containsOnly(admins.getName(),users.getName());
}
