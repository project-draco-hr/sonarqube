{
  QualityProfileDto profile=QualityProfileDto.createFor("profile","xoo");
  qualityProfileDao.insert(session,profile);
  RuleDto rule=RuleDto.createFor(RuleKey.of("repo","rule"));
  ruleDao.insert(session,rule);
  ActiveRuleDto activeRuleDto=ActiveRuleDto.createFor(profile,rule).setSeverity("BLOCKER");
  activeRuleDao.insert(session,activeRuleDto);
  session.commit();
  ActiveRuleDto result=activeRuleDao.getNullableByKey(session,activeRuleDto.getKey());
  assertThat(result).isNotNull();
  assertThat(result.getKey()).isNotNull();
}
