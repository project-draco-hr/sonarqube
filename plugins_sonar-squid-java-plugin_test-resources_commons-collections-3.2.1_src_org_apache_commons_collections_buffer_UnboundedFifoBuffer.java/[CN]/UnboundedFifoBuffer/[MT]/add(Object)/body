{
  if (obj == null) {
    throw new NullPointerException("Attempted to add null object to buffer");
  }
  if (size() + 1 >= buffer.length) {
    Object[] tmp=new Object[((buffer.length - 1) * 2) + 1];
    int j=0;
    for (int i=head; i != tail; ) {
      tmp[j]=buffer[i];
      buffer[i]=null;
      j++;
      i=increment(i);
    }
    buffer=tmp;
    head=0;
    tail=j;
  }
  buffer[tail]=obj;
  tail=increment(tail);
  return true;
}
