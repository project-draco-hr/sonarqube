{
  BatchComponentCache resourceCache=new BatchComponentCache();
  Project p=new Project("foo");
  resourceCache.add(p,null).setInputComponent(new DefaultInputModule("foo"));
  org.sonar.api.resources.Resource sampleFile=org.sonar.api.resources.File.create("src/Foo.php").setEffectiveKey("foo:src/Foo.php");
  resourceCache.add(sampleFile,null).setInputComponent(new DefaultInputFile("foo","src/Foo.php").setLines(5));
  org.sonar.api.resources.Resource sampleFile2=org.sonar.api.resources.File.create("src/Foo2.php").setEffectiveKey("foo:src/Foo2.php");
  resourceCache.add(sampleFile2,null).setInputComponent(new DefaultInputFile("foo","src/Foo2.php").setLines(5));
  duplicationCache=mock(DuplicationCache.class);
  when(duplicationCache.byComponent(anyString())).thenReturn(Collections.<DefaultDuplication>emptyList());
  publisher=new DuplicationsPublisher(resourceCache,duplicationCache);
}
