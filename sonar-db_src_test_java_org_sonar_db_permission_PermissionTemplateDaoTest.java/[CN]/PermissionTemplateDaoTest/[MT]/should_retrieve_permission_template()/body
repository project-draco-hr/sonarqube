{
  db.truncateTables();
  PermissionTemplateDto permissionTemplateDto=new PermissionTemplateDto().setName("Test template").setUuid("test_template");
  PermissionTemplateDto templateWithPermissions=new PermissionTemplateDto().setUuid("test_template");
  underTest=mock(PermissionTemplateDao.class);
  when(underTest.selectByUuid(db.getSession(),"test_template")).thenReturn(permissionTemplateDto);
  when(underTest.selectByUuidWithUserAndGroupPermissions(db.getSession(),"test_template")).thenReturn(templateWithPermissions);
  when(underTest.selectPermissionTemplateWithPermissions(db.getSession(),"test_template")).thenCallRealMethod();
  PermissionTemplateDto permissionTemplate=underTest.selectPermissionTemplateWithPermissions(db.getSession(),"test_template");
  assertThat(permissionTemplate).isSameAs(templateWithPermissions);
}
