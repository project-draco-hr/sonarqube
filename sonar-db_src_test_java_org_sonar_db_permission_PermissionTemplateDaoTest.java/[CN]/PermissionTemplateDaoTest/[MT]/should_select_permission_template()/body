{
  db.prepareDbUnit(getClass(),"selectPermissionTemplate.xml");
  PermissionTemplateDto permissionTemplate=underTest.selectByUuidWithUserAndGroupPermissions("my_template_20130102_030405");
  assertThat(permissionTemplate).isNotNull();
  assertThat(permissionTemplate.getName()).isEqualTo("my template");
  assertThat(permissionTemplate.getUuid()).isEqualTo("my_template_20130102_030405");
  assertThat(permissionTemplate.getDescription()).isEqualTo("my description");
  assertThat(permissionTemplate.getUsersPermissions()).hasSize(3);
  assertThat(permissionTemplate.getUsersPermissions()).extracting("userId").containsOnly(1L,2L,1L);
  assertThat(permissionTemplate.getUsersPermissions()).extracting("userLogin").containsOnly("login1","login2","login2");
  assertThat(permissionTemplate.getUsersPermissions()).extracting("userName").containsOnly("user1","user2","user2");
  assertThat(permissionTemplate.getUsersPermissions()).extracting("permission").containsOnly("user_permission1","user_permission1","user_permission2");
  assertThat(permissionTemplate.getGroupsPermissions()).hasSize(3);
  assertThat(permissionTemplate.getGroupsPermissions()).extracting("groupId").containsOnly(1L,2L,null);
  assertThat(permissionTemplate.getGroupsPermissions()).extracting("groupName").containsOnly("group1","group2",null);
  assertThat(permissionTemplate.getGroupsPermissions()).extracting("permission").containsOnly("group_permission1","group_permission1","group_permission2");
}
