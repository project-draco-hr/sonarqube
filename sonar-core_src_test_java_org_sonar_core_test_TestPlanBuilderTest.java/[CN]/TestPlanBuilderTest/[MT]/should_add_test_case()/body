{
  ComponentGraph graph=new ComponentGraph();
  SourceFile file=MockSourceFile.createMain("org/codehaus/sonar/Main.java");
  ComponentWrapper fileWrapper=graph.createComponent(file);
  MutableTestPlan plan=new TestPlanBuilder().build(fileWrapper);
  MutableTestCase testCase=plan.addTestCase("should_pass");
  assertThat(testCase.key()).isEqualTo("should_pass");
  assertThat(testCase.name()).isNull();
  assertThat(plan.testCases()).hasSize(1);
  assertThat(plan.testCases()).containsExactly(testCase);
}
