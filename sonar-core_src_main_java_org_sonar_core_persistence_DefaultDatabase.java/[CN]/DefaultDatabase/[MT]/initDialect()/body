{
  dialect=DialectUtils.find(properties.getProperty(SONAR_JDBC_DIALECT),properties.getProperty(SONAR_JDBC_URL));
  if (dialect == null) {
    throw new IllegalStateException("Can not guess the JDBC dialect. Please check the property " + SONAR_JDBC_URL + ".");
  }
  checkH2Database();
  if (!properties.containsKey(SONAR_JDBC_DRIVER_CLASS_NAME)) {
    properties.setProperty(SONAR_JDBC_DRIVER_CLASS_NAME,dialect.getDefaultDriverClassName());
  }
}
