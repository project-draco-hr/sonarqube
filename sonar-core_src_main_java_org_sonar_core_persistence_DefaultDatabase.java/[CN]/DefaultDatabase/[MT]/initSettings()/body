{
  properties=new Properties();
  completeProperties(settings,properties,SONAR_JDBC);
  completeProperties(settings,properties,SONAR_HIBERNATE);
  completeDefaultProperties(properties);
  doCompleteProperties(properties);
  dialect=DialectUtils.find(properties.getProperty(SONAR_JDBC_DIALECT),properties.getProperty(SONAR_JDBC_URL));
  if (dialect == null) {
    throw new IllegalStateException(String.format("Can not guess the JDBC dialect. Please check the property %s.",SONAR_JDBC_URL));
  }
  properties.setProperty(DatabaseProperties.PROP_DRIVER,dialect.getDefaultDriverClassName());
}
