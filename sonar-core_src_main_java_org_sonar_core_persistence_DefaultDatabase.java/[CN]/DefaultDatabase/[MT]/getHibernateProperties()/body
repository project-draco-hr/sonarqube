{
  Properties props=new Properties();
  List<String> hibernateKeys=settings.getKeysStartingWith(SONAR_HIBERNATE);
  for (  String hibernateKey : hibernateKeys) {
    props.put(StringUtils.removeStart(hibernateKey,"sonar."),settings.getString(hibernateKey));
  }
  props.put(Environment.DIALECT,getDialect().getHibernateDialectClass().getName());
  props.put("hibernate.generate_statistics",settings.getBoolean(DatabaseProperties.PROP_HIBERNATE_GENERATE_STATISTICS));
  props.put("hibernate.hbm2ddl.auto",VALIDATE);
  props.put(Environment.CONNECTION_PROVIDER,CustomHibernateConnectionProvider.class.getName());
  String schema=getSchema();
  if (StringUtils.isNotBlank(schema)) {
    props.put("hibernate.default_schema",schema);
  }
  return props;
}
