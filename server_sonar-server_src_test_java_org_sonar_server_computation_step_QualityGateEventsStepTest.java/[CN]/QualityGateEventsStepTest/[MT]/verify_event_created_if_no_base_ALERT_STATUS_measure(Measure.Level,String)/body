{
  Measure.QualityGateStatus someQGStatus=new Measure.QualityGateStatus(rawAlterStatus,ALERT_TEXT);
  when(measureRepository.getRawMeasure(PROJECT_COMPONENT,alertStatusMetric)).thenReturn(of(MeasureImpl.createNoValue().setQualityGateStatus(someQGStatus)));
  when(measureRepository.getBaseMeasure(PROJECT_COMPONENT,alertStatusMetric)).thenReturn(of(MeasureImpl.createNoValue()));
  underTest.execute();
  verify(measureRepository).getRawMeasure(PROJECT_COMPONENT,alertStatusMetric);
  verify(measureRepository).getBaseMeasure(PROJECT_COMPONENT,alertStatusMetric);
  verify(eventRepository).add(eq(PROJECT_COMPONENT),eventArgumentCaptor.capture());
  verifyNoMoreInteractions(measureRepository,eventRepository);
  Event event=eventArgumentCaptor.getValue();
  assertThat(event.getCategory()).isEqualTo(Event.Category.ALERT);
  assertThat(event.getName()).isEqualTo(expectedEventName);
  assertThat(event.getDescription()).isEqualTo(ALERT_TEXT);
  assertThat(event.getData()).isNull();
}
