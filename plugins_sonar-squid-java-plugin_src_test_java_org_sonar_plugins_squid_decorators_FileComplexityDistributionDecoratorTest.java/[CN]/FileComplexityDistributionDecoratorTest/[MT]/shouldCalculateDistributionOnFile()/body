{
  DecoratorContext context=mock(DecoratorContext.class);
  when(context.getMeasure(CoreMetrics.COMPLEXITY)).thenReturn(new Measure(CoreMetrics.COMPLEXITY,20.0));
  decorator.decorate(JavaFile.fromRelativePath("org/foo/MyFile.java",false),context);
  ArgumentCaptor<Measure> measureCaptor=ArgumentCaptor.forClass(Measure.class);
  verify(context).saveMeasure(measureCaptor.capture());
  Measure measure=measureCaptor.getValue();
  assertThat(measure.getMetric(),is(CoreMetrics.FILE_COMPLEXITY_DISTRIBUTION));
  assertThat(measure.getData(),is("0=0;5=0;10=0;20=1;30=0;60=0;90=0"));
  assertThat(measure.getPersistenceMode(),is(PersistenceMode.MEMORY));
}
