{
  logAsSysAdminUser();
  PermissionTemplateDto template=dbClient.permissionTemplateDao().insert(dbSession,newPermissionTemplateDto().setUuid("template-uuid-1"));
  GroupDto group=insertGroup(new GroupDto().setName("group"));
  addGroupToTemplate(newPermissionTemplateGroup(USER,template.getId(),group.getId()));
  commit();
  InputStream responseStream=ws.newRequest().setMediaType(PROTOBUF).setParam(PARAM_TEMPLATE_ID,template.getUuid()).setParam(TEXT_QUERY,"nyo").execute().getInputStream();
  WsGroupsResponse response=WsGroupsResponse.parseFrom(responseStream);
  assertThat(response.getGroupsList()).extracting("name").containsExactly("Anyone");
  assertThat(response.getGroups(0).getPermissionsList()).isEmpty();
}
