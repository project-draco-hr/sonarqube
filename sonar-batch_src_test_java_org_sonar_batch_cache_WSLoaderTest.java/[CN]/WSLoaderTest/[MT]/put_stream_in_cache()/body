{
  InputStream input=IOUtils.toInputStream("is");
  when(ws.wsConnector().call(any(WsRequest.class))).thenReturn(new MockWsResponse().setContent(input));
  when(cache.getStream(ID)).thenReturn(input);
  WSLoader underTest=new WSLoader(LoadStrategy.SERVER_FIRST,cache,ws);
  WSLoaderResult<InputStream> result=underTest.loadStream(ID);
  assertThat(result.get()).isEqualTo(input);
  WsConnector wsConnector=ws.wsConnector();
  InOrder inOrder=inOrder(wsConnector,cache);
  inOrder.verify(wsConnector).call(any(WsRequest.class));
  inOrder.verify(cache).put(eq(ID),any(InputStream.class));
  inOrder.verify(cache).getStream(ID);
  verifyNoMoreInteractions(cache,wsConnector);
}
