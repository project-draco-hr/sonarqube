{
  HttpDownloader.HttpException httpException=mock(HttpDownloader.HttpException.class);
  IllegalStateException wrapperException=new IllegalStateException(httpException);
  when(client.load(anyString(),anyString(),anyBoolean(),anyInt(),anyInt())).thenThrow(wrapperException);
  WSLoader loader=new WSLoader(LoadStrategy.SERVER_FIRST,cache,client);
  try {
    loader.loadString(ID);
    fail("IllegalStateException expected");
  }
 catch (  IllegalStateException e) {
    verifyNoMoreInteractions(cache);
  }
}
