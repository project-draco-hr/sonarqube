{
  RequirementDto enabledRequirement=Iterables.find(requirementsForRule,new Predicate<RequirementDto>(){
    @Override public boolean apply(    RequirementDto input){
      return input.isEnabled();
    }
  }
,null);
  if (enabledRequirement == null && !Rule.STATUS_REMOVED.equals(ruleRow.getStatus())) {
    updateStatement.setInt(1,RuleDto.DISABLED_CHARACTERISTIC_ID);
    updateStatement.setNull(2,Types.VARCHAR);
    updateStatement.setNull(3,Types.VARCHAR);
    updateStatement.setNull(4,Types.VARCHAR);
    updateStatement.setTimestamp(5,new Timestamp(system2.now()));
    updateStatement.setInt(6,ruleRow.getId());
    return true;
  }
 else   if (enabledRequirement != null) {
    ruleRow.setCharacteristicId(enabledRequirement.getParentId());
    ruleRow.setFunction(enabledRequirement.getFunction().toUpperCase());
    ruleRow.setCoefficient(convertDuration(enabledRequirement.getCoefficientValue(),enabledRequirement.getCoefficientUnit()));
    ruleRow.setOffset(convertDuration(enabledRequirement.getOffsetValue(),enabledRequirement.getOffsetUnit()));
    if (("LINEAR".equals(ruleRow.getFunction()) || "LINEAR_OFFSET".equals(ruleRow.getFunction())) && ruleRow.getCoefficient() == null) {
      ruleRow.setCoefficient("0" + convertUnit(enabledRequirement.getCoefficientUnit()));
    }
 else     if (("CONSTANT_ISSUE".equals(ruleRow.getFunction()) || "LINEAR_OFFSET".equals(ruleRow.getFunction())) && ruleRow.getOffset() == null) {
      ruleRow.setOffset("0" + convertUnit(enabledRequirement.getOffsetUnit()));
    }
    if (!isDebtDefaultValuesSameAsOverriddenValues(ruleRow)) {
      updateStatement.setInt(1,ruleRow.getCharacteristicId());
      updateStatement.setString(2,ruleRow.getFunction());
      updateStatement.setString(3,ruleRow.getCoefficient());
      updateStatement.setString(4,ruleRow.getOffset());
      updateStatement.setTimestamp(5,new Timestamp(system2.now()));
      updateStatement.setInt(6,ruleRow.getId());
      return true;
    }
  }
  return false;
}
