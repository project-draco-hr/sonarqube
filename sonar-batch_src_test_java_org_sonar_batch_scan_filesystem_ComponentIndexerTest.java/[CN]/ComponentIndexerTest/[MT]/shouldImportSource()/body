{
  settings.setProperty(CoreProperties.CORE_IMPORT_SOURCES_PROPERTY,"true");
  when(fs.inputFiles(FileQuery.all())).thenReturn((Iterable)Arrays.asList(newInputFile("src/main/java/foo/bar/Foo.java","sample code","foo/bar/Foo.java","java",false)));
  Languages languages=new Languages(Java.INSTANCE);
  ComponentIndexer indexer=new ComponentIndexer(project,languages,sonarIndex,settings,mock(ResourceKeyMigration.class),new DefaultModuleLanguages(settings,languages),mock(InputFileCache.class));
  indexer.execute(fs);
  Resource sonarFile=org.sonar.api.resources.File.create("src/main/java/foo/bar/Foo.java","foo/bar/Foo.java",Java.INSTANCE,false);
  verify(sonarIndex).index(sonarFile);
  verify(sonarIndex).setSource(sonarFile,"sample code");
}
