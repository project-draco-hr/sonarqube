{
  Languages languages=new Languages(cobolLanguage);
  ComponentIndexer indexer=createIndexer(languages);
  DefaultModuleFileSystem fs=new DefaultModuleFileSystem(project,null,mock(FileIndexer.class),initializer,indexer,mode);
  fs.add(newInputFile("src/foo/bar/Foo.cbl","","foo/bar/Foo.cbl","cobol",false,Status.ADDED));
  fs.add(newInputFile("src2/foo/bar/Foo.cbl","","foo/bar/Foo.cbl","cobol",false,Status.ADDED));
  fs.add(newInputFile("src/test/foo/bar/FooTest.cbl","","foo/bar/FooTest.cbl","cobol",true,Status.ADDED));
  fs.index();
  verify(sonarIndex).index(org.sonar.api.resources.File.create("/src/foo/bar/Foo.cbl",cobolLanguage,false));
  verify(sonarIndex).index(org.sonar.api.resources.File.create("/src2/foo/bar/Foo.cbl",cobolLanguage,false));
  verify(sonarIndex).index(org.sonar.api.resources.File.create("/src/test/foo/bar/FooTest.cbl",cobolLanguage,true));
}
