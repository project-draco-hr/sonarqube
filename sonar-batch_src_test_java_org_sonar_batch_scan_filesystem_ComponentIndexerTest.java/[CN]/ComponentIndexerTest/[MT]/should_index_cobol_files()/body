{
  when(fs.inputFiles(FileQuery.all())).thenReturn((Iterable)Arrays.asList(newInputFile("src/foo/bar/Foo.cbl","","foo/bar/Foo.cbl","cobol",false),newInputFile("src2/foo/bar/Foo.cbl","","foo/bar/Foo.cbl","cobol",false),newInputFile("src/test/foo/bar/FooTest.cbl","","foo/bar/FooTest.cbl","cobol",true)));
  when(project.getLanguageKey()).thenReturn("cobol");
  Languages languages=new Languages(cobolLanguage);
  ComponentIndexer indexer=new ComponentIndexer(project,languages,sonarIndex,settings,mock(ResourceKeyMigration.class),new DefaultModuleLanguages(settings,languages),mock(ResourceDao.class));
  indexer.execute(fs);
  verify(sonarIndex).index(org.sonar.api.resources.File.create("/src/foo/bar/Foo.cbl","foo/bar/Foo.cbl",cobolLanguage,false));
  verify(sonarIndex).index(org.sonar.api.resources.File.create("/src2/foo/bar/Foo.cbl","foo/bar/Foo.cbl",cobolLanguage,false));
  verify(sonarIndex).index(org.sonar.api.resources.File.create("/src/test/foo/bar/FooTest.cbl","foo/bar/FooTest.cbl",cobolLanguage,true));
}
