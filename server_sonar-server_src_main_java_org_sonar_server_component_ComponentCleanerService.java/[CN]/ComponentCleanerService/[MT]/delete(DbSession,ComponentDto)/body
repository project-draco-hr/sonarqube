{
  if (hasNotProjectScope(project) || isNotDeletable(project)) {
    throw new IllegalArgumentException("Only projects can be deleted");
  }
  dbClient.purgeDao().deleteResourceTree(dbSession,new IdUuidPair(project.getId(),project.uuid()),new PurgeProfiler());
  dbSession.commit();
  deleteFromIndices(project.uuid());
}
