{
  DbSession session=dbClient.openSession(false);
  try {
    Component root=treeRootHolder.getRoot();
    ProcessPersistSnapshot processPersistSnapshot=new ProcessPersistSnapshot(session,reportReader.readMetadata().getAnalysisDate());
    processPersistSnapshot.process(root,null);
    session.commit();
  }
  finally {
    session.close();
  }
}
