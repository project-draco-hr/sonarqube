{
  Iterable<BASE> manualIssues=from(new HashSet<>(tracking.getUnmatchedBases())).filter(IsManual.INSTANCE);
  for (  BASE base : manualIssues) {
    if (base.getLine() == null) {
      tracking.associateManualIssueToLine(base,null);
    }
 else {
      String baseHash=base.getLineHash();
      if (Strings.isNullOrEmpty(baseHash)) {
        baseHash=baseInput.getLineHashSequence().getHashForLine(base.getLine());
      }
      if (!Strings.isNullOrEmpty(baseHash)) {
        int[] rawLines=rawInput.getLineHashSequence().getLinesForHash(baseHash);
        if (rawLines.length == 1) {
          tracking.associateManualIssueToLine(base,rawLines[0]);
        }
 else         if (rawLines.length == 0 && rawInput.getLineHashSequence().hasLine(base.getLine())) {
          tracking.associateManualIssueToLine(base,base.getLine());
        }
      }
    }
  }
}
