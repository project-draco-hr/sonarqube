{
  Iterable<BASE> manualIssues=from(tracking.getUnmatchedBases()).filter(IsManual.INSTANCE);
  for (  BASE base : manualIssues) {
    if (base.getLine() == null) {
      tracking.keepManualIssueOpen(base,null);
    }
 else {
      String baseHash=base.getLineHash();
      if (Strings.isNullOrEmpty(baseHash)) {
        baseHash=baseInput.getLineHashSequence().getHashForLine(base.getLine());
      }
      if (!Strings.isNullOrEmpty(baseHash)) {
        Set<Integer> rawLines=rawInput.getLineHashSequence().getLinesForHash(baseHash);
        if (rawLines.size() == 1) {
          tracking.keepManualIssueOpen(base,rawLines.iterator().next());
        }
 else         if (rawLines.isEmpty() && rawInput.getLineHashSequence().hasLine(base.getLine())) {
          tracking.keepManualIssueOpen(base,base.getLine());
        }
      }
    }
  }
}
