{
  dbClient.componentDao().insert(session,ComponentTesting.newProjectDto("abcd").setKey("polop").setName("Polop"));
  DashboardDto dashboard=new DashboardDto().setGlobal(false).setName("Anon Dashboard").setShared(true).setColumnLayout("100%");
  dashboardDao.insert(dashboard);
  activeDashboardDao.insert(new ActiveDashboardDto().setDashboardId(dashboard.getId()));
  session.commit();
  MockUserSession.set().addProjectUuidPermissions(UserRole.USER,"abcd");
  wsTester=new WsTester(new NavigationWs(new ComponentNavigationAction(dbClient,activeDashboardDao,new Views(),i18n,projectConfigurationPages)));
  wsTester.newGetRequest("api/navigation","component").setParam("componentKey","polop").execute().assertJson(getClass(),"with_dashboards.json");
}
