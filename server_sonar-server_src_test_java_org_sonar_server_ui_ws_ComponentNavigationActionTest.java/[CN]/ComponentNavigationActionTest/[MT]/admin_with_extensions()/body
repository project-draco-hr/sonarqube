{
  ComponentDto project=dbClient.componentDao().insert(session,ComponentTesting.newProjectDto("abcd").setKey("polop").setName("Polop").setLanguage("xoo"));
  dbClient.snapshotDao().insert(session,new SnapshotDto().setLast(true).setQualifier(project.qualifier()).setResourceId(project.getId()).setRootProjectId(project.getId()).setScope(project.scope()));
  session.commit();
  userSessionRule.addProjectUuidPermissions(UserRole.USER,"abcd").addProjectUuidPermissions(UserRole.ADMIN,"abcd");
  Views views=createViews();
  wsTester=new WsTester(new NavigationWs(new ComponentNavigationAction(dbClient,activeDashboardDao,views,i18n,resourceTypes,userSessionRule)));
  wsTester.newGetRequest("api/navigation","component").setParam("componentKey","polop").execute().assertJson(getClass(),"admin_with_extensions.json");
}
