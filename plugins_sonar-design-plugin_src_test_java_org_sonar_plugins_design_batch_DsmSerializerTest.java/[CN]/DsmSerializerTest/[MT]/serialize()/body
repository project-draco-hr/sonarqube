{
  Resource foo=Directory.create("src/org/foo","org/foo").setId(7);
  Resource bar=Directory.create("src/org/bar","org/bar").setId(8);
  Dependency dep=new Dependency(foo,bar).setId(30l).setWeight(1);
  DirectedGraph<Resource,Dependency> graph=new DirectedGraph<Resource,Dependency>();
  graph.addVertex(foo);
  graph.addVertex(bar);
  graph.addEdge(dep);
  Dsm<Resource> dsm=new Dsm<Resource>(graph);
  DsmManualSorter.sort(dsm,bar,foo);
  String json=IOUtils.toString(getClass().getResourceAsStream("/org/sonar/plugins/design/batch/DsmSerializerTest/dsm.json")).trim();
  assertThat(DsmSerializer.serialize(dsm),is(json));
}
