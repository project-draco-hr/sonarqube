{
  ProcessRef ref=mock(ProcessRef.class,Mockito.RETURNS_DEEP_STUBS);
  when(ref.getProcess().waitFor()).thenAnswer(new Answer<Object>(){
    @Override public Object answer(    InvocationOnMock invocationOnMock) throws Throwable {
      throw new InterruptedException();
    }
  }
);
  Monitor monitor=mock(Monitor.class);
  WatcherThread watcher=new WatcherThread(ref,monitor);
  watcher.start();
  verify(ref).hardKill();
}
