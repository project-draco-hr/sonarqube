{
  when(system2.now()).thenReturn(150000000002L);
  dbTester.prepareDbUnit(getClass(),"update_source_date_on_sources_with_update_at_to_zero.xml");
  Connection connection=dbTester.openConnection();
  FileSourceTesting.updateDataColumn(connection,"FILE1_UUID",FileSourceTesting.newRandomData(1).build());
  connection.close();
  step().execute(new ComputationContext(mock(BatchReportReader.class),ComponentTesting.newProjectDto("ABCD")));
  dbTester.assertDbUnit(getClass(),"update_source_date_on_sources_with_update_at_to_zero-result.xml");
  List<SearchHit> docs=esTester.getDocuments(SourceLineIndexDefinition.INDEX,SourceLineIndexDefinition.TYPE);
  assertThat(docs).hasSize(1);
  SourceLineDoc doc=new SourceLineDoc(docs.get(0).sourceAsMap());
  assertThat(doc.projectUuid()).isEqualTo("ABCD");
  assertThat(doc.fileUuid()).isEqualTo("FILE1_UUID");
  assertThat(doc.updateDate()).isEqualTo(new Date(system2.now()));
}
