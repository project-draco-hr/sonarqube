{
  String testUuid=request.mandatoryParam(TEST_UUID);
  UserSession.get().checkComponentUuidPermission(UserRole.CODEVIEWER,index.searchByTestUuid(testUuid).fileUuid());
  List<CoveredFileDoc> coveredFiles=index.coveredFiles(testUuid);
  Map<String,ComponentDto> componentsByUuid=buildComponentsByUuid(coveredFiles);
  JsonWriter json=response.newJsonWriter().beginObject();
  if (!coveredFiles.isEmpty()) {
    writeTests(coveredFiles,componentsByUuid,json);
  }
  json.endObject().close();
}
