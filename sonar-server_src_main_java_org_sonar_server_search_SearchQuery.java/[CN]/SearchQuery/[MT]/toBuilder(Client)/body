{
  SearchRequestBuilder builder=client.prepareSearch(indices.toArray(new String[0])).setTypes(types.toArray(new String[0]));
  String queryString=getQueryString();
  if (StringUtils.isBlank(queryString)) {
    builder.setQuery(QueryBuilders.matchAllQuery());
  }
 else {
    builder.setQuery(queryString);
  }
  return addFacets(builder);
}
