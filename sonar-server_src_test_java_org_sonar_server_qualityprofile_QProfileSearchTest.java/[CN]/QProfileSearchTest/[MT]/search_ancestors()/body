{
  when(dao.selectParent(3)).thenReturn(new QualityProfileDto().setId(2).setName("Child").setLanguage("java").setParent("Parent"));
  when(dao.selectParent(2)).thenReturn(new QualityProfileDto().setId(1).setName("Parent").setLanguage("java"));
  when(dao.selectParent(1)).thenReturn(null);
  List<QProfile> result=search.ancestors(new QProfile().setId(3).setName("Grandchild").setLanguage("java").setParent("Child"));
  assertThat(result).hasSize(2);
}
