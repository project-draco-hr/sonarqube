{
  Map<String,Object> logDoc=new HashMap<String,Object>();
  logDoc.put(LogFields.KEY.field(),dto.getKey());
  logDoc.put(LogFields.TYPE.field(),dto.getType());
  logDoc.put(LogFields.ACTION.field(),dto.getAction());
  logDoc.put(LogFields.AUTHOR.field(),dto.getAuthor());
  logDoc.put(LogFields.MESSAGE.field(),dto.getMessage());
  logDoc.put(LogFields.CREATED_AT.field(),dto.getCreatedAt());
  logDoc.put(LogFields.UPDATED_AT.field(),dto.getUpdatedAt());
  logDoc.put(LogFields.DETAILS.field(),KeyValueFormat.parse(dto.getData()));
  return ImmutableList.of(new UpdateRequest().id(dto.getKey()).replicationType(ReplicationType.ASYNC).doc(logDoc).upsert(logDoc));
}
