{
  if (!shouldDecorateResource(resource)) {
    return;
  }
  Measure currentStatus=context.getMeasure(CoreMetrics.ALERT_STATUS);
  if (currentStatus == null) {
    return;
  }
  TimeMachineQuery query=new TimeMachineQuery(resource).setOnlyLastAnalysis(true).setMetrics(CoreMetrics.ALERT_STATUS);
  List<Measure> measures=timeMachine.getMeasures(query);
  Measure pastStatus=measures != null && measures.size() == 1 ? measures.get(0) : null;
  checkQualityGateStatusChange(resource,context,currentStatus,pastStatus);
}
