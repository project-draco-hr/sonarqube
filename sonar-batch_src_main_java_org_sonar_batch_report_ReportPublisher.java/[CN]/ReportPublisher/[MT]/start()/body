{
  reportDir=new File(projectReactor.getRoot().getWorkDir(),"batch-report");
  writer=new BatchReportWriter(reportDir);
  contextPublisher.init(writer);
  if (!analysisMode.isIssues() && !analysisMode.isMediumTest()) {
    String publicUrl=publicUrl();
    if (HttpUrl.parse(publicUrl) == null) {
      throw MessageException.of("Failed to parse public URL set in SonarQube server: " + publicUrl);
    }
  }
}
