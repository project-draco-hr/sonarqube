{
  ProjectDefinition projectDefinition=projectReactor.getRoot();
  String effectiveKey=projectDefinition.getKeyWithBranch();
  String relativeUrl=String.format("/api/ce/submit?projectKey=%s&projectName=%s&projectBranch=%s",projectDefinition.getKey(),BatchUtils.encodeForUrl(projectDefinition.getName()),BatchUtils.encodeForUrl(projectDefinition.getBranch()));
  String dumpDirLocation=settings.getString(DUMP_REPORT_PROP_KEY);
  if (dumpDirLocation == null) {
    return uploadMultiPartReport(report,relativeUrl);
  }
 else {
    dumpReport(dumpDirLocation,effectiveKey,relativeUrl,report);
    return null;
  }
}
