{
  LOG.debug("Publish results");
  long startTime=System.currentTimeMillis();
  URL url;
  try {
    url=new URL(serverClient.getURL() + relativeUrl);
  }
 catch (  MalformedURLException e) {
    throw new IllegalArgumentException("Invalid URL",e);
  }
  HttpRequest request=HttpRequest.post(url);
  request.trustAllCerts();
  request.trustAllHosts();
  request.header("User-Agent",format("SonarQube %s",server.getVersion()));
  request.basic(serverClient.getLogin(),serverClient.getPassword());
  request.part("report",null,"application/octet-stream",report);
  if (!request.ok()) {
    throw serverClient.handleHttpException(url.toString(),request.code(),request.body(),null);
  }
  long stopTime=System.currentTimeMillis();
  LOG.info("Analysis reports sent to server in " + (stopTime - startTime) + "ms");
  String responseStr=request.body();
  SubmitResponse response=new Gson().fromJson(responseStr,SubmitResponse.class);
  return response.getTaskId();
}
