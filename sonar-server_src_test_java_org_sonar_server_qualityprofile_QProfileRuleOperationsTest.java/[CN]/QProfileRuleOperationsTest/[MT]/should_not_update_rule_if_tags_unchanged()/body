{
  final int ruleId=24;
  final RuleDto rule=new RuleDto().setId(ruleId);
  final String tag="polop";
  final long tagId=42L;
  when(ruleTagDao.selectId(tag,session)).thenReturn(tagId);
  RuleRuleTagDto existingTag=new RuleRuleTagDto().setTag(tag).setType(RuleTagType.ADMIN);
  when(ruleDao.selectTags(ruleId,session)).thenReturn(ImmutableList.of(existingTag));
  operations.updateTags(rule,ImmutableList.of(tag),authorizedUserSession);
  verify(ruleTagDao).selectId(tag,session);
  verify(ruleDao).selectTags(ruleId,session);
  verify(ruleDao,never()).update(rule);
}
