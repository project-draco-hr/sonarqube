{
  Pattern pattern=Pattern.compile("jdbc:(\\w+):.+");
  Matcher matcher=pattern.matcher(url);
  if (!matcher.find()) {
    throw new MessageException(String.format("Bad format of JDBC URL: " + url));
  }
  String key=matcher.group(1);
  try {
    return Provider.valueOf(key);
  }
 catch (  IllegalArgumentException e) {
    throw new MessageException(String.format(String.format("Unsupported JDBC driver provider: %s. Accepted values are %s",key,Arrays.toString(Provider.values()))));
  }
}
