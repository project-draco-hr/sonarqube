{
  FileUtils.forceMkdir(dataDir);
  FileUtils.forceMkdir(webDir);
  FileUtils.forceMkdir(logsDir);
  Properties rawProperties=new Properties();
  rawProperties.setProperty("foo","bar");
  MinimumViableEnvironment mve=mock(MinimumViableEnvironment.class);
  Installation installation=new Installation(rawProperties,mve,homeDir);
  verify(mve).check();
  assertThat(installation.logsDir()).isEqualTo(logsDir);
  assertThat(installation.homeDir()).isEqualTo(homeDir);
  assertThat(installation.tempDir()).isDirectory().exists();
  assertThat(installation.tempDir().getName()).isEqualTo("temp");
  assertThat(installation.tempDir().getParentFile()).isEqualTo(homeDir);
  String startPath=installation.starPath("lib/search");
  assertThat(FilenameUtils.normalize(startPath,true)).endsWith("*").startsWith(FilenameUtils.normalize(homeDir.getAbsolutePath(),true));
  assertThat(installation.props()).isNotNull();
  assertThat(installation.prop("foo")).isEqualTo("bar");
  assertThat(installation.prop("unknown")).isNull();
  assertThat(installation.prop("sonar.path.home")).isEqualTo(homeDir.getAbsolutePath());
  assertThat(installation.prop("sonar.search.port")).isEqualTo("9001");
}
