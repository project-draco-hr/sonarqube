{
  FileUtils.forceMkdir(dataDir);
  FileUtils.forceMkdir(webDir);
  FileUtils.forceMkdir(logsDir);
  Properties initialProps=new Properties();
  initialProps.setProperty("foo","bar");
  Installation installation=new Installation(new MinimumViableEnvironment(),homeDir,initialProps);
  assertThat(installation.logsDir()).isEqualTo(logsDir);
  assertThat(installation.homeDir()).isEqualTo(homeDir);
  assertThat(installation.tempDir()).isDirectory().exists();
  assertThat(installation.tempDir().getName()).isEqualTo("temp");
  assertThat(installation.tempDir().getParentFile()).isEqualTo(homeDir);
  String startPath=installation.starPath("lib/search");
  assertThat(FilenameUtils.normalize(startPath,true)).endsWith("*").startsWith(FilenameUtils.normalize(homeDir.getAbsolutePath(),true));
  assertThat(installation.props()).isNotNull();
  assertThat(installation.prop("foo")).isEqualTo("bar");
  assertThat(installation.prop("unknown")).isNull();
  assertThat(installation.prop("default","value")).isEqualTo("value");
  assertThat(installation.prop("sonar.path.home")).isEqualTo(homeDir.getAbsolutePath());
}
