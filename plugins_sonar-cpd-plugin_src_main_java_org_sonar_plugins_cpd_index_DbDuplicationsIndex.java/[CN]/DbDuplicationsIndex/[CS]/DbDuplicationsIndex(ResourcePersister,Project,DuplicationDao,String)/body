{
  this.dao=dao;
  this.resourcePersister=resourcePersister;
  Snapshot currentSnapshot=resourcePersister.getSnapshotOrFail(currentProject);
  Snapshot lastSnapshot=resourcePersister.getLastSnapshot(currentSnapshot,false);
  this.currentProjectSnapshotId=currentSnapshot.getId();
  this.lastSnapshotId=lastSnapshot == null ? null : lastSnapshot.getId();
  this.languageKey=language;
}
