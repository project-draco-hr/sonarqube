{
  this.dao=dao;
  this.session=session;
  this.resourceCache=resourceCache;
  Snapshot lastSnapshot=getLastSnapshot(currentProject.getId());
  this.currentProjectSnapshotId=resourceCache.get(currentProject.getEffectiveKey()).snapshotId();
  this.lastSnapshotId=lastSnapshot == null ? null : lastSnapshot.getId();
  this.languageKey=language;
}
