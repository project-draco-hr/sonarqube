{
  if (request.isReset()) {
    change.setSeverity(firstNonEmpty(context.parentSeverity(),context.defaultSeverity()));
    for (    RuleParamDto ruleParamDto : context.ruleParams()) {
      String paramKey=ruleParamDto.getName();
      change.setParameter(paramKey,validateParam(ruleParamDto,firstNonEmpty(context.parentParamValue(paramKey),context.defaultParamValue(paramKey))));
    }
  }
 else   if (context.activeRule() != null) {
    change.setSeverity(firstNonEmpty(request.getSeverity(),context.currentSeverity(),context.parentSeverity(),context.defaultSeverity()));
    for (    RuleParamDto ruleParamDto : context.ruleParams()) {
      String paramKey=ruleParamDto.getName();
      change.setParameter(paramKey,validateParam(ruleParamDto,firstNonEmpty(context.requestParamValue(request,paramKey),context.currentParamValue(paramKey),context.parentParamValue(paramKey),context.defaultParamValue(paramKey))));
    }
  }
 else   if (context.activeRule() == null) {
    change.setSeverity(firstNonEmpty(request.getSeverity(),context.parentSeverity(),context.defaultSeverity()));
    for (    RuleParamDto ruleParamDto : context.ruleParams()) {
      String paramKey=ruleParamDto.getName();
      change.setParameter(paramKey,validateParam(ruleParamDto,firstNonEmpty(context.requestParamValue(request,paramKey),context.parentParamValue(paramKey),context.defaultParamValue(paramKey))));
    }
  }
}
