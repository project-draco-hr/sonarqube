{
  Metric metric=SeverityUtils.severityToIssueMetric(severity);
  Collection<Measure> children=context.getChildrenMeasures(MeasuresFilters.rules(metric));
  for (  Measure child : children) {
    RuleMeasure childRuleMeasure=(RuleMeasure)child;
    Rule rule=childRuleMeasure.getRule();
    if (rule != null && MeasureUtils.hasValue(childRuleMeasure)) {
      Multiset<Rule> rulesBag=initRules(rulesPerSeverity,severity);
      rulesBag.add(rule,childRuleMeasure.getIntValue());
    }
  }
  Multiset<Rule> rulesBag=rulesPerSeverity.get(severity);
  if (rulesBag != null) {
    for (    Multiset.Entry<Rule> entry : rulesBag.entrySet()) {
      RuleMeasure measure=RuleMeasure.createForRule(metric,entry.getElement(),(double)entry.getCount());
      measure.setSeverity(severity);
      context.saveMeasure(measure);
    }
  }
}
