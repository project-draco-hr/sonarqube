{
  level2Container=level1Container.createChild();
  level2Container.addSingleton(PersistentSettings.class);
  level2Container.addSingleton(DefaultDatabaseConnector.class);
  level2Container.addSingleton(ServerExtensionInstaller.class);
  level2Container.addSingleton(ThreadLocalDatabaseSessionFactory.class);
  level2Container.addPicoAdapter(new DatabaseSessionProvider());
  level2Container.addSingleton(ServerMetadataPersister.class);
  level2Container.addSingleton(ESNode.class);
  level2Container.addSingleton(HttpDownloader.class);
  level2Container.addSingleton(UriReader.class);
  level2Container.addSingleton(ServerIdGenerator.class);
  level2Container.addSingleton(XMLProfileParser.class);
  level2Container.addSingleton(XMLProfileSerializer.class);
  level2Container.addSingleton(AnnotationRuleParser.class);
  level2Container.addSingleton(XMLRuleParser.class);
  level2Container.addSingleton(RestartHandler.class);
  level2Container.addSingleton(PlatformWs.class);
  level2Container.startComponents();
  restartLevel3Container();
}
