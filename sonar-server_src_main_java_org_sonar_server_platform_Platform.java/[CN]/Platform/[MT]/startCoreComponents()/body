{
  coreContainer=rootContainer.createChild();
  coreContainer.addSingleton(DefaultDatabaseConnector.class);
  coreContainer.addSingleton(PluginDeployer.class);
  coreContainer.addSingleton(DefaultServerPluginRepository.class);
  coreContainer.addSingleton(ServerExtensionInstaller.class);
  coreContainer.addSingleton(DefaultServerFileSystem.class);
  coreContainer.addSingleton(ThreadLocalDatabaseSessionFactory.class);
  coreContainer.addPicoAdapter(new DatabaseSessionProvider());
  coreContainer.startComponents();
  DatabaseSessionFactory sessionFactory=coreContainer.getComponentByType(DatabaseSessionFactory.class);
  ServerSettings serverSettings=coreContainer.getComponentByType(ServerSettings.class);
  serverSettings.setSessionFactory(sessionFactory);
  serverSettings.load();
}
