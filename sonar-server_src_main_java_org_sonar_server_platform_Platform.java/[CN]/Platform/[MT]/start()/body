{
  if (!started && isUpToDateDatabase()) {
    try {
      TimeProfiler profiler=new TimeProfiler().start("Start services");
      startCoreComponents();
      startServiceComponents();
      executeStartupTasks();
      started=true;
      profiler.stop();
    }
 catch (    Exception e) {
      LoggerFactory.getLogger(getClass()).error("Fail to start server",e);
      throw new IllegalStateException("Fail to start server",e);
    }
  }
}
