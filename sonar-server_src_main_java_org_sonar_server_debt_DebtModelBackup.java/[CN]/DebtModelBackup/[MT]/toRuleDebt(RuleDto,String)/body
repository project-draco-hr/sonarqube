{
  RuleDebt ruleDebt=new RuleDebt().setRuleKey(RuleKey.of(rule.getRepositoryKey(),rule.getRuleKey()));
  String function=rule.getRemediationFunction();
  String coefficient=rule.getRemediationCoefficient();
  String offset=rule.getRemediationOffset();
  String effectiveFunction=function != null ? function : rule.getDefaultRemediationFunction();
  String effectiveCoefficient=coefficient != null ? coefficient : rule.getDefaultRemediationCoefficient();
  String effectiveOffset=offset != null ? offset : rule.getDefaultRemediationOffset();
  ruleDebt.setCharacteristicKey(characteristicKey);
  ruleDebt.setFunction(DebtRemediationFunction.Type.valueOf(effectiveFunction));
  ruleDebt.setCoefficient(effectiveCoefficient);
  ruleDebt.setOffset(effectiveOffset);
  return ruleDebt;
}
