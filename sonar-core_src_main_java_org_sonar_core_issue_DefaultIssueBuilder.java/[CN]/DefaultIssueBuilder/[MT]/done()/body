{
  Preconditions.checkNotNull(componentKey,"Component key must be set");
  Preconditions.checkNotNull(ruleRepository,"Rule repository must be set");
  Preconditions.checkNotNull(ruleKey,"Rule key must be set");
  String key=UUID.randomUUID().toString();
  Preconditions.checkState(!Strings.isNullOrEmpty(key),"Fail to generate issue key");
  DefaultIssue issue=new DefaultIssue();
  issue.setKey(key);
  issue.setComponentKey(componentKey);
  issue.setRuleRepositoryKey(ruleRepository);
  issue.setRuleKey(ruleKey);
  issue.setMessage(message);
  issue.setTitle(title);
  issue.setSeverity(severity);
  issue.setCost(cost);
  issue.setLine(line);
  issue.setManual(manual);
  callback.onIssueCreation(issue);
  return issue;
}
