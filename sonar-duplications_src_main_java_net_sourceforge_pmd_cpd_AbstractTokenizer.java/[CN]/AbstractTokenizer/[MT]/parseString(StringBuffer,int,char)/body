{
  boolean escaped=false;
  boolean done=false;
  char tok=' ';
  while ((loc < currentLine.length()) && !done) {
    tok=currentLine.charAt(loc);
    if (escaped && tok == stringDelimiter)     escaped=false;
 else     if (tok == stringDelimiter && (token.length() > 0))     done=true;
 else     if (tok == '\\')     escaped=true;
 else     escaped=false;
    token.append(tok);
    loc++;
  }
  if (!done && loc >= currentLine.length() && this.spanMultipleLinesString && ++this.lineNumber < this.code.size()) {
    this.currentLine=this.code.get(this.lineNumber);
    loc=this.parseString(token,loc,stringDelimiter);
  }
  return loc + 1;
}
