{
  ResourceDto resource=resourceDao.getResource(componentId);
  if (resource == null) {
    throw new IllegalStateException("Unable to find resource with id " + componentId);
  }
  String applicablePermissionTemplateKey=getApplicablePermissionTemplateKey(resource.getKey(),qualifier);
  applyPermissionTemplate(applicablePermissionTemplateKey,componentId);
}
