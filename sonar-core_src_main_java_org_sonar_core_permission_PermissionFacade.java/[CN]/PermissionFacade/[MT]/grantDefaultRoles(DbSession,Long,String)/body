{
  ResourceDto resource=resourceDao.getResource(componentId,session);
  if (resource == null) {
    throw new IllegalStateException("Unable to find resource with id " + componentId);
  }
  String applicablePermissionTemplateKey=getApplicablePermissionTemplateKey(session,resource.getKey(),qualifier);
  applyPermissionTemplate(session,applicablePermissionTemplateKey,componentId);
}
