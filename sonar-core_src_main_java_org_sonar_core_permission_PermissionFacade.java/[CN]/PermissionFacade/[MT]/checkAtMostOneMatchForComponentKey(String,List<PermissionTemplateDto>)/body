{
  if (matchingTemplates.size() > 1) {
    StringBuilder templatesNames=new StringBuilder();
    for (Iterator<PermissionTemplateDto> it=matchingTemplates.iterator(); it.hasNext(); ) {
      templatesNames.append("'").append(it.next().getName()).append("'");
      if (it.hasNext()) {
        templatesNames.append(", ");
      }
    }
    throw new IllegalStateException(MessageFormat.format("The following permission templates have a key pattern that matches the ''{0}'' key: {1}." + " The administrator must update them to make sure that only one permission template can be selected for 'foo.project' component.",componentKey,templatesNames.toString()));
  }
}
