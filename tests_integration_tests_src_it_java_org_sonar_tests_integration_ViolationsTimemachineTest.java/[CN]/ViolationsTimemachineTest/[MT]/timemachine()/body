{
  TimeMachineQuery query=TimeMachineQuery.createForMetrics(PROJECT,CoreMetrics.BLOCKER_VIOLATIONS_KEY,CoreMetrics.CRITICAL_VIOLATIONS_KEY,CoreMetrics.MAJOR_VIOLATIONS_KEY,CoreMetrics.MINOR_VIOLATIONS_KEY,CoreMetrics.INFO_VIOLATIONS_KEY);
  List<TimeMachineData> snapshots=sonar.findAll(query);
  assertThat(snapshots.size(),is(2));
  TimeMachineData snapshot1=snapshots.get(0);
  TimeMachineData snapshot2=snapshots.get(1);
  assertThat(snapshot1.getDate().getMonth(),is(9));
  assertThat(snapshot1.getValues(),is(Arrays.asList("0.0","0.0","3.0","4.0","0.0")));
  assertThat(snapshot2.getDate().getMonth(),is(10));
  assertThat(snapshot2.getValues(),is(Arrays.asList("0.0","0.0","4.0","3.0","0.0")));
}
