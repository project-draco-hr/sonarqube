{
  ComponentDto project=newProjectDto().setUuid("project-uuid");
  SnapshotDto projectSnapshot=componentDb.insertProjectAndSnapshot(project);
  componentDb.insertComponentAndSnapshot(newFileDto(project,2),projectSnapshot);
  componentDb.insertComponentAndSnapshot(newFileDto(project,1),projectSnapshot);
  ComponentDto module=newModuleDto("module-uuid-1",project);
  componentDb.insertComponentAndSnapshot(module,projectSnapshot);
  componentDb.insertComponentAndSnapshot(newDirectory(project,"path/directory/","directory-uuid-1"),projectSnapshot);
  db.commit();
  componentDb.indexAllComponents();
  TreeWsResponse response=call(ws.newRequest().setParam(PARAM_STRATEGY,"all").setParam(Param.SORT,"qualifier, name").setParam(PARAM_BASE_COMPONENT_ID,"project-uuid"));
  assertThat(response.getComponentsList()).extracting("id").containsExactly("module-uuid-1","path/directory/","file-uuid-1","file-uuid-2");
}
