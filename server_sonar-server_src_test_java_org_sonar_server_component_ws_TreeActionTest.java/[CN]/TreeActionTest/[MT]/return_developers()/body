{
  ComponentDto project=newProjectDto("project-uuid");
  componentDb.insertProjectAndSnapshot(project);
  ComponentDto developer=newDeveloper("developer-name");
  SnapshotDto developerSnapshot=componentDb.insertDeveloperAndSnapshot(developer);
  componentDb.insertComponentAndSnapshot(newDevProjectCopy("project-copy-uuid",project,developer),developerSnapshot);
  db.commit();
  TreeWsResponse response=call(ws.newRequest().setParam(PARAM_BASE_COMPONENT_ID,developer.uuid()));
  assertThat(response.getBaseComponent().getId()).isEqualTo(developer.uuid());
  assertThat(response.getComponentsCount()).isEqualTo(1);
  assertThat(response.getComponents(0).getId()).isEqualTo("project-copy-uuid");
  assertThat(response.getComponents(0).getRefId()).isEqualTo("project-uuid");
}
