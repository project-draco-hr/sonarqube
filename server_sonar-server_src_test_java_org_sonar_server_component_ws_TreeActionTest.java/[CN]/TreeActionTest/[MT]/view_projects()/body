{
  ComponentDto project=newProjectDto("project-uuid");
  componentDb.insertProjectAndSnapshot(project);
  ComponentDto view=newView("view-uuid");
  SnapshotDto viewSnapshot=componentDb.insertViewAndSnapshot(view);
  componentDb.insertComponentAndSnapshot(newProjectCopy("project-copy-uuid",project,view),viewSnapshot);
  TreeWsResponse response=call(ws.newRequest().setParam(PARAM_BASE_COMPONENT_ID,view.uuid()));
  assertThat(response.getBaseComponent().getId()).isEqualTo(view.uuid());
  assertThat(response.getComponentsCount()).isEqualTo(1);
  assertThat(response.getComponents(0).getId()).isEqualTo("project-copy-uuid");
  assertThat(response.getComponents(0).getRefId()).isEqualTo("project-uuid");
}
