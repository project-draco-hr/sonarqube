{
  when(containerFactory.create(any(ComponentContainer.class),any(ReportQueue.Item.class))).thenReturn(mock(ComputeEngineContainer.class));
  AnalysisReportDto report=AnalysisReportDto.newForTests(1L).setProjectKey("P1");
  ReportQueue.Item item=new ReportQueue.Item(report,temp.newFile());
  when(queue.pop()).thenReturn(item);
  doThrow(new IllegalStateException("pb")).when(queue).remove(item);
  sut.run();
  assertThat(logTester.logs()).contains("Failed to remove analysis report 1 from queue");
}
