{
  Query query=getSession().createQuery("SELECT d.projectSnapshotId FROM " + DependencyDto.class.getSimpleName() + " d WHERE NOT EXISTS(FROM "+ Snapshot.class.getSimpleName()+ " s WHERE s.id=d.projectSnapshotId AND s.last=:last)");
  query.setParameter("last",true);
  final List<Integer> projectSnapshotIds=query.getResultList();
  executeQuery(projectSnapshotIds,"DELETE FROM " + DependencyDto.class.getSimpleName() + " WHERE projectSnapshotId in (:ids)");
}
