{
  ValidationMessages validation=ValidationMessages.create();
  RuleFinder ruleFinder=newRuleFinder();
  RulesProfile profile=new XMLProfileParser(ruleFinder).parseResource(getClass().getClassLoader(),"org/sonar/api/profiles/XMLProfileParserTest/importProfile.xml",validation);
  assertThat(profile.getLanguage(),is("java"));
  assertThat(profile.getName(),is("sonar way"));
  assertThat(validation.hasErrors(),is(false));
  assertNotNull(profile);
  assertThat(profile.getActiveRule("checkstyle","IllegalRegexp").getPriority(),is(RulePriority.CRITICAL));
}
