{
  ComponentContainer container=new ComponentContainer();
  PluginMetadata plugin=mock(PluginMetadata.class);
  container.startComponents();
  thrown.expect(IllegalStateException.class);
  thrown.expectMessage("Unable to register extension org.sonar.api.platform.ComponentContainerTest$UnstartableComponent");
  container.addExtension(plugin,UnstartableComponent.class);
}
