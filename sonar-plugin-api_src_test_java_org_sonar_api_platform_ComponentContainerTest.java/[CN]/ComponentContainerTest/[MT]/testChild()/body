{
  ComponentContainer parent=new ComponentContainer();
  parent.startComponents();
  ComponentContainer child=parent.createChild();
  child.addSingleton(StartableComponent.class);
  child.startComponents();
  assertTrue(child.getParent() == parent);
  assertTrue(parent.getChild() == child);
  assertTrue(child.getComponentByType(ComponentContainer.class) == child);
  assertTrue(parent.getComponentByType(ComponentContainer.class) == parent);
  assertThat(child.getComponentByType(StartableComponent.class),notNullValue());
  assertThat(parent.getComponentByType(StartableComponent.class),nullValue());
  parent.stopComponents();
}
