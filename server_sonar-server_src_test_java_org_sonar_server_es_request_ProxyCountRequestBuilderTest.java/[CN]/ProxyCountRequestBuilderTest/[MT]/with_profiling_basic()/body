{
  Profiling profiling=new Profiling(new Settings().setProperty(Profiling.CONFIG_PROFILING_LEVEL,Profiling.Level.BASIC.name()));
  SearchClient searchClient=new SearchClient(new Settings(),profiling);
  try {
    searchClient.prepareCount(IndexDefinition.RULE.getIndexName()).get();
    fail();
  }
 catch (  IllegalStateException e) {
    assertThat(e.getMessage()).isEqualTo("Fail to execute ES count request on indices 'rules'");
  }
  searchClient.stop();
}
