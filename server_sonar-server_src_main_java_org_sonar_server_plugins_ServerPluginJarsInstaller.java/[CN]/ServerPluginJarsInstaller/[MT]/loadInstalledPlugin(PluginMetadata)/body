{
  if (BLACKLISTED_PLUGINS.contains(metadata.getKey())) {
    LOG.warn("Plugin {} is blacklisted. Please uninstall it.",metadata.getName());
  }
 else {
    PluginMetadata existing=pluginByKeys.put(metadata.getKey(),metadata);
    if (existing != null) {
      throw MessageException.of(format("Found two files for the same plugin '%s': %s and %s",metadata.getKey(),metadata.getFile().getName(),existing.getFile().getName()));
    }
  }
}
