{
  Logger rootLogger=setupCeTaskAppender();
  CeLogging underTest=new CeLogging(newSettings(dataDir,5));
  underTest.initForTask(createCeTask("TYPE1","U1"));
  verifyNoAppender(rootLogger);
  LoggerFactory.getLogger(getClass()).info("some log!");
  verifyAllAppenderStarted(rootLogger,1);
  CeTask ceTask=createCeTask("TYPE1","U2");
  underTest.initForTask(ceTask);
  LoggerFactory.getLogger(getClass()).info("some other log!");
  verifyAllAppenderStarted(rootLogger,2);
  underTest.clearForTask();
  Appender appender=verifySingleAppenderIsStopped(rootLogger,2);
  assertThat(appender.getName()).isEqualTo("ce-" + LogFileRef.from(ceTask).getRelativePath());
}
