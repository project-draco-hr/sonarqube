{
  if (!initialized) {
    throw new SonarException("Module filesystem is not initialized");
  }
  List<InputFile> result=Lists.newArrayList();
  FileQueryFilter filter=new FileQueryFilter(analysisMode,query);
  for (  InputFile input : index.inputFiles(moduleKey)) {
    if (filter.accept(input)) {
      result.add(input);
    }
  }
  return result;
}
