{
  Collection<FilePredicate> predicates=Lists.newArrayList();
  for (  Map.Entry<String,Collection<String>> entry : query.attributes().entrySet()) {
    predicates.add(fromDeprecatedAttribute(entry.getKey(),entry.getValue()));
  }
  return ImmutableList.copyOf(files(FilePredicates.and(predicates)));
}
