{
  if (!initialized) {
    LOG.warn("Accessing the filesystem before the Sensor phase is deprecated and will not be supported in the future. Please update your plugin.");
    indexer.index(this);
  }
  Collection<FilePredicate> predicates=Lists.newArrayList();
  for (  Map.Entry<String,Collection<String>> entry : query.attributes().entrySet()) {
    predicates.add(fromDeprecatedAttribute(entry.getKey(),entry.getValue()));
  }
  return ImmutableList.copyOf(files(FilePredicates.and(predicates)));
}
