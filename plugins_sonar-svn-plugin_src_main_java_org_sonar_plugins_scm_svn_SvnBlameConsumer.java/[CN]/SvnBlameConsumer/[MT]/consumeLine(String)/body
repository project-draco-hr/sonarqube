{
  Matcher matcher;
  if ((matcher=LINE_PATTERN.matcher(line)).find()) {
    if (lineNumber != 0) {
      throw new IllegalStateException("Unable to blame file " + filename + ". No blame info at line "+ lineNumber+ ". Is file commited?");
    }
    String lineNumberStr=matcher.group(1);
    lineNumber=Integer.parseInt(lineNumberStr);
  }
 else   if ((matcher=REVISION_PATTERN.matcher(line)).find()) {
    revision=matcher.group(1);
  }
 else   if ((matcher=AUTHOR_PATTERN.matcher(line)).find()) {
    author=matcher.group(1);
  }
 else   if ((matcher=DATE_PATTERN.matcher(line)).find()) {
    String date=matcher.group(1);
    String time=matcher.group(2);
    Date dateTime=parseDateTime(date + " " + time);
    lines.add(new BlameLine(dateTime,revision,author));
    lineNumber=0;
    revision=null;
    author=null;
  }
}
