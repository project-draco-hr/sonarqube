{
  int ref=component.getReportAttributes().getRef();
  Long existingSnapshotId=snapshotIdsByRef.get(ref);
  if (existingSnapshotId != null) {
    throw new IllegalArgumentException(String.format("Component ref '%s' has already a snapshot id",ref));
  }
  snapshotIdsByRef.put(ref,snapshotId);
  return this;
}
