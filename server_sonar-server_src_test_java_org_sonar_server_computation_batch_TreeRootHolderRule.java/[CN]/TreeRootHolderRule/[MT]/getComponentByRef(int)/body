{
  if (root == null) {
    throw new IllegalStateException("Root has not been set in " + TreeRootHolder.class.getSimpleName());
  }
  Component component=componentsByRef.get(ref);
  if (component == null) {
    throw new IllegalArgumentException(String.format("Component '%s' hasn't been found",ref));
  }
  return component;
}
