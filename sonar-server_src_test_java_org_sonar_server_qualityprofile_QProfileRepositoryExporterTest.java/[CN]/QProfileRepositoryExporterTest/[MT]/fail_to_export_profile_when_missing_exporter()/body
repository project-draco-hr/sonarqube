{
  RulesProfile profile=mock(RulesProfile.class);
  when(profile.getId()).thenReturn(1);
  when(hibernateSession.getSingleResult(any(Class.class),eq("id"),eq(1))).thenReturn(profile);
  ProfileExporter exporter=mock(ProfileExporter.class);
  when(exporter.getKey()).thenReturn("pmd");
  exporters.add(exporter);
  try {
    operations.exportToXml(new QProfile().setId(1),"unknown");
    fail();
  }
 catch (  Exception e) {
    assertThat(e).isInstanceOf(BadRequestException.class).hasMessage("No such exporter : unknown");
  }
  verify(exporter,never()).exportProfile(any(RulesProfile.class),any(Writer.class));
}
