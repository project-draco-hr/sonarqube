{
  dupBuilder.clear();
  Block originBlock=input.originBlock();
  blockBuilder.clear();
  dupBuilder.setOriginBlock(blockBuilder.setStartLine(originBlock.startLine()).setEndLine(originBlock.startLine() + originBlock.length() - 1).build());
  for (  Block duplicate : input.duplicates()) {
    blockBuilder.clear();
    String componentKey=duplicate.resourceKey();
    if (!currentComponentKey.equals(componentKey)) {
      BatchResource sameProjectComponent=resourceCache.get(componentKey);
      if (sameProjectComponent != null) {
        blockBuilder.setOtherComponentRef(sameProjectComponent.batchId());
      }
 else {
        blockBuilder.setComponentKey(componentKey);
      }
    }
    dupBuilder.addDuplicatedBy(blockBuilder.setStartLine(duplicate.startLine()).setEndLine(duplicate.startLine() + duplicate.length() - 1).build());
  }
  return dupBuilder.build();
}
