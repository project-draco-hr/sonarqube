{
  if (startTime == 0L) {
    throw new IllegalStateException("Profiler must be started before being stopped");
  }
  long duration=System2.INSTANCE.now() - startTime;
  if (shouldLog(logger,level)) {
    StringBuilder sb=new StringBuilder();
    if (!StringUtils.isEmpty(message)) {
      sb.append(message);
      sb.append(messageSuffix);
      sb.append(CONTEXT_SEPARATOR);
    }
    sb.append("time=").append(duration).append("ms");
    appendContext(sb);
    log(level,sb.toString(),args);
  }
  reset();
  return duration;
}
