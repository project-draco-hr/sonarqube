{
  MockUserSession.set().setGlobalPermissions(GlobalPermissions.QUALITY_PROFILE_ADMIN).setLogin("me");
  WsTester.TestRequest request=wsTester.newGetRequest("api/rules","create").setParam("key","MY_MANUAL").setParam("name","My manual rule").setParam("html_description","Description").setParam("severity","MAJOR");
  try {
    request.execute();
    fail();
  }
 catch (  Exception e) {
    assertThat(e).isInstanceOf(BadRequestException.class).hasMessage("Either 'custom_key' or 'manual_key' parameters should be set");
  }
}
