{
  RuleDto rule=RuleTesting.newXooX1();
  tester.get(RuleDao.class).insert(session,rule);
  ComponentDto project=new ComponentDto().setId(1L).setKey("MyProject").setProjectId(1L);
  tester.get(ComponentDao.class).insert(session,project);
  ComponentDto resource=new ComponentDto().setProjectId(1L).setKey("MyComponent").setId(2L);
  tester.get(ComponentDao.class).insert(session,resource);
  IssueDto issue=new IssueDto().setIssueCreationDate(DateUtils.parseDate("2014-09-04")).setIssueUpdateDate(DateUtils.parseDate("2014-12-04")).setRule(rule).setDebt(10L).setRootComponent(project).setComponent(resource).setStatus("OPEN").setResolution("OPEN").setKee("82fd47d4-b650-4037-80bc-7b112bd4eac2").setSeverity("MAJOR");
  db.issueDao().insert(session,issue);
  session.commit();
  WsTester.TestRequest request=wsTester.newGetRequest(IssuesWs.API_ENDPOINT,SearchAction.SEARCH_ACTION);
  request.setParam(SearchAction.PARAM_FACETS,"true");
  WsTester.Result result=request.execute();
  assertThat(result).isNotNull();
  result.assertJson(this.getClass(),"single_result.json",false);
}
