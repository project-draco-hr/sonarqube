{
  BatchReportWriter writer=new BatchReportWriter(temp.newFolder());
  Properties props=new Properties();
  props.setProperty(COM_FOO,"bar");
  props.setProperty(SONAR_SKIP,"true");
  when(system2.properties()).thenReturn(props);
  publisher.init(writer);
  String content=FileUtils.readFileToString(writer.getFileStructure().analysisLog());
  assertThat(content).containsOnlyOnce(COM_FOO);
  assertThat(content).doesNotContain(SONAR_SKIP);
  Settings settings=new Settings();
  settings.setProperty(COM_FOO,"bar");
  settings.setProperty(SONAR_SKIP,"true");
  publisher.dumpSettings(ProjectDefinition.create().setProperty("sonar.projectKey","foo"),settings);
  content=FileUtils.readFileToString(writer.getFileStructure().analysisLog());
  assertThat(content).containsOnlyOnce(COM_FOO);
  assertThat(content).containsOnlyOnce(SONAR_SKIP);
}
