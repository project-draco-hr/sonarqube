{
  issue.setActionPlanKey("formerActionPlan");
  ActionPlan newActionPlan=DefaultActionPlan.create("newName").setKey("newKey");
  boolean updated=updater.plan(issue,newActionPlan,context);
  assertThat(updated).isTrue();
  assertThat(issue.actionPlanKey()).isEqualTo(newActionPlan.key());
  FieldDiffs.Diff diff=issue.currentChange().get(ACTION_PLAN);
  assertThat(diff.oldValue()).isEqualTo(UNUSED);
  assertThat(diff.newValue()).isEqualTo("newName");
  assertThat(issue.mustSendNotifications()).isTrue();
}
