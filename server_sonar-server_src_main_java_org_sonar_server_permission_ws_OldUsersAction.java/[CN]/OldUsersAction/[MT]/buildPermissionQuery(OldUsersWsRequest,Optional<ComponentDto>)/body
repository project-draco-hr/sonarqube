{
  PermissionQuery.Builder permissionQuery=PermissionQuery.builder().permission(request.getPermission()).pageIndex(request.getPage()).pageSize(request.getPageSize()).membership(fromSelectionModeToMembership(firstNonNull(request.getSelected(),SelectionMode.SELECTED.value()))).search(request.getQuery());
  if (project.isPresent()) {
    permissionQuery.component(project.get().getKey());
  }
  return permissionQuery.build();
}
