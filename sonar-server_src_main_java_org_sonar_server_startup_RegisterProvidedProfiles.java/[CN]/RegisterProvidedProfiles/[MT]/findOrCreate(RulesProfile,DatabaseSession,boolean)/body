{
  RulesProfile persistedProfile=session.getSingleResult(RulesProfile.class,"name",profile.getName(),"language",profile.getLanguage());
  if (persistedProfile == null) {
    persistedProfile=RulesProfile.create(profile.getName(),profile.getLanguage());
    persistedProfile.setProvided(true);
    if (!defaultProfileAlreadyExist) {
      persistedProfile.setDefaultProfile(profile.getDefaultProfile());
    }
  }
  return persistedProfile;
}
