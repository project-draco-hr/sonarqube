{
  String id=params.get(ID_PARAM);
  String name=params.get(NAME_PARAM);
  String description=params.get(DESCRIPTION_PARAM);
  String data=params.get("data");
  String user=params.get(USER_PARAM);
  Boolean sharedParam=RubyUtils.toBoolean(params.get("shared"));
  boolean shared=sharedParam != null ? sharedParam : false;
  if (checkId) {
    checkMandatoryParameter(id,ID_PARAM);
  }
  if (checkUser) {
    checkMandatoryParameter(user,USER_PARAM);
  }
  checkMandatorySizeParameter(name,NAME_PARAM,100);
  checkOptionalSizeParameter(description,DESCRIPTION_PARAM,4000);
  DefaultIssueFilter defaultIssueFilter=DefaultIssueFilter.create(name).setDescription(description).setShared(shared).setUser(user).setData(data);
  if (!Strings.isNullOrEmpty(id)) {
    defaultIssueFilter.setId(Long.valueOf(id));
  }
  return defaultIssueFilter;
}
