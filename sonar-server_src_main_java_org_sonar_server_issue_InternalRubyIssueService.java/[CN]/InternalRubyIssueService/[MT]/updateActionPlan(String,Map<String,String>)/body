{
  DefaultActionPlan existingActionPlan=(DefaultActionPlan)actionPlanService.findByKey(key,UserSession.get());
  if (existingActionPlan == null) {
    Result<ActionPlan> result=Result.of();
    result.addError(Result.Message.ofL10n("action_plans.errors.action_plan_does_not_exist",key));
    return result;
  }
 else {
    Result<ActionPlan> result=createActionPlanResult(parameters,existingActionPlan.name());
    if (result.ok()) {
      DefaultActionPlan actionPlan=(DefaultActionPlan)result.get();
      actionPlan.setKey(existingActionPlan.key());
      actionPlan.setUserLogin(existingActionPlan.userLogin());
      result.set(actionPlanService.update(actionPlan,UserSession.get()));
    }
    return result;
  }
}
