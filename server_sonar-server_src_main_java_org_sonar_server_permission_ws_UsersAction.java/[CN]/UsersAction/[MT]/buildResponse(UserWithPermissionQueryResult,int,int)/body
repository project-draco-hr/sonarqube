{
  List<UserWithPermission> usersWithPermission=usersResult.users();
  WsUsersResponse.Builder userResponse=WsUsersResponse.newBuilder();
  WsUsersResponse.User.Builder user=WsUsersResponse.User.newBuilder();
  for (  UserWithPermission userWithPermission : usersWithPermission) {
    userResponse.addUsers(user.clear().setLogin(userWithPermission.login()).setName(nullToEmpty(userWithPermission.name())).setEmail(nullToEmpty(userWithPermission.email())).setSelected(userWithPermission.hasPermission()));
  }
  userResponse.setPaging(Paging.newBuilder().clear().setPageIndex(page).setPageSize(pageSize).setTotal(usersResult.total()));
  return userResponse.build();
}
