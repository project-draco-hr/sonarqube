{
  if (isComponentSupported(resource)) {
    Collection<DefaultIssue> newIssues=new ArrayList(scanIssues.issues(resource.getEffectiveKey()));
    Collection<IssueDto> openIssues=initialOpenIssuesStack.selectAndRemove(resource.getId());
    tracking.track(resource,openIssues,newIssues);
    updateIssues(newIssues);
    Set<String> issueKeys=Sets.newHashSet(Collections2.transform(newIssues,new IssueToKeyFunction()));
    for (    IssueDto openIssue : openIssues) {
      addManualIssuesAndCloseResolvedOnes(openIssue);
      closeResolvedStandardIssues(openIssue,issueKeys);
      keepFalsePositiveIssues(openIssue);
      reopenUnresolvedIssues(openIssue);
    }
    if (ResourceUtils.isRootProject(resource)) {
      closeIssuesOnDeletedResources(initialOpenIssuesStack.getAllIssues());
    }
  }
}
