{
  referenceIssuesMap.clear();
  String source=index.getSource(resource);
  Issuable issuable=perspectives.as(Issuable.class,resource);
  List<DefaultIssue> newIssues=toDefaultIssues(issuable.issues());
  setChecksumOnNewIssues(newIssues,source);
  Collection<IssueDto> referenceIssues=loadExistingOpenIssues(resource);
  mapIssues(newIssues,referenceIssues,source,resource);
}
