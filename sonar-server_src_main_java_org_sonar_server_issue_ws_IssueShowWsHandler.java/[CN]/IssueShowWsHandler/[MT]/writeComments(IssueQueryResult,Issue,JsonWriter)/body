{
  json.name("comments").beginArray();
  for (  IssueComment comment : issue.comments()) {
    String userLogin=comment.userLogin();
    json.beginObject().prop("key",comment.key()).prop("userName",userLogin != null ? queryResult.user(userLogin).name() : null).prop("raw",comment.markdownText()).prop("html",Markdown.convertToHtml(comment.markdownText())).prop("createdAt",DateUtils.formatDateTime(comment.createdAt())).prop("fCreatedAge",i18n.ageFromNow(UserSession.get().locale(),comment.createdAt())).prop("updatable",UserSession.get().isLoggedIn() && UserSession.get().login().equals(comment.userLogin())).endObject();
  }
  json.endArray();
}
