{
  RollingFileAppender appender=new RollingFileAppender();
  appender.setContext(context);
  appender.setName(appenderName);
  appender.setFile(new File(logsDir,filenamePrefix + ".log").getAbsolutePath());
  SizeBasedTriggeringPolicy trigger=new SizeBasedTriggeringPolicy(size);
  trigger.setContext(context);
  trigger.start();
  appender.setTriggeringPolicy(trigger);
  FixedWindowRollingPolicy rollingPolicy=new FixedWindowRollingPolicy();
  rollingPolicy.setContext(context);
  rollingPolicy.setFileNamePattern(filenamePrefix + ".%i.log");
  rollingPolicy.setMaxIndex(1);
  rollingPolicy.setMaxIndex(maxFiles);
  rollingPolicy.setMaxIndex(maxFiles);
  rollingPolicy.setParent(appender);
  rollingPolicy.start();
  appender.setRollingPolicy(rollingPolicy);
  return appender;
}
