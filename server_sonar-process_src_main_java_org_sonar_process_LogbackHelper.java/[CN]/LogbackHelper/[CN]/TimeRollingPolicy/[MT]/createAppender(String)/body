{
  RollingFileAppender appender=new RollingFileAppender();
  appender.setContext(context);
  appender.setName(appenderName);
  appender.setFile(new File(logsDir,filenamePrefix + ".log").getAbsolutePath());
  TimeBasedRollingPolicy rollingPolicy=new TimeBasedRollingPolicy();
  rollingPolicy.setContext(context);
  rollingPolicy.setFileNamePattern(filenamePrefix + ".%d{" + datePattern+ "}.log");
  rollingPolicy.setMaxHistory(maxFiles);
  rollingPolicy.setParent(appender);
  rollingPolicy.start();
  appender.setRollingPolicy(rollingPolicy);
  return appender;
}
