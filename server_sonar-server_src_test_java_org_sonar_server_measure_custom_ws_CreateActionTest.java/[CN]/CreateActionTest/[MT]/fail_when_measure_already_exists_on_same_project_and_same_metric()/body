{
  MetricDto metric=insertMetricAndProject(ValueType.STRING,DEFAULT_PROJECT_UUID);
  expectedException.expect(ServerException.class);
  expectedException.expectMessage(String.format("A measure already exists for project 'project-key' (id: project-uuid) and metric 'metric-key' (id: '%d')",metric.getId()));
  newRequest().setParam(CreateAction.PARAM_PROJECT_ID,DEFAULT_PROJECT_UUID).setParam(CreateAction.PARAM_METRIC_ID,metric.getId().toString()).setParam(CreateAction.PARAM_VALUE,"whatever-value").execute();
  newRequest().setParam(CreateAction.PARAM_PROJECT_ID,DEFAULT_PROJECT_UUID).setParam(CreateAction.PARAM_METRIC_ID,metric.getId().toString()).setParam(CreateAction.PARAM_VALUE,"whatever-value").execute();
}
