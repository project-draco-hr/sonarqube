{
  dbClient=new DbClient(db.database(),db.myBatis(),new CustomMeasureDao(),new MetricDao(),new ComponentDao());
  dbSession=dbClient.openSession(false);
  TypeValidations typeValidations=new TypeValidations(Arrays.asList(new BooleanTypeValidation(),new IntegerTypeValidation(),new FloatTypeValidation(),new MetricLevelTypeValidation(),new LongTypeValidation()));
  ws=new WsTester(new CustomMeasuresWs(new CreateAction(dbClient,userSession,System2.INSTANCE,typeValidations)));
  db.truncateTables();
  userSession.setGlobalPermissions(GlobalPermissions.SYSTEM_ADMIN);
}
