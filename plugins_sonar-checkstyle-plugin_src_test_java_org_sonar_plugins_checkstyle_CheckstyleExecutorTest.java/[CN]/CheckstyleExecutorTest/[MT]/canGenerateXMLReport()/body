{
  CheckstyleConfiguration conf=mockConf();
  File report=new File("target/test-tmp/checkstyle-report.xml");
  when(conf.getTargetXMLReport()).thenReturn(report);
  CheckstyleAuditListener listener=mockListener();
  CheckstyleExecutor executor=new CheckstyleExecutor(conf,listener,getClass().getClassLoader());
  executor.execute();
  assertThat(report.exists(),is(true));
  assertThat(FileUtils.readFileToString(report),containsString("<error"));
}
