{
  ComponentDto component=componentFinder.getByKey(session,componentKey);
  ResourceDto provisioned=dbClient.resourceDao().selectProvisionedProject(session,componentKey);
  if (provisioned == null) {
    checkProjectAdminUserByComponentKey(userSession,componentKey);
  }
 else {
    userSession.checkGlobalPermission(GlobalPermissions.PROVISIONING);
  }
  permissionRepository.applyDefaultPermissionTemplate(session,component);
  session.commit();
  indexProjectPermissions();
}
