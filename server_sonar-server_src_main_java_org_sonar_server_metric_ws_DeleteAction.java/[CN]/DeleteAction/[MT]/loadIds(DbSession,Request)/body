{
  List<String> idsAsStrings=request.paramAsStrings(PARAM_IDS);
  List<String> keys=request.paramAsStrings(PARAM_KEYS);
  checkArgument(idsAsStrings != null || keys != null,"Ids or keys must be provided.");
  List<Integer> ids=null;
  if (idsAsStrings != null) {
    ids=Lists.transform(idsAsStrings,new Function<String,Integer>(){
      @Override public Integer apply(      String id){
        return Integer.valueOf(id);
      }
    }
);
  }
 else   if (keys != null) {
    ids=Lists.transform(dbClient.metricDao().selectNullableByKeys(dbSession,keys),new Function<MetricDto,Integer>(){
      @Override public Integer apply(      @Nonnull MetricDto input){
        return input.getId();
      }
    }
);
  }
  return ids;
}
