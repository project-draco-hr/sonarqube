{
  dbTester.prepareDbUnit(getClass(),"shouldSelectPurgeableSnapshots.xml");
  List<PurgeableSnapshotDto> snapshots=underTest.selectPurgeableSnapshots(THE_PROJECT_UUID);
  assertThat(snapshots).hasSize(3);
  assertThat(getById(snapshots,THE_PROJECT_ID).isLast()).isTrue();
  assertThat(getById(snapshots,THE_PROJECT_ID).hasEvents()).isFalse();
  assertThat(getById(snapshots,4L).isLast()).isFalse();
  assertThat(getById(snapshots,4L).hasEvents()).isFalse();
  assertThat(getById(snapshots,5L).isLast()).isFalse();
  assertThat(getById(snapshots,5L).hasEvents()).isTrue();
}
