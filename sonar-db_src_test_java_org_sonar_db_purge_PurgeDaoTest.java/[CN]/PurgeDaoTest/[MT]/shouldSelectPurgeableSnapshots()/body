{
  dbTester.prepareDbUnit(getClass(),"shouldSelectPurgeableSnapshots.xml");
  List<PurgeableAnalysisDto> snapshots=underTest.selectPurgeableAnalyses(THE_PROJECT_UUID,dbSession);
  assertThat(snapshots).hasSize(3);
  assertThat(getById(snapshots,"u1").isLast()).isTrue();
  assertThat(getById(snapshots,"u1").hasEvents()).isFalse();
  assertThat(getById(snapshots,"u4").isLast()).isFalse();
  assertThat(getById(snapshots,"u4").hasEvents()).isFalse();
  assertThat(getById(snapshots,"u5").isLast()).isFalse();
  assertThat(getById(snapshots,"u5").hasEvents()).isTrue();
}
