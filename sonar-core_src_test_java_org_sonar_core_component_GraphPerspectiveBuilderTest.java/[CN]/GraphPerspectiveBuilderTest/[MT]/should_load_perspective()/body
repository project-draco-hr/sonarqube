{
  ScanGraph graph=ScanGraph.create();
  MutablePerspective expectedPerspective=mock(MutablePerspective.class);
  ComponentVertex fileComponent=graph.addComponent(MockSourceFile.createMain("org.foo.Bar"));
  GraphPerspectiveLoader perspectiveLoader=mock(GraphPerspectiveLoader.class);
  when(perspectiveLoader.load(fileComponent)).thenReturn(expectedPerspective);
  GraphPerspectiveBuilder perspectiveBuilder=new GraphPerspectiveBuilder(graph,MutablePerspective.class,null,perspectiveLoader){
  }
;
  Perspective loadedPerspective=perspectiveBuilder.loadPerspective(MutablePerspective.class,fileComponent);
  assertThat(loadedPerspective).isEqualTo(expectedPerspective);
}
