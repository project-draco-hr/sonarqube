{
  activeRules=new ActiveRulesBuilder().build();
  fs=new DefaultFileSystem();
  MetricFinder metricFinder=mock(MetricFinder.class);
  when(metricFinder.findByKey(CoreMetrics.NCLOC_KEY)).thenReturn(CoreMetrics.NCLOC);
  sensorContext=mock(SensorContext.class);
  settings=new Settings();
  resourcePerspectives=mock(ResourcePerspectives.class);
  ComponentDataCache componentDataCache=mock(ComponentDataCache.class);
  BlockCache blockCache=mock(BlockCache.class);
  adaptor=new SensorContextAdapter(sensorContext,metricFinder,new Project("myProject"),resourcePerspectives,settings,fs,activeRules,componentDataCache,blockCache,mock(DuplicationCache.class),mock(SonarIndex.class));
}
