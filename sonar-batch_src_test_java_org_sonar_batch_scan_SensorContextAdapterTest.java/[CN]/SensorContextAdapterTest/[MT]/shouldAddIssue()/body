{
  InputFile file=new DefaultInputFile("src/Foo.php");
  ArgumentCaptor<Issue> argumentCaptor=ArgumentCaptor.forClass(Issue.class);
  Issuable issuable=mock(Issuable.class);
  when(resourcePerspectives.as(Issuable.class,File.create("src/Foo.php"))).thenReturn(issuable);
  when(issuable.addIssue(argumentCaptor.capture())).thenReturn(true);
  adaptor.addIssue(new DefaultIssueBuilder().onFile(file).ruleKey(RuleKey.of("foo","bar")).message("Foo").atLine(3).effortToFix(10.0).build());
  Issue issue=argumentCaptor.getValue();
  assertThat(issue.ruleKey()).isEqualTo(RuleKey.of("foo","bar"));
  assertThat(issue.message()).isEqualTo("Foo");
  assertThat(issue.line()).isEqualTo(3);
  assertThat(issue.effortToFix()).isEqualTo(10.0);
}
