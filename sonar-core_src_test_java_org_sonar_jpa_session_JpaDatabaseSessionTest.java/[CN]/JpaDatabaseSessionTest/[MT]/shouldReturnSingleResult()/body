{
  Query query=mock(Query.class);
  when(query.getResultList()).thenReturn(Arrays.asList("foo","foo"),Arrays.asList("bar"));
  assertThat(session.getSingleResult(query,"default"),is("foo"));
  assertThat(session.getSingleResult(query,"default"),is("bar"));
}
