{
  Component file1=builder(Component.Type.FILE,5).build();
  Component file2=builder(Component.Type.FILE,4).build();
  Component file3=builder(Component.Type.FILE,3).build();
  Component directory=builder(Component.Type.DIRECTORY,2).addChildren(file1,file2,file3).build();
  Component project=builder(Component.Type.PROJECT,1).addChildren(directory).build();
  treeRootHolder.setRoot(project);
  periodsHolder.setPeriods();
  addIssues(file1.getRef(),createIssue(STATUS_OPEN,BLOCKER,RULE_1.getKey()));
  addIssues(file2.getRef(),createIssue(STATUS_REOPENED,CRITICAL,RULE_2.getKey()));
  sut.execute();
  assertThat(measureRepository.getRawMeasure(file1,ISSUES_METRIC).get().getIntValue()).isEqualTo(1);
  assertThat(measureRepository.getRawMeasure(file2,ISSUES_METRIC).get().getIntValue()).isEqualTo(1);
  assertThat(measureRepository.getRawMeasure(directory,ISSUES_METRIC).get().getIntValue()).isEqualTo(2);
  assertThat(measureRepository.getRawMeasure(project,ISSUES_METRIC).get().getIntValue()).isEqualTo(2);
}
