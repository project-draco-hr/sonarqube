{
  treeRootHolder.setRoot(PROJECT);
  addIssues(FILE.getRef(),createIssue(STATUS_CONFIRMED,BLOCKER,null,RULE_1.getKey(),1388552400000L),createIssue(STATUS_OPEN,BLOCKER,null,RULE_1.getKey(),1433131200000L),createIssue(STATUS_OPEN,BLOCKER,null,RULE_2.getKey(),1433131200000L),createIssue(STATUS_OPEN,CRITICAL,null,RULE_1.getKey(),1433131200000L),createIssue(STATUS_OPEN,MAJOR,null,RULE_1.getKey(),1433131200000L),createIssue(STATUS_OPEN,MINOR,null,RULE_1.getKey(),1433131200000L),createIssue(STATUS_OPEN,INFO,null,RULE_1.getKey(),1433131200000L));
  periodsHolder.setPeriods(newPeriod(1,1420088400000L));
  sut.execute();
  assertThat(measureRepository.getRawMeasure(PROJECT,NEW_BLOCKER_ISSUES_METRIC).get().getVariations().getVariation1()).isEqualTo(2);
  assertThat(measureRepository.getRawMeasure(PROJECT,NEW_CRITICAL_ISSUES_METRIC).get().getVariations().getVariation1()).isEqualTo(1);
  assertThat(measureRepository.getRawMeasure(PROJECT,NEW_MAJOR_ISSUES_METRIC).get().getVariations().getVariation1()).isEqualTo(1);
  assertThat(measureRepository.getRawMeasure(PROJECT,NEW_MINOR_ISSUES_METRIC).get().getVariations().getVariation1()).isEqualTo(1);
  assertThat(measureRepository.getRawMeasure(PROJECT,NEW_INFO_ISSUES_METRIC).get().getVariations().getVariation1()).isEqualTo(1);
}
