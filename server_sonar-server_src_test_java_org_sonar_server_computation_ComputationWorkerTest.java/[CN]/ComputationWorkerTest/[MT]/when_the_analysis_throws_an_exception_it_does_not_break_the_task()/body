{
  AnalysisReportDto report=AnalysisReportDto.newForTests(1L);
  when(queue.pop()).thenReturn(report);
  doThrow(IllegalStateException.class).when(service).process(report);
  sut.run();
}
