{
  QueryContext context=getQueryContext(request);
  RuleQuery query=doQuery(request);
  Result<Rule> result=doSearch(query,context);
  SearchResponse responseBuilder=buildResponse(request,context,result);
  writeProtobuf(responseBuilder,request,response);
}
