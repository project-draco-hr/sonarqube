{
  RuleQuery plainQuery=createRuleQuery(ruleService.newRuleQuery(),request);
  String qProfileKey=request.param(PARAM_QPROFILE);
  if (qProfileKey != null) {
    QualityProfileDto qProfile=activeRuleCompleter.loadProfile(qProfileKey);
    if (qProfile != null) {
      plainQuery.setLanguages(ImmutableList.of(qProfile.getLanguage()));
    }
  }
  return plainQuery;
}
