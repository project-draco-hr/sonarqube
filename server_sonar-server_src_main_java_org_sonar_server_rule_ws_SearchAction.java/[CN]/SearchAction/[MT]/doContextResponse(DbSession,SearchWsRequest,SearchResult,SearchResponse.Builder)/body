{
  org.sonar.server.es.SearchOptions contextForResponse=loadCommonContext(request);
  writeRules(response,result,contextForResponse);
  if (contextForResponse.getFields().contains("actives")) {
    activeRuleCompleter.completeSearch(dbSession,doQuery(request),result.rules,response);
  }
}
