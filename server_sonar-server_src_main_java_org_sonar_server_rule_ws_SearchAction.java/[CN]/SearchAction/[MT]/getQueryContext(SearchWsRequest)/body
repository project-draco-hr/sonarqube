{
  org.sonar.server.es.SearchOptions context=loadCommonContext(request);
  org.sonar.server.es.SearchOptions searchQueryContext=new org.sonar.server.es.SearchOptions().setLimit(context.getLimit()).setOffset(context.getOffset());
  if (context.getFacets().contains(RuleIndex.FACET_OLD_DEFAULT)) {
    searchQueryContext.addFacets(DEFAULT_FACETS);
  }
 else {
    searchQueryContext.addFacets(context.getFacets());
  }
  return searchQueryContext;
}
