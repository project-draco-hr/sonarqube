{
  QueryContext contextForResponse=super.getQueryContext(request);
  writeRules(result,json,contextForResponse);
  if (contextForResponse.getFieldsToReturn().contains("actives")) {
    activeRuleCompleter.completeSearch(doQuery(request),result.getHits(),json);
  }
  if (contextForResponse.isFacet()) {
    writeFacets(result,json);
  }
}
