{
  String url=settings.getString("orchestrator.configUrl");
  InputStream input=null;
  try {
    URI uri=new URI(url);
    if (url.startsWith("file:")) {
      File file=new File(uri);
      input=FileUtils.openInputStream(file);
    }
 else {
      HttpURLConnection connection=(HttpURLConnection)uri.toURL().openConnection();
      int responseCode=connection.getResponseCode();
      if (responseCode >= 400) {
        throw new IllegalStateException("Fail to request: " + uri + ". Status code="+ responseCode);
      }
      input=connection.getInputStream();
    }
    Properties props=new Properties();
    props.load(input);
    settings.addProperties(props);
    for (    Map.Entry<String,String> entry : settings.getProperties().entrySet()) {
      String interpolatedValue=StrSubstitutor.replace(entry.getValue(),System.getenv(),"${","}");
      settings.setProperty(entry.getKey(),interpolatedValue);
    }
  }
 catch (  Exception e) {
    throw new IllegalStateException(e);
  }
 finally {
    IOUtils.closeQuietly(input);
  }
}
