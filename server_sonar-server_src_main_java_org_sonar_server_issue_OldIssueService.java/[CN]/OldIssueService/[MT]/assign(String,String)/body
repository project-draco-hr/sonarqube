{
  verifyLoggedIn();
  IssueQueryResult queryResult=loadIssue(issueKey);
  DefaultIssue issue=(DefaultIssue)queryResult.first();
  User user=null;
  if (!Strings.isNullOrEmpty(assignee)) {
    user=userFinder.findByLogin(assignee);
    if (user == null) {
      throw new IllegalArgumentException("Unknown user: " + assignee);
    }
  }
  IssueChangeContext context=IssueChangeContext.createUser(new Date(),UserSession.get().login());
  if (issueUpdater.assign(issue,user,context)) {
    issueStorage.save(issue);
    issueNotifications.sendChanges(issue,context,queryResult);
    dryRunCache.reportResourceModification(issue.componentKey());
  }
  return issue;
}
