{
  DefaultIssue issue=new DefaultIssue().setKey("200").setComponentKey("Action.java").setRuleKey(RuleKey.of("squid","AvoidCycle")).setNew(false);
  when(sonarReport.getIssues()).thenReturn(Lists.<DefaultIssue>newArrayList(issue));
  JSONObject json=sonarReport.createJson();
  assertThat(json.values()).hasSize(4);
  assertThat(json.get("version")).isEqualTo("3.6");
  assertThat(json.get("components")).isNotNull();
  JSONArray components=(JSONArray)json.get("components");
  assertThat(components).hasSize(1);
  assertThat(json.get("issues")).isNotNull();
  JSONArray issues=(JSONArray)json.get("issues");
  assertThat(issues).hasSize(1);
  assertThat(json.get("rules")).isNotNull();
  JSONArray rules=(JSONArray)json.get("rules");
  assertThat(rules).hasSize(1);
}
