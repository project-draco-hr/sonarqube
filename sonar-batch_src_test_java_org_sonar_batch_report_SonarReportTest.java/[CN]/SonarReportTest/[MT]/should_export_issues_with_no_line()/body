{
  DefaultIssue issue=new DefaultIssue().setKey("200").setComponentKey("Action.java").setLine(null).setRuleKey(RuleKey.of("squid","AvoidCycle"));
  when(sonarReport.getIssues()).thenReturn(Lists.<DefaultIssue>newArrayList(issue));
  JSONObject json=sonarReport.createJson();
  assertThat(json.get("issues")).isNotNull();
  JSONArray issues=(JSONArray)json.get("issues");
  JSONObject jsonIssue=(JSONObject)issues.get(0);
  assertThat(jsonIssue.get("key")).isEqualTo("200");
  assertThat(jsonIssue.containsKey("line")).isFalse();
}
