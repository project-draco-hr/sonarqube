{
  long tagId=0L;
  if (buffer.referenceTagExists(tag)) {
    tagId=buffer.referenceTagIdForValue(tag);
  }
 else {
    RuleTagDto newRuleTag=new RuleTagDto().setTag(tag);
    ruleTagDao.insert(newRuleTag,sqlSession);
    buffer.add(newRuleTag);
    tagId=newRuleTag.getId();
  }
  return tagId;
}
