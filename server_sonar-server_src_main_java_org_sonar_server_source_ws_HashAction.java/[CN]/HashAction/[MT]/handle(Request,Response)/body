{
  try (DbSession session=dbClient.openSession(false)){
    String componentKey=request.mandatoryParam("key");
    UserSession.get().checkComponentPermission(UserRole.CODEVIEWER,componentKey);
    ComponentDto component=dbClient.componentDao().getByKey(session,componentKey);
    String lineHashes=dbClient.fileSourceDao().selectLineHashes(component.uuid(),session);
    if (lineHashes == null) {
      response.noContent();
    }
 else {
      try (OutputStream output=response.stream().setMediaType("text/plain").output()){
        output.write(lineHashes.getBytes(Charsets.UTF_8));
      }
     }
  }
 }
