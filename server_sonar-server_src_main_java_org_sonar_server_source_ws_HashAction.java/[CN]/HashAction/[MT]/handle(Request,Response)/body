{
  DbSession session=dbClient.openSession(false);
  try {
    String componentKey=request.mandatoryParam("key");
    ComponentDto component=dbClient.componentDao().getByKey(session,componentKey);
    String lineHashes=fileSourceDao.selectLineHashes(component.uuid(),session);
    if (lineHashes == null) {
      response.noContent();
    }
 else {
      OutputStream output=response.stream().setMediaType("text/plain").output();
      output.write(lineHashes.getBytes(Charsets.UTF_8));
      output.close();
    }
  }
  finally {
    session.close();
  }
}
