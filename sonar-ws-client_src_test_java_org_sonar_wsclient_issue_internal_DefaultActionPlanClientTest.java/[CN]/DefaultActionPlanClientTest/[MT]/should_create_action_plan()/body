{
  HttpRequestFactory requestFactory=new HttpRequestFactory(httpServer.url());
  httpServer.stubResponseBody("{\"actionPlan\": {\"key\": \"382f6f2e-ad9d-424a-b973-9b065e04348a\"}}");
  ActionPlanClient client=new DefaultActionPlanClient(requestFactory);
  ActionPlan result=client.create(NewActionPlan.create().name("Short term").project("org.sonar.Sample").description("Short term issues").deadLine(stringToDate("2014-01-01")));
  assertThat(httpServer.requestedPath()).isEqualTo("/api/action_plans/create");
  assertThat(httpServer.requestParams()).includes(entry("project","org.sonar.Sample"),entry("description","Short term issues"),entry("name","Short term"),entry("deadLine","2014-01-01"));
  assertThat(result).isNotNull();
}
