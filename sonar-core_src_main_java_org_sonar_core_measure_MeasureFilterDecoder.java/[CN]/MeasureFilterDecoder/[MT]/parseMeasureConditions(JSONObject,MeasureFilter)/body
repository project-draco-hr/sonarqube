{
  JSONArray conditions=(JSONArray)map.get("conditions");
  if (conditions != null) {
    for (    Object obj : conditions) {
      JSONObject c=(JSONObject)obj;
      Metric metric=metricFinder.findByKey((String)c.get("metric"));
      String operator=(String)c.get("op");
      Double value=(Double)c.get("val");
      MeasureFilterCondition condition=new MeasureFilterCondition(metric,MeasureFilterCondition.Operator.fromSql(operator),value);
      if (c.containsKey("period")) {
        condition.setPeriod(((Long)c.get("period")).intValue());
      }
      filter.addCondition(condition);
    }
  }
}
