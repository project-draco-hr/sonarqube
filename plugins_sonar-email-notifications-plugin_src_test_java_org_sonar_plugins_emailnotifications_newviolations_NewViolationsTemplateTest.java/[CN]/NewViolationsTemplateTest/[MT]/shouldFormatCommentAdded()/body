{
  Notification notification=new Notification("new-violations").setFieldValue("count","32").setFieldValue("projectName","Foo").setFieldValue("projectKey","org.sonar.foo:foo").setFieldValue("projectId","45").setFieldValue("period","2");
  EmailMessage message=template.format(notification);
  assertThat(message.getMessageId(),is("new-violations/45"));
  assertThat(message.getSubject(),is("New violations for project Foo"));
  assertThat(message.getMessage(),is("" + "Project: Foo\n" + "New violations on last analysis: 32\n"+ "\n"+ "--\n"+ "See it in Sonar: http://nemo.sonarsource.org/drilldown/measures/org.sonar.foo:foo?metric=new_violations&period=2\n"));
}
