{
  Decorator decorator=mock(Decorator.class);
  doThrow(new SonarException()).when(decorator).decorate(any(Resource.class),any(DecoratorContext.class));
  DecoratorsExecutor executor=new DecoratorsExecutor(mock(BatchExtensionDictionnary.class),new Project("key"),mock(SonarIndex.class),mock(EventBus.class),mock(CoverageExclusions.class),mock(MeasureCache.class),mock(MetricFinder.class),mock(DuplicationCache.class));
  try {
    executor.executeDecorator(decorator,mock(DefaultDecoratorContext.class),File.create("src/org/foo/Bar.java",null,false));
    fail("Exception has not been thrown");
  }
 catch (  SonarException e) {
    assertThat(e.getMessage()).contains("src/org/foo/Bar.java");
  }
}
