{
  json.name("user");
  Set<String> groups=Sets.newHashSet();
  DbSession dbSession=dbClient.openSession(false);
  try {
    groups.addAll(dbClient.groupMembershipDao().selectGroupsByLogins(dbSession,Arrays.asList(user.login())).get(user.login()));
  }
  finally {
    MyBatis.closeQuietly(dbSession);
  }
  userWriter.write(json,user,groups,UserJsonWriter.FIELDS);
}
