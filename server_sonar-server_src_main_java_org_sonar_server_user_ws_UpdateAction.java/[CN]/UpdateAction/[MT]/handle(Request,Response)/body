{
  UserSession.get().checkLoggedIn().checkGlobalPermission(GlobalPermissions.SYSTEM_ADMIN);
  String login=request.mandatoryParam(PARAM_LOGIN);
  UpdateUser updateUser=UpdateUser.create(login);
  if (request.hasParam(PARAM_NAME)) {
    updateUser.setName(request.mandatoryParam(PARAM_NAME));
  }
  if (request.hasParam(PARAM_EMAIL)) {
    updateUser.setEmail(request.param(PARAM_EMAIL));
  }
  if (request.hasParam(PARAM_SCM_ACCOUNTS)) {
    updateUser.setScmAccounts(request.paramAsStrings(PARAM_SCM_ACCOUNTS));
  }
  if (request.hasParam(PARAM_PASSWORD)) {
    updateUser.setPassword(request.mandatoryParam(PARAM_PASSWORD));
  }
  if (request.hasParam(PARAM_PASSWORD_CONFIRMATION)) {
    updateUser.setPasswordConfirmation(request.mandatoryParam(PARAM_PASSWORD_CONFIRMATION));
  }
  userUpdater.update(updateUser);
  writeResponse(response,login);
}
