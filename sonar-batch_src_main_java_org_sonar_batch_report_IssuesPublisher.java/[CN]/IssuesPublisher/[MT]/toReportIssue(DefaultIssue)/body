{
  BatchResource batchResource=resourceCache.get(issue.componentKey());
  return new ReportIssue().setKey(issue.key()).setComponentBatchId(batchResource != null ? batchResource.batchId() : null).setNew(issue.isNew()).setLine(issue.line()).setMessage(issue.message()).setEffortToFix(issue.effortToFix()).setDebt(issue.debtInMinutes()).setResolution(issue.resolution()).setStatus(issue.status()).setSeverity(issue.severity()).setChecksum(issue.checksum()).setManualSeverity(issue.manualSeverity()).setReporter(issue.reporter()).setAssignee(issue.assignee()).setRuleKey(issue.ruleKey().repository(),issue.ruleKey().rule()).setActionPlanKey(issue.actionPlanKey()).setAttributes(KeyValueFormat.format(issue.attributes())).setAuthorLogin(issue.authorLogin()).setCreationDate(issue.creationDate()).setCloseDate(issue.closeDate()).setUpdateDate(issue.updateDate()).setSelectedAt(issue.selectedAt()).setDiffFields(toString(issue.currentChange())).setChanged(issue.isChanged());
}
