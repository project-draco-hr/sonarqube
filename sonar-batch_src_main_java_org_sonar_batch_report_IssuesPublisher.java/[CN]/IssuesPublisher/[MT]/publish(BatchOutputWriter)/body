{
  for (  BatchResource resource : resourceCache.all()) {
    Iterable<DefaultIssue> issues=issueCache.byComponent(resource.resource().getEffectiveKey());
    writer.writeComponentIssues(resource.batchId(),Iterables.transform(issues,new Function<DefaultIssue,BatchOutput.ReportIssue>(){
      @Override public BatchOutput.ReportIssue apply(      DefaultIssue input){
        return toReportIssue(input);
      }
    }
));
  }
}
