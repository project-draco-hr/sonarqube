{
  squid.register(JavaAstScanner.class).scanFile(SquidTestUtils.getInputFile("/metrics/classes/InnerClassTests.java"));
  SourceCode project=squid.aggregate();
  SourceCode defaultPackage=project.getFirstChild();
  SourceCode defaultClassFile=defaultPackage.getFirstChild();
  SourceCode innerClassTests=defaultClassFile.getFirstChild();
  assertEquals(3,innerClassTests.getInt(Metric.CLASSES));
  SourceCode privateInnerClass=squid.search("InnerClassTests$TestPrivateInnerClass");
  assertEquals(1,privateInnerClass.getInt(Metric.PUBLIC_API));
  assertEquals(0,privateInnerClass.getInt(Metric.PUBLIC_DOC_API));
  assertEquals(1,privateInnerClass.getInt(Metric.CLASSES));
  SourceCode publicInnerClass=squid.search("InnerClassTests$TestPublicInnerClass");
  assertEquals(2,publicInnerClass.getInt(Metric.PUBLIC_API));
  assertEquals(0,privateInnerClass.getInt(Metric.PUBLIC_DOC_API));
  assertEquals(1,publicInnerClass.getInt(Metric.CLASSES));
}
