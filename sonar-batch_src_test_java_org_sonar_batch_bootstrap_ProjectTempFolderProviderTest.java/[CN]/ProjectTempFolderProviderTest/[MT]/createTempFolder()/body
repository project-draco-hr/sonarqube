{
  File workingDir=temp.newFolder();
  File defaultDir=new File(new File(workingDir,CoreProperties.WORKING_DIRECTORY_DEFAULT_VALUE),ProjectTempFolderProvider.TMP_NAME);
  try {
    TempFolder tempFolder=tempFolderProvider.provide(new AnalysisProperties(ImmutableMap.of("sonar.projectBaseDir",workingDir.getAbsolutePath()),""));
    tempFolder.newDir();
    tempFolder.newFile();
    assertThat(defaultDir).exists();
    assertThat(defaultDir.list()).hasSize(2);
  }
  finally {
    FileUtils.deleteDirectory(defaultDir);
  }
}
