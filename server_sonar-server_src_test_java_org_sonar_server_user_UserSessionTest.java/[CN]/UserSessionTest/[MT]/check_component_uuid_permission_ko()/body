{
  AuthorizationDao authorizationDao=mock(AuthorizationDao.class);
  ResourceDao resourceDao=mock(ResourceDao.class);
  UserSession session=new SpyUserSession("marius",authorizationDao,resourceDao).setUserId(1);
  ComponentDto project=ComponentTesting.newProjectDto();
  ComponentDto file=ComponentTesting.newFileDto(project,"file-uuid");
  when(resourceDao.getResource("file-uuid")).thenReturn(new ResourceDto().setProjectUuid(project.uuid()));
  when(authorizationDao.selectAuthorizedRootProjectsUuids(1,UserRole.USER)).thenReturn(newArrayList(project.uuid()));
  session.checkComponentUuidPermission(UserRole.USER,"another-uuid");
}
