{
  Date now=new Date();
  DashboardDto dashboardDto=new DashboardDto();
  dashboardDto.setName(name);
  dashboardDto.setDescription(dashboard.getDescription());
  dashboardDto.setColumnLayout(dashboard.getLayout().getCode());
  dashboardDto.setShared(true);
  dashboardDto.setCreatedAt(now);
  dashboardDto.setUpdatedAt(now);
  for (int columnIndex=1; columnIndex <= dashboard.getLayout().getColumns(); columnIndex++) {
    List<Dashboard.Widget> widgets=dashboard.getWidgetsOfColumn(columnIndex);
    for (int rowIndex=1; rowIndex <= widgets.size(); rowIndex++) {
      Dashboard.Widget widget=widgets.get(rowIndex - 1);
      WidgetDto widgetDto=new WidgetDto();
      widgetDto.setKey(widget.getId());
      widgetDto.setColumnIndex(columnIndex);
      widgetDto.setRowIndex(rowIndex);
      widgetDto.setConfigured(true);
      widgetDto.setCreatedAt(now);
      widgetDto.setUpdatedAt(now);
      dashboardDto.addWidget(widgetDto);
      for (      Entry<String,String> property : widget.getProperties().entrySet()) {
        WidgetPropertyDto propDto=new WidgetPropertyDto();
        propDto.setKey(property.getKey());
        propDto.setValue(property.getValue());
        widgetDto.addWidgetProperty(propDto);
      }
    }
  }
  return dashboardDto;
}
