{
  TimeProfiler profiler=new TimeProfiler().start("Register dashboards");
  List<DashboardDto> loadedDashboards=Lists.newArrayList();
  DashboardDto defaultDashboard=null;
  for (  DashboardTemplate dashboardTemplate : dashboardTemplates) {
    Dashboard dashboard=dashboardTemplate.createDashboard();
    if (shouldRegister(dashboard)) {
      DashboardDto dashboardDto=registerDashboard(dashboard);
      if (DEFAULT_DASHBOARD_ID.equals(dashboard.getId())) {
        defaultDashboard=dashboardDto;
      }
 else {
        loadedDashboards.add(dashboardDto);
      }
    }
  }
  activateDashboards(loadedDashboards,defaultDashboard);
  profiler.stop();
}
