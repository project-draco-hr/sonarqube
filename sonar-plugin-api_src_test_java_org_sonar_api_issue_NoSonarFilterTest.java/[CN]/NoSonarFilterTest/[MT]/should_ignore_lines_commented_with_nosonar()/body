{
  Issue issue=mock(Issue.class);
  when(issue.componentKey()).thenReturn("struts:org.apache.Action");
  when(issue.ruleKey()).thenReturn(RuleKey.of("squid","AvoidCycles"));
  Set<Integer> noSonarLines=ImmutableSet.of(31,55);
  filter.addComponent("struts:org.apache.Action",noSonarLines);
  when(issue.line()).thenReturn(null);
  assertThat(filter.accept(issue,chain)).isTrue();
  when(issue.line()).thenReturn(31);
  assertThat(filter.accept(issue,chain)).isFalse();
  when(issue.line()).thenReturn(222);
  assertThat(filter.accept(issue,chain)).isTrue();
  verify(chain,times(2)).accept(issue);
}
