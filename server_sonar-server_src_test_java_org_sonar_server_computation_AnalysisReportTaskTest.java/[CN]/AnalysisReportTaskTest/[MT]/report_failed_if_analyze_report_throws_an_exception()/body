{
  AnalysisReportDto report=AnalysisReportDto.newForTests(1L);
  when(queue.bookNextAvailable()).thenReturn(report);
  doThrow(Exception.class).when(service).analyzeReport(report);
  sut.run();
  assertThat(report.getStatus()).isEqualTo(FAILED);
}
