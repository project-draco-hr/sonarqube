{
  NewAction action=controller.createAction("file").setInternal(true).setSince("4.4").setDescription("Download a JAR file required by source analyzer").setResponseExample(getClass().getResource("batch-file-example.txt")).setHandler(new RequestHandler(){
    @Override public void handle(    Request request,    Response response){
      String filename=request.mandatoryParam("name");
      try {
        response.stream().setMediaType("application/java-archive");
        FileUtils.copyFile(batchIndex.getFile(filename),response.stream().output());
      }
 catch (      IOException e) {
        throw new IllegalStateException(e);
      }
    }
  }
);
  action.createParam("name").setDescription("File name").setExampleValue("batch-library-2.3.jar");
}
