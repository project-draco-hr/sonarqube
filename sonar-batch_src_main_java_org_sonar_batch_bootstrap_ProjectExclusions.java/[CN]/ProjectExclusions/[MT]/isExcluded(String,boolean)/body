{
  String[] includedKeys=settings.getStringArray("sonar.includedModules");
  boolean excluded=false;
  if (!isRoot && includedKeys.length > 0) {
    excluded=!ArrayUtils.contains(includedKeys,projectKey);
  }
  String skippedModulesProperty=CoreProperties.CORE_SKIPPED_MODULES_PROPERTY;
  if (!excluded) {
    String[] excludedKeys=settings.getStringArray(skippedModulesProperty);
    excluded=ArrayUtils.contains(excludedKeys,projectKey);
  }
  if (excluded && isRoot) {
    throw new IllegalArgumentException("The root project can't be excluded. Please check the parameters " + skippedModulesProperty + " and sonar.includedModules.");
  }
  return excluded;
}
