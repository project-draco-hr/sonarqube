{
  ComponentDto project=newProject();
  ComponentDto file=newFile(project);
  userSessionRule.logon("john").addProjectPermissions(UserRole.USER,project.key());
  RuleDto manualRule=RuleTesting.newManualRule("manualRuleKey").setName("Manual rule name");
  tester.get(RuleDao.class).insert(session,manualRule);
  session.commit();
  Issue result=service.createManualIssue(file.key(),manualRule.getKey(),null,null,null,2d);
  Issue manualIssue=IssueIndex.getByKey(result.key());
  assertThat(manualIssue.message()).isEqualTo("Manual rule name");
}
