{
  IssueDto issue1=getIssue().setActionPlanKey("P1");
  IssueDto issue2=getIssue().setActionPlanKey("P2");
  tester.get(IssueDao.class).insert(session,issue1,issue2);
  session.commit();
  IssueResult result=service.search(IssueQuery.builder().build(),new QueryOptions());
  assertThat(result.getHits()).hasSize(2);
  assertThat(result.getFacets()).isEmpty();
  result=service.search(IssueQuery.builder().build(),new QueryOptions().setFacet(true));
  assertThat(result.getFacets().keySet()).hasSize(4);
  assertThat(result.getFacetKeys("actionPlan")).hasSize(2);
}
