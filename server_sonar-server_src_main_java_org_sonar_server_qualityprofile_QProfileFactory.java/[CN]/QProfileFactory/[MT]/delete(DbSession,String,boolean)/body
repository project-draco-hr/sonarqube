{
  QualityProfileDto profile=db.qualityProfileDao().selectOrFailByKey(session,key);
  List<QualityProfileDto> descendants=db.qualityProfileDao().selectDescendants(session,key);
  if (!force) {
    checkNotDefault(profile);
    for (    QualityProfileDto descendant : descendants) {
      checkNotDefault(descendant);
    }
  }
  for (  QualityProfileDto descendant : Lists.reverse(descendants)) {
    doDelete(session,descendant);
  }
  doDelete(session,profile);
}
