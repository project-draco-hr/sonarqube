{
  db.prepareDbUnit(getClass(),"select_snapshots_by_query.xml");
  assertThat(sut.selectSnapshotsByQuery(session,new SnapshotQuery())).hasSize(6);
  assertThat(sut.selectSnapshotsByQuery(session,new SnapshotQuery().setComponentId(1L))).hasSize(3);
  assertThat(sut.selectSnapshotsByQuery(session,new SnapshotQuery().setComponentId(1L).setVersion("2.2-SNAPSHOT"))).extracting("id").containsOnly(3L);
  assertThat(sut.selectSnapshotsByQuery(session,new SnapshotQuery().setComponentId(1L).setIsLast(true))).extracting("id").containsOnly(1L);
  assertThat(sut.selectSnapshotsByQuery(session,new SnapshotQuery().setComponentId(1L).setIsLast(false))).extracting("id").containsOnly(2L,3L);
  assertThat(sut.selectSnapshotsByQuery(session,new SnapshotQuery().setComponentId(1L).setCreatedAfter(1228172400002L))).extracting("id").containsOnly(2L,3L);
  assertThat(sut.selectSnapshotsByQuery(session,new SnapshotQuery().setComponentId(1L).setCreatedBefore(1228172400002L))).extracting("id").containsOnly(1L);
  assertThat(sut.selectSnapshotsByQuery(session,new SnapshotQuery().setComponentId(2L).setStatus("P"))).hasSize(1);
  assertThat(sut.selectSnapshotsByQuery(session,new SnapshotQuery().setComponentId(2L).setStatus("U"))).hasSize(1);
  assertThat(sut.selectSnapshotsByQuery(session,new SnapshotQuery().setComponentId(1L).setSort(BY_DATE,ASC)).get(0).getId()).isEqualTo(1L);
  assertThat(sut.selectSnapshotsByQuery(session,new SnapshotQuery().setComponentId(1L).setSort(BY_DATE,DESC)).get(0).getId()).isEqualTo(3L);
}
