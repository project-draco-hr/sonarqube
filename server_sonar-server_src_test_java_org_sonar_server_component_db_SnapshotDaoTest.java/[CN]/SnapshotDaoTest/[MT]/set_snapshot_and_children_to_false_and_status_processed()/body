{
  setupData("snapshots");
  SnapshotDto snapshot=defaultSnapshot().setId(1L);
  sut.updateSnapshotAndChildrenLastFlagAndStatus(session,snapshot,false,SnapshotDto.STATUS_PROCESSED);
  session.commit();
  List<SnapshotDto> snapshots=sut.findSnapshotAndChildrenOfProjectScope(session,snapshot);
  assertThat(snapshots).hasSize(2);
  assertThat(snapshots).extracting("id").containsOnly(1L,6L);
  assertThat(snapshots).extracting("last").containsOnly(false);
  assertThat(snapshots).extracting("status").containsOnly(SnapshotDto.STATUS_PROCESSED);
}
