{
  Set<Artifact> result=new HashSet<Artifact>();
  Set<Artifact> providedArtifacts=getSonarProvidedArtifacts();
  for (  Artifact artifact : getIncludedArtifacts()) {
    if ("sonar-plugin".equals(artifact.getType())) {
      continue;
    }
    if (Artifact.SCOPE_PROVIDED.equals(artifact.getScope()) || Artifact.SCOPE_TEST.equals(artifact.getScope())) {
      continue;
    }
    if (containsArtifact(providedArtifacts,artifact)) {
      continue;
    }
    result.add(artifact);
  }
  return result;
}
