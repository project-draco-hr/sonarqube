{
  Set<Artifact> result=new HashSet<Artifact>();
  ArtifactFilter artifactFilter=new ScopeArtifactFilter(Artifact.SCOPE_RUNTIME);
  DependencyNode rootNode=dependencyTreeBuilder.buildDependencyTree(getProject(),localRepository,artifactFactory,artifactMetadataSource,artifactFilter,artifactCollector);
  rootNode.accept(new BuildingDependencyNodeVisitor());
  searchForSonarProvidedArtifacts(rootNode,result,false);
  return result;
}
