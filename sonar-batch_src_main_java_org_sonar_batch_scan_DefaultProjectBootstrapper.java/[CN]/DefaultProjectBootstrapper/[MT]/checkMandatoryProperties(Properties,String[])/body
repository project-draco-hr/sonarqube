{
  replaceDeprecatedProperties(props);
  StringBuilder missing=new StringBuilder();
  for (  String mandatoryProperty : mandatoryProps) {
    if (!props.containsKey(mandatoryProperty)) {
      if (missing.length() > 0) {
        missing.append(", ");
      }
      missing.append(mandatoryProperty);
    }
  }
  String projectKey=props.getProperty(CoreProperties.PROJECT_KEY_PROPERTY);
  if (missing.length() != 0) {
    throw new IllegalStateException("You must define the following mandatory properties for '" + (projectKey == null ? "Unknown" : projectKey) + "': "+ missing);
  }
}
