{
  if (rule != null) {
    rulesById.put(rule.getId(),rule);
    Map<String,Rule> repoRules=rulesByKey.get(rule.getKey());
    if (repoRules == null) {
      repoRules=Maps.newHashMap();
      rulesByKey.put(rule.getRepositoryKey(),repoRules);
    }
    repoRules.put(rule.getKey(),rule);
  }
}
