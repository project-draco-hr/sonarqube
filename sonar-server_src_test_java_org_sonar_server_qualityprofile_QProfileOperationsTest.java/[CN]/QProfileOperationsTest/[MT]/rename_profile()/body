{
  QualityProfileDto dto=new QualityProfileDto().setName("Default").setLanguage("java");
  when(dao.selectByNameAndLanguage(eq("Default"),anyString())).thenReturn(dto);
  operations.renameProfile("Default","java","Default profile",MockUserSession.create().setGlobalPermissions(GlobalPermissions.QUALITY_PROFILE_ADMIN));
  ArgumentCaptor<QualityProfileDto> profileArgument=ArgumentCaptor.forClass(QualityProfileDto.class);
  verify(dao).update(profileArgument.capture());
  assertThat(profileArgument.getValue().getName()).isEqualTo("Default profile");
  assertThat(profileArgument.getValue().getLanguage()).isEqualTo("java");
}
