{
  try {
    when(dao.selectByNameAndLanguage(anyString(),anyString())).thenReturn(new QualityProfileDto());
    operations.newProfile("Default","java",Maps.<String,String>newHashMap(),MockUserSession.create().setGlobalPermissions(GlobalPermissions.QUALITY_PROFILE_ADMIN));
    fail();
  }
 catch (  Exception e) {
    assertThat(e).isInstanceOf(BadRequestException.class);
  }
  verify(session,never()).commit();
}
