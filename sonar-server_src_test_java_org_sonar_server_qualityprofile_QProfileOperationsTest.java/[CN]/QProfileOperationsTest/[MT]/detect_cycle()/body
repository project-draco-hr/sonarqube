{
  QualityProfileDto level1=new QualityProfileDto().setId(1).setName("level1").setLanguage("java");
  QualityProfileDto level2=new QualityProfileDto().setId(2).setName("level2").setLanguage("java").setParent("level1");
  QualityProfileDto level3=new QualityProfileDto().setId(3).setName("level3").setLanguage("java").setParent("level2");
  when(qualityProfileDao.selectParent(1,session)).thenReturn(null);
  when(qualityProfileDao.selectParent(2,session)).thenReturn(level1);
  when(qualityProfileDao.selectParent(3,session)).thenReturn(level2);
  assertThat(operations.isCycle(level3,level1,session)).isFalse();
  assertThat(operations.isCycle(level1,level1,session)).isTrue();
  assertThat(operations.isCycle(level1,level1,session)).isTrue();
  assertThat(operations.isCycle(level1,level3,session)).isTrue();
  assertThat(operations.isCycle(level1,level2,session)).isTrue();
  assertThat(operations.isCycle(level2,level3,session)).isTrue();
}
