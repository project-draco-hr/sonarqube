{
  final RulesProfile profile=RulesProfile.create("Default","java");
  Rule rule=Rule.create("pmd","rule1");
  rule.createParameter("max");
  rule.setId(10);
  ActiveRule activeRule=profile.activateRule(rule,RulePriority.BLOCKER);
  activeRule.setParameter("max","10");
  Map<String,String> xmlProfilesByPlugin=newHashMap();
  xmlProfilesByPlugin.put("pmd","<xml/>");
  ProfileImporter importer=mock(ProfileImporter.class);
  when(importer.getKey()).thenReturn("pmd");
  doAnswer(new Answer(){
    public Object answer(    InvocationOnMock invocation){
      Object[] args=invocation.getArguments();
      ValidationMessages validationMessages=(ValidationMessages)args[1];
      validationMessages.addInfoText("an info message");
      validationMessages.addWarningText("a warning message");
      return profile;
    }
  }
).when(importer).importProfile(any(Reader.class),any(ValidationMessages.class));
  importers.add(importer);
  QProfileResult result=operations.newProfile("Default","java",xmlProfilesByPlugin,authorizedUserSession);
  assertThat(result.infos()).hasSize(1);
  assertThat(result.warnings()).hasSize(1);
}
