{
  QProfileResult result=operations.newProfile("Default","java",Maps.<String,String>newHashMap(),authorizedUserSession);
  assertThat(result.profile().name()).isEqualTo("Default");
  assertThat(result.profile().language()).isEqualTo("java");
  verify(qualityProfileDao).insert(eq(session),any(QualityProfileDto.class));
  ArgumentCaptor<QualityProfileDto> profileArgument=ArgumentCaptor.forClass(QualityProfileDto.class);
  verify(qualityProfileDao).insert(eq(session),profileArgument.capture());
  assertThat(profileArgument.getValue().getName()).isEqualTo("Default");
  assertThat(profileArgument.getValue().getLanguage()).isEqualTo("java");
  assertThat(profileArgument.getValue().getVersion()).isEqualTo(1);
  assertThat(profileArgument.getValue().isUsed()).isFalse();
  verify(dryRunCache).reportGlobalModification(session);
  verify(session).commit();
}
