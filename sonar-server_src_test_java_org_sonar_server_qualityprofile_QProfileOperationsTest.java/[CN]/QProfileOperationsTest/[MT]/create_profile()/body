{
  NewProfileResult result=operations.newProfile("Default","java",Maps.<String,String>newHashMap(),authorizedUserSession);
  assertThat(result.profile().name()).isEqualTo("Default");
  assertThat(result.profile().language()).isEqualTo("java");
  verify(qualityProfileDao).insert(any(QualityProfileDto.class),eq(session));
  ArgumentCaptor<QualityProfileDto> profileArgument=ArgumentCaptor.forClass(QualityProfileDto.class);
  verify(qualityProfileDao).insert(profileArgument.capture(),eq(session));
  assertThat(profileArgument.getValue().getName()).isEqualTo("Default");
  assertThat(profileArgument.getValue().getLanguage()).isEqualTo("java");
  assertThat(profileArgument.getValue().getVersion()).isEqualTo(1);
  assertThat(profileArgument.getValue().isUsed()).isFalse();
}
