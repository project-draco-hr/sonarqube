{
  when(myBatis.openSession(false)).thenReturn(session);
  doAnswer(new Answer(){
    public Object answer(    InvocationOnMock invocation){
      Object[] args=invocation.getArguments();
      QualityProfileDto dto=(QualityProfileDto)args[1];
      dto.setId(currentId++);
      return null;
    }
  }
).when(qualityProfileDao).insert(any(DbSession.class),any(QualityProfileDto.class));
  operations=new QProfileOperations(myBatis,qualityProfileDao,propertiesDao,exporter,dryRunCache,profileLookup);
}
