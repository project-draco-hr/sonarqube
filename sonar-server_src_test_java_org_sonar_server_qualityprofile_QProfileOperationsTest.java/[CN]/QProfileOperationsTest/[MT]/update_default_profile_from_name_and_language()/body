{
  when(dao.selectByNameAndLanguage("My profile","java")).thenReturn(new QualityProfileDto().setId(1).setName("My profile").setLanguage("java"));
  when(dao.selectById(1)).thenReturn(new QualityProfileDto().setId(1).setName("My profile").setLanguage("java"));
  operations.updateDefaultProfile("My profile","java",MockUserSession.create().setGlobalPermissions(GlobalPermissions.QUALITY_PROFILE_ADMIN));
  ArgumentCaptor<PropertyDto> argumentCaptor=ArgumentCaptor.forClass(PropertyDto.class);
  verify(propertiesDao).setProperty(argumentCaptor.capture());
  assertThat(argumentCaptor.getValue().getKey()).isEqualTo("sonar.profile.java");
  assertThat(argumentCaptor.getValue().getValue()).isEqualTo("My profile");
}
