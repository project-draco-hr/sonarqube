{
  ActiveRuleDto activeRule=new ActiveRuleDto().setId(5).setProfileId(1).setRuleId(10L).setSeverity(1);
  when(ruleDao.selectParamByRuleAndKey(10L,"max",session)).thenReturn(null);
  try {
    operations.createActiveRuleParam(activeRule,"max","30",MockUserSession.create().setName("nicolas").setGlobalPermissions(GlobalPermissions.QUALITY_PROFILE_ADMIN));
    fail();
  }
 catch (  Exception e) {
    assertThat(e).isInstanceOf(IllegalArgumentException.class);
  }
  verify(activeRuleDao,never()).insert(any(ActiveRuleParamDto.class),eq(session));
  verifyZeroInteractions(profilesManager);
}
