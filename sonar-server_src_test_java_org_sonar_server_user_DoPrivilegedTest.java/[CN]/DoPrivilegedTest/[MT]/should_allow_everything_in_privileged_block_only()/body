{
  DoPrivileged.execute(new DoPrivileged.Task(){
    @Override protected void doPrivileged(){
      UserSession userSession=UserSession.get();
      assertThat(userSession.isLoggedIn()).isFalse();
      assertThat(userSession.hasGlobalPermission("any permission")).isTrue();
      assertThat(userSession.hasProjectPermission("any permission","any project")).isTrue();
    }
  }
);
  assertThat(UserSession.get().isLoggedIn()).isFalse();
}
