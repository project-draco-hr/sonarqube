{
  String fileKey="src/Foo.java";
  when(sourceService.getLinesAsHtml(eq(fileKey),anyInt(),anyInt())).thenReturn(newArrayList("public class <span class=\"sym-31 sym\">HelloWorld</span> {}"));
  when(sourceService.getScmAuthorData(fileKey)).thenReturn("1=julien;");
  when(sourceService.getScmDateData(fileKey)).thenReturn("1=2013-03-13T16:22:31+0100;");
  WsTester.TestRequest request=tester.newGetRequest("api/sources","show").setParam("key",fileKey).setParam("scm","true").setParam("groupCommits","false");
  request.execute().assertJson(getClass(),"show_source_with_scm_commits.json");
}
