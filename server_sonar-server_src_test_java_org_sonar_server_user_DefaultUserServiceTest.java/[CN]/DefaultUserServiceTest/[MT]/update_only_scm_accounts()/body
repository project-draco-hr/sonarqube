{
  Map<String,Object> params=newHashMap();
  params.put("login","john");
  params.put("scm_accounts",newArrayList("jn"));
  service.update(params);
  ArgumentCaptor<UpdateUser> userCaptor=ArgumentCaptor.forClass(UpdateUser.class);
  verify(userUpdater).update(userCaptor.capture());
  assertThat(userCaptor.getValue().isNameChanged()).isFalse();
  assertThat(userCaptor.getValue().isEmailChanged()).isFalse();
  assertThat(userCaptor.getValue().isScmAccountsChanged()).isTrue();
  assertThat(userCaptor.getValue().isPasswordChanged()).isFalse();
}
