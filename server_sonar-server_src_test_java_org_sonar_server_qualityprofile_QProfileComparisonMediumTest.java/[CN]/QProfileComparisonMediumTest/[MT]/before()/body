{
  tester.clearDbAndIndexes();
  db=tester.get(DbClient.class);
  dbSession=db.openSession(false);
  ruleActivator=tester.get(RuleActivator.class);
  comparison=tester.get(QProfileComparison.class);
  xooRule1=RuleTesting.newXooX1().setSeverity("MINOR");
  xooRule2=RuleTesting.newXooX2().setSeverity("MAJOR");
  db.ruleDao().insert(dbSession,xooRule1,xooRule2);
  db.ruleDao().insertRuleParam(dbSession,xooRule1,RuleParamDto.createFor(xooRule1).setName("max").setType(RuleParamType.INTEGER.type()));
  db.ruleDao().insertRuleParam(dbSession,xooRule1,RuleParamDto.createFor(xooRule1).setName("min").setType(RuleParamType.INTEGER.type()));
  left=QProfileTesting.newXooP1();
  right=QProfileTesting.newXooP2();
  db.qualityProfileDao().insert(dbSession,left,right);
  dbSession.commit();
  dbSession.clearCache();
}
