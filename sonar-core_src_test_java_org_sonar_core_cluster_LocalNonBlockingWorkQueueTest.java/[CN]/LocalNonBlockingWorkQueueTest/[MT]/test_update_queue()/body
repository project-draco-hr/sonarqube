{
  LocalNonBlockingWorkQueue queue=new LocalNonBlockingWorkQueue();
  assertThat(queue.dequeUpdate(WORKING_INDEX)).isNull();
  assertThat(queue.dequeUpdate(NON_WORKING_INDEX)).isNull();
  queue.enqueUpdate(WORKING_INDEX,new Integer(0));
  assertThat(queue.dequeUpdate(NON_WORKING_INDEX)).isNull();
  Object dequeued=queue.dequeUpdate(WORKING_INDEX);
  assertThat(queue.dequeUpdate(NON_WORKING_INDEX)).isNull();
  assertThat(queue.dequeUpdate(WORKING_INDEX)).isNull();
  assertThat(dequeued).isEqualTo(new Integer(0));
}
