{
  String componentKey="org.sonar.sample:Sample";
  when(resourceDao.getResource(any(ResourceQuery.class),eq(session))).thenReturn(new ResourceDto().setKey(componentKey).setLanguage("java"));
  when(snapshotSourceDao.selectSnapshotSourceByComponentKey(componentKey,session)).thenReturn(null);
  assertThat(sourceDecorator.getSourceAsHtml(componentKey)).isNull();
}
