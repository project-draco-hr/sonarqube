{
  FileCache cache=mock(FileCache.class);
  ServerClient server=mock(ServerClient.class);
  when(server.request("/deploy/plugins/index.txt")).thenReturn("checkstyle,true\nsqale,false");
  DefaultPluginsRepository downloader=new DefaultPluginsRepository(cache,server);
  List<RemotePlugin> plugins=downloader.pluginList();
  assertThat(plugins).hasSize(2);
  assertThat(plugins.get(0).getKey()).isEqualTo("checkstyle");
  assertThat(plugins.get(0).isCore()).isTrue();
  assertThat(plugins.get(1).getKey()).isEqualTo("sqale");
  assertThat(plugins.get(1).isCore()).isFalse();
}
