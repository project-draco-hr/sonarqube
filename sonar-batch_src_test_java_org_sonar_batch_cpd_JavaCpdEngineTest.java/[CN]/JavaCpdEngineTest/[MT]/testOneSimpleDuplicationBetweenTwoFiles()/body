{
  inputFile.setLines(5);
  List<CloneGroup> groups=Arrays.asList(newCloneGroup(new ClonePart("key1",0,2,4),new ClonePart("key2",0,15,17)));
  JavaCpdEngine.save(context,inputFile,groups);
  verify(storage).store(new DefaultMeasure().forMetric(CoreMetrics.DUPLICATED_FILES).onFile(inputFile).withValue(1));
  verify(storage).store(new DefaultMeasure().forMetric(CoreMetrics.DUPLICATED_BLOCKS).onFile(inputFile).withValue(1));
  verify(storage).store(new DefaultMeasure().forMetric(CoreMetrics.DUPLICATED_LINES).onFile(inputFile).withValue(3));
  verify(storage).store(new DefaultDuplication().originBlock(inputFile,2,4).isDuplicatedBy("key2",15,17));
}
