{
  session=sessionFactory.getSession();
  RulesByRepository existingRules=new RulesByRepository(findAllRules());
  List<Rule> registeredRules=registerRules(existingRules);
  LOG.info("Removing deprecated rules");
  disableDeprecatedRules(existingRules,registeredRules);
  disableDeprecatedRepositories(existingRules);
  session.commit();
}
