{
  TimeProfiler profiler=new TimeProfiler();
  List<RuleDto> registeredRules=newArrayList();
  for (  RuleRepository repository : repositories) {
    profiler.start("Register rules [" + repository.getKey() + "/"+ StringUtils.defaultString(repository.getLanguage(),"-")+ "]");
    registeredRules.addAll(registerRepositoryRules(repository,existingRules));
    profiler.stop();
  }
  registeredRules.addAll(registerTemplateRules(registeredRules,existingRules));
  return registeredRules;
}
