{
  NewIndex index=context.create(INDEX);
  index.refreshHandledByIndexer();
  index.configureShards(settings,5);
  NewIndex.NewIndexType issueMapping=index.createType(TYPE_ISSUE);
  issueMapping.setAttribute("_parent",ImmutableMap.of("type",TYPE_AUTHORIZATION));
  issueMapping.setAttribute("_routing",ImmutableMap.of("required","true"));
  issueMapping.stringFieldBuilder(FIELD_ISSUE_ASSIGNEE).disableNorms().enableSorting().build();
  issueMapping.stringFieldBuilder(FIELD_ISSUE_ATTRIBUTES).disableNorms().disableSearch().build();
  issueMapping.stringFieldBuilder(FIELD_ISSUE_AUTHOR_LOGIN).disableNorms().build();
  issueMapping.stringFieldBuilder(FIELD_ISSUE_COMPONENT_UUID).disableNorms().build();
  issueMapping.createLongField(FIELD_ISSUE_EFFORT);
  issueMapping.createDoubleField(FIELD_ISSUE_GAP);
  issueMapping.stringFieldBuilder(FIELD_ISSUE_FILE_PATH).disableNorms().enableSorting().build();
  issueMapping.createDateTimeField(FIELD_ISSUE_FUNC_CREATED_AT);
  issueMapping.createDateTimeField(FIELD_ISSUE_FUNC_UPDATED_AT);
  issueMapping.createDateTimeField(FIELD_ISSUE_FUNC_CLOSED_AT);
  issueMapping.stringFieldBuilder(FIELD_ISSUE_KEY).disableNorms().enableSorting().build();
  issueMapping.stringFieldBuilder(FIELD_ISSUE_LANGUAGE).disableNorms().build();
  issueMapping.createIntegerField(FIELD_ISSUE_LINE);
  issueMapping.stringFieldBuilder(FIELD_ISSUE_MESSAGE).disableNorms().build();
  issueMapping.stringFieldBuilder(FIELD_ISSUE_MODULE_UUID).disableNorms().build();
  issueMapping.createUuidPathField(FIELD_ISSUE_MODULE_PATH);
  issueMapping.stringFieldBuilder(FIELD_ISSUE_PROJECT_UUID).disableNorms().enableSorting().build();
  issueMapping.stringFieldBuilder(FIELD_ISSUE_DIRECTORY_PATH).disableNorms().build();
  issueMapping.stringFieldBuilder(FIELD_ISSUE_RESOLUTION).disableNorms().build();
  issueMapping.stringFieldBuilder(FIELD_ISSUE_RULE_KEY).disableNorms().build();
  issueMapping.stringFieldBuilder(FIELD_ISSUE_SEVERITY).disableNorms().build();
  issueMapping.createByteField(FIELD_ISSUE_SEVERITY_VALUE);
  issueMapping.stringFieldBuilder(FIELD_ISSUE_STATUS).disableNorms().enableSorting().build();
  issueMapping.stringFieldBuilder(FIELD_ISSUE_TAGS).disableNorms().build();
  issueMapping.createDateTimeField(FIELD_ISSUE_TECHNICAL_UPDATED_AT);
  issueMapping.stringFieldBuilder(FIELD_ISSUE_TYPE).disableNorms().build();
  NewIndex.NewIndexType authorizationMapping=index.createType(TYPE_AUTHORIZATION);
  authorizationMapping.setAttribute("_routing",ImmutableMap.of("required","true"));
  authorizationMapping.createDateTimeField(FIELD_AUTHORIZATION_UPDATED_AT);
  authorizationMapping.stringFieldBuilder(FIELD_AUTHORIZATION_PROJECT_UUID).disableNorms().build();
  authorizationMapping.stringFieldBuilder(FIELD_AUTHORIZATION_GROUPS).disableNorms().build();
  authorizationMapping.stringFieldBuilder(FIELD_AUTHORIZATION_USERS).disableNorms().build();
}
