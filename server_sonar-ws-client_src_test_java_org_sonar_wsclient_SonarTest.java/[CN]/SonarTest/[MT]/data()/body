{
  tester=new ServletTester();
  tester.setContextPath("/");
  tester.addServlet(ServerServlet.class,"/api/server/index");
  tester.addServlet(MetricServlet.class,"/api/metrics");
  tester.addServlet(EmptyServlet.class,"/api/empty");
  tester.addServlet(BadRulesServlet.class,"/api/rules");
  baseUrl=tester.createSocketConnector(true);
  tester.start();
  return Arrays.asList(new Object[][]{{new Sonar(new HttpClient4Connector(new Host(baseUrl)))},{new Sonar(new HttpClient3Connector(new Host(baseUrl)))}});
}
