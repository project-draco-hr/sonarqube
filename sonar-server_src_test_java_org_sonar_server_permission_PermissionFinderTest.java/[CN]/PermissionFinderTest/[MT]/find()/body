{
  WithPermissionQuery query=WithPermissionQuery.builder().permission("user").build();
  when(dao.selectUsers(eq(query),anyLong(),anyInt(),anyInt())).thenReturn(newArrayList(new UserWithPermissionDto().setName("user1")));
  UserWithPermissionQueryResult result=finder.findUsersWithPermission(query);
  assertThat(result.users()).hasSize(1);
  assertThat(result.hasMoreResults()).isFalse();
}
