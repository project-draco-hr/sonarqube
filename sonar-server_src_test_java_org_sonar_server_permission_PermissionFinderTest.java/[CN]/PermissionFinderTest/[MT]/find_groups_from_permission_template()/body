{
  when(permissionTemplateDao.selectTemplateByKey(anyString())).thenReturn(new PermissionTemplateDto().setId(1L).setKee("my_template"));
  when(permissionTemplateDao.selectGroups(any(PermissionQuery.class),anyLong())).thenReturn(newArrayList(new GroupWithPermissionDto().setName("users").setPermission("user")));
  GroupWithPermissionQueryResult result=finder.findGroupsWithPermissionTemplate(PermissionQuery.builder().permission("user").template("my_template").membership(PermissionQuery.OUT).build());
  assertThat(result.groups()).hasSize(1);
  assertThat(result.hasMoreResults()).isFalse();
}
