{
  try {
    String existingIncludeFilterConfig=plugin.getParameter("includeFilterFile");
    String existingExcludeFilterConfig=plugin.getParameter("excludeFilterFile");
    boolean existingConfig=!StringUtils.isBlank(existingIncludeFilterConfig) || !StringUtils.isBlank(existingExcludeFilterConfig);
    if (project.getReuseExistingRulesConfig()) {
      LOG.warn("Reusing existing Findbugs configuration is deprecated as it's unstable and can not provide meaningful results. This feature will be removed soon.");
    }
    if (!project.getReuseExistingRulesConfig() || (project.getReuseExistingRulesConfig() && !existingConfig)) {
      File includeXmlFile=saveIncludeConfigXml(project);
      plugin.setParameter("includeFilterFile",getPath(includeXmlFile));
      File excludeXmlFile=saveExcludeConfigXml(project);
      plugin.setParameter("excludeFilterFile",getPath(excludeXmlFile));
    }
  }
 catch (  IOException e) {
    throw new SonarException("Failed to save the findbugs XML configuration.",e);
  }
}
