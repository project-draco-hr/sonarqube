{
  Sonar.getInstance().findAll(DependencyTreeQuery.createForProject(project.getId().toString()),new AbstractListCallback<DependencyTree>(){
    @Override protected void doOnResponse(    List<DependencyTree> dependencyTrees){
      createTitle(project);
      createTree();
      if (dependencyTrees == null || dependencyTrees.isEmpty()) {
        clear();
        add(title);
        add(createNoLibsMessage());
      }
 else {
        display(dependencyTrees,null);
        filter();
        clear();
        add(title);
        add(tree);
      }
    }
    private void createTitle(    Resource project){
      String html=Icons.forQualifier(project.getQualifier()).getHTML();
      html+=" <span class=''> " + project.getName() + "</span> ";
      if (project.getVersion() != null) {
        html+=project.getVersion() + " ";
      }
      title=new HTML(html);
    }
    private void display(    List<DependencyTree> depTrees,    TreeItem parentLibrary){
      if (depTrees != null) {
        for (        DependencyTree depTree : depTrees) {
          Library library=new Library(depTree);
          if (parentLibrary == null) {
            tree.addItem(library);
            library.setState(true);
          }
 else {
            parentLibrary.addItem(library);
          }
          display(depTree.getTo(),library);
          library.setState(true);
        }
      }
    }
    private void createTree(){
      tree=new Tree();
      tree.setAnimationEnabled(false);
    }
  }
);
}
