{
  AuthorizationDao authorizationDao=mock(AuthorizationDao.class);
  UserSession session=new SpyUserSession("marius",authorizationDao).setUserId(1);
  when(authorizationDao.selectAuthorizedRootProjectsIds(1,UserRole.USER)).thenReturn(newArrayList(10L));
  assertThat(session.hasProjectPermission(UserRole.USER,10L)).isTrue();
  assertThat(session.hasProjectPermission(UserRole.CODEVIEWER,10L)).isFalse();
  assertThat(session.hasProjectPermission(UserRole.ADMIN,10L)).isFalse();
}
