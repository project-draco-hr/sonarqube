{
  db.issueDao().insert(session,createIssue().setRootComponentKey(project.key()));
  session.commit();
  assertThat(index.search(IssueQuery.builder().componentRoots(newArrayList(project.key())).build(),new QueryContext()).getHits()).hasSize(1);
  assertThat(index.search(IssueQuery.builder().componentRoots(newArrayList(file.key())).build(),new QueryContext()).getHits()).isEmpty();
  assertThat(index.search(IssueQuery.builder().componentRoots(newArrayList("unknown")).build(),new QueryContext()).getHits()).isEmpty();
}
