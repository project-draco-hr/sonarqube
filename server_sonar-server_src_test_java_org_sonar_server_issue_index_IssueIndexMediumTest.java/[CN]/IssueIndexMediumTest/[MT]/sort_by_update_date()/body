{
  ComponentDto project=ComponentTesting.newProjectDto();
  ComponentDto file=ComponentTesting.newFileDto(project);
  indexIssues(IssueTesting.newDoc("ISSUE1",file).setFuncUpdateDate(DateUtils.parseDate("2014-09-23")),IssueTesting.newDoc("ISSUE2",file).setFuncUpdateDate(DateUtils.parseDate("2014-09-24")));
  IssueQuery.Builder query=IssueQuery.builder().sort(IssueQuery.SORT_BY_UPDATE_DATE).asc(true);
  Result<Issue> result=index.search(query.build(),new QueryContext());
  assertThat(result.getHits()).hasSize(2);
  assertThat(result.getHits().get(0).updateDate()).isEqualTo(DateUtils.parseDate("2014-09-23"));
  assertThat(result.getHits().get(1).updateDate()).isEqualTo(DateUtils.parseDate("2014-09-24"));
  query=IssueQuery.builder().sort(IssueQuery.SORT_BY_UPDATE_DATE).asc(false);
  result=index.search(query.build(),new QueryContext());
  assertThat(result.getHits()).hasSize(2);
  assertThat(result.getHits().get(0).updateDate()).isEqualTo(DateUtils.parseDate("2014-09-24"));
  assertThat(result.getHits().get(1).updateDate()).isEqualTo(DateUtils.parseDate("2014-09-23"));
}
