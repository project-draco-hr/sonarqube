{
  List<String> issueKeys=newArrayList();
  for (int i=0; i < 500; i++) {
    IssueDto issue=IssueTesting.newDto(rule,file,project);
    tester.get(IssueDao.class).insert(session,issue);
    issueKeys.add(issue.getKey());
  }
  session.commit();
  index();
  IssueQuery.Builder query=IssueQuery.builder();
  Result<Issue> result=index.search(query.build(),new QueryContext().setMaxLimit());
  assertThat(result.getHits()).hasSize(500);
}
