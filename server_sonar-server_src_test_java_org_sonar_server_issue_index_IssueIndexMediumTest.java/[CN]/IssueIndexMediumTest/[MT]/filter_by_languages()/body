{
  db.issueDao().insert(session,createIssue().setRule(rule));
  session.commit();
  assertThat(index.search(IssueQuery.builder().languages(newArrayList(rule.getLanguage())).build(),new QueryContext()).getHits()).hasSize(1);
  assertThat(index.search(IssueQuery.builder().languages(newArrayList("unknown")).build(),new QueryContext()).getHits()).isEmpty();
}
