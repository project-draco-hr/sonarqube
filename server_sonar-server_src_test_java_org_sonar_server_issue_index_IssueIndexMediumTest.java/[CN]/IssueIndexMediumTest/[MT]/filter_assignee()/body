{
  String assignee1="steph";
  String assignee2="simon";
  IssueDto issue1=createIssue().setAssignee(assignee1);
  IssueDto issue2=createIssue().setAssignee(assignee2);
  IssueDto issue3=createIssue();
  db.issueDao().insert(session,issue1,issue2,issue3);
  session.commit();
  IssueQuery.Builder query=IssueQuery.builder();
  Result<Issue> result=index.search(query.build(),new QueryContext());
  assertThat(result.getHits()).hasSize(3);
  query=IssueQuery.builder();
  query.assignees(ImmutableList.of(assignee1));
  result=index.search(query.build(),new QueryContext());
  assertThat(result.getHits()).hasSize(1);
  query=IssueQuery.builder();
  query.assignees(ImmutableList.of(assignee1,assignee2));
  result=index.search(query.build(),new QueryContext());
  assertThat(result.getHits()).hasSize(2);
}
