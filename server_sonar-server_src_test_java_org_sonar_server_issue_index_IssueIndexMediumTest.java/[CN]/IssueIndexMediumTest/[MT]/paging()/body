{
  for (int i=0; i < 12; i++) {
    IssueDto issue=createIssue();
    tester.get(IssueDao.class).insert(session,issue);
  }
  session.commit();
  IssueQuery.Builder query=IssueQuery.builder();
  Result<Issue> result=index.search(query.build(),new QueryContext().setPage(2,10));
  assertThat(result.getHits()).hasSize(2);
  assertThat(result.getTotal()).isEqualTo(12);
  result=index.search(IssueQuery.builder().build(),new QueryContext().setOffset(0).setLimit(5));
  assertThat(result.getHits()).hasSize(5);
  assertThat(result.getTotal()).isEqualTo(12);
  result=index.search(IssueQuery.builder().build(),new QueryContext().setOffset(2).setLimit(0));
  assertThat(result.getHits()).hasSize(0);
  assertThat(result.getTotal()).isEqualTo(12);
}
