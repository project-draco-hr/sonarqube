{
  db.issueDao().insert(session,IssueTesting.newDto(rule,file,project).setLine(20).setFilePath("src/Foo.java"),IssueTesting.newDto(rule,file,project).setLine(null).setFilePath("src/Foo.java"),IssueTesting.newDto(rule,file,project).setLine(25).setFilePath("src/Foo.java"),IssueTesting.newDto(rule,file,project).setLine(9).setFilePath("src/Bar.java"),IssueTesting.newDto(rule,file,project).setLine(109).setFilePath("src/Bar.java"));
  session.commit();
  IssueQuery.Builder query=IssueQuery.builder().sort(IssueQuery.SORT_BY_FILE_LINE).asc(true);
  Result<Issue> result=index.search(query.build(),new QueryContext());
  assertThat(result.getHits()).hasSize(5);
  assertThat(result.getHits().get(0).line()).isEqualTo(9);
  assertThat(result.getHits().get(1).line()).isEqualTo(109);
  assertThat(result.getHits().get(2).line()).isEqualTo(20);
  assertThat(result.getHits().get(3).line()).isEqualTo(25);
  assertThat(result.getHits().get(4).line()).isEqualTo(null);
  query=IssueQuery.builder().sort(IssueQuery.SORT_BY_FILE_LINE).asc(false);
  result=index.search(query.build(),new QueryContext());
  assertThat(result.getHits()).hasSize(5);
  assertThat(result.getHits().get(0).line()).isEqualTo(25);
  assertThat(result.getHits().get(1).line()).isEqualTo(20);
  assertThat(result.getHits().get(2).line()).isEqualTo(null);
  assertThat(result.getHits().get(3).line()).isEqualTo(109);
  assertThat(result.getHits().get(4).line()).isEqualTo(9);
}
