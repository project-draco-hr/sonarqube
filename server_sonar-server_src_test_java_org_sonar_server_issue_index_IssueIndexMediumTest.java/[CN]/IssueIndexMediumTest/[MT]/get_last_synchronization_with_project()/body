{
  ComponentDto project1=ComponentTesting.newProjectDto().setKey("project1");
  ComponentDto project2=ComponentTesting.newProjectDto().setKey("project2");
  tester.get(ComponentDao.class).insert(session,project1,project2);
  assertThat(index.getLastSynchronization(ImmutableMap.of("project",project1.uuid()))).isNull();
  assertThat(index.getLastSynchronization(ImmutableMap.of("project",project2.uuid()))).isNull();
  db.issueDao().insert(session,IssueTesting.newDto(rule,file,project1));
  session.commit();
  session.clearCache();
  assertThat(index.getLastSynchronization(ImmutableMap.of("project",project1.uuid()))).isNotNull();
  assertThat(index.getLastSynchronization(ImmutableMap.of("project",project2.uuid()))).isNull();
}
