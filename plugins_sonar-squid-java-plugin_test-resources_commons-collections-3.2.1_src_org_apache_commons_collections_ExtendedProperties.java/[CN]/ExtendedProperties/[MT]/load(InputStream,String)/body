{
  PropertiesReader reader=null;
  if (enc != null) {
    try {
      reader=new PropertiesReader(new InputStreamReader(input,enc));
    }
 catch (    UnsupportedEncodingException ex) {
    }
  }
  if (reader == null) {
    try {
      reader=new PropertiesReader(new InputStreamReader(input,"8859_1"));
    }
 catch (    UnsupportedEncodingException ex) {
      reader=new PropertiesReader(new InputStreamReader(input));
    }
  }
  try {
    while (true) {
      String line=reader.readProperty();
      if (line == null) {
        return;
      }
      int equalSign=line.indexOf('=');
      if (equalSign > 0) {
        String key=line.substring(0,equalSign).trim();
        String value=line.substring(equalSign + 1).trim();
        if ("".equals(value)) {
          continue;
        }
        if (getInclude() != null && key.equalsIgnoreCase(getInclude())) {
          File file=null;
          if (value.startsWith(fileSeparator)) {
            file=new File(value);
          }
 else {
            if (value.startsWith("." + fileSeparator)) {
              value=value.substring(2);
            }
            file=new File(basePath + value);
          }
          if (file != null && file.exists() && file.canRead()) {
            load(new FileInputStream(file));
          }
        }
 else {
          addProperty(key,value);
        }
      }
    }
  }
  finally {
    isInitialized=true;
  }
}
