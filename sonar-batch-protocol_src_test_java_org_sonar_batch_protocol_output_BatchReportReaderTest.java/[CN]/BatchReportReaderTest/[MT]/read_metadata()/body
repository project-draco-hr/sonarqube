{
  BatchReportWriter writer=new BatchReportWriter(dir);
  BatchReport.Metadata.Builder metadata=BatchReport.Metadata.newBuilder().setAnalysisDate(15000000L).setProjectKey("PROJECT_A").setRootComponentRef(1).setDeletedComponentsCount(10);
  writer.writeMetadata(metadata.build());
  BatchReport.Metadata readMetadata=sut.readMetadata();
  assertThat(readMetadata.getAnalysisDate()).isEqualTo(15000000L);
  assertThat(readMetadata.getProjectKey()).isEqualTo("PROJECT_A");
  assertThat(readMetadata.getDeletedComponentsCount()).isEqualTo(10);
  assertThat(readMetadata.getRootComponentRef()).isEqualTo(1);
}
