{
  BatchReportWriter writer=new BatchReportWriter(dir);
  writer.writeFileDependencies(1,Arrays.asList(BatchReport.FileDependency.newBuilder().setToFileRef(5).setWeight(20).build()));
  try (InputStream inputStream=FileUtils.openInputStream(sut.readFileDependencies(1))){
    BatchReport.FileDependency fileDependency=BatchReport.FileDependency.PARSER.parseDelimitedFrom(inputStream);
    assertThat(fileDependency.getToFileRef()).isEqualTo(5);
    assertThat(fileDependency.getWeight()).isEqualTo(20);
  }
 }
