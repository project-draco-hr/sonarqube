{
  BatchReportWriter writer=new BatchReportWriter(dir);
  writer.writeMetadata(BatchReport.Metadata.newBuilder().setRootComponentRef(1).build());
  writer.writeComponent(BatchReport.Component.newBuilder().setRef(1).build());
  writer.writeComponentSyntaxHighlighting(1,Arrays.asList(BatchReport.SyntaxHighlighting.newBuilder().setRange(BatchReport.TextRange.newBuilder().setStartLine(1).setEndLine(10).build()).setType(Constants.HighlightingType.ANNOTATION).build()));
  try (CloseableIterator<BatchReport.SyntaxHighlighting> it=underTest.readComponentSyntaxHighlighting(1)){
    BatchReport.SyntaxHighlighting syntaxHighlighting=it.next();
    assertThat(syntaxHighlighting.getRange()).isNotNull();
    assertThat(syntaxHighlighting.getRange().getStartLine()).isEqualTo(1);
    assertThat(syntaxHighlighting.getRange().getEndLine()).isEqualTo(10);
    assertThat(syntaxHighlighting.getType()).isEqualTo(Constants.HighlightingType.ANNOTATION);
  }
 }
