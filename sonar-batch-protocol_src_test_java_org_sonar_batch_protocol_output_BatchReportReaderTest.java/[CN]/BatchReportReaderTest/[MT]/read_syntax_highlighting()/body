{
  BatchReportWriter writer=new BatchReportWriter(dir);
  writer.writeMetadata(BatchReport.Metadata.newBuilder().setRootComponentRef(1).build());
  writer.writeComponent(BatchReport.Component.newBuilder().setRef(1).build());
  writer.writeComponentSyntaxHighlighting(1,Arrays.asList(BatchReport.SyntaxHighlighting.newBuilder().setRange(BatchReport.Range.newBuilder().setStartLine(1).setEndLine(10).build()).setType(Constants.HighlightingType.ANNOTATION).build()));
  try (InputStream inputStream=FileUtils.openInputStream(sut.readComponentSyntaxHighlighting(1))){
    BatchReport.SyntaxHighlighting syntaxHighlighting=BatchReport.SyntaxHighlighting.PARSER.parseDelimitedFrom(inputStream);
    assertThat(syntaxHighlighting.getRange()).isNotNull();
    assertThat(syntaxHighlighting.getRange().getStartLine()).isEqualTo(1);
    assertThat(syntaxHighlighting.getRange().getEndLine()).isEqualTo(10);
    assertThat(syntaxHighlighting.getType()).isEqualTo(Constants.HighlightingType.ANNOTATION);
  }
 }
