{
  filters=Lists.newArrayList();
  for (  String pattern : query.inclusions()) {
    filters.add(new InclusionFilter(pattern));
  }
  for (  String pattern : query.exclusions()) {
    filters.add(new ExclusionFilter(pattern));
  }
  for (  Map.Entry<String,Collection<String>> entry : query.attributes().entrySet()) {
    filters.add(new AttributeFilter(entry.getKey(),entry.getValue()));
  }
  if (settings.getBoolean(CoreProperties.INCREMENTAL_PREVIEW)) {
    Collection<String> status=query.attributes().get(InputFile.ATTRIBUTE_STATUS);
    if (status == null || status.isEmpty()) {
      filters.add(new AttributeFilter(InputFile.ATTRIBUTE_STATUS,Lists.newArrayList(InputFile.STATUS_ADDED,InputFile.STATUS_CHANGED)));
    }
  }
}
