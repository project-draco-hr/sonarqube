{
  Semaphores.Semaphore lock=dao.acquire("foo",60);
  assertThat(lock.isLocked()).isTrue();
  assertThat(lock.getDurationSinceLocked()).isNull();
  SemaphoreDto semaphore=selectSemaphore("foo");
  assertThat(semaphore.getCreatedAt().getTime()).isEqualTo(semaphore.getUpdatedAt().getTime());
  Thread.sleep(500);
  dao.update(lock);
  semaphore=selectSemaphore("foo");
  assertThat(semaphore.getCreatedAt().getTime()).isLessThan(semaphore.getUpdatedAt().getTime());
  dao.release("foo");
  assertThat(selectSemaphore("foo")).isNull();
}
