{
  SemaphoreDao dao=new SemaphoreDao(getMyBatis());
  for (int tests=0; tests < 5; tests++) {
    dao.release("my-lock");
    int size=5;
    CyclicBarrier barrier=new CyclicBarrier(size);
    CountDownLatch latch=new CountDownLatch(size);
    AtomicInteger locks=new AtomicInteger(0);
    for (int i=0; i < size; i++) {
      new Runner(dao,locks,barrier,latch).start();
    }
    latch.await();
    assertThat(locks.get()).isEqualTo(1);
  }
}
