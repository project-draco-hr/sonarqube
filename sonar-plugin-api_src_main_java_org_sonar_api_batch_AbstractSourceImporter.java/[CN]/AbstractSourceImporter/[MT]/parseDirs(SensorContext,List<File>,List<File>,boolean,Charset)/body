{
  for (  File file : files) {
    Resource resource=createResource(file,sourceDirs,unitTest);
    if (resource != null) {
      try {
        context.index(resource);
        if (enabled) {
          String source=FileUtils.readFileToString(file,sourcesEncoding.name());
          context.saveSource(resource,source);
        }
      }
 catch (      IOException e) {
        throw new SonarException("Unable to read and import the source file : '" + file.getAbsolutePath() + "' with the charset : '"+ sourcesEncoding.name()+ "'. You should check the property "+ CoreProperties.ENCODING_PROPERTY,e);
      }
    }
  }
}
