{
  Channel<StringBuilder> numberChannel=new Channel<StringBuilder>(){
    @Override public boolean consume(    CodeReader code,    StringBuilder output){
      if (Character.isDigit(code.peek())) {
        output.append((char)code.pop());
        return true;
      }
      return false;
    }
  }
;
  StringBuilder output=new StringBuilder();
  assertThat(numberChannel,consume("3",output));
  assertThat(output.toString(),is("3"));
  assertThat(numberChannel,consume(new CodeReader("333333"),output));
  output=new StringBuilder();
  assertThat(numberChannel,not(consume("n",output)));
  assertThat(output.toString(),is(""));
  assertThat(numberChannel,not(consume(new CodeReader("n"),output)));
}
