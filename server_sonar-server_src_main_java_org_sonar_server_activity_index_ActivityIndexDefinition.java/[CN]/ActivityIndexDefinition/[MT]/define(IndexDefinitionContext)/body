{
  NewIndex index=context.create(INDEX);
  index.getSettings().put("index.refresh_interval","-1");
  index.getSettings().put("analysis.analyzer.default.type","keyword");
  boolean clusterMode=settings.getBoolean(ProcessConstants.CLUSTER_ACTIVATE);
  if (clusterMode) {
    index.getSettings().put(IndexMetaData.SETTING_NUMBER_OF_SHARDS,4);
    index.getSettings().put(IndexMetaData.SETTING_NUMBER_OF_REPLICAS,1);
  }
  NewIndex.NewIndexType mapping=index.createType(TYPE);
  mapping.setAttribute("_id",ImmutableMap.of("path",FIELD_KEY));
  mapping.stringFieldBuilder(FIELD_KEY).build();
  mapping.stringFieldBuilder(FIELD_TYPE).build();
  mapping.stringFieldBuilder(FIELD_ACTION).build();
  mapping.stringFieldBuilder(FIELD_LOGIN).build();
  mapping.createDynamicNestedField(FIELD_DETAILS);
  mapping.stringFieldBuilder(FIELD_MESSAGE).build();
  mapping.createDateTimeField(FIELD_CREATED_AT);
}
