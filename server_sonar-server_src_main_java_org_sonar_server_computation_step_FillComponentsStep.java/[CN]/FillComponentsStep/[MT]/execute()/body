{
  BatchReport.Metadata reportMetadata=reportReader.readMetadata();
  String branch=reportMetadata.hasBranch() ? reportMetadata.getBranch() : null;
  BatchReport.Component reportProject=reportReader.readComponent(reportMetadata.getRootComponentRef());
  String projectKey=ComponentKeys.createKey(reportProject.getKey(),branch);
  UuidFactory uuidFactory=new UuidFactory(dbClient,projectKey);
  ComponentImpl root=(ComponentImpl)treeRootHolder.getRoot();
  root.setKey(projectKey);
  root.setUuid(uuidFactory.getOrCreateForKey(projectKey));
  processChildren(uuidFactory,root,root);
}
