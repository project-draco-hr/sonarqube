{
  Properties properties=new Properties();
  properties.setProperty(Process.NAME_PROPERTY,"test");
  properties.setProperty(Process.HEARTBEAT_PROPERTY,Integer.toString(socket.getLocalPort()));
  Process test=testProcess(properties);
  assertThat(test).isNotNull();
  int ping=0;
  int loop=0;
  while (loop < 3) {
    DatagramPacket packet=new DatagramPacket(new byte[1024],1024);
    try {
      socket.setSoTimeout(2000);
      socket.receive(packet);
      ping++;
    }
 catch (    Exception e) {
    }
    loop++;
  }
  assertThat(ping).isEqualTo(loop);
}
