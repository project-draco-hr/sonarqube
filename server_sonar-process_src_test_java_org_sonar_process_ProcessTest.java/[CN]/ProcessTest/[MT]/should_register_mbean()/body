{
  MBeanServer mbeanServer=ManagementFactory.getPlatformMBeanServer();
  Properties properties=new Properties();
  properties.setProperty(Process.NAME_PROPERTY,"TEST");
  Props props=Props.create(properties);
  process=new TestProcess(props);
  assertThat(process.getObjectName()).isNotNull();
  assertThat(mbeanServer.isRegistered(process.getObjectName())).isTrue();
  try {
    process=new TestProcess(null);
    fail();
  }
 catch (  IllegalStateException e) {
    assertThat(e.getMessage()).isEqualTo("Process already exists in current JVM");
  }
}
