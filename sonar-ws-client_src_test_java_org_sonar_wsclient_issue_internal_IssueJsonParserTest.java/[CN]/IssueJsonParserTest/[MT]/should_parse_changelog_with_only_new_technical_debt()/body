{
  String json=IOUtils.toString(getClass().getResourceAsStream("/org/sonar/wsclient/issue/internal/IssueJsonParserTest/changelog-with-only-new-technical-debt.json"));
  List<IssueChange> changes=new IssueJsonParser().parseChangelog(json);
  assertThat(changes).hasSize(1);
  IssueChange change=changes.get(0);
  assertThat(change.user()).isEqualTo("julien");
  assertThat(change.createdAt().getTime()).isEqualTo(1383202235000l);
  assertThat(change.updatedAt().getTime()).isEqualTo(1383202235000l);
  assertThat(change.diffs()).hasSize(1);
  IssueChangeDiff changeDiff=change.diffs().get(0);
  assertThat(changeDiff.key()).isEqualTo("technicalDebt");
  TechnicalDebt newTechnicalDebt=(TechnicalDebt)changeDiff.newValue();
  assertThat(newTechnicalDebt.days()).isEqualTo(2);
  assertThat(newTechnicalDebt.hours()).isEqualTo(1);
  assertThat(newTechnicalDebt.minutes()).isEqualTo(0);
  TechnicalDebt oldTechnicalDebt=(TechnicalDebt)changeDiff.oldValue();
  assertThat(oldTechnicalDebt).isNull();
}
