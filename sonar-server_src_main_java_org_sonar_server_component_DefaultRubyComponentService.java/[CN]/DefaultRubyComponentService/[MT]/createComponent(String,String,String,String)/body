{
  ComponentDto component=(ComponentDto)resourceDao.findByKey(kee);
  if (component != null) {
    throw new BadRequestException("Could not create resource, key already exists: " + kee);
  }
  if (!ComponentKeys.isValidModuleKey(kee)) {
    throw new BadRequestException("Could not create resource, malformed key: " + kee);
  }
  resourceDao.insertOrUpdate(new ResourceDto().setKey(kee).setName(name).setLongName(name).setScope(scope).setQualifier(qualifier).setCreatedAt(new Date()));
  component=(ComponentDto)resourceDao.findByKey(kee);
  if (component == null) {
    throw new BadRequestException("Resource not created: " + kee);
  }
  resourceIndexerDao.indexResource(component.getId());
}
