{
  int pivot=i + (j - i) / 2;
  while (i <= j) {
    while (data.isLess(i,pivot)) {
      i++;
    }
    while (data.isLess(pivot,j)) {
      j--;
    }
    if (i <= j) {
      data.swap(i,j);
      if (i == pivot) {
        pivot=j;
      }
 else       if (j == pivot) {
        pivot=i;
      }
      i++;
      j--;
    }
  }
  return i;
}
