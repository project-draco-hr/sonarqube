{
  char c=(char)0;
  int i=reader.read();
  boolean afterCR=false;
  while (i != -1) {
    c=(char)i;
    if (afterCR) {
      for (      CharHandler handler : handlers) {
        if (c == CARRIAGE_RETURN) {
          handler.newLine();
          handler.handleAll(c);
        }
 else         if (c == LINE_FEED) {
          handler.handleAll(c);
          handler.newLine();
          afterCR=false;
        }
 else {
          handler.newLine();
          handler.handleIgnoreEoL(c);
          handler.handleAll(c);
          afterCR=false;
        }
      }
      afterCR=c == CARRIAGE_RETURN;
    }
 else     if (c == LINE_FEED) {
      for (      CharHandler handler : handlers) {
        handler.handleAll(c);
        handler.newLine();
      }
    }
 else     if (c == CARRIAGE_RETURN) {
      afterCR=true;
      for (      CharHandler handler : handlers) {
        handler.handleAll(c);
      }
    }
 else {
      for (      CharHandler handler : handlers) {
        handler.handleIgnoreEoL(c);
        handler.handleAll(c);
      }
    }
    i=reader.read();
  }
  for (  CharHandler handler : handlers) {
    if (afterCR) {
      handler.newLine();
    }
    handler.eof();
  }
}
