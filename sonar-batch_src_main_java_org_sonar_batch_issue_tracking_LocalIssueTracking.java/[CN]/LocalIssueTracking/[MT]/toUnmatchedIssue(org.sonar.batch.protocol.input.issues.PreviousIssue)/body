{
  DefaultIssue issue=new DefaultIssue();
  issue.setKey(previous.key());
  issue.setStatus(previous.status());
  issue.setResolution(previous.resolution());
  issue.setMessage(previous.message());
  issue.setLine(previous.line());
  String overriddenSeverity=previous.severity();
  if (overriddenSeverity != null) {
    issue.setSeverity(overriddenSeverity);
  }
 else {
    ActiveRule activeRule=activeRules.find(RuleKey.of(previous.ruleRepo(),previous.ruleKey()));
    if (activeRule != null) {
      issue.setSeverity(activeRule.severity());
    }
  }
  issue.setAssignee(previous.assigneeLogin());
  issue.setComponentKey(previous.componentKey());
  issue.setManualSeverity(overriddenSeverity != null);
  issue.setRuleKey(RuleKey.of(previous.ruleRepo(),previous.ruleKey()));
  issue.setNew(false);
  return issue;
}
