{
  final File workDir=temp.getRoot();
  Project project=new Project("ignorePmdFailures");
  ProjectFileSystem fs=mock(ProjectFileSystem.class);
  when(fs.getSourceFiles(Java.INSTANCE)).thenReturn(Arrays.asList(new File("test-resources/ignorePmdFailures/DoesNotCompile.java")));
  when(fs.getSourceCharset()).thenReturn(Charsets.UTF_8);
  when(fs.getSonarWorkingDirectory()).thenReturn(workDir);
  project.setFileSystem(fs);
  PmdConfiguration conf=mock(PmdConfiguration.class);
  when(conf.getRulesets()).thenReturn(Arrays.asList(new File("test-resources/ignorePmdFailures/pmd.xml").getAbsolutePath()));
  File xmlReport=new File(workDir,"pmd-result.xml");
  when(conf.getTargetXMLReport()).thenReturn(xmlReport);
  PmdExecutor executor=new PmdExecutor(project,conf);
  executor.execute();
  assertThat(xmlReport.exists(),is(true));
}
