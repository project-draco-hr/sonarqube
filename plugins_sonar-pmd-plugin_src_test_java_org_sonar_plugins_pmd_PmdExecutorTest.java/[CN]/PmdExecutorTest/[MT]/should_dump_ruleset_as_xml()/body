{
  InputFile srcFile=file("src/Class.java");
  InputFile tstFile=file("test/ClassTest.java");
  when(pmdProfileExporter.exportProfile(PmdConstants.REPOSITORY_KEY,rulesProfile)).thenReturn(TestUtils.getResourceContent("/org/sonar/plugins/pmd/simple.xml"));
  when(pmdProfileExporter.exportProfile(PmdConstants.TEST_REPOSITORY_KEY,rulesProfile)).thenReturn(TestUtils.getResourceContent("/org/sonar/plugins/pmd/junit.xml"));
  when(projectFileSystem.mainFiles(Java.KEY)).thenReturn(Arrays.asList(srcFile));
  when(projectFileSystem.testFiles(Java.KEY)).thenReturn(Arrays.asList(tstFile));
  pmdExecutor.execute();
  verify(pmdConfiguration).dumpXmlRuleSet(PmdConstants.REPOSITORY_KEY,TestUtils.getResourceContent("/org/sonar/plugins/pmd/simple.xml"));
  verify(pmdConfiguration).dumpXmlRuleSet(PmdConstants.TEST_REPOSITORY_KEY,TestUtils.getResourceContent("/org/sonar/plugins/pmd/junit.xml"));
}
