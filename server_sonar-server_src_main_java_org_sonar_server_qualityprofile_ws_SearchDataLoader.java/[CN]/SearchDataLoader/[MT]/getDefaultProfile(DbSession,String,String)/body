{
  QualityProfileDto profile=profileName != null ? profileFactory.getByNameAndLanguage(dbSession,profileName,languageKey) : null;
  if (profile == null) {
    profile=profileFactory.getDefault(dbSession,languageKey);
  }
  checkState(profile != null,format("No quality profile can been found on language '%s'",languageKey));
  return profileDtoToQProfile(profile);
}
