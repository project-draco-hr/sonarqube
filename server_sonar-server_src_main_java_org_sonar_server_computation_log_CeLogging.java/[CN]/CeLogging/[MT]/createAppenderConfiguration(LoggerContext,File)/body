{
  SiftingAppender siftingAppender=new SiftingAppender();
  siftingAppender.addFilter(new CeLogAcceptFilter<ILoggingEvent>());
  MDCBasedDiscriminator mdcDiscriminator=new MDCBasedDiscriminator();
  mdcDiscriminator.setContext(ctx);
  mdcDiscriminator.setKey(MDC_LOG_PATH);
  mdcDiscriminator.setDefaultValue("error");
  mdcDiscriminator.start();
  siftingAppender.setContext(ctx);
  siftingAppender.setDiscriminator(mdcDiscriminator);
  siftingAppender.setAppenderFactory(new CeFileAppenderFactory(logsDir));
  siftingAppender.setName("ce");
  siftingAppender.start();
  return siftingAppender;
}
