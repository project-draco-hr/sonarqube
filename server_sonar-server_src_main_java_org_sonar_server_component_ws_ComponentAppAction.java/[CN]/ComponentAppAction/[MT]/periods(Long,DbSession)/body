{
  List<Period> periodList=newArrayList();
  SnapshotDto snapshotDto=dbClient.resourceDao().getLastSnapshotByResourceId(projectId,session);
  if (snapshotDto != null) {
    for (int i=1; i <= 5; i++) {
      String mode=snapshotDto.getPeriodMode(i);
      if (mode != null) {
        Date periodDate=snapshotDto.getPeriodDate(i);
        String label=periods.label(mode,snapshotDto.getPeriodModeParameter(i),periodDate);
        if (label != null) {
          periodList.add(new Period(i,label,periodDate));
        }
      }
    }
  }
  return periodList;
}
