{
  db.qualityProfileDao().insert(dbSession,QProfileTesting.newXooP1());
  dbSession.commit();
  dbSession.clearCache();
  assertThat(db.qualityProfileDao().selectByKey(dbSession,XOO_P1_KEY).isDefault()).isFalse();
  factory.setDefault(XOO_P1_KEY);
  dbSession.clearCache();
  assertThat(db.qualityProfileDao().selectByKey(dbSession,XOO_P1_KEY).isDefault()).isTrue();
}
