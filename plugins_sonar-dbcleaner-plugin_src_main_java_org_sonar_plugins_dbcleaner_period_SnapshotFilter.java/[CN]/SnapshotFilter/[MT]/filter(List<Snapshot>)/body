{
  int before=snapshots.size();
  ListIterator<Snapshot> iterator=snapshots.listIterator();
  while (iterator.hasNext()) {
    Snapshot snapshot=iterator.next();
    if (filter(snapshot)) {
      iterator.remove();
    }
  }
  int after=snapshots.size();
  return before - after;
}
