{
  Snapshot snapshot=resourcePersister.getSnapshot(violation.getResource());
  Snapshot previousLastSnapshot=resourcePersister.getLastSnapshot(snapshot,true);
  return session.getSingleResult(RuleFailureModel.class,"snapshotId",previousLastSnapshot.getId(),"line",violation.getLineId(),"message",violation.getMessage());
}
