{
  InputStream input=IOUtils.toInputStream("is");
  when(ws.call(any(WsRequest.class))).thenReturn(new MockWsResponse().setContent(input));
  when(cache.getStream(ID)).thenReturn(input);
  WSLoader underTest=new WSLoader(LoadStrategy.SERVER_FIRST,cache,ws);
  WSLoaderResult<InputStream> result=underTest.loadStream(ID);
  assertThat(result.get()).isEqualTo(input);
  InOrder inOrder=inOrder(ws,cache);
  inOrder.verify(ws).call(any(WsRequest.class));
  inOrder.verify(cache).put(eq(ID),any(InputStream.class));
  inOrder.verify(cache).getStream(ID);
  verifyNoMoreInteractions(cache,ws);
}
