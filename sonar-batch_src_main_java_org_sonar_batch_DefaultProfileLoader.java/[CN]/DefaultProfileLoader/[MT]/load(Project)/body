{
  String profileName=(String)project.getProperty(PARAM_PROFILE);
  RulesProfile profile;
  if (profileName == null) {
    Project root=project.getRoot();
    profile=dao.getActiveProfile(root.getLanguageKey(),root.getKey());
    if (profile == null) {
      throw new RuntimeException("Quality profile not found for " + root.getKey() + ", language "+ root.getLanguageKey());
    }
  }
 else {
    profile=dao.getProfile(project.getLanguageKey(),profileName);
    if (profile == null) {
      throw new RuntimeException("Quality profile not found : " + profileName + ", language "+ project.getLanguageKey());
    }
  }
  profile.getActiveRules().size();
  for (  ActiveRule activeRule : profile.getActiveRules()) {
    activeRule.getActiveRuleParams().size();
    activeRule.getRule().getParams().size();
  }
  profile.getAlerts().size();
  return profile;
}
