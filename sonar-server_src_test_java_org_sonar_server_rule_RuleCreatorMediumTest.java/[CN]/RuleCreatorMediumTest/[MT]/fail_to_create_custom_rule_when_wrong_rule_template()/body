{
  RuleDto rule=dao.insert(dbSession,RuleTesting.newDto(RuleKey.of("java","S001")).setCardinality(Cardinality.SINGLE));
  dbSession.commit();
  NewRule newRule=new NewRule().setTemplateKey(rule.getKey()).setName("My custom").setHtmlDescription("Some description").setSeverity(Severity.MAJOR).setStatus(RuleStatus.READY).setParams(ImmutableMap.of("regex","a.*"));
  try {
    creator.create(newRule);
    fail();
  }
 catch (  Exception e) {
    assertThat(e).isInstanceOf(IllegalArgumentException.class).hasMessage("This rule is not a template rule: java:S001");
  }
}
