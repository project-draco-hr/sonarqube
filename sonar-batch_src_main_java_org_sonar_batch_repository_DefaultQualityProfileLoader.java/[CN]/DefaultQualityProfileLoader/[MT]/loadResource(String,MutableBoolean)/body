{
  WSLoaderResult<InputStream> result=wsLoader.loadStream(url);
  if (fromCache != null) {
    fromCache.setValue(result.isFromCache());
  }
  InputStream is=result.get();
  SearchWsResponse profiles=null;
  try {
    profiles=SearchWsResponse.parseFrom(is);
  }
 catch (  IOException e) {
    throw new IllegalStateException("Failed to load quality profiles",e);
  }
 finally {
    IOUtils.closeQuietly(is);
  }
  List<QualityProfile> profilesList=profiles.getProfilesList();
  checkState(profilesList != null && !profilesList.isEmpty(),"No quality profiles has been found this project, you probably don't have any language plugin suitable for this analysis.");
  return profilesList;
}
