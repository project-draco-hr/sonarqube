{
  File dir=temp.newFolder();
  BatchOutputWriter writer=new BatchOutputWriter(dir);
  BatchOutput.ReportMetadata.Builder metadata=BatchOutput.ReportMetadata.newBuilder().setAnalysisDate(15000000L).setProjectKey("PROJECT_A").setRootComponentRef(1);
  writer.writeMetadata(metadata.build());
  BatchOutput.ReportMetadata read=ProtobufUtil.readFile(writer.getFileStructure().metadataFile(),BatchOutput.ReportMetadata.PARSER);
  assertThat(read.getAnalysisDate()).isEqualTo(15000000L);
  assertThat(read.getProjectKey()).isEqualTo("PROJECT_A");
  assertThat(read.getRootComponentRef()).isEqualTo(1);
}
