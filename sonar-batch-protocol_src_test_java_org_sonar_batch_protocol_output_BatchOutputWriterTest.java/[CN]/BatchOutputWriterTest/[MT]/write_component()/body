{
  File dir=temp.newFolder();
  BatchOutputWriter writer=new BatchOutputWriter(dir);
  assertThat(writer.hasComponentData(FileStructure.Domain.COMPONENT,1)).isFalse();
  BatchOutput.ReportComponent.Builder component=BatchOutput.ReportComponent.newBuilder().setRef(1).setLanguage("java").setPath("src/Foo.java").setUuid("UUID_A").setType(Constants.ComponentType.FILE).setIsTest(false).addChildRefs(5).addChildRefs(42);
  writer.writeComponent(component.build());
  assertThat(writer.hasComponentData(FileStructure.Domain.COMPONENT,1)).isTrue();
  File file=writer.getFileStructure().fileFor(FileStructure.Domain.COMPONENT,1);
  assertThat(file).exists().isFile();
  BatchOutput.ReportComponent read=ProtobufUtil.readFile(file,BatchOutput.ReportComponent.PARSER);
  assertThat(read.getRef()).isEqualTo(1);
  assertThat(read.getChildRefsList()).containsOnly(5,42);
  assertThat(read.hasName()).isFalse();
  assertThat(read.getIsTest()).isFalse();
  assertThat(read.getUuid()).isEqualTo("UUID_A");
}
