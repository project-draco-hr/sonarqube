{
  Lock lock=mock(Lock.class);
  SemaphoreDao dao=mock(SemaphoreDao.class);
  when(dao.acquire(anyString(),anyInt())).thenReturn(lock);
  DatabaseSemaphoreImpl impl=new DatabaseSemaphoreImpl(dao);
  impl.acquire("do-xxx",50000);
  verify(dao).acquire("do-xxx",50000);
  impl.acquire("do-xxx");
  verify(dao).acquire("do-xxx");
  impl.release("do-xxx");
  verify(dao).release("do-xxx");
}
