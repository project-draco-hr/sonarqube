{
  if (!ResourceUtils.isPersistable(resource)) {
    return;
  }
  Map<Integer,Violation> violationMap=filterViolationsPerPermanent(context.getViolations());
  if (!violationMap.isEmpty()) {
    Set<Integer> permanentIds=violationMap.keySet();
    List<ReviewDto> reviewDtos=selectReviewsWithManualSeverity(permanentIds);
    for (    ReviewDto reviewDto : reviewDtos) {
      Violation violation=violationMap.get(reviewDto.getViolationPermanentId());
      if (violation != null) {
        violation.setSeverity(RulePriority.valueOf(reviewDto.getSeverity()));
      }
    }
  }
}
