{
  BulkRequestBuilder bulk=client.prepareBulk().setRefresh(true);
  for (  String path : jsonPaths) {
    File file=TestUtils.getResource(testClass,path);
    if (file == null) {
      throw new IllegalArgumentException(String.format("File '%s' hasn't been found in folder '%s'",path,testClass.getSimpleName()));
    }
    bulk.add(new IndexRequest(index,type).source(IOUtils.toString(new FileInputStream(file))));
  }
  BulkResponse response=bulk.get();
  assertThat(response.hasFailures()).as(response.buildFailureMessage()).isFalse();
}
