{
  Preconditions.checkNotNull(parentSnapshot.getId(),"The parent snapshot need to be persisted before creating this snapshot");
  Long parentRootId=parentSnapshot.getRootId();
  return createBasicSnapshot(component,parentSnapshot.getRootProjectId()).setRootId(parentRootId != null ? parentRootId : parentSnapshot.getId()).setParentId(parentSnapshot.getId()).setPath(parentSnapshot.getPath() == null ? Long.toString(parentSnapshot.getId()) + "." : parentSnapshot.getPath() + Long.toString(parentSnapshot.getId()) + ".");
}
