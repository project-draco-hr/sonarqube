{
  MockUserSession.set().setLogin("login").setName("name").setGlobalPermissions(GlobalPermissions.SYSTEM_ADMIN);
  LinkedHashMap<String,Object> attributes1=new LinkedHashMap<>();
  attributes1.put("foo","bar");
  LinkedHashMap<String,Object> attributes2=new LinkedHashMap<>();
  attributes2.put("one",1);
  attributes2.put("two",2);
  when(monitor1.name()).thenReturn("Monitor One");
  when(monitor1.attributes()).thenReturn(attributes1);
  when(monitor2.name()).thenReturn("Monitor Two");
  when(monitor2.attributes()).thenReturn(attributes2);
  WsTester.TestResponse response=new WsTester.TestResponse();
  sut.handle(new SimpleGetRequest(),response);
  assertThat(response.outputAsString()).isEqualTo("{\"Monitor One\":{\"foo\":\"bar\"},\"Monitor Two\":{\"one\":1,\"two\":2}}");
}
