{
  String projectUuid=rs.getString(1);
  String fileUuid=rs.getString(2);
  Long updatedAt=SqlUtil.getLong(rs,3);
  if (updatedAt == null) {
    updatedAt=System.currentTimeMillis();
  }
  Date updatedDate=new Date(updatedAt);
  SourceFile result=new SourceFile(fileUuid,updatedAt);
  Reader csv=rs.getCharacterStream(4);
  if (csv == null) {
    return result;
  }
  int line=1;
  CSVParser csvParser=null;
  try {
    csvParser=new CSVParser(csv,CSVFormat.DEFAULT);
    for (    CSVRecord csvRecord : csvParser) {
      SourceLineDoc doc=new SourceLineDoc(Maps.<String,Object>newHashMap());
      doc.setProjectUuid(projectUuid);
      doc.setFileUuid(fileUuid);
      doc.setLine(line);
      doc.setUpdateDate(updatedDate);
      doc.setScmRevision(csvRecord.get(FileSourceDto.CSV_INDEX_SCM_REVISION));
      doc.setScmAuthor(csvRecord.get(FileSourceDto.CSV_INDEX_SCM_AUTHOR));
      doc.setScmDate(DateUtils.parseDateTimeQuietly(csvRecord.get(FileSourceDto.CSV_INDEX_SCM_DATE)));
      doc.setUtLineHits(parseIntegerFromRecord(csvRecord.get(FileSourceDto.CSV_INDEX_UT_LINE_HITS)));
      doc.setUtConditions(parseIntegerFromRecord(csvRecord.get(FileSourceDto.CSV_INDEX_UT_CONDITIONS)));
      doc.setUtCoveredConditions(parseIntegerFromRecord(csvRecord.get(FileSourceDto.CSV_INDEX_UT_COVERED_CONDITIONS)));
      doc.setItLineHits(parseIntegerFromRecord(csvRecord.get(FileSourceDto.CSV_INDEX_IT_LINE_HITS)));
      doc.setItConditions(parseIntegerFromRecord(csvRecord.get(FileSourceDto.CSV_INDEX_IT_CONDITIONS)));
      doc.setItCoveredConditions(parseIntegerFromRecord(csvRecord.get(FileSourceDto.CSV_INDEX_IT_COVERED_CONDITIONS)));
      doc.setOverallLineHits(parseIntegerFromRecord(csvRecord.get(FileSourceDto.CSV_INDEX_OVERALL_LINE_HITS)));
      doc.setOverallConditions(parseIntegerFromRecord(csvRecord.get(FileSourceDto.CSV_INDEX_OVERALL_CONDITIONS)));
      doc.setOverallCoveredConditions(parseIntegerFromRecord(csvRecord.get(FileSourceDto.CSV_INDEX_OVERALL_COVERED_CONDITIONS)));
      doc.setHighlighting(csvRecord.get(FileSourceDto.CSV_INDEX_HIGHLIGHTING));
      doc.setSymbols(csvRecord.get(FileSourceDto.CSV_INDEX_SYMBOLS));
      doc.setDuplications(parseDuplications(csvRecord.get(FileSourceDto.CSV_INDEX_DUPLICATIONS)));
      doc.setSource(csvRecord.get(FileSourceDto.CSV_INDEX_SOURCE));
      result.addLine(doc);
      line++;
    }
  }
 catch (  IOException ioError) {
    throw new IllegalStateException("Impossible to open stream for file_sources.data with file_uuid " + fileUuid,ioError);
  }
catch (  ArrayIndexOutOfBoundsException lineError) {
    throw new IllegalStateException(String.format("Impossible to parse source line data, stuck at line %d",line),lineError);
  }
 finally {
    IOUtils.closeQuietly(csv);
    IOUtils.closeQuietly(csvParser);
  }
  return result;
}
