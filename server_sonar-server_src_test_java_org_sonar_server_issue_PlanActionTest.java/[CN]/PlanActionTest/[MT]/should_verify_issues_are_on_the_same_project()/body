{
  throwable.expect(IllegalArgumentException.class);
  throwable.expectMessage("Issues are not all related to the action plan project: struts");
  String planKey="ABCD";
  Map<String,Object> properties=newHashMap();
  properties.put("plan",planKey);
  when(actionPlanService.findByKey(eq(planKey),any(ThreadLocalUserSession.class))).thenReturn(new DefaultActionPlan().setProjectKey("struts"));
  List<Issue> issues=newArrayList(new DefaultIssue().setKey("ABC").setProjectKey("struts"),(Issue)new DefaultIssue().setKey("ABE").setProjectKey("mybatis"));
  action.verify(properties,issues,mock(ThreadLocalUserSession.class));
}
