{
  com.google.gson.stream.JsonWriter gson=mock(com.google.gson.stream.JsonWriter.class);
  when(gson.beginArray()).thenThrow(new IOException("the reason"));
  thrown.expect(WriterException.class);
  thrown.expectMessage("Fail to write JSON: the reason");
  new JsonWriter(gson).beginArray();
}
