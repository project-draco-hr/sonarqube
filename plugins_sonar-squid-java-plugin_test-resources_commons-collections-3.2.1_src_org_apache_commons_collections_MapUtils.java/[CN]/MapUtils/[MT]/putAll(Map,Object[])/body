{
  map.size();
  if (array == null || array.length == 0) {
    return map;
  }
  Object obj=array[0];
  if (obj instanceof Map.Entry) {
    for (int i=0; i < array.length; i++) {
      Map.Entry entry=(Map.Entry)array[i];
      map.put(entry.getKey(),entry.getValue());
    }
  }
 else   if (obj instanceof KeyValue) {
    for (int i=0; i < array.length; i++) {
      KeyValue keyval=(KeyValue)array[i];
      map.put(keyval.getKey(),keyval.getValue());
    }
  }
 else   if (obj instanceof Object[]) {
    for (int i=0; i < array.length; i++) {
      Object[] sub=(Object[])array[i];
      if (sub == null || sub.length < 2) {
        throw new IllegalArgumentException("Invalid array element: " + i);
      }
      map.put(sub[0],sub[1]);
    }
  }
 else {
    for (int i=0; i < array.length - 1; ) {
      map.put(array[i++],array[i++]);
    }
  }
  return map;
}
