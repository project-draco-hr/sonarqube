{
  Serializable value=measure.value();
switch (builder.getValueType()) {
case BOOLEAN:
    builder.setBooleanValue((Boolean)value);
  break;
case DOUBLE:
builder.setDoubleValue(((Number)value).doubleValue());
break;
case INT:
builder.setIntValue(((Number)value).intValue());
break;
case LONG:
builder.setLongValue(((Number)value).longValue());
break;
case STRING:
builder.setStringValue((String)value);
break;
default :
throw new IllegalStateException("Unknown value type: " + builder.getValueType());
}
}
