{
  MetricDto metricDto=new MetricDto().setKey(SOME_KEY + valueType).setShortName(SOME_NAME).setValueType(valueType);
  dbClient.metricDao().insert(dbSession,metricDto);
  dbSession.commit();
  Metric metric=underTest.getByKey(metricDto.getKey());
  assertThat(metric.getKey()).isEqualTo(metricDto.getKey());
  assertThat(metric.getName()).isEqualTo(metricDto.getShortName());
  assertThat(metric.getType()).isEqualTo(expected);
}
