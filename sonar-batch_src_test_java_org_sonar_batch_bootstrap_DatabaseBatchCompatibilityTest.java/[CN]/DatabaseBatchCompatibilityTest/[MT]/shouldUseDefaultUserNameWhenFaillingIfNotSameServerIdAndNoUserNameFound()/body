{
  DatabaseVersion version=mock(DatabaseVersion.class);
  when(version.getSonarCoreId()).thenReturn("1111111");
  settings.removeProperty(DatabaseProperties.PROP_USER);
  thrown.expect(BadDatabaseVersion.class);
  thrown.expectMessage("- Batch side: jdbc:postgresql://localhost/foo (sonar / *****)");
  new DatabaseBatchCompatibility(version,server,remoteServerMetadata,settings).start();
}
