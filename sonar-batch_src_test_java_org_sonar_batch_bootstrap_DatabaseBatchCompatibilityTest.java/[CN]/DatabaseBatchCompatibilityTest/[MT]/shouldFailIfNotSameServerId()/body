{
  DatabaseVersion version=mock(DatabaseVersion.class);
  when(version.getSonarCoreId()).thenReturn("1111111");
  thrown.expect(BadDatabaseVersion.class);
  thrown.expectMessage("The current batch process and the configured remote server do not share the same DB configuration.");
  thrown.expectMessage("- Batch side: jdbc:postgresql://localhost/foo (bar / *****)");
  thrown.expectMessage("- Server side: check the configuration at http://localhost:9000/system");
  new DatabaseBatchCompatibility(version,server,remoteServerMetadata,settings).start();
}
