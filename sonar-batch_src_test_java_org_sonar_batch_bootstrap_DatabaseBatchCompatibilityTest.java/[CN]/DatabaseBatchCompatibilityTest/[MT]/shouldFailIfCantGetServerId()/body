{
  when(remoteServerMetadata.getServerId()).thenThrow(new IOException());
  thrown.expect(SonarException.class);
  thrown.expectMessage("Impossible to get the ID of the remote server: http://localhost:9000");
  new DatabaseBatchCompatibility(mock(DatabaseVersion.class),server,remoteServerMetadata,settings).start();
}
