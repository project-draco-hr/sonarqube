{
  Rule rule=Rule.create(PmdConstants.REPOSITORY_KEY,"MyOwnRule","This is my own xpath rule.").setConfigKey(PmdConstants.XPATH_CLASS).setRepositoryKey(PmdConstants.REPOSITORY_KEY);
  rule.createParameter(PmdConstants.XPATH_EXPRESSION_PARAM);
  rule.createParameter(PmdConstants.XPATH_MESSAGE_PARAM);
  RulesProfile profile=RulesProfile.create();
  ActiveRule xpath=profile.activateRule(rule,null);
  xpath.setParameter(PmdConstants.XPATH_EXPRESSION_PARAM,"//FieldDeclaration");
  xpath.setParameter(PmdConstants.XPATH_MESSAGE_PARAM,"This is bad");
  String exportedXml=exporter.exportProfile(PmdConstants.REPOSITORY_KEY,profile);
  assertThat(exportedXml).satisfies(equalsIgnoreEOL(TestUtils.getResourceContent("/org/sonar/plugins/pmd/export_xpath_rules.xml")));
}
