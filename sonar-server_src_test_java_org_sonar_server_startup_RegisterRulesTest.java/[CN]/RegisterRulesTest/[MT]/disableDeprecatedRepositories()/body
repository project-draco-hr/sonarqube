{
  setupData("shared");
  RegisterRules task=new RegisterRules(getSessionFactory(),new RuleRepository[]{new FakeRepository()});
  task.start();
  List<Rule> rules=(List<Rule>)getSession().createQuery("from " + Rule.class.getSimpleName() + " where pluginName<>'fake'").getResultList();
  assertThat(rules.size(),greaterThan(0));
  for (  Rule rule : rules) {
    assertThat(rule.isEnabled(),is(false));
  }
}
