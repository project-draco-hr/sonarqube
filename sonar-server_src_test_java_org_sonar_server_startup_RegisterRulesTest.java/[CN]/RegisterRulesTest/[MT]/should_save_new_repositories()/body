{
  setupData("shared");
  task.start();
  verify(ruleRegistry).bulkRegisterRules();
  List<Rule> result=getSession().getResults(Rule.class,"pluginName","fake");
  assertThat(result.size()).isEqualTo(2);
  Rule first=result.get(0);
  assertThat(first.getKey()).isEqualTo("rule1");
  assertThat(first.getRepositoryKey()).isEqualTo("fake");
  assertThat(first.isEnabled()).isEqualTo(true);
  assertThat(first.getCreatedAt()).isNotNull();
  assertThat(first.getStatus()).isEqualTo(Rule.STATUS_READY);
  assertThat(first.getLanguage()).isEqualTo("java");
  assertThat(first.getParams().size()).isEqualTo(2);
}
