{
  setupData("shared");
  task.start();
  verify(ruleRegistry).bulkRegisterRules();
  List<Rule> result=getSession().getResults(Rule.class,"pluginName","fake");
  assertThat(result.size(),is(2));
  Rule first=result.get(0);
  assertThat(first.getKey(),is("rule1"));
  assertThat(first.getRepositoryKey(),is("fake"));
  assertThat(first.isEnabled(),is(true));
  assertThat(first.getCreatedAt(),notNullValue());
  assertThat(first.getStatus(),is(Rule.STATUS_READY));
  assertThat(first.getLanguage(),is("java"));
  assertThat(first.getParams().size(),is(2));
}
