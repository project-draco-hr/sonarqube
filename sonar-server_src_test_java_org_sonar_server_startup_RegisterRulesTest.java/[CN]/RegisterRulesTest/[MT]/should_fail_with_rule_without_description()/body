{
  RuleI18nManager ruleI18nManager=mock(RuleI18nManager.class);
  when(ruleI18nManager.getName(anyString(),anyString(),any(Locale.class))).thenReturn("Name");
  task=new RegisterRules(getSessionFactory(),new RuleRepository[]{new RuleWithoutDescriptionRepository()},ruleI18nManager,profilesManager,ruleRegistry);
  setupData("shared");
  try {
    task.start();
    fail("Rule must have a description");
  }
 catch (  SonarException e) {
    assertThat(e.getMessage(),containsString("must have a description"));
  }
  when(ruleI18nManager.getName(anyString(),anyString(),any(Locale.class))).thenReturn("Name");
  when(ruleI18nManager.getDescription(anyString(),anyString(),any(Locale.class))).thenReturn("Description");
  task.start();
}
