{
  scanXooSample();
  ComponentTreeWsResponse response=wsClient.measures().componentTree(new ComponentTreeWsRequest().setBaseComponentKey("sample").setMetricKeys(singletonList("ncloc")).setAdditionalFields(newArrayList("metrics","periods")));
  assertThat(response).isNotNull();
  assertThat(response.getBaseComponent().getKey()).isEqualTo("sample");
  assertThat(response.getMetrics().getMetricsList()).extracting("key").containsOnly("ncloc");
  List<WsMeasures.Component> components=response.getComponentsList();
  assertThat(components).hasSize(2).extracting("key").containsOnly(DIR_KEY,FILE_KEY);
  assertThat(components.get(0).getMeasuresList().get(0).getValue()).isEqualTo("13");
}
