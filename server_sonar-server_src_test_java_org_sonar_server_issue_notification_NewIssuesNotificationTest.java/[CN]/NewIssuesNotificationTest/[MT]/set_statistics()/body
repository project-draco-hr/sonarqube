{
  addIssueNTimes(newIssue1(),5);
  addIssueNTimes(newIssue2(),3);
  when(dbClient.componentDao().selectOrFailByUuid(any(DbSession.class),eq("file-uuid")).name()).thenReturn("file-name");
  when(dbClient.componentDao().selectOrFailByUuid(any(DbSession.class),eq("directory-uuid")).name()).thenReturn("directory-name");
  when(dbClient.ruleDao().selectOrFailByKey(any(DbSession.class),eq(RuleKey.of("SonarQube","rule-the-world")))).thenReturn(newRule("Rule the World","Java"));
  when(dbClient.ruleDao().selectOrFailByKey(any(DbSession.class),eq(RuleKey.of("SonarQube","rule-the-universe")))).thenReturn(newRule("Rule the Universe","Clojure"));
  underTest.setStatistics("project-long-name",stats);
  assertThat(underTest.getFieldValue(SEVERITY + ".INFO.count")).isEqualTo("5");
  assertThat(underTest.getFieldValue(SEVERITY + ".BLOCKER.count")).isEqualTo("3");
  assertThat(underTest.getFieldValue(ASSIGNEE + ".1.label")).isEqualTo("maynard");
  assertThat(underTest.getFieldValue(ASSIGNEE + ".1.count")).isEqualTo("5");
  assertThat(underTest.getFieldValue(ASSIGNEE + ".2.label")).isEqualTo("keenan");
  assertThat(underTest.getFieldValue(ASSIGNEE + ".2.count")).isEqualTo("3");
  assertThat(underTest.getFieldValue(TAG + ".1.label")).isEqualTo("owasp");
  assertThat(underTest.getFieldValue(TAG + ".1.count")).isEqualTo("8");
  assertThat(underTest.getFieldValue(TAG + ".2.label")).isEqualTo("bug");
  assertThat(underTest.getFieldValue(TAG + ".2.count")).isEqualTo("5");
  assertThat(underTest.getFieldValue(COMPONENT + ".1.label")).isEqualTo("file-name");
  assertThat(underTest.getFieldValue(COMPONENT + ".1.count")).isEqualTo("5");
  assertThat(underTest.getFieldValue(COMPONENT + ".2.label")).isEqualTo("directory-name");
  assertThat(underTest.getFieldValue(COMPONENT + ".2.count")).isEqualTo("3");
  assertThat(underTest.getFieldValue(RULE + ".1.label")).isEqualTo("Rule the World (Java)");
  assertThat(underTest.getFieldValue(RULE + ".1.count")).isEqualTo("5");
  assertThat(underTest.getFieldValue(RULE + ".2.label")).isEqualTo("Rule the Universe (Clojure)");
  assertThat(underTest.getFieldValue(RULE + ".2.count")).isEqualTo("3");
  assertThat(underTest.getDefaultMessage()).startsWith("8 new issues on project-long-name");
}
