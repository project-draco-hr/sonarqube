{
  for (  InputFile inputFile : files) {
    String filename=inputFile.relativePath();
    Command cl=createCommandLine(fs.baseDir(),filename);
    SonarGitBlameConsumer consumer=new SonarGitBlameConsumer(LOG);
    StringStreamConsumer stderr=new StringStreamConsumer();
    int exitCode=execute(cl,consumer,stderr);
    if (exitCode != 0) {
      throw new IllegalStateException("The git blame command [" + cl.toString() + "] failed: "+ stderr.getOutput());
    }
    result.add(inputFile,consumer.getLines());
  }
}
