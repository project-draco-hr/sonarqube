{
  String key=null;
  String name=null;
  String description=null;
  String internalKey=null;
  String severity=Severity.defaultSeverity();
  RuleStatus status=RuleStatus.defaultStatus();
  boolean template=false;
  String effortToFixDescription=null;
  String debtSubCharacteristic=null;
  String debtRemediationFunction=null;
  String debtRemediationFunctionOffset=null;
  String debtRemediationFunctionCoeff=null;
  List<ParamStruct> params=new ArrayList<>();
  List<String> tags=new ArrayList<>();
  String keyAttribute=ruleC.getAttrValue("key");
  if (isNotBlank(keyAttribute)) {
    key=trim(keyAttribute);
  }
  String priorityAttribute=ruleC.getAttrValue("priority");
  if (isNotBlank(priorityAttribute)) {
    severity=trim(priorityAttribute);
  }
  SMInputCursor cursor=ruleC.childElementCursor();
  while (cursor.getNext() != null) {
    String nodeName=cursor.getLocalName();
    if (equalsIgnoreCase("name",nodeName)) {
      name=trim(cursor.collectDescendantText(false));
    }
 else     if (equalsIgnoreCase("description",nodeName)) {
      description=trim(cursor.collectDescendantText(false));
    }
 else     if (equalsIgnoreCase("key",nodeName)) {
      key=trim(cursor.collectDescendantText(false));
    }
 else     if (equalsIgnoreCase("configKey",nodeName)) {
      internalKey=trim(cursor.collectDescendantText(false));
    }
 else     if (equalsIgnoreCase("internalKey",nodeName)) {
      internalKey=trim(cursor.collectDescendantText(false));
    }
 else     if (equalsIgnoreCase("priority",nodeName)) {
      severity=trim(cursor.collectDescendantText(false));
    }
 else     if (equalsIgnoreCase("severity",nodeName)) {
      severity=trim(cursor.collectDescendantText(false));
    }
 else     if (equalsIgnoreCase("cardinality",nodeName)) {
      template=Cardinality.MULTIPLE == Cardinality.valueOf(trim(cursor.collectDescendantText(false)));
    }
 else     if (equalsIgnoreCase("effortToFixDescription",nodeName)) {
      effortToFixDescription=trim(cursor.collectDescendantText(false));
    }
 else     if (equalsIgnoreCase("debtRemediationFunction",nodeName)) {
      debtRemediationFunction=trim(cursor.collectDescendantText(false));
    }
 else     if (equalsIgnoreCase("debtRemediationFunctionOffset",nodeName)) {
      debtRemediationFunctionOffset=trim(cursor.collectDescendantText(false));
    }
 else     if (equalsIgnoreCase("debtRemediationFunctionCoefficient",nodeName)) {
      debtRemediationFunctionCoeff=trim(cursor.collectDescendantText(false));
    }
 else     if (equalsIgnoreCase("debtSubCharacteristic",nodeName)) {
      debtSubCharacteristic=trim(cursor.collectDescendantText(false));
    }
 else     if (equalsIgnoreCase("status",nodeName)) {
      String s=trim(cursor.collectDescendantText(false));
      if (s != null) {
        status=RuleStatus.valueOf(s);
      }
    }
 else     if (equalsIgnoreCase("param",nodeName)) {
      params.add(processParameter(cursor));
    }
 else     if (equalsIgnoreCase("tag",nodeName)) {
      tags.add(trim(cursor.collectDescendantText(false)));
    }
  }
  try {
    RulesDefinition.NewRule rule=repo.createRule(key).setHtmlDescription(description).setSeverity(severity).setName(name).setInternalKey(internalKey).setTags(tags.toArray(new String[tags.size()])).setTemplate(template).setStatus(status).setEffortToFixDescription(effortToFixDescription).setDebtSubCharacteristic(debtSubCharacteristic);
    fillRemediationFunction(rule,debtRemediationFunction,debtRemediationFunctionOffset,debtRemediationFunctionCoeff);
    fillParams(rule,params);
  }
 catch (  Exception e) {
    throw new IllegalArgumentException(format("Fail to load the rule with key [%s:%s]",repo.key(),key),e);
  }
}
