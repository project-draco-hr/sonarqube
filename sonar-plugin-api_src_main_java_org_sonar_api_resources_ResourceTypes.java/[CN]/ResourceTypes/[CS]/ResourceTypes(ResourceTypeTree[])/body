{
  Preconditions.checkNotNull(trees);
  Map<String,ResourceTypeTree> treeMap=Maps.newHashMap();
  Map<String,ResourceType> typeMap=Maps.newHashMap();
  for (  ResourceTypeTree tree : trees) {
    for (    ResourceType type : tree.getTypes()) {
      if (treeMap.containsKey(type.getQualifier())) {
        throw new IllegalStateException("Qualifier " + type.getQualifier() + " is defined in several trees");
      }
      treeMap.put(type.getQualifier(),tree);
      typeMap.put(type.getQualifier(),type);
    }
  }
  treeByQualifier=ImmutableMap.copyOf(treeMap);
  typeByQualifier=ImmutableMap.copyOf(typeMap);
}
