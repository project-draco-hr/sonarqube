{
  dbTester.truncateTables();
  session=dbTester.myBatis().openSession(false);
  dbClient=new DbClient(dbTester.database(),dbTester.myBatis(),new ComponentDao());
  reportDir=temp.newFolder();
  computeComponentsRefCache=new ComputeComponentsRefCache();
  projectSettings=new Settings();
  languageRepository=mock(LanguageRepository.class);
  dbComponentsRefCache=new DbComponentsRefCache();
  sut=new PersistComponentsStep(dbClient,computeComponentsRefCache,dbComponentsRefCache);
}
