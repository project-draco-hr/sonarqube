{
  MockUserSession.set().setLogin("john").setGlobalPermissions(GlobalPermissions.SYSTEM_ADMIN);
  dbClient.userDao().insert(session,new UserDto().setLogin("marius").setName("Marius").setEmail("marius@mail.com").setCryptedPassword("1234").setSalt("abcd").setCreatedAt(1000L));
  GroupDto userGroup=new GroupDto().setName(CoreProperties.CORE_DEFAULT_GROUP_DEFAULT_VALUE);
  dbClient.groupDao().insert(session,userGroup);
  session.commit();
  service.update(UpdateUser.create("marius").setName("Marius2").setEmail("marius2@mail.com"));
  UserDto userDto=dbClient.userDao().selectNullableByLogin(session,"marius");
  assertThat(userDto.getName()).isEqualTo("Marius2");
  assertThat(userDto.getEmail()).isEqualTo("marius2@mail.com");
}
