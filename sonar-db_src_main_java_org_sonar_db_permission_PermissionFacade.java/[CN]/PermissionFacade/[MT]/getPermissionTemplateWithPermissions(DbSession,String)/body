{
  PermissionTemplateDto permissionTemplateDto=permissionTemplateDao.selectTemplateByKey(session,templateKey);
  if (permissionTemplateDto == null) {
    throw new IllegalArgumentException("Could not retrieve permission template with key " + templateKey);
  }
  PermissionTemplateDto templateWithPermissions=permissionTemplateDao.selectPermissionTemplate(session,permissionTemplateDto.getKee());
  if (templateWithPermissions == null) {
    throw new IllegalArgumentException("Could not retrieve permissions for template with key " + templateKey);
  }
  return templateWithPermissions;
}
