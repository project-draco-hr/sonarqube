{
  if (issue == null) {
    return Collections.emptyList();
  }
  List<Transition> outTransitions=workflow.outTransitions(issue);
  List<Transition> allowedTransitions=new ArrayList<Transition>();
  for (  Transition transition : outTransitions) {
    String projectKey=issue.projectKey();
    if (StringUtils.isBlank(transition.requiredProjectPermission()) || (projectKey != null && UserSession.get().hasProjectPermission(transition.requiredProjectPermission(),projectKey))) {
      allowedTransitions.add(transition);
    }
  }
  return allowedTransitions;
}
