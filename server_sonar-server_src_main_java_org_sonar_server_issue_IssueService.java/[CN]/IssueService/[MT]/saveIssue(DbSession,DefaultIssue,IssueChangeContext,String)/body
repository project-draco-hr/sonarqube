{
  String projectKey=issue.projectKey();
  if (projectKey == null) {
    throw new IllegalStateException(String.format("Issue '%s' has no project key",issue.key()));
  }
  issueStorage.save(issue);
  issueNotifications.sendChanges(issue,context,getRuleByKey(issue.ruleKey()),dbClient.componentDao().getByKey(session,projectKey),dbClient.componentDao().getNullableByKey(session,issue.componentKey()),comment);
  dryRunCache.reportResourceModification(issue.componentKey());
}
