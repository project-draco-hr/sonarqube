{
  String projectKey=issue.projectKey();
  if (projectKey == null) {
    throw new IllegalStateException(String.format("Issue '%s' has no project key",issue.key()));
  }
  issueStorage.save(session,issue);
  Rule rule=getNullableRuleByKey(issue.ruleKey());
  issueNotifications.sendChanges(issue,context.login(),rule != null ? rule.getName() : null,dbClient.componentDao().getByKey(session,projectKey),dbClient.componentDao().getNullableByKey(session,issue.componentKey()),comment,false);
  dryRunCache.reportResourceModification(issue.componentKey());
}
