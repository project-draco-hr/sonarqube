{
  when(request.getRequestURI()).thenReturn("/oauth2/callback/" + OAUTH2_PROVIDER_KEY);
  identityProviderRepository.addIdentityProvider(new FakeOAuth2IdentityProvider(OAUTH2_PROVIDER_KEY,false));
  underTest.doFilter(request,response,chain);
  assertError("Fail to callback authentication with 'github'");
}
