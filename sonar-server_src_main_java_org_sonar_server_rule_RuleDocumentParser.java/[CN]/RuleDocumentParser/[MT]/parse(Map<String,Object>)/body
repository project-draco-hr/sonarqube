{
  Rule.Builder ruleBuilder=new Rule.Builder();
  ruleBuilder.setId((Integer)ruleSource.get(RuleDocument.FIELD_ID));
  ruleBuilder.setKey((String)ruleSource.get(RuleDocument.FIELD_KEY));
  ruleBuilder.setLanguage((String)ruleSource.get(RuleDocument.FIELD_LANGUAGE));
  ruleBuilder.setRepositoryKey((String)ruleSource.get(RuleDocument.FIELD_REPOSITORY_KEY));
  ruleBuilder.setSeverity((String)ruleSource.get(RuleDocument.FIELD_SEVERITY));
  ruleBuilder.setName((String)ruleSource.get(RuleDocument.FIELD_NAME));
  ruleBuilder.setDescription((String)ruleSource.get(RuleDocument.FIELD_DESCRIPTION));
  ruleBuilder.setStatus((String)ruleSource.get(RuleDocument.FIELD_STATUS));
  ruleBuilder.setCardinality((String)ruleSource.get("cardinality"));
  ruleBuilder.setTemplateId((Integer)ruleSource.get(RuleDocument.FIELD_TEMPLATE_ID));
  ruleBuilder.setCreatedAt(parseOptionalDate(RuleDocument.FIELD_CREATED_AT,ruleSource));
  ruleBuilder.setUpdatedAt(parseOptionalDate(RuleDocument.FIELD_UPDATED_AT,ruleSource));
  if (ruleSource.containsKey(RuleDocument.FIELD_NOTE)) {
    Map<String,Object> ruleNoteDocument=(Map<String,Object>)ruleSource.get(RuleDocument.FIELD_NOTE);
    ruleBuilder.setRuleNote(new RuleNote((String)ruleNoteDocument.get(RuleDocument.FIELD_NOTE_DATA),(String)ruleNoteDocument.get(RuleDocument.FIELD_NOTE_USER_LOGIN),parseOptionalDate(RuleDocument.FIELD_NOTE_CREATED_AT,ruleNoteDocument),parseOptionalDate(RuleDocument.FIELD_NOTE_UPDATED_AT,ruleNoteDocument)));
  }
  List<RuleParam> params=Lists.newArrayList();
  if (ruleSource.containsKey(RuleDocument.FIELD_PARAMS)) {
    Map<String,Map<String,Object>> ruleParams=Maps.newHashMap();
    for (    Map<String,Object> ruleParam : (List<Map<String,Object>>)ruleSource.get(RuleDocument.FIELD_PARAMS)) {
      ruleParams.put((String)ruleParam.get(RuleDocument.FIELD_PARAM_KEY),ruleParam);
    }
    for (    Map.Entry<String,Map<String,Object>> ruleParam : ruleParams.entrySet()) {
      RuleParamType type=RuleParamType.parse((String)ruleParam.getValue().get(RuleDocument.FIELD_PARAM_TYPE));
      params.add(new RuleParam((String)ruleParam.getValue().get(RuleDocument.FIELD_PARAM_KEY),(String)ruleParam.getValue().get(RuleDocument.FIELD_PARAM_DESCRIPTION),(String)ruleParam.getValue().get(RuleDocument.FIELD_PARAM_DEFAULT_VALUE),type));
    }
  }
  ruleBuilder.setParams(params);
  List<String> systemTags=newArrayList();
  if (ruleSource.containsKey(RuleDocument.FIELD_SYSTEM_TAGS)) {
    for (    String tag : (List<String>)ruleSource.get(RuleDocument.FIELD_SYSTEM_TAGS)) {
      systemTags.add(tag);
    }
  }
  ruleBuilder.setSystemTags(systemTags);
  List<String> adminTags=newArrayList();
  if (ruleSource.containsKey(RuleDocument.FIELD_ADMIN_TAGS)) {
    for (    String tag : (List<String>)ruleSource.get(RuleDocument.FIELD_ADMIN_TAGS)) {
      adminTags.add(tag);
    }
  }
  ruleBuilder.setAdminTags(adminTags);
  return ruleBuilder.build();
}
