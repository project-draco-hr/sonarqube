{
  if (!NewIssuesNotification.TYPE.equals(notification.getType())) {
    return null;
  }
  String projectName=notification.getFieldValue(FIELD_PROJECT_NAME);
  StringBuilder message=new StringBuilder();
  message.append("Project: ").append(projectName).append(NEW_LINE).append(NEW_LINE);
  appendSeverity(message,notification);
  appendAssignees(message,notification);
  appendTags(message,notification);
  appendComponents(message,notification);
  appendFooter(message,notification);
  return new EmailMessage().setMessageId("new-issues/" + notification.getFieldValue(FIELD_PROJECT_KEY)).setSubject(projectName + ": " + notification.getFieldValue(METRIC.SEVERITY + COUNT)+ " new issues").setMessage(message.toString());
}
