{
  setupData("shouldNotIndexPackages");
  dao.indexProject(1);
  Connection connection=getConnection();
  ResultSet rs=null;
  try {
    rs=connection.createStatement().executeQuery("select count(resource_id) from resource_index where resource_id=1");
    rs.next();
    assertThat(rs.getInt(1)).isGreaterThan(0);
    rs=connection.createStatement().executeQuery("select count(resource_id) from resource_index where resource_id=2");
    rs.next();
    assertThat(rs.getInt(1)).isEqualTo(0);
    rs=connection.createStatement().executeQuery("select count(resource_id) from resource_index where resource_id=3");
    rs.next();
    assertThat(rs.getInt(1)).isGreaterThan(0);
  }
  finally {
    if (null != rs) {
      rs.close();
    }
  }
}
