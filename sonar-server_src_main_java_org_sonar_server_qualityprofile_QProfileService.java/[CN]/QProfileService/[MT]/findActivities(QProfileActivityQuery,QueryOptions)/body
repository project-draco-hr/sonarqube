{
  List<QProfileActivity> results=Lists.newArrayList();
  OrFilterBuilder activityFilter=FilterBuilders.orFilter();
  for (  String profileKey : query.getQprofileKeys()) {
    activityFilter.add(FilterBuilders.termFilter("details.profileKey",profileKey));
  }
  SearchResponse response=index.get(ActivityIndex.class).search(query,options,activityFilter);
  for (  SearchHit hit : response.getHits().getHits()) {
    QProfileActivity profileActivity=new QProfileActivity(hit.getSource());
    results.add(profileActivity);
  }
  return results;
}
