{
  Activity activity=new Activity();
  activity.setType(Activity.Type.ANALYSIS_REPORT);
  activity.setAction("THE_ACTION");
  activity.setMessage("THE_MSG");
  activity.setData("foo","bar");
  service.save(activity);
  MockUserSession.set();
  WsTester.TestRequest request=tester.wsTester().newGetRequest("api/activities","search");
  WsTester.Result result=request.execute();
  assertThat(result.outputAsString()).contains("\"total\":1");
  assertThat(result.outputAsString()).contains("\"type\":\"ANALYSIS_REPORT\"");
  assertThat(result.outputAsString()).contains("\"details\":{\"foo\":\"bar\"}");
}
