{
  userSessionRule.setLocale(Locale.ENGLISH);
  ValidatingRequest request=new SimpleRequest("GET").setParam("count","3");
  ServletResponse response=new ServletResponse();
  when(i18n.message(Locale.ENGLISH,"bad.request.reason","bad.request.reason",0)).thenReturn("reason #0");
  engine.execute(request,response,"api/system","fail_with_i18n_message");
  assertThat(response.stream().outputAsString()).isEqualTo("{\"errors\":[{\"msg\":\"reason #0\"}]}");
  assertThat(response.stream().httpStatus()).isEqualTo(400);
  assertThat(response.stream().mediaType()).isEqualTo(MediaTypes.JSON);
}
