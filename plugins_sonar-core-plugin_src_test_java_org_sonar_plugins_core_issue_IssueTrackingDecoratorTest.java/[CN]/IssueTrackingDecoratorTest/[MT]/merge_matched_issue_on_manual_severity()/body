{
  IssueDto previousIssue=new IssueDto().setKee("ABCDE").setResolution(null).setStatus("OPEN").setRuleKey_unit_test_only("squid","AvoidCycle").setLine(10).setManualSeverity(true).setSeverity("MAJOR").setMessage("Message").setEffortToFix(1.5).setDebt(1L);
  DefaultIssue issue=new DefaultIssue();
  IssueTrackingResult trackingResult=mock(IssueTrackingResult.class);
  when(trackingResult.matched()).thenReturn(newArrayList(issue));
  when(trackingResult.matching(eq(issue))).thenReturn(previousIssue);
  decorator.mergeMatched(trackingResult);
  assertThat(issue.manualSeverity()).isTrue();
  assertThat(issue.severity()).isEqualTo("MAJOR");
  verify(updater,never()).setPastSeverity(eq(issue),anyString(),any(IssueChangeContext.class));
}
