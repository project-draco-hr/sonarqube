{
  when(initialOpenIssues.selectChangelog("ABCDE")).thenReturn(newArrayList(new IssueChangeDto().setIssueKey("ABCD")));
  IssueDto previousIssue=new IssueDto().setKee("ABCDE").setResolution(null).setStatus("OPEN").setRuleKey_unit_test_only("squid","AvoidCycle").setLine(10).setMessage("Message").setEffortToFix(1.5).setTechnicalDebt(1L);
  DefaultIssue issue=new DefaultIssue();
  IssueTrackingResult trackingResult=mock(IssueTrackingResult.class);
  when(trackingResult.matched()).thenReturn(newArrayList(issue));
  when(trackingResult.matching(eq(issue))).thenReturn(previousIssue);
  decorator.mergeMatched(trackingResult);
  assertThat(issue.changes()).hasSize(1);
}
