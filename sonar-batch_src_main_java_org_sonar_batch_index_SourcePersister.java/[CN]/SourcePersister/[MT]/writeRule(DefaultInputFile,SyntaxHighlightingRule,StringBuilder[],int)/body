{
  int currentLineIdx=currentLine;
  long ruleStartOffsetCurrentLine=rule.getStartPosition();
  while (currentLineIdx < file.lines() && rule.getEndPosition() >= file.originalLineOffsets()[currentLineIdx]) {
    writeRule(highlightingPerLine,currentLineIdx,ruleStartOffsetCurrentLine - file.originalLineOffsets()[currentLineIdx - 1],file.originalLineOffsets()[currentLineIdx] - file.originalLineOffsets()[currentLineIdx - 1],rule.getTextType());
    currentLineIdx++;
    ruleStartOffsetCurrentLine=file.originalLineOffsets()[currentLineIdx - 1];
  }
  writeRule(highlightingPerLine,currentLineIdx,ruleStartOffsetCurrentLine - file.originalLineOffsets()[currentLineIdx - 1],rule.getEndPosition() - file.originalLineOffsets()[currentLineIdx - 1],rule.getTextType());
}
