{
  Date yesterday=DateTime.now().minusDays(1).toDate();
  Date tomorrow=DateTime.now().plusDays(1).toDate();
  MockUserSession.set().setGlobalPermissions(GlobalPermissions.QUALITY_PROFILE_ADMIN).setLogin("david");
  createActivity(login,ActiveRuleChange.Type.ACTIVATED,ActiveRuleKey.of(XOO_P1_KEY,RuleTesting.XOO_X1),Severity.MAJOR,"max","10");
  wsTester.newGetRequest(QProfilesWs.API_ENDPOINT,"changelog").setParam("profileKey",XOO_P1_KEY).setParam("since",DateUtils.formatDateTime(yesterday)).execute().assertJson(getClass(),"changelog_nominal.json");
  wsTester.newGetRequest(QProfilesWs.API_ENDPOINT,"changelog").setParam("profileKey",XOO_P1_KEY).setParam("since",DateUtils.formatDateTime(tomorrow)).execute().assertJson(getClass(),"changelog_empty.json");
  wsTester.newGetRequest(QProfilesWs.API_ENDPOINT,"changelog").setParam("profileKey",XOO_P1_KEY).setParam("to",DateUtils.formatDateTime(yesterday)).execute().assertJson(getClass(),"changelog_empty.json");
  wsTester.newGetRequest(QProfilesWs.API_ENDPOINT,"changelog").setParam("profileKey",XOO_P1_KEY).setParam("to",DateUtils.formatDateTime(tomorrow)).execute().assertJson(getClass(),"changelog_nominal.json");
}
