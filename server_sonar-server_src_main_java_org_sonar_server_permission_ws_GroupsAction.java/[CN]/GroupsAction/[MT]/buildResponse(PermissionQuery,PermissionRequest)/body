{
  GroupWithPermissionQueryResult groupsResult=permissionFinder.findGroupsWithPermission(permissionQuery);
  List<GroupWithPermission> groupsWithPermission=groupsResult.groups();
  Permissions.GroupsResponse.Builder groupsResponse=Permissions.GroupsResponse.newBuilder();
  Permissions.GroupsResponse.Group.Builder group=Permissions.GroupsResponse.Group.newBuilder();
  Common.Paging.Builder paging=Common.Paging.newBuilder();
  for (  GroupWithPermission groupWithPermission : groupsWithPermission) {
    group.clear().setName(groupWithPermission.name()).setSelected(groupWithPermission.hasPermission());
    if (groupWithPermission.id() != 0) {
      group.setId(String.valueOf(groupWithPermission.id()));
    }
    if (groupWithPermission.description() != null) {
      group.setDescription(groupWithPermission.description());
    }
    groupsResponse.addGroups(group);
  }
  groupsResponse.setPaging(paging.setPageIndex(permissionRequest.page()).setPageSize(permissionRequest.pageSize()).setTotal(groupsResult.total()));
  return groupsResponse.build();
}
