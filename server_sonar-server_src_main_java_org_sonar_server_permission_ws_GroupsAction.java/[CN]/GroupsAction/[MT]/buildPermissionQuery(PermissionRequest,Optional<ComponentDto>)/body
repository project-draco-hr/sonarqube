{
  PermissionQuery.Builder permissionQuery=PermissionQuery.builder().permission(request.permission()).pageIndex(request.page()).pageSize(request.pageSize()).membership(toMembership(firstNonNull(request.selected(),SelectionMode.SELECTED.value()))).search(request.query());
  if (project.isPresent()) {
    permissionQuery.component(project.get().getKey());
  }
  return permissionQuery.build();
}
