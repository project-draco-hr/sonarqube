{
  TimeProfiler profiler=new TimeProfiler(LOG).start(String.format("#%s - %s - processing analysis report",report.getId(),report.getProjectKey()));
  ComponentDto project=loadProject(report);
  File reportDir=tempFolder.newDir();
  try {
    decompressReport(report,reportDir);
    ComputationContext context=new ComputationContext(report,project,new BatchOutputReader(reportDir));
    for (    ComputationStep step : steps.orderedSteps()) {
      TimeProfiler stepProfiler=new TimeProfiler(LOG).start(step.getDescription());
      step.execute(context);
      stepProfiler.stop();
    }
    report.succeed();
  }
 catch (  Exception e) {
    report.fail();
    throw Throwables.propagate(e);
  }
 finally {
    FileUtils.deleteQuietly(reportDir);
    logActivity(report,project);
    profiler.stop();
  }
}
