{
  Profiler profiler=Profiler.create(LOG).startDebug(String.format("Analysis of project %s (report %d)",item.dto.getProjectKey(),item.dto.getId()));
  ComponentDto project=null;
  try {
    project=loadProject(item);
    File reportDir=extractReportInDir(item);
    BatchReportReader reader=new BatchReportReader(reportDir);
    if (isSnapshotMissing(item,reader.readMetadata().getSnapshotId())) {
      return;
    }
    ComputationContext context=new ComputationContext(reader,project);
    context.setProjectSettings(projectSettingsFactory.newProjectSettings(project.getId()));
    for (    ComputationStep step : steps.orderedSteps()) {
      if (ArrayUtils.contains(step.supportedProjectQualifiers(),context.getProject().qualifier())) {
        Profiler stepProfiler=Profiler.createIfDebug(LOG).startDebug(step.getDescription());
        step.execute(context);
        stepProfiler.stopDebug();
      }
    }
    item.dto.setStatus(SUCCESS);
  }
 catch (  Throwable e) {
    item.dto.setStatus(FAILED);
    throw Throwables.propagate(e);
  }
 finally {
    item.dto.setFinishedAt(system.now());
    saveActivity(item.dto,project);
    profiler.stopInfo();
  }
}
