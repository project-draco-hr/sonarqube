{
  String projectKey=item.dto.getProjectKey();
  Profiler profiler=Profiler.create(LOG).startDebug(String.format("Analysis of project %s (report %d)",projectKey,item.dto.getId()));
  try {
    ComputationContext context=new ComputationContext(reportReader,null,null,dbClient,ComponentTreeBuilders.from(reportReader),languageRepository);
    for (    ComputationStep step : steps.instances()) {
      Profiler stepProfiler=Profiler.createIfDebug(LOG).startDebug(step.getDescription());
      step.execute(context);
      stepProfiler.stopDebug();
    }
    item.dto.setStatus(SUCCESS);
  }
 catch (  Throwable e) {
    item.dto.setStatus(FAILED);
    throw Throwables.propagate(e);
  }
 finally {
    item.dto.setFinishedAt(system.now());
    activityManager.saveActivity(item.dto);
    profiler.stopInfo();
  }
}
