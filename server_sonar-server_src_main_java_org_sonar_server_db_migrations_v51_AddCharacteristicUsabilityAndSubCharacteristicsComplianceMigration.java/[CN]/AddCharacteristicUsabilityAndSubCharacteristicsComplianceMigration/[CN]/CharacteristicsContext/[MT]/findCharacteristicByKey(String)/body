{
  Characteristic characteristic=Iterables.find(characteristics,new Predicate<Characteristic>(){
    @Override public boolean apply(    @Nullable Characteristic input){
      return input != null && input.key.equals(key);
    }
  }
,null);
  if (characteristic != null && characteristic.getParentId() != null) {
    throw new IllegalStateException(String.format("'%s' must be a characteristic",characteristic.getName()));
  }
  return characteristic;
}
