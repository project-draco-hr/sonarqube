{
  DeprecatedFileFilters filters=new DeprecatedFileFilters(new FileSystemFilter[]{filter});
  File basedir=temp.newFolder();
  File file=temp.newFile();
  InputFile inputFile=new DefaultInputFile("src/main/java/Foo.java").setFile(file).setType(InputFile.Type.MAIN).setSourceDirAbsolutePath(new File(basedir,"src/main/java").getAbsolutePath()).setPathRelativeToSourceDir("Foo.java");
  when(filter.accept(eq(file),any(DeprecatedFileFilters.DeprecatedContext.class))).thenReturn(false);
  assertThat(filters.accept(inputFile)).isFalse();
  ArgumentCaptor<DeprecatedFileFilters.DeprecatedContext> argument=ArgumentCaptor.forClass(DeprecatedFileFilters.DeprecatedContext.class);
  verify(filter).accept(eq(file),argument.capture());
  DeprecatedFileFilters.DeprecatedContext context=argument.getValue();
  assertThat(context.canonicalPath()).isEqualTo(FilenameUtils.separatorsToUnix(file.getAbsolutePath()));
  assertThat(context.relativeDir()).isEqualTo(new File(basedir,"src/main/java"));
  assertThat(context.relativePath()).isEqualTo("Foo.java");
  assertThat(context.type()).isEqualTo(FileType.MAIN);
}
