{
  Metric metric=alert.getMetric();
  if (metric.getType() == Metric.ValueType.FLOAT || metric.getType() == Metric.ValueType.PERCENT || metric.getType() == Metric.ValueType.RATING) {
    return getValue(alert,measure);
  }
  if (metric.getType() == Metric.ValueType.INT || metric.getType() == Metric.ValueType.MILLISEC) {
    Double value=getValue(alert,measure);
    return value != null ? value.intValue() : null;
  }
  if (alert.getPeriod() == null) {
    if (metric.getType() == Metric.ValueType.STRING || metric.getType() == Metric.ValueType.LEVEL) {
      return measure.getData();
    }
    if (metric.getType() == Metric.ValueType.BOOL) {
      return measure.getValue().intValue();
    }
  }
  throw new NotImplementedException(metric.getType().toString());
}
