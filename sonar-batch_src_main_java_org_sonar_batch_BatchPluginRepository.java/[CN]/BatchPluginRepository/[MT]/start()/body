{
  HashMultimap<String,URL> urlsByKey=HashMultimap.create();
  for (  JpaPluginFile pluginFile : dao.getPluginFiles()) {
    try {
      String key=getClassloaderKey(pluginFile.getPluginKey());
      URL url=new URL(baseUrl + pluginFile.getPath());
      urlsByKey.put(key,url);
    }
 catch (    MalformedURLException e) {
      throw new SonarException("Can not build the classloader of the plugin " + pluginFile.getPluginKey(),e);
    }
  }
  classloaders=new HashMap<String,ClassLoader>();
  for (  String key : urlsByKey.keySet()) {
    Set<URL> urls=urlsByKey.get(key);
    if (LOG.isDebugEnabled()) {
      LOG.debug("Classloader of plugin " + key + ":");
      for (      URL url : urls) {
        LOG.debug("   -> " + url);
      }
    }
    classloaders.put(key,new RemoteClassLoader(urls,Thread.currentThread().getContextClassLoader()).getClassLoader());
  }
}
