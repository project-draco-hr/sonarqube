{
  classLoaders=new ClassLoadersCollection(Thread.currentThread().getContextClassLoader());
  for (  JpaPlugin pluginMetadata : dao.getPlugins()) {
    String key=pluginMetadata.getKey();
    List<URL> urls=Lists.newArrayList();
    for (    JpaPluginFile pluginFile : pluginMetadata.getFiles()) {
      try {
        URL url=new URL(baseUrl + pluginFile.getPath());
        urls.add(url);
      }
 catch (      MalformedURLException e) {
        throw new SonarException("Can not build the classloader of the plugin " + pluginFile.getPluginKey(),e);
      }
    }
    if (LOG.isDebugEnabled()) {
      LOG.debug("Classloader of plugin " + key + ":");
      for (      URL url : urls) {
        LOG.debug("   -> " + url);
      }
    }
    classLoaders.createClassLoader(key,urls,pluginMetadata.isUseChildFirstClassLoader() == Boolean.TRUE);
  }
  classLoaders.done();
}
