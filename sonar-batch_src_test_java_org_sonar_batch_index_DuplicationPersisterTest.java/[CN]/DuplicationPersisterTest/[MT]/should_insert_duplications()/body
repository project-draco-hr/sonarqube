{
  setupData("empty");
  Duplication.Block originBlock=new Duplication.Block("foo:org/foo/Bar.java",1,4);
  DefaultDuplication group=new DefaultDuplication().setOriginBlock(originBlock);
  group.duplicates().add(new Duplication.Block("foo:org/foo/Foo.java",5,9));
  when(duplicationCache.componentKeys()).thenReturn(Arrays.asList("foo:org/foo/Bar.java"));
  when(duplicationCache.byComponent("foo:org/foo/Bar.java")).thenReturn(Arrays.asList(group));
  duplicationPersister.persist();
  checkTables("shouldInsertDuplication","project_measures");
}
