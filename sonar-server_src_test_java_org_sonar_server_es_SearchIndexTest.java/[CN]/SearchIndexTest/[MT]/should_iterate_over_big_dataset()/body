{
  final int numberOfDocuments=10000;
  searchIndex.addMappingFromClasspath("index","type1","/org/sonar/server/es/SearchIndexTest/correct_mapping1.json");
  String[] ids=new String[numberOfDocuments];
  BytesStream[] sources=new BytesStream[numberOfDocuments];
  for (int i=0; i < numberOfDocuments; i++) {
    ids[i]=Integer.toString(i);
    sources[i]=XContentFactory.jsonBuilder().startObject().field("value",Integer.toString(i)).endObject();
  }
  searchIndex.bulkIndex("index","type1",ids,sources);
  List<String> docIds=searchIndex.findDocumentIds(SearchQuery.create());
  assertThat(docIds).hasSize(numberOfDocuments);
}
