{
  if (!referencesBySymbol.containsKey(symbol)) {
    throw new UnsupportedOperationException("Cannot add reference to a symbol in another file");
  }
  if (fromOffset >= symbol.getDeclarationStartOffset() && fromOffset < symbol.getDeclarationEndOffset()) {
    throw new UnsupportedOperationException("Cannot add reference (" + fromOffset + ") overlapping "+ symbol);
  }
  referencesBySymbol.get(symbol).add(fromOffset);
}
