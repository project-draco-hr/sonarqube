{
  long bestDistance=Long.MAX_VALUE;
  Snapshot nearest=null;
  for (  Snapshot snapshot : snapshots) {
    long distance=distance(longToDate(snapshot.getCreatedAtMs()),targetDate);
    if (distance <= bestDistance) {
      bestDistance=distance;
      nearest=snapshot;
    }
  }
  return nearest;
}
