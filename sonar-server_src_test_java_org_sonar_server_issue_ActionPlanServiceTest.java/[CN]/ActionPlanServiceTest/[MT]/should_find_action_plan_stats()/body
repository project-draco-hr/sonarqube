{
  when(resourceDao.getResource(any(ResourceQuery.class))).thenReturn(new ResourceDto().setId(1L).setKey("org.sonar.Sample"));
  when(actionPlanStatsDao.findByProjectId(1L)).thenReturn(newArrayList(new ActionPlanStatsDto()));
  Collection<ActionPlanStats> results=actionPlanService.findActionPlanStats("org.sonar.Sample",userSession);
  assertThat(results).hasSize(1);
  verify(authorizationDao).isAuthorizedComponentId(anyLong(),anyInt(),eq(UserRole.USER));
}
