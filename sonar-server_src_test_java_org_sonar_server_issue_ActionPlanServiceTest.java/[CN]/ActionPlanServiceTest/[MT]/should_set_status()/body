{
  when(actionPlanDao.findByKey("ABCD")).thenReturn(new ActionPlanDto().setKey("ABCD"));
  when(resourceDao.getResource(any(ResourceQuery.class))).thenReturn(new ResourceDto().setKey("org.sonar.Sample").setId(1l));
  ActionPlan result=actionPlanService.setStatus("ABCD","CLOSED",userSession);
  verify(actionPlanDao).update(any(ActionPlanDto.class));
  assertThat(result).isNotNull();
  assertThat(result.status()).isEqualTo("CLOSED");
  verify(authorizationDao).isAuthorizedComponentKey(anyString(),anyInt(),eq(UserRole.ADMIN));
}
