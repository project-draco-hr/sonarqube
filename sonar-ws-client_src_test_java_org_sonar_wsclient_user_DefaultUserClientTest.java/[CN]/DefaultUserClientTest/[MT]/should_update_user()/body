{
  httpServer.stubResponseBody("{\"user\":{\"login\":\"daveloper\",\"name\":\"daveloper\",\"email\":\"new_email\"}}");
  UserParameters params=UserParameters.create().login("daveloper").email("new_email");
  User updatedUser=client.update(params);
  assertThat(httpServer.requestedPath()).isEqualTo("/api/users/update");
  assertThat(httpServer.requestParams()).includes(entry("login","daveloper"),entry("email","new_email"));
  assertThat(updatedUser).isNotNull();
  assertThat(updatedUser.login()).isEqualTo("daveloper");
  assertThat(updatedUser.name()).isEqualTo("daveloper");
  assertThat(updatedUser.email()).isEqualTo("new_email");
}
