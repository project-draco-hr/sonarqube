{
  HttpRequestFactory requestFactory=new HttpRequestFactory(httpServer.url());
  httpServer.doReturnBody("{\"users\": [{\"login\": \"simon\", \"name\": \"Simon\", \"active\": true}]}");
  UserClient client=new DefaultUserClient(requestFactory);
  UserQuery query=UserQuery.create().logins("simon","loic");
  List<User> users=client.find(query);
  assertThat(httpServer.requestedPath()).isEqualTo("/api/users/search?logins=simon%2Cloic");
  assertThat(users).hasSize(1);
  User simon=users.get(0);
  assertThat(simon.login()).isEqualTo("simon");
  assertThat(simon.name()).isEqualTo("Simon");
  assertThat(simon.email()).isNull();
  assertThat(simon.active()).isTrue();
}
