{
  initTaskWithRealm();
  settings.setProperty("sonar.security.realm",REALM_NAME);
  settings.setProperty("sonar.security.localUsers",USER1_LOGIN);
  UserDto user=addUser(USER1_LOGIN,false,"github");
  underTest.start();
  verifyLogAboutRemovalOfLocalUsersProperty();
  logTester.clear();
  UserDto userReloaded=userDao.selectUserById(dbSession,user.getId());
  assertThat(userReloaded.getUpdatedAt()).isEqualTo(NOW);
  verifyTaskIsRegistered();
  when(system2.now()).thenReturn(NOW + 1000L);
  underTest.start();
  userReloaded=userDao.selectUserById(dbSession,user.getId());
  assertThat(userReloaded.getUpdatedAt()).isEqualTo(NOW);
  verifyEmptyLog();
}
