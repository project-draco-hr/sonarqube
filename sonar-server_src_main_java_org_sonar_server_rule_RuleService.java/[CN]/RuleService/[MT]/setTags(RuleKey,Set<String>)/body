{
  checkAdminPermission(UserSession.get());
  DbSession dbSession=db.openSession(false);
  try {
    RuleDto rule=db.ruleDao().getNonNullByKey(ruleKey,dbSession);
    boolean changed=RuleTagHelper.applyTags(rule,tags);
    if (changed) {
      db.ruleDao().update(rule,dbSession);
      dbSession.commit();
    }
  }
  finally {
    dbSession.close();
  }
}
