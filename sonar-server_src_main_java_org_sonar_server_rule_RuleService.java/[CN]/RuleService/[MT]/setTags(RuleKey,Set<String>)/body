{
  checkAdminPermission(UserSession.get());
  DbSession dbSession=db.openSession(false);
  try {
    RuleDto rule=db.ruleDao().getNonNullByKey(dbSession,ruleKey);
    boolean changed=RuleTagHelper.applyTags(rule,tags);
    if (changed) {
      db.ruleDao().update(dbSession,rule);
      dbSession.commit();
    }
  }
  finally {
    dbSession.close();
  }
}
