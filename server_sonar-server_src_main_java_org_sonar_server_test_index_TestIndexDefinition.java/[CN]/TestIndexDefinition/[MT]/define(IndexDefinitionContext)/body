{
  NewIndex index=context.create(INDEX);
  index.refreshHandledByIndexer();
  index.configureShards(settings);
  NewIndex.NewIndexType nestedMapping=index.createType(TYPE);
  nestedMapping.stringFieldBuilder(FIELD_COVERED_FILE_UUID).build();
  nestedMapping.createIntegerField(FIELD_COVERED_FILE_LINES);
  NewIndex.NewIndexType mapping=index.createType(TYPE);
  mapping.setAttribute("_id",ImmutableMap.of("path",FIELD_TEST_UUID));
  mapping.setAttribute("_routing",ImmutableMap.of("required",true,"path",FIELD_PROJECT_UUID));
  mapping.stringFieldBuilder(FIELD_PROJECT_UUID).disableNorms().build();
  mapping.stringFieldBuilder(FIELD_FILE_UUID).disableNorms().build();
  mapping.stringFieldBuilder(FIELD_TEST_UUID).disableNorms().build();
  mapping.stringFieldBuilder(FIELD_NAME).disableNorms().disableSearch().build();
  mapping.stringFieldBuilder(FIELD_STATUS).disableNorms().disableSearch().build();
  mapping.createLongField(FIELD_DURATION_IN_MS);
  mapping.stringFieldBuilder(FIELD_MESSAGE).disableNorms().disableSearch().build();
  mapping.stringFieldBuilder(FIELD_STACKTRACE).disableNorms().disableSearch().build();
  mapping.nestedObjectBuilder(FIELD_COVERED_FILES,nestedMapping).build();
  mapping.createDateTimeField(FIELD_UPDATED_AT);
}
