{
  try {
    PmdRuleset tree=createPmdRuleset(profile.getActiveRulesByRepository(PmdConstants.REPOSITORY_KEY),profile.getName());
    String xmlModules=exportPmdRulesetToXml(tree);
    writer.append(xmlModules);
  }
 catch (  IOException e) {
    throw new SonarException("Fail to export the profile " + profile,e);
  }
}
