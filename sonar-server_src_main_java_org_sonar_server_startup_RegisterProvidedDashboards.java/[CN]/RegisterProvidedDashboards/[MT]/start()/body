{
  TimeProfiler profiler=new TimeProfiler().start("Load provided dashboards");
  ArrayList<org.sonar.persistence.dashboard.DashboardDto> loadedDashboards=Lists.newArrayList();
  org.sonar.persistence.dashboard.DashboardDto mainDashboard=null;
  for (  DashboardTemplate dashboardTemplate : dashboardTemplates) {
    Dashboard dashboard=dashboardTemplate.createDashboard();
    if (shouldBeLoaded(dashboard)) {
      org.sonar.persistence.dashboard.DashboardDto dashboardDataModel=loadDashboard(dashboard);
      if (MAIN_DASHBOARD_ID.equals(dashboard.getId())) {
        mainDashboard=dashboardDataModel;
      }
 else {
        loadedDashboards.add(dashboardDataModel);
      }
    }
  }
  activateDashboards(loadedDashboards,mainDashboard);
  profiler.stop();
}
