{
  ActiveRuleDto activeRule=new ActiveRuleDto().setId(5).setProfileId(1).setRuleId(10).setSeverity(1);
  ActiveRuleParamDto activeRuleParam=new ActiveRuleParamDto().setId(100).setActiveRuleId(5).setKey("max").setValue("20");
  when(profilesManager.ruleParamChanged(eq(1),eq(5),eq("max"),eq("20"),eq((String)null),eq("Nicolas"))).thenReturn(new ProfilesManager.RuleInheritanceActions());
  operations.deleteActiveRuleParam(activeRule,activeRuleParam,authorizedUserSession);
  verify(session).commit();
  verify(activeRuleDao).deleteParameter(100,session);
  verify(profilesManager).ruleParamChanged(eq(1),eq(5),eq("max"),eq("20"),eq((String)null),eq("Nicolas"));
  verify(ruleRegistry).deleteActiveRules(anyListOf(Integer.class));
  verify(ruleRegistry).bulkIndexActiveRules(anyListOf(Integer.class),eq(session));
}
