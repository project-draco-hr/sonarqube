{
  when(profileLookup.profile(1)).thenReturn(new QProfile().setId(1).setName("Default").setLanguage("java"));
  when(ruleDao.selectById(10)).thenReturn(new RuleDto().setId(10));
  ActiveRuleDto activeRule=new ActiveRuleDto().setId(5).setProfileId(1).setRuleId(10).setSeverity(1);
  when(activeRuleDao.selectByProfileAndRule(1,10)).thenReturn(activeRule);
  try {
    operations.activateRule(1,10,"Unknown",authorizedUserSession);
    fail();
  }
 catch (  Exception e) {
    assertThat(e).isInstanceOf(BadRequestException.class);
  }
  verify(activeRuleDao,never()).update(eq(activeRule),eq(session));
  verifyZeroInteractions(profilesManager);
}
