{
  ActiveRuleDto activeRule=new ActiveRuleDto().setId(5).setProfileId(1).setRuleId(10).setSeverity(Severity.MINOR);
  RuleParamDto ruleParam=new RuleParamDto().setRuleId(10).setName("max").setDefaultValue("20").setType(PropertyType.INTEGER.name());
  when(ruleDao.selectParamByRuleAndKey(10,"max",session)).thenReturn(ruleParam);
  ActiveRuleParamDto activeRuleParam=new ActiveRuleParamDto().setId(100).setActiveRuleId(5).setKey("max").setValue("20");
  when(activeRuleDao.selectParamByActiveRuleAndKey(5,"max",session)).thenReturn(activeRuleParam);
  operations.updateActiveRuleParam(activeRule,"max","30",session);
  ArgumentCaptor<ActiveRuleParamDto> argumentCaptor=ArgumentCaptor.forClass(ActiveRuleParamDto.class);
  verify(activeRuleDao).update(argumentCaptor.capture(),eq(session));
  assertThat(argumentCaptor.getValue().getId()).isEqualTo(100);
  assertThat(argumentCaptor.getValue().getValue()).isEqualTo("30");
  verify(typeValidations).validate(eq("30"),eq("INTEGER"),anyList());
  verifyZeroInteractions(session);
  verifyZeroInteractions(profilesManager);
  verifyZeroInteractions(esActiveRule);
}
