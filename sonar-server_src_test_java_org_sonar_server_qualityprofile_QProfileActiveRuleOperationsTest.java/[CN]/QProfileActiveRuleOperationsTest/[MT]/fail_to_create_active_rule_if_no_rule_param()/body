{
  QProfile profile=new QProfile().setId(1).setName("Default").setLanguage("java");
  when(profileLookup.profile(1)).thenReturn(profile);
  QProfileRule rule=mock(QProfileRule.class);
  when(rule.id()).thenReturn(10);
  when(rulesLookup.findByRuleId(10)).thenReturn(rule);
  ActiveRuleDto activeRule=new ActiveRuleDto().setId(5).setProfileId(1).setRuleId(10).setSeverity(1);
  when(activeRuleDao.selectById(5)).thenReturn(activeRule);
  when(ruleDao.selectParamByRuleAndKey(10,"max",session)).thenReturn(null);
  try {
    operations.updateActiveRuleParam(1,5,"max","30",authorizedUserSession);
    fail();
  }
 catch (  Exception e) {
    assertThat(e).isInstanceOf(IllegalArgumentException.class);
  }
  verify(activeRuleDao,never()).insert(any(ActiveRuleParamDto.class),eq(session));
  verifyZeroInteractions(profilesManager);
}
