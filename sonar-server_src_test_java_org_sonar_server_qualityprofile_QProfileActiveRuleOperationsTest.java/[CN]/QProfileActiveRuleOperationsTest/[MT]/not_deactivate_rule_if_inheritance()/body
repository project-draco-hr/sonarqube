{
  when(profileDao.selectById(1,session)).thenReturn(new QualityProfileDto().setId(1).setName("Default").setLanguage("java"));
  when(ruleDao.selectById(10,session)).thenReturn(new RuleDto().setId(10));
  ActiveRuleDto activeRule=new ActiveRuleDto().setId(5).setProfileId(1).setRuleId(10).setSeverity(Severity.MINOR).setInheritance(ActiveRuleDto.INHERITED);
  when(activeRuleDao.selectByProfileAndRule(1,10,session)).thenReturn(activeRule);
  when(profilesManager.deactivated(eq(1),anyInt(),eq("Nicolas"))).thenReturn(new ProfilesManager.RuleInheritanceActions());
  boolean result=operations.deactivateRule(1,10,authorizedUserSession);
  assertThat(result).isFalse();
  verify(activeRuleDao,never()).delete(anyInt(),eq(session));
  verify(activeRuleDao,never()).deleteParameters(anyInt(),eq(session));
  verify(session,never()).commit();
  verifyZeroInteractions(profilesManager);
  verifyZeroInteractions(esActiveRule);
}
