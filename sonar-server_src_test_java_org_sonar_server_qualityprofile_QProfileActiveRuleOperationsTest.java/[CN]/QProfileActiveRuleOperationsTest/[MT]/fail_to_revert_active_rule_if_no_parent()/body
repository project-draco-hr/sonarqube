{
  QProfile profile=new QProfile().setId(1).setName("Default").setLanguage("java");
  when(profileLookup.profile(1)).thenReturn(profile);
  ActiveRuleDto activeRule=new ActiveRuleDto().setId(5).setProfileId(1).setRuleId(10).setSeverity(1).setInheritance(ActiveRuleDto.OVERRIDES).setParentId(4);
  when(activeRuleDao.selectById(5)).thenReturn(activeRule);
  when(activeRuleDao.selectById(4,session)).thenReturn(null);
  when(profilesManager.ruleSeverityChanged(eq(1),eq(5),eq(RulePriority.MINOR),eq(RulePriority.MAJOR),eq("Nicolas"))).thenReturn(new ProfilesManager.RuleInheritanceActions());
  try {
    operations.revertActiveRule(1,5,authorizedUserSession);
  }
 catch (  Exception e) {
    assertThat(e).isInstanceOf(IllegalStateException.class);
  }
}
