{
  ActiveRuleDto activeRule=new ActiveRuleDto().setId(5).setProfileId(1).setRuleId(10).setSeverity(Severity.MINOR);
  RuleParamDto ruleParam=new RuleParamDto().setRuleId(10).setName("max").setDefaultValue("20").setType(PropertyType.INTEGER.name());
  when(ruleDao.selectParamByRuleAndKey(10,"max",session)).thenReturn(ruleParam);
  when(activeRuleDao.selectParamByActiveRuleAndKey(5,"max",session)).thenReturn(null);
  try {
    operations.updateActiveRuleParam(activeRule,"max","30",session);
    fail();
  }
 catch (  Exception e) {
    assertThat(e).isInstanceOf(NotFoundException.class).hasMessage("No active rule parameter 'max' has been found on active rule id '5'");
  }
  verify(activeRuleDao,never()).update(any(ActiveRuleParamDto.class),eq(session));
  verifyZeroInteractions(session);
  verifyZeroInteractions(profilesManager);
  verifyZeroInteractions(esActiveRule);
}
