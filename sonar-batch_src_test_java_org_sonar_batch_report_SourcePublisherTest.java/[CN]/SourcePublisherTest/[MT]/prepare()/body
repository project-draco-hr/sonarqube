{
  Project p=new Project("foo").setAnalysisDate(new Date(1234567L));
  BatchComponentCache resourceCache=new BatchComponentCache();
  sampleFile=org.sonar.api.resources.File.create("src/Foo.php");
  sampleFile.setEffectiveKey("foo:src/Foo.php");
  resourceCache.add(p,null).setInputComponent(new DefaultInputModule("foo"));
  File baseDir=temp.newFolder();
  sourceFile=new File(baseDir,"src/Foo.php");
  resourceCache.add(sampleFile,null).setInputComponent(new DefaultInputFile("foo","src/Foo.php").setLines(5).setModuleBaseDir(baseDir.toPath()).setCharset(StandardCharsets.ISO_8859_1));
  publisher=new SourcePublisher(resourceCache);
  File outputDir=temp.newFolder();
  writer=new BatchReportWriter(outputDir);
}
