{
  checkUserRights();
  ActivityQuery query=activityService.newActivityQuery();
  query.setTypes(Arrays.asList(Activity.Type.ANALYSIS_REPORT));
  SearchOptions searchOptions=SearchOptions.create(request);
  QueryContext queryContext=mapping.newQueryOptions(searchOptions);
  Result<Activity> results=activityService.search(query,queryContext);
  JsonWriter json=response.newJsonWriter().beginObject();
  searchOptions.writeStatistics(json,results);
  writeReports(results,json);
  json.endObject().close();
}
