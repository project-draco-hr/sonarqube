{
  String key="MANUAL_RULE";
  RuleDto rule=RuleTesting.newManualRule(key).setStatus(RuleStatus.REMOVED).setName("Old name").setDescription("Old description").setSeverity(Severity.INFO);
  dao.insert(dbSession,rule);
  dbSession.commit();
  dbSession.clearCache();
  NewRule newRule=NewRule.createForManualRule(key).setName("New name").setMarkdownDescription("New description");
  RuleKey ruleKey=creator.create(newRule);
  dbSession.clearCache();
  RuleDto result=db.ruleDao().selectOrFailByKey(dbSession,ruleKey);
  assertThat(result.getKey()).isEqualTo(RuleKey.of("manual",key));
  assertThat(result.getStatus()).isEqualTo(RuleStatus.READY);
  assertThat(result.getName()).isEqualTo("Old name");
  assertThat(result.getDescription()).isEqualTo("Old description");
  assertThat(result.getSeverityString()).isEqualTo(Severity.INFO);
}
