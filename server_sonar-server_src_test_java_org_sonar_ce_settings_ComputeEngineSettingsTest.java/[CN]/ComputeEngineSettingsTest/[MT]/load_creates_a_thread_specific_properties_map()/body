{
  Map<String,String> defaultProperties=underTest.getProperties();
  assertThat(defaultProperties).isEmpty();
  rootProperties.setProperty(THREAD_PROPERTY,MAIN);
  underTest.load();
  assertThat(underTest.getProperties()).contains(entry(THREAD_PROPERTY,MAIN));
  PropertiesCaptorThread loadPropertiesCaptor=new PropertiesCaptorThread(true);
  loadPropertiesCaptor.blockingExecute();
  assertThat(loadPropertiesCaptor.properties).contains(entry(THREAD_PROPERTY,CAPTOR));
  PropertiesCaptorThread noLoadPropertiesCaptor=new PropertiesCaptorThread(false);
  noLoadPropertiesCaptor.blockingExecute();
  assertThat(noLoadPropertiesCaptor.properties).isEmpty();
  underTest.unload();
  assertThat(underTest.getProperties()).isEmpty();
}
