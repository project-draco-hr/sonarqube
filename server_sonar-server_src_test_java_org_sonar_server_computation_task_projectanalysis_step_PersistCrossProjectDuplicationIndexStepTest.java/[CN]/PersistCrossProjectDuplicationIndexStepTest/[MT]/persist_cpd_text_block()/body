{
  when(crossProjectDuplicationStatusHolder.isEnabled()).thenReturn(true);
  reportReader.putDuplicationBlocks(FILE_REF,singletonList(CPD_TEXT_BLOCK));
  underTest.execute();
  Map<String,Object> dto=dbTester.selectFirst("select HASH, START_LINE, END_LINE, INDEX_IN_FILE, COMPONENT_UUID, ANALYSIS_UUID from duplications_index");
  assertThat(dto.get("HASH")).isEqualTo(CPD_TEXT_BLOCK.getHash());
  assertThat(dto.get("START_LINE")).isEqualTo(30L);
  assertThat(dto.get("END_LINE")).isEqualTo(45L);
  assertThat(dto.get("INDEX_IN_FILE")).isEqualTo(0L);
  assertThat(dto.get("COMPONENT_UUID")).isEqualTo(FILE.getUuid());
  assertThat(dto.get("ANALYSIS_UUID")).isEqualTo(ANALYSIS_UUID);
}
