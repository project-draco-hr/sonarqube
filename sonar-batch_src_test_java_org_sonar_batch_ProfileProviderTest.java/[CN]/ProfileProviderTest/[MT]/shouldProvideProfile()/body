{
  ProfileProvider provider=new ProfileProvider();
  ProfileLoader loader=mock(ProfileLoader.class);
  Project project=new Project("project");
  RulesProfile profile=RulesProfile.create();
  Languages languages=mock(Languages.class);
  when(loader.load(eq(project),any(Settings.class),eq(languages))).thenReturn(profile);
  assertThat(provider.provide(project,loader,new Settings(),languages),is(profile));
  assertThat(provider.provide(project,loader,new Settings(),languages),is(profile));
  verify(loader).load(eq(project),any(Settings.class),eq(languages));
  verifyNoMoreInteractions(loader);
}
