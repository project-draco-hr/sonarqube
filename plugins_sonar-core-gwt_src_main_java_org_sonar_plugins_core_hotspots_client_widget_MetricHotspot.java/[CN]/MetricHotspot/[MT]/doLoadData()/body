{
  final ResourceQuery query=getResourceQuery();
  Sonar.getInstance().findAll(query,new AbstractListCallback<Resource>(){
    @Override protected void doOnResponse(    List<Resource> resources){
      List<HotspotMeasure> measures=new ArrayList<HotspotMeasure>();
      for (      Resource resource : resources) {
        for (        Measure measure : resource.getMeasures()) {
          measures.add(new HotspotMeasure(resource,measure));
        }
      }
      if (measures.isEmpty()) {
        renderEmptyResults();
      }
 else {
        final Grid grid=new Grid(measures.size(),3);
        grid.setStyleName("gwt-Hotspot");
        int row=0;
        HotspotMeasure firstMeasure=measures.get(0);
        for (        HotspotMeasure measure : measures) {
          renderNameCell(grid,measure.getResource(),metric,row,0);
          renderValueCell(grid,measure.getMeasure(),row,1);
          renderGraphCell(grid,measure.getMeasure(),firstMeasure.getMeasure(),row,2);
          row++;
        }
        render(grid);
      }
    }
  }
);
}
