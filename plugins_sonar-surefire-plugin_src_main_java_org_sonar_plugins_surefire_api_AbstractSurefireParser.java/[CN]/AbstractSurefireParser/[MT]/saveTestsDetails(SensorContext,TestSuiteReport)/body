{
  StringBuilder testCaseDetails=new StringBuilder(256);
  testCaseDetails.append("<tests-details>");
  List<TestCaseDetails> details=fileReport.getDetails();
  for (  TestCaseDetails detail : details) {
    testCaseDetails.append("<testcase status=\"").append(detail.getStatus()).append("\" time=\"").append(detail.getTimeMS()).append("\" name=\"").append(detail.getName()).append("\"");
    boolean isError=detail.getStatus().equals(TestCaseDetails.STATUS_ERROR);
    if (isError || detail.getStatus().equals(TestCaseDetails.STATUS_FAILURE)) {
      testCaseDetails.append(">").append(isError ? "<error message=\"" : "<failure message=\"").append(StringEscapeUtils.escapeXml(detail.getErrorMessage())).append("\">").append("<![CDATA[").append(StringEscapeUtils.escapeXml(detail.getStackTrace())).append("]]>").append(isError ? "</error>" : "</failure>").append("</testcase>");
    }
 else {
      testCaseDetails.append("/>");
    }
  }
  testCaseDetails.append("</tests-details>");
  context.saveMeasure(getUnitTestResource(fileReport.getClassKey()),new Measure(CoreMetrics.TEST_DATA,testCaseDetails.toString()));
}
