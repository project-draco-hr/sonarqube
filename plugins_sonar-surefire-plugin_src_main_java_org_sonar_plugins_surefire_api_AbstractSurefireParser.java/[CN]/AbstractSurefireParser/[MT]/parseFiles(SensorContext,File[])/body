{
  Set<TestSuiteReport> analyzedReports=new HashSet<TestSuiteReport>();
  try {
    for (    File report : reports) {
      TestSuiteParser parserHandler=new TestSuiteParser();
      StaxParser parser=new StaxParser(parserHandler,false);
      parser.parse(report);
      for (      TestSuiteReport fileReport : parserHandler.getParsedReports()) {
        if (!fileReport.isValid() || analyzedReports.contains(fileReport)) {
          continue;
        }
        if (fileReport.getTests() > 0) {
          double testsCount=fileReport.getTests() - fileReport.getSkipped();
          saveClassMeasure(context,fileReport,CoreMetrics.SKIPPED_TESTS,fileReport.getSkipped());
          saveClassMeasure(context,fileReport,CoreMetrics.TESTS,testsCount);
          saveClassMeasure(context,fileReport,CoreMetrics.TEST_ERRORS,fileReport.getErrors());
          saveClassMeasure(context,fileReport,CoreMetrics.TEST_FAILURES,fileReport.getFailures());
          saveClassMeasure(context,fileReport,CoreMetrics.TEST_EXECUTION_TIME,fileReport.getTimeMS());
          double passedTests=testsCount - fileReport.getErrors() - fileReport.getFailures();
          if (testsCount > 0) {
            double percentage=passedTests * 100d / testsCount;
            saveClassMeasure(context,fileReport,CoreMetrics.TEST_SUCCESS_DENSITY,ParsingUtils.scaleValue(percentage));
          }
          saveTestsDetails(context,fileReport);
          analyzedReports.add(fileReport);
        }
      }
    }
  }
 catch (  Exception e) {
    throw new XmlParserException("Can not parse surefire reports",e);
  }
}
