{
  long defaultId=QUALITY_GATE_ID;
  String defaultName="Default Name";
  when(dao.selectById(defaultId)).thenReturn(new QualityGateDto().setId(defaultId).setName(defaultName));
  underTest.setDefault(defaultId);
  verify(dao).selectById(defaultId);
  ArgumentCaptor<PropertyDto> propertyCaptor=ArgumentCaptor.forClass(PropertyDto.class);
  verify(propertiesDao).insertProperty(propertyCaptor.capture());
  assertThat(propertyCaptor.getValue().getKey()).isEqualTo("sonar.qualitygate");
  assertThat(propertyCaptor.getValue().getValue()).isEqualTo("42");
  assertThat(settings.getLong("sonar.qualitygate")).isEqualTo(42);
}
