{
  Ordering<SyntaxHighlightingRule> ruleOrdering=new Ordering<SyntaxHighlightingRule>(){
    @Override public int compare(    @Nullable SyntaxHighlightingRule left,    @Nullable SyntaxHighlightingRule right){
      int result;
      if (left != null && right != null) {
        result=left.getStartPosition() - right.getStartPosition();
        if (result == 0) {
          result=left.getEndPosition() - right.getEndPosition();
        }
        return result;
      }
      return left != null ? 1 : -1;
    }
  }
;
  return ruleOrdering.immutableSortedCopy(syntaxHighlightingRuleSet);
}
