{
  FindBugsFilter filter=FindBugsFilter.fromXml(xml);
  Set<ActiveRule> result=new HashSet<ActiveRule>();
  for (  Map.Entry<String,RulePriority> categoryLevel : filter.getCategoryLevels(getRulePriorityMapper()).entrySet()) {
    completeActiveRulesByCategory(result,rules,categoryLevel.getKey(),categoryLevel.getValue());
  }
  for (  Map.Entry<String,RulePriority> codeLevel : filter.getCodeLevels(getRulePriorityMapper()).entrySet()) {
    completeActiveRulesByCode(result,rules,codeLevel.getKey(),codeLevel.getValue());
  }
  for (  Map.Entry<String,RulePriority> patternLevel : filter.getPatternLevels(getRulePriorityMapper()).entrySet()) {
    completeActiveRulesByPattern(result,rules,patternLevel.getKey(),patternLevel.getValue());
  }
  return new ArrayList<ActiveRule>(result);
}
