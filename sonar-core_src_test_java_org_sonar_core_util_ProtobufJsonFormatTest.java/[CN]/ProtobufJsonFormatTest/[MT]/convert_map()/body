{
  MapMsg.Builder builder=MapMsg.newBuilder();
  builder.getMutableStringMap().put("one","un");
  builder.getMutableStringMap().put("two","deux");
  builder.getMutableNestedMap().put("three",org.sonar.core.test.Test.NestedMsg.newBuilder().setLabel("trois").build());
  builder.getMutableNestedMap().put("four",org.sonar.core.test.Test.NestedMsg.newBuilder().setLabel("quatre").build());
  builder.setNullableStringMapPresentIfEmpty(false);
  assertThat(toJson(builder.build())).isEqualTo("{\"stringMap\":{\"one\":\"un\",\"two\":\"deux\"},\"nestedMap\":{\"three\":{\"label\":\"trois\"},\"four\":{\"label\":\"quatre\"}}}");
}
