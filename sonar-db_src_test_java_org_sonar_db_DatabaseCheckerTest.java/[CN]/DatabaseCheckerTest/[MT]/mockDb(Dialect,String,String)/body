{
  Database db=mock(Database.class,Mockito.RETURNS_DEEP_STUBS);
  when(db.getDialect()).thenReturn(dialect);
  when(db.getDataSource().getConnection().getMetaData().getDatabaseMajorVersion()).thenReturn(Integer.parseInt(StringUtils.substringBefore(dbVersion,".")));
  when(db.getDataSource().getConnection().getMetaData().getDatabaseProductVersion()).thenReturn(dbVersion);
  when(db.getDataSource().getConnection().getMetaData().getDriverVersion()).thenReturn(driverVersion);
  return db;
}
