{
  String[] candidates=dir.list(filter);
  if (candidates == null) {
    return;
  }
  for (int i=0; i < candidates.length; i++) {
    File tmp=new File(dir + FILE_SEP + candidates[i]);
    if (tmp.isDirectory()) {
      if (recurse) {
        scanDirectory(tmp,list,true);
      }
    }
 else {
      list.add(new File(dir + FILE_SEP + candidates[i]));
    }
  }
}
