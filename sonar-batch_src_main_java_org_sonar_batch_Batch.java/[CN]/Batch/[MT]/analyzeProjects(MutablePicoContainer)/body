{
  MutablePicoContainer batchContainer=container.makeChildContainer();
  batchContainer.as(Characteristics.CACHE).addComponent(ServerMetadata.class);
  batchContainer.as(Characteristics.CACHE).addComponent(ProjectTree.class);
  batchContainer.as(Characteristics.CACHE).addComponent(DefaultSonarIndex.class);
  batchContainer.as(Characteristics.CACHE).addComponent(JpaPluginDao.class);
  batchContainer.as(Characteristics.CACHE).addComponent(BatchPluginRepository.class);
  batchContainer.as(Characteristics.CACHE).addComponent(Plugins.class);
  batchContainer.as(Characteristics.CACHE).addComponent(ServerHttpClient.class);
  batchContainer.as(Characteristics.CACHE).addComponent(HttpDownloader.class);
  batchContainer.start();
  ProjectTree projectTree=batchContainer.getComponent(ProjectTree.class);
  DefaultSonarIndex index=batchContainer.getComponent(DefaultSonarIndex.class);
  analyzeProject(batchContainer,index,projectTree.getRootProject());
}
