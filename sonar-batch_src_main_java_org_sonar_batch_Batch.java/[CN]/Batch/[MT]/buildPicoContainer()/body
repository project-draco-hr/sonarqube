{
  MutablePicoContainer container=IocContainer.buildPicoContainer();
  register(container,configuration);
  register(container,ServerMetadata.class);
  register(container,TempDirectories.class);
  register(container,HttpDownloader.class);
  register(container,ExtensionDownloader.class);
  register(container,BootstrapClassLoader.class);
  URLClassLoader bootstrapClassLoader=container.getComponent(BootstrapClassLoader.class).getClassLoader();
  Thread.currentThread().setContextClassLoader(bootstrapClassLoader);
  register(container,new DriverDatabaseConnector(configuration,bootstrapClassLoader));
  register(container,ThreadLocalDatabaseSessionFactory.class);
  container.as(Characteristics.CACHE).addAdapter(new DatabaseSessionProvider());
  for (  Object component : components) {
    register(container,component);
  }
  return container;
}
