{
  try {
    BulkRequestBuilder bulkRequestBuilder=searchClient.prepareBulk();
    bulkRequestBuilder.add(new UpdateRequest("unknown",IndexDefinition.RULE.getIndexName(),"rule1").doc(Collections.emptyMap()));
    bulkRequestBuilder.add(new DeleteRequest("unknown",IndexDefinition.RULE.getIndexName(),"rule1"));
    bulkRequestBuilder.add(new IndexRequest("unknown",IndexDefinition.RULE.getIndexName(),"rule1").source(Collections.emptyMap()));
    bulkRequestBuilder.get();
    fail();
  }
 catch (  Exception e) {
    assertThat(e).isInstanceOf(IllegalStateException.class);
    assertThat(e.getMessage()).contains("Fail to execute ES bulk request for [Action 'UpdateRequest' for key 'rule1' on index 'unknown' on type 'rules'],").contains("[Action 'DeleteRequest' for key 'rule1' on index 'unknown' on type 'rules'],").contains("[Action 'IndexRequest' for key 'rule1' on index 'unknown' on type 'rules'],");
  }
}
