{
  restoreProfile("one-issue-per-line.xml");
  orchestrator.getServer().provisionProject("sample","xoo-sample");
  orchestrator.getServer().associateProjectToQualityProfile("sample","xoo","one-issue-per-line");
  SonarRunner runner=configureRunner("shared/xoo-sample");
  orchestrator.executeBuild(runner);
  runner=configureRunnerIssues("shared/xoo-sample");
  BuildResult result=orchestrator.executeBuild(runner);
  assertThat(ItUtils.countIssuesInJsonReport(result,false)).isEqualTo(17);
  JSONObject obj=ItUtils.getJSONReport(result);
  String key=((JSONObject)((JSONArray)obj.get("issues")).get(0)).get("key").toString();
  orchestrator.getServer().adminWsClient().issueClient().doTransition(key,"falsepositive");
  runner=configureRunnerIssues("shared/xoo-sample");
  result=orchestrator.executeBuild(runner);
  assertThat(ItUtils.countIssuesInJsonReport(result,false)).isEqualTo(16);
}
