{
  Violation v1=mock(Violation.class);
  when(v1.getMessage()).thenReturn("message 1");
  when(v1.getLineId()).thenReturn(1);
  Violation v2=mock(Violation.class);
  when(v2.getMessage()).thenReturn("message 2");
  when(v2.getLineId()).thenReturn(2);
  Violation v3=mock(Violation.class);
  when(v3.getMessage()).thenReturn("message 3");
  when(v3.getLineId()).thenReturn(3);
  Violation v4=mock(Violation.class);
  when(v4.getMessage()).thenReturn("message 4");
  when(v4.getLineId()).thenReturn(4);
  DecoratorContext context=mock(DecoratorContext.class);
  when(context.getViolations()).thenReturn(Lists.newArrayList(v1,v2,v3,v4));
  RuleFailureModel rf1=mock(RuleFailureModel.class);
  when(rf1.getPermanentId()).thenReturn(1);
  when(violationTrackingDecorator.getReferenceViolation(v1)).thenReturn(rf1);
  RuleFailureModel rf2=mock(RuleFailureModel.class);
  when(rf2.getPermanentId()).thenReturn(2);
  when(violationTrackingDecorator.getReferenceViolation(v2)).thenReturn(rf2);
  RuleFailureModel rf3=mock(RuleFailureModel.class);
  when(rf3.getPermanentId()).thenReturn(3);
  when(violationTrackingDecorator.getReferenceViolation(v3)).thenReturn(rf3);
  RuleFailureModel rf4=mock(RuleFailureModel.class);
  when(rf4.getPermanentId()).thenReturn(4);
  when(violationTrackingDecorator.getReferenceViolation(v4)).thenReturn(rf4);
  setupData("fixture");
  reviewsDecorator.decorate(resource,context);
  checkTables("shouldUpdateReviews",new String[]{"updated_at"},new String[]{"reviews"});
}
