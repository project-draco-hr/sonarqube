{
  SearchRequestBuilder request=getClient().prepareSearch(getIndexName()).setQuery(QueryBuilders.filteredQuery(QueryBuilders.termsQuery(ActiveRuleNormalizer.ActiveRuleField.PROFILE_KEY.field(),key),FilterBuilders.boolFilter().mustNot(FilterBuilders.hasParentFilter(this.getParentType(),FilterBuilders.termFilter(RuleNormalizer.RuleField.STATUS.field(),RuleStatus.REMOVED.name()))))).setRouting(key).setSize(Integer.MAX_VALUE);
  SearchResponse response=request.get();
  List<ActiveRule> activeRules=new ArrayList<ActiveRule>();
  for (  SearchHit hit : response.getHits()) {
    activeRules.add(toDoc(hit.getSource()));
  }
  return activeRules;
}
