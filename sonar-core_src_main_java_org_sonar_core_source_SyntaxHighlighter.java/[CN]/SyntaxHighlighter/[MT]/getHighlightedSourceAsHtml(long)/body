{
  String snapshotSource=snapshotSourceDao.selectSnapshotSource(snapshotId);
  String highlightingRules=snapshotDataDao.selectSnapshotData(snapshotId);
  if (snapshotSource != null && highlightingRules != null) {
    HighlightingContext highlightingContext=HighlightingContext.buildFrom(highlightingRules);
    HtmlTextWrapper textWrapper=new HtmlTextWrapper();
    return textWrapper.wrapTextWithHtml(snapshotSource,highlightingContext);
  }
  return null;
}
