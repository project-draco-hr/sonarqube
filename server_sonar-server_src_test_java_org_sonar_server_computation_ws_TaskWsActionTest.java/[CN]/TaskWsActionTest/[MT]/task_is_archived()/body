{
  userSession.setGlobalPermissions(UserRole.ADMIN);
  ComponentDto project=ComponentTesting.newProjectDto().setUuid("PROJECT_1").setName("Project One").setKey("P1");
  dbTester.getDbClient().componentDao().insert(dbTester.getSession(),project);
  CeQueueDto queueDto=new CeQueueDto();
  queueDto.setTaskType(CeTaskTypes.REPORT);
  queueDto.setUuid("TASK_1");
  queueDto.setComponentUuid(project.uuid());
  CeActivityDto activityDto=new CeActivityDto(queueDto);
  activityDto.setStatus(CeActivityDto.Status.FAILED);
  activityDto.setExecutionTimeMs(500L);
  dbTester.getDbClient().ceActivityDao().insert(dbTester.getSession(),activityDto);
  dbTester.commit();
  TestResponse wsResponse=tester.newRequest().setMediaType(MimeTypes.PROTOBUF).setParam("id","TASK_1").execute();
  WsCe.TaskResponse taskResponse=Protobuf.read(wsResponse.getInputStream(),WsCe.TaskResponse.PARSER);
  assertThat(taskResponse.getTask().getId()).isEqualTo("TASK_1");
  assertThat(taskResponse.getTask().getStatus()).isEqualTo(WsCe.TaskStatus.FAILED);
  assertThat(taskResponse.getTask().getComponentId()).isEqualTo(project.uuid());
  assertThat(taskResponse.getTask().getComponentKey()).isEqualTo(project.key());
  assertThat(taskResponse.getTask().getComponentName()).isEqualTo(project.name());
  assertThat(taskResponse.getTask().getExecutionTimeMs()).isEqualTo(500L);
  assertThat(taskResponse.getTask().getLogs()).isFalse();
}
