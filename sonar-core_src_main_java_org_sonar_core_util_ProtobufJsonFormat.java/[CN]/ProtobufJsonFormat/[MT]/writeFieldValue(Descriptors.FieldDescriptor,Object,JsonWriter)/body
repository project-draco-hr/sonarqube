{
switch (field.getJavaType()) {
case INT:
    writer.value((Integer)value);
  break;
case LONG:
writer.value((Long)value);
break;
case DOUBLE:
writer.value((Double)value);
break;
case BOOLEAN:
writer.value((Boolean)value);
break;
case STRING:
writer.value((String)value);
break;
case BYTE_STRING:
throw new IllegalStateException(String.format("JSON format does not support the binary field '%s'",field.getName()));
case ENUM:
writer.value(((Descriptors.EnumValueDescriptor)value).getName());
break;
case MESSAGE:
writer.beginObject();
writeMessage((Message)value,writer);
writer.endObject();
break;
default :
}
}
