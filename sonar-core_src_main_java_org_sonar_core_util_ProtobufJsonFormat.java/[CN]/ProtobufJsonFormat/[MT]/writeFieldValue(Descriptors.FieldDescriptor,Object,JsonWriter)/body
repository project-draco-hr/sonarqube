{
switch (fieldDescriptor.getJavaType()) {
case INT:
    writer.value((Integer)value);
  break;
case LONG:
writer.value((Long)value);
break;
case DOUBLE:
writer.value((Double)value);
break;
case BOOLEAN:
writer.value((Boolean)value);
break;
case STRING:
writer.value((String)value);
break;
case ENUM:
writer.value(((Descriptors.EnumValueDescriptor)value).getName());
break;
case MESSAGE:
writer.beginObject();
writeMessage((Message)value,writer);
writer.endObject();
break;
default :
throw new IllegalStateException(String.format("JSON format does not support type '%s' of field '%s'",fieldDescriptor.getJavaType(),fieldDescriptor.getName()));
}
}
