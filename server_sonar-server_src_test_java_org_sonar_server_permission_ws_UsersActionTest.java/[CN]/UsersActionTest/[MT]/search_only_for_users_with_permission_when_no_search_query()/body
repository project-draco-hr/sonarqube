{
  userSession.login().setGlobalPermissions(SYSTEM_ADMIN);
  ComponentDto project=componentDbTester.insertComponent(newProjectDto());
  UserDto user=userDb.insertUser(newUserDto());
  insertUserRole(new UserPermissionDto().setPermission(ISSUE_ADMIN).setUserId(user.getId()).setComponentId(project.getId()));
  UserDto withoutPermission=userDb.insertUser(newUserDto());
  dbSession.commit();
  String result=ws.newRequest().setParam(PARAM_PROJECT_ID,project.uuid()).execute().getInput();
  assertThat(result).contains(user.getLogin()).doesNotContain(withoutPermission.getLogin());
}
