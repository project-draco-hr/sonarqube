{
  userSession.login().addProjectUuidPermissions(SYSTEM_ADMIN,"project-uuid");
  ComponentDto project=componentDbTester.insertComponent(newProjectDto("project-uuid").setKey("project-key"));
  UserDto user=userDb.insertUser(newUserDto());
  insertUserRole(new UserPermissionDto().setPermission(ISSUE_ADMIN).setUserId(user.getId()).setComponentId(project.getId()));
  ComponentDto anotherProject=componentDbTester.insertComponent(newProjectDto());
  UserDto userHavePermissionOnAnotherProject=userDb.insertUser(newUserDto());
  insertUserRole(new UserPermissionDto().setPermission(ISSUE_ADMIN).setUserId(userHavePermissionOnAnotherProject.getId()).setComponentId(anotherProject.getId()));
  UserDto withoutPermission=userDb.insertUser(newUserDto());
  dbSession.commit();
  String result=ws.newRequest().setParam(PARAM_PERMISSION,ISSUE_ADMIN).setParam(PARAM_PROJECT_ID,"project-uuid").execute().getInput();
  assertThat(result).contains(user.getLogin()).doesNotContain(userHavePermissionOnAnotherProject.getLogin()).doesNotContain(withoutPermission.getLogin());
}
