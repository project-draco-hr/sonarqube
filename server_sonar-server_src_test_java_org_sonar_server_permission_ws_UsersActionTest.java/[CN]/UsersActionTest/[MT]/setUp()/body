{
  PermissionFinder permissionFinder=new PermissionFinder(dbClient);
  PermissionDependenciesFinder dependenciesFinder=new PermissionDependenciesFinder(dbClient,new ComponentFinder(dbClient),resourceTypes);
  underTest=new UsersAction(dbClient,userSession,permissionFinder,dependenciesFinder);
  ws=new WsActionTester(underTest);
  userSession.login("login").setGlobalPermissions(SYSTEM_ADMIN);
  UserDto user1=insertUser(new UserDto().setLogin("login-1").setName("name-1").setEmail("email-1"));
  UserDto user2=insertUser(new UserDto().setLogin("login-2").setName("name-2").setEmail("email-2"));
  UserDto user3=insertUser(new UserDto().setLogin("login-3").setName("name-3").setEmail("email-3"));
  insertUserRole(new UserRoleDto().setRole(SCAN_EXECUTION).setUserId(user1.getId()));
  insertUserRole(new UserRoleDto().setRole(SCAN_EXECUTION).setUserId(user2.getId()));
  insertUserRole(new UserRoleDto().setRole(SYSTEM_ADMIN).setUserId(user3.getId()));
  commit();
}
