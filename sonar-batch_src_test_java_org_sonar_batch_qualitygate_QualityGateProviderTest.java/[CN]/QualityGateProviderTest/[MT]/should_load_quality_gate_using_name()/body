{
  String qGateName="Sonar way";
  when(settings.getString("sonar.qualitygate")).thenReturn(qGateName);
  QualityGateDetails qGate=mock(QualityGateDetails.class);
  when(qualityGateClient.show(qGateName)).thenReturn(qGate);
  when(qGate.name()).thenReturn(qGateName);
  QualityGate actualGate=new QualityGateProvider().init(settings,client,metricFinder,logger);
  assertThat(actualGate.name()).isEqualTo(qGateName);
  assertThat(actualGate.isEnabled()).isTrue();
  verify(logger).info("Loaded quality gate '{}'",qGateName);
}
