{
  logTester.setLevel(LoggerLevel.INFO);
  when(steps.instances()).thenReturn(Arrays.asList(projectStep1,projectStep2));
  underTest.process();
  assertThat(dto.getStatus()).isEqualTo(Status.SUCCESS);
  assertThat(dto.getFinishedAt()).isNotNull();
  assertThat(logTester.logs(LoggerLevel.INFO)).hasSize(3);
  assertThat(logTester.logs(LoggerLevel.INFO).get(2)).startsWith("Analysis of project P1 (report 1) total time spent in steps=");
  verify(projectStep1).execute();
  verify(projectStep2).execute();
  verify(activityManager).saveActivity(dto);
  verify(queueStatus).addInProgress();
  verify(queueStatus).addSuccess(anyLong());
  verifyNoMoreInteractions(queueStatus);
}
