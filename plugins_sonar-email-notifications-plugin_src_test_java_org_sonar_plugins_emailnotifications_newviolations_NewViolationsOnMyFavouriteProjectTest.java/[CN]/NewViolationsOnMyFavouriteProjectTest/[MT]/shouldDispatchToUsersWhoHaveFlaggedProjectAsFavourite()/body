{
  NotificationDispatcher.Context context=mock(NotificationDispatcher.Context.class);
  PropertiesDao propertiesDao=mock(PropertiesDao.class);
  when(propertiesDao.findUserIdsForFavouriteResource(34L)).thenReturn(Lists.newArrayList("user1","user2"));
  NewViolationsOnMyFavouriteProject dispatcher=new NewViolationsOnMyFavouriteProject(propertiesDao);
  Notification notification=new Notification("new-violations").setFieldValue("projectId","34");
  dispatcher.performDispatch(notification,context);
  verify(context).addUser("user1");
  verify(context).addUser("user2");
  verifyNoMoreInteractions(context);
}
