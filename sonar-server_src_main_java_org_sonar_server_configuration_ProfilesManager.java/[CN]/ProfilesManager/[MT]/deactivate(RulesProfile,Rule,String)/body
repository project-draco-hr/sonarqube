{
  ActiveRule activeRule=profile.getActiveRule(rule);
  if (activeRule != null) {
    if (activeRule.isInherited()) {
      ruleDisabled(profile,activeRule,userLogin);
      removeActiveRule(profile,activeRule);
    }
 else {
      activeRule.setInheritance(null);
      getSession().saveWithoutFlush(activeRule);
      return;
    }
    for (    RulesProfile child : getChildren(profile)) {
      deactivate(child,rule,userLogin);
    }
  }
}
