{
  ActiveRule activeRule=profile.getActiveRule(rule);
  if (activeRule != null) {
    if (activeRule.isInherited() && !activeRule.isOverridden()) {
      removeActiveRule(profile,activeRule);
    }
 else {
      activeRule.setInherited(false);
      activeRule.setOverridden(false);
      getSession().saveWithoutFlush(activeRule);
      return;
    }
    for (    RulesProfile child : getChildren(profile)) {
      deactivate(child,rule);
    }
  }
}
