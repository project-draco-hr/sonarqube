{
  ActiveRule activeRule=profile.getActiveRule(rule);
  if (activeRule != null) {
    if (activeRule.getInheritanceStatus() == ActiveRuleInheritanceStatus.INHERITED) {
      removeActiveRule(profile,activeRule);
    }
 else {
      activeRule.setInheritanceStatus(ActiveRuleInheritanceStatus.NO);
      getSession().saveWithoutFlush(activeRule);
      return;
    }
    for (    RulesProfile child : getChildren(profile)) {
      deactivate(child,rule);
    }
  }
}
