{
  ActiveRule activeRule=profile.getActiveRule(parentActiveRule.getRule());
  if (activeRule != null) {
    if (activeRule.isInherited()) {
      removeActiveRule(profile,activeRule);
    }
 else {
      activeRule.setInheritance(ActiveRule.OVERRIDES);
      getSession().saveWithoutFlush(activeRule);
      return;
    }
  }
  activeRule=(ActiveRule)parentActiveRule.clone();
  activeRule.setRulesProfile(profile);
  activeRule.setInheritance(ActiveRule.INHERITED);
  profile.getActiveRules().add(activeRule);
  getSession().saveWithoutFlush(activeRule);
  for (  RulesProfile child : getChildren(profile)) {
    activateOrChange(child,activeRule);
  }
}
