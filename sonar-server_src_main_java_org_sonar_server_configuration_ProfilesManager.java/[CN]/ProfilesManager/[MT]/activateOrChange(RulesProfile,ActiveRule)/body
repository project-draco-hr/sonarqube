{
  ActiveRule activeRule=profile.getActiveRule(parentActiveRule.getRule());
  if (activeRule != null) {
    if (activeRule.getInheritanceStatus() == ActiveRuleInheritanceStatus.INHERITED) {
      removeActiveRule(profile,activeRule);
    }
 else {
      activeRule.setInheritanceStatus(ActiveRuleInheritanceStatus.OVERRIDDEN);
      getSession().saveWithoutFlush(activeRule);
      return;
    }
  }
  activeRule=(ActiveRule)parentActiveRule.clone();
  activeRule.setRulesProfile(profile);
  activeRule.setInheritanceStatus(ActiveRuleInheritanceStatus.INHERITED);
  profile.getActiveRules().add(activeRule);
  getSession().saveWithoutFlush(activeRule);
  for (  RulesProfile child : getChildren(profile)) {
    activateOrChange(child,activeRule);
  }
}
