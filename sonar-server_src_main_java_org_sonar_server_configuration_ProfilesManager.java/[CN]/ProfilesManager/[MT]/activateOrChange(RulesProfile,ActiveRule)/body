{
  ActiveRule activeRule=profile.getActiveRule(parentActiveRule.getRule());
  if (activeRule != null) {
    if (activeRule.isInherited() && !activeRule.isOverridden()) {
      removeActiveRule(profile,activeRule);
    }
 else {
      activeRule.setInherited(true);
      activeRule.setOverridden(true);
      getSession().saveWithoutFlush(activeRule);
      return;
    }
  }
  activeRule=(ActiveRule)parentActiveRule.clone();
  activeRule.setRulesProfile(profile);
  activeRule.setInherited(true);
  activeRule.setOverridden(false);
  profile.getActiveRules().add(activeRule);
  getSession().saveWithoutFlush(activeRule);
  for (  RulesProfile child : getChildren(profile)) {
    activateOrChange(child,activeRule);
  }
}
