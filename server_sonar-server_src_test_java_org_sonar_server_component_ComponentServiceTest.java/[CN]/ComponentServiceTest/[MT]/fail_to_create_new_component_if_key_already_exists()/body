{
  expectedException.expect(BadRequestException.class);
  expectedException.expectMessage("Could not create Project, key already exists: struts");
  userSession.login("john").setGlobalPermissions(PROVISIONING);
  ComponentDto project=ComponentTesting.newProjectDto().setKey("struts");
  dbClient.componentDao().insert(dbSession,project);
  dbSession.commit();
  underTest.create(NewComponent.create("struts","Struts project"));
}
