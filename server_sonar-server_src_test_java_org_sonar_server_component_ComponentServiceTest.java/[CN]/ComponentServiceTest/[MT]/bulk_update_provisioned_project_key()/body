{
  ComponentDto provisionedProject=ComponentTesting.newProjectDto().setKey("provisionedProject");
  dbClient.componentDao().insert(dbSession,provisionedProject);
  dbSession.commit();
  userSession.login("john").addProjectUuidPermissions(UserRole.ADMIN,provisionedProject.uuid());
  underTest.bulkUpdateKey(provisionedProject.key(),"provisionedProject","provisionedProject2");
  dbSession.commit();
  assertThat(underTest.getNullableByKey(provisionedProject.key())).isNull();
  assertThat(underTest.getNullableByKey("provisionedProject2")).isNotNull();
}
