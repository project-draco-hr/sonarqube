{
  TokenEntry.clearImages();
  AbstractLanguage cpdLanguage=new AbstractLanguage(new JavaTokenizer()){
  }
;
  CPD cpd=new CPD(20,cpdLanguage);
  cpd.setEncoding(Charset.defaultCharset().name());
  cpd.setLoadSourceCodeSlices(false);
  cpd.add(new File("test-resources/org/sonar/duplications/cpd/CPDTest/CPDFile3.java"));
  cpd.go();
  List<Match> matches=getMatches(cpd);
  assertThat(matches.size(),is(1));
  org.sonar.duplications.cpd.Match match=matches.get(0);
  assertThat(match.getLineCount(),is(16));
  assertThat(match.getFirstMark().getBeginLine(),is(29));
  assertThat(match.getSourceCodeSlice(),is(nullValue()));
}
