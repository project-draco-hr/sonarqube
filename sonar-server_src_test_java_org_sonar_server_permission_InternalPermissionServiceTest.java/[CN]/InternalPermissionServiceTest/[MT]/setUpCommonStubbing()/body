{
  userDao=mock(UserDao.class);
  when(userDao.selectActiveUserByLogin("user")).thenReturn(new UserDto().setId(2L).setLogin("user").setActive(true));
  when(userDao.selectGroupByName("group")).thenReturn(new GroupDto().setId(2L).setName("group"));
  resourceDao=mock(ResourceDao.class);
  permissionFacade=mock(PermissionFacade.class);
  MockUserSession.set().setLogin("admin").setGlobalPermissions(GlobalPermissions.SYSTEM_ADMIN);
  service=new InternalPermissionService(userDao,resourceDao,permissionFacade);
}
