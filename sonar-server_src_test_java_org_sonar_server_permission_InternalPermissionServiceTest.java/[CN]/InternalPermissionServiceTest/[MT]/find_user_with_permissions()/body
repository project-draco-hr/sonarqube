{
  service.findUsersWithPermission(ImmutableMap.<String,Object>of("permission","user","component","org.sample.Sample","selected","all"));
  ArgumentCaptor<WithPermissionQuery> argumentCaptor=ArgumentCaptor.forClass(WithPermissionQuery.class);
  verify(finder).findUsersWithPermission(argumentCaptor.capture());
  WithPermissionQuery query=argumentCaptor.getValue();
  assertThat(query.component()).isEqualTo("org.sample.Sample");
  assertThat(query.permission()).isEqualTo("user");
  assertThat(query.membership()).isEqualTo(WithPermissionQuery.ANY);
}
