{
  when(resourceDao.getResource(any(ResourceQuery.class))).thenReturn(new ResourceDto().setId(10L).setKey("org.sample.Sample"));
  params=buildPermissionChangeParams(null,DefaultGroups.ANYONE,"org.sample.Sample","codeviewer");
  setUpComponentGroupPermissions(DefaultGroups.ANYONE,10L,"codeviewer");
  MockUserSession.set().setLogin("admin").addProjectPermissions(UserRole.ADMIN,10L);
  service.removePermission(params);
  verify(permissionFacade).deleteGroupPermission(eq(10L),eq((Long)null),eq("codeviewer"));
}
