{
  throwable.expect(BadRequestException.class);
  params=buildParams(null,"sonar-administrators",Permissions.SYSTEM_ADMIN);
  GroupDto adminGroups=new GroupDto().setId(2L).setName("sonar-administrators");
  roleDao=mock(RoleDao.class);
  when(roleDao.selectGroupPermissions("sonar-administrators")).thenReturn(Lists.newArrayList(Permissions.SYSTEM_ADMIN));
  when(roleDao.countSystemAdministrators("sonar-administrators")).thenReturn(0);
  userDao=mock(UserDao.class);
  when(userDao.selectGroupByName("sonar-administrators")).thenReturn(adminGroups);
  service=new InternalPermissionService(roleDao,userDao);
  service.removePermission(params);
}
