{
  service.findGroupsWithPermission(ImmutableMap.<String,Object>of("permission","admin","component","org.sample.Sample","selected","all"));
  ArgumentCaptor<WithPermissionQuery> argumentCaptor=ArgumentCaptor.forClass(WithPermissionQuery.class);
  verify(finder).findGroupsWithPermission(argumentCaptor.capture());
  WithPermissionQuery query=argumentCaptor.getValue();
  assertThat(query.component()).isEqualTo("org.sample.Sample");
  assertThat(query.permission()).isEqualTo("admin");
  assertThat(query.membership()).isEqualTo(WithPermissionQuery.ANY);
}
