{
  service.findUsersWithPermission(ImmutableMap.<String,Object>of("permission","user","component","org.sample.Sample","selected","all"));
  ArgumentCaptor<PermissionQuery> argumentCaptor=ArgumentCaptor.forClass(PermissionQuery.class);
  verify(finder).findUsersWithPermission(argumentCaptor.capture());
  PermissionQuery query=argumentCaptor.getValue();
  assertThat(query.component()).isEqualTo("org.sample.Sample");
  assertThat(query.permission()).isEqualTo("user");
  assertThat(query.membership()).isEqualTo(PermissionQuery.ANY);
}
