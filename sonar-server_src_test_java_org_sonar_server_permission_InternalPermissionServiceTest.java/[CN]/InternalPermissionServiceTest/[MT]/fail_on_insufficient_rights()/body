{
  try {
    params=buildPermissionChangeParams("user",null,GlobalPermissions.QUALITY_PROFILE_ADMIN);
    MockUserSession.set().setLogin("unauthorized").setPermissions(GlobalPermissions.QUALITY_PROFILE_ADMIN);
    service.addPermission(params);
  }
 catch (  Exception e) {
    assertThat(e).isInstanceOf(ForbiddenException.class).hasMessage("Insufficient privileges");
  }
}
