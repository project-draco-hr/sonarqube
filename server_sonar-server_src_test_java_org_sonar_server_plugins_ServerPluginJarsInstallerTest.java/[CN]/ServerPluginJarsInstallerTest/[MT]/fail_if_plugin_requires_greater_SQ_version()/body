{
  exception.expect(IllegalStateException.class);
  exception.expectMessage("Plugin switchoffviolations needs a more recent version of SonarQube than 2.0. At least 2.5 is expected");
  when(upgradeStatus.isFreshInstall()).thenReturn(false);
  when(server.getVersion()).thenReturn("2.0");
  FileUtils.copyFileToDirectory(jar("require-sq-2.5.jar"),pluginsDir);
  jarsInstaller.install();
}
