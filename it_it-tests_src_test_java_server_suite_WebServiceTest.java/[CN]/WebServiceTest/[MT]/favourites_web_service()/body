{
  Sonar adminWsClient=orchestrator.getServer().getAdminWsClient();
  List<Favourite> favourites=adminWsClient.findAll(new FavouriteQuery());
  assertThat(favourites).isEmpty();
  Favourite favourite=adminWsClient.create(new FavouriteCreateQuery("sample"));
  assertThat(favourite).isNotNull();
  assertThat(favourite.getKey()).isEqualTo("sample");
  adminWsClient.create(new FavouriteCreateQuery("sample:src/main/xoo/sample/Sample.xoo"));
  favourites=adminWsClient.findAll(new FavouriteQuery());
  assertThat(favourites).hasSize(2);
  List<String> keys=newArrayList(Iterables.transform(favourites,new Function<Favourite,String>(){
    @Override public String apply(    Favourite input){
      return input.getKey();
    }
  }
));
  assertThat(keys).containsOnly("sample","sample:src/main/xoo/sample/Sample.xoo");
  adminWsClient.delete(new FavouriteDeleteQuery("sample"));
  favourites=adminWsClient.findAll(new FavouriteQuery());
  assertThat(favourites).hasSize(1);
  assertThat(favourites.get(0).getKey()).isEqualTo("sample:src/main/xoo/sample/Sample.xoo");
}
