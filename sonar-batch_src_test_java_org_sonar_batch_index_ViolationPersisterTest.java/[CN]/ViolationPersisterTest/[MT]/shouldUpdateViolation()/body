{
  Violation violation=Violation.create(rule1,javaFile).setPriority(RulePriority.CRITICAL).setLineId(20).setCost(55.6);
  RuleFailureModel oldModel=violationPersister.getPreviousViolations(javaFile).iterator().next();
  violationPersister.saveOrUpdateViolation(new Project("project"),violation,oldModel);
  checkTables("shouldUpdateViolation","rule_failures");
}
