{
  when(pluginDownloader.getDownloadedPlugins()).thenReturn(of(GIT_PLUGIN_METADATA));
  underTest.handle(request,response);
  assertJson(response.outputAsString()).isSimilarTo("{" + "  \"installing\": " + "  ["+ "    {"+ "      \"key\": \"scmgit\","+ "      \"name\": \"Git\","+ "      \"description\": \"Git SCM Provider.\","+ "      \"version\": \"1.0\","+ "      \"license\": \"GNU LGPL 3\","+ "      \"organizationName\": \"SonarSource\","+ "      \"organizationUrl\": \"http://www.sonarsource.com\","+ "      \"homepageUrl\": \"http://redirect.sonarsource.com/plugins/scmgit.html\","+ "      \"issueTrackerUrl\": \"http://jira.codehaus.org/browse/SONARSCGIT\","+ "      \"artifact\": {"+ "        \"name\": \"sonar-scm-git-plugin-1.0.jar\""+ "      }"+ "    }"+ "  ],"+ "  \"removing\": []"+ "}");
}
