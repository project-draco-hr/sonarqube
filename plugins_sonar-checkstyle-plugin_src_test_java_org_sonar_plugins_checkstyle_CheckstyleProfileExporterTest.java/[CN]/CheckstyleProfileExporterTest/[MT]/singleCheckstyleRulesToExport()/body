{
  RulesProfile profile=RulesProfile.create("sonar way","java");
  profile.activateRule(Rule.create("pmd","PmdRule1","PMD rule one"),null);
  profile.activateRule(Rule.create("checkstyle","com.puppycrawl.tools.checkstyle.checks.javadoc.JavadocPackageCheck","Javadoc").setConfigKey("Checker/JavadocPackage"),RulePriority.MAJOR);
  profile.activateRule(Rule.create("checkstyle","com.puppycrawl.tools.checkstyle.checks.sizes.LineLengthCheck","Line Length").setConfigKey("Checker/TreeWalker/LineLength"),RulePriority.CRITICAL);
  profile.activateRule(Rule.create("checkstyle","com.puppycrawl.tools.checkstyle.checks.naming.LocalFinalVariableNameCheck","Local Variable").setConfigKey("Checker/TreeWalker/Checker/TreeWalker/LocalFinalVariableName"),RulePriority.MINOR);
  StringWriter writer=new StringWriter();
  new CheckstyleProfileExporter().exportProfile(profile,writer);
  TestUtils.assertSimilarXml(TestUtils.getResourceContent("/org/sonar/plugins/checkstyle/CheckstyleProfileExporterTest/singleCheckstyleRulesToExport.xml"),sanitizeForTests(writer.toString()));
}
