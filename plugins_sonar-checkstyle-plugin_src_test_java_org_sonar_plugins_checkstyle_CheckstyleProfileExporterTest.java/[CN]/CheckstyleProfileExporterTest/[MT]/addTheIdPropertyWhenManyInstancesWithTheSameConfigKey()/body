{
  RulesProfile profile=RulesProfile.create("sonar way","java");
  Rule rule1=Rule.create("checkstyle","com.puppycrawl.tools.checkstyle.checks.javadoc.JavadocPackageCheck","Javadoc").setConfigKey("Checker/JavadocPackage");
  Rule rule2=Rule.create("checkstyle","com.puppycrawl.tools.checkstyle.checks.javadoc.JavadocPackageCheck_12345","Javadoc").setConfigKey("Checker/JavadocPackage");
  profile.activateRule(rule1,RulePriority.MAJOR);
  profile.activateRule(rule2,RulePriority.CRITICAL);
  StringWriter writer=new StringWriter();
  new CheckstyleProfileExporter().exportProfile(profile,writer);
  TestUtils.assertSimilarXml(TestUtils.getResourceContent("/org/sonar/plugins/checkstyle/CheckstyleProfileExporterTest/addTheIdPropertyWhenManyInstancesWithTheSameConfigKey.xml"),writer.toString());
}
