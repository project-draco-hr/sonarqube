{
  IssueQuery.Builder builder=IssueQuery.builder().requiredRole(UserRole.USER).issueKeys(request.paramAsStrings(IssueFilterParameters.ISSUES)).severities(request.paramAsStrings(IssueFilterParameters.SEVERITIES)).statuses(request.paramAsStrings(IssueFilterParameters.STATUSES)).resolutions(request.paramAsStrings(IssueFilterParameters.RESOLUTIONS)).resolved(request.paramAsBoolean(IssueFilterParameters.RESOLVED)).components(request.paramAsStrings(IssueFilterParameters.COMPONENTS)).componentRoots(request.paramAsStrings(IssueFilterParameters.COMPONENT_ROOTS)).rules(stringsToRules(request.paramAsStrings(IssueFilterParameters.RULES))).actionPlans(request.paramAsStrings(IssueFilterParameters.ACTION_PLANS)).reporters(request.paramAsStrings(IssueFilterParameters.REPORTERS)).assignees(request.paramAsStrings(IssueFilterParameters.ASSIGNEES)).languages(request.paramAsStrings(IssueFilterParameters.LANGUAGES)).assigned(request.paramAsBoolean(IssueFilterParameters.ASSIGNED)).planned(request.paramAsBoolean(IssueFilterParameters.PLANNED)).createdAt(request.paramAsDateTime(IssueFilterParameters.CREATED_AT)).createdAfter(request.paramAsDateTime(IssueFilterParameters.CREATED_AFTER)).createdBefore(request.paramAsDateTime(IssueFilterParameters.CREATED_BEFORE));
  String sort=request.param(SearchRequestHandler.PARAM_SORT);
  if (!Strings.isNullOrEmpty(sort)) {
    builder.sort(sort);
    builder.asc(request.paramAsBoolean(SearchRequestHandler.PARAM_ASCENDING));
  }
  return builder.build();
}
