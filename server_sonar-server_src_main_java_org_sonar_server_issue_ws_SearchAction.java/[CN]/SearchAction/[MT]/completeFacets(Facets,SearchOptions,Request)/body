{
  addMandatoryValuesToFacet(facets,IssueFilterParameters.SEVERITIES,Severity.ALL);
  addMandatoryValuesToFacet(facets,IssueFilterParameters.STATUSES,Issue.STATUSES);
  addMandatoryValuesToFacet(facets,IssueFilterParameters.RESOLUTIONS,concat(singletonList(""),Issue.RESOLUTIONS));
  addMandatoryValuesToFacet(facets,IssueFilterParameters.PROJECT_UUIDS,request.paramAsStrings(IssueFilterParameters.PROJECT_UUIDS));
  List<String> assignees=Lists.newArrayList("");
  List<String> assigneesFromRequest=request.paramAsStrings(IssueFilterParameters.ASSIGNEES);
  if (assigneesFromRequest != null) {
    assignees.addAll(assigneesFromRequest);
    assignees.remove(IssueQueryService.LOGIN_MYSELF);
  }
  addMandatoryValuesToFacet(facets,IssueFilterParameters.ASSIGNEES,assignees);
  addMandatoryValuesToFacet(facets,IssueFilterParameters.FACET_ASSIGNED_TO_ME,singletonList(userSession.getLogin()));
  addMandatoryValuesToFacet(facets,IssueFilterParameters.REPORTERS,request.paramAsStrings(IssueFilterParameters.REPORTERS));
  addMandatoryValuesToFacet(facets,IssueFilterParameters.RULES,request.paramAsStrings(IssueFilterParameters.RULES));
  addMandatoryValuesToFacet(facets,IssueFilterParameters.LANGUAGES,request.paramAsStrings(IssueFilterParameters.LANGUAGES));
  addMandatoryValuesToFacet(facets,IssueFilterParameters.TAGS,request.paramAsStrings(IssueFilterParameters.TAGS));
  List<String> actionPlans=Lists.newArrayList("");
  List<String> actionPlansFromRequest=request.paramAsStrings(IssueFilterParameters.ACTION_PLANS);
  if (actionPlansFromRequest != null) {
    actionPlans.addAll(actionPlansFromRequest);
  }
  addMandatoryValuesToFacet(facets,IssueFilterParameters.ACTION_PLANS,actionPlans);
  addMandatoryValuesToFacet(facets,IssueFilterParameters.COMPONENT_UUIDS,request.paramAsStrings(IssueFilterParameters.COMPONENT_UUIDS));
  for (  String facetName : options.getFacets()) {
    LinkedHashMap<String,Long> buckets=facets.get(facetName);
    if (!IssueFilterParameters.FACET_ASSIGNED_TO_ME.equals(facetName)) {
      if (buckets != null) {
        List<String> requestParams=request.paramAsStrings(facetName);
        if (requestParams != null) {
          for (          String param : requestParams) {
            if (!buckets.containsKey(param) && !IssueQueryService.LOGIN_MYSELF.equals(param)) {
              buckets.put(param,0L);
            }
          }
        }
      }
    }
  }
}
