{
  addMandatoryValuesToFacet(facets,SEVERITIES,Severity.ALL);
  addMandatoryValuesToFacet(facets,STATUSES,Issue.STATUSES);
  addMandatoryValuesToFacet(facets,RESOLUTIONS,concat(singletonList(""),Issue.RESOLUTIONS));
  addMandatoryValuesToFacet(facets,PROJECT_UUIDS,request.getProjectUuids());
  List<String> assignees=Lists.newArrayList("");
  List<String> assigneesFromRequest=request.getAssignees();
  if (assigneesFromRequest != null) {
    assignees.addAll(assigneesFromRequest);
    assignees.remove(IssueQueryService.LOGIN_MYSELF);
  }
  addMandatoryValuesToFacet(facets,ASSIGNEES,assignees);
  addMandatoryValuesToFacet(facets,FACET_ASSIGNED_TO_ME,singletonList(userSession.getLogin()));
  addMandatoryValuesToFacet(facets,REPORTERS,request.getReporters());
  addMandatoryValuesToFacet(facets,RULES,request.getRules());
  addMandatoryValuesToFacet(facets,LANGUAGES,request.getLanguages());
  addMandatoryValuesToFacet(facets,TAGS,request.getTags());
  addMandatoryValuesToFacet(facets,TYPES,RuleType.ALL_NAMES);
  List<String> actionPlans=Lists.newArrayList("");
  List<String> actionPlansFromRequest=request.getActionPlans();
  if (actionPlansFromRequest != null) {
    actionPlans.addAll(actionPlansFromRequest);
  }
  addMandatoryValuesToFacet(facets,DEPRECATED_ACTION_PLANS,actionPlans);
  addMandatoryValuesToFacet(facets,COMPONENT_UUIDS,request.getComponentUuids());
  for (  String facetName : request.getFacets()) {
    LinkedHashMap<String,Long> buckets=facets.get(facetName);
    if (!FACET_ASSIGNED_TO_ME.equals(facetName)) {
      if (buckets != null) {
        List<String> requestParams=wsRequest.paramAsStrings(facetName);
        if (requestParams != null) {
          for (          String param : requestParams) {
            if (!buckets.containsKey(param) && !IssueQueryService.LOGIN_MYSELF.equals(param)) {
              buckets.put(param,0L);
            }
          }
        }
      }
    }
  }
}
