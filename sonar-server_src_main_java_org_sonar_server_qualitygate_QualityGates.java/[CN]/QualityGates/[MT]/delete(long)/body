{
  checkPermission(UserSession.get());
  QualityGateDto qGate=getNonNullQgate(idToDelete);
  if (isDefault(qGate)) {
    throw new BadRequestException("Impossible to delete default quality gate.");
  }
  SqlSession session=myBatis.openSession();
  try {
    propertiesDao.deleteProjectProperties(SONAR_QUALITYGATE_PROPERTY,Long.toString(idToDelete),session);
    dao.delete(qGate,session);
    session.commit();
  }
  finally {
    MyBatis.closeQuietly(session);
  }
}
