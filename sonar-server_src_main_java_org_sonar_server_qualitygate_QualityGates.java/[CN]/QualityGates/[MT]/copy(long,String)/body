{
  checkPermission(UserSession.get());
  getNonNullQgate(sourceId);
  validateQualityGate(null,destinationName);
  QualityGateDto destinationGate=new QualityGateDto().setName(destinationName);
  SqlSession session=myBatis.openSession();
  try {
    dao.insert(destinationGate,session);
    for (    QualityGateConditionDto sourceCondition : conditionDao.selectForQualityGate(sourceId,session)) {
      conditionDao.insert(new QualityGateConditionDto().setQualityGateId(destinationGate.getId()).setMetricId(sourceCondition.getMetricId()).setOperator(sourceCondition.getOperator()).setWarningThreshold(sourceCondition.getWarningThreshold()).setErrorThreshold(sourceCondition.getErrorThreshold()).setPeriod(sourceCondition.getPeriod()),session);
    }
    session.commit();
  }
  finally {
    MyBatis.closeQuietly(session);
  }
  return destinationGate;
}
