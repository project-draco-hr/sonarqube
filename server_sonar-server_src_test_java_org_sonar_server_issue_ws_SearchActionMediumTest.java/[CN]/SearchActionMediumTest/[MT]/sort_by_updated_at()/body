{
  RuleDto rule=newRule();
  ComponentDto project=insertComponent(ComponentTesting.newProjectDto("PROJECT_ID").setKey("PROJECT_KEY"));
  setDefaultProjectPermission(project);
  ComponentDto file=insertComponent(ComponentTesting.newFileDto(project,null,"FILE_ID").setKey("FILE_KEY"));
  db.issueDao().insert(session,IssueTesting.newDto(rule,file,project).setKee("82fd47d4-b650-4037-80bc-7b112bd4eac1").setIssueUpdateDate(DateUtils.parseDateTime("2014-11-02T00:00:00+0100")));
  db.issueDao().insert(session,IssueTesting.newDto(rule,file,project).setKee("82fd47d4-b650-4037-80bc-7b112bd4eac2").setIssueUpdateDate(DateUtils.parseDateTime("2014-11-01T00:00:00+0100")));
  db.issueDao().insert(session,IssueTesting.newDto(rule,file,project).setKee("82fd47d4-b650-4037-80bc-7b112bd4eac3").setIssueUpdateDate(DateUtils.parseDateTime("2014-11-03T00:00:00+0100")));
  session.commit();
  tester.get(IssueIndexer.class).indexAll();
  WsTester.Result result=wsTester.newGetRequest(API_ENDPOINT,SEARCH_ACTION).setParam("sort",IssueQuery.SORT_BY_UPDATE_DATE).setParam("asc","false").execute();
  result.assertJson(this.getClass(),"sort_by_updated_at.json");
}
