{
  ComponentDto removedFile=ComponentTesting.newFileDto(project).setUuid("EDCB").setEnabled(false).setKey("RemovedComponent").setParentProjectId(project.getId());
  db.componentDao().insert(session,removedFile);
  IssueDto issue=IssueTesting.newDto(rule,removedFile,project).setKee("82fd47d4-b650-4037-80bc-7b112bd4eac2").setComponent(removedFile).setStatus("OPEN").setResolution("OPEN").setSeverity("MAJOR").setIssueCreationDate(DateUtils.parseDate("2014-09-04")).setIssueUpdateDate(DateUtils.parseDate("2017-12-04"));
  db.issueDao().insert(session,issue);
  session.commit();
  tester.get(IssueIndexer.class).indexAll();
  WsTester.Result result=wsTester.newGetRequest(IssuesWs.API_ENDPOINT,SearchAction.SEARCH_ACTION).execute();
  result.assertJson(this.getClass(),"issue_linked_on_removed_file.json",false);
}
