{
  userSessionRule.login("john").setGlobalPermissions(GlobalPermissions.PROVISIONING);
  try {
    service.create(NewComponent.create("struts","Struts project").setBranch("origin?branch"));
    fail();
  }
 catch (  Exception e) {
    assertThat(e).isInstanceOf(BadRequestException.class).hasMessage("Malformed branch for Project: origin?branch. Allowed characters are alphanumeric, '-', '_', '.' and '/', with at least one non-digit.");
  }
}
