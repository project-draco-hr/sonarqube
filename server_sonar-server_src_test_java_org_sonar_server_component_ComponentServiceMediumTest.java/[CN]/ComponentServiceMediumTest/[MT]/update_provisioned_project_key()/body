{
  ComponentDto provisionedProject=ComponentTesting.newProjectDto().setKey("provisionedProject");
  tester.get(ComponentDao.class).insert(session,provisionedProject);
  session.commit();
  userSessionRule.login("john").addProjectUuidPermissions(UserRole.ADMIN,provisionedProject.uuid());
  service.updateKey(provisionedProject.key(),"provisionedProject2");
  session.commit();
  assertThat(service.getNullableByKey(provisionedProject.key())).isNull();
  assertThat(service.getNullableByKey("provisionedProject2")).isNotNull();
}
