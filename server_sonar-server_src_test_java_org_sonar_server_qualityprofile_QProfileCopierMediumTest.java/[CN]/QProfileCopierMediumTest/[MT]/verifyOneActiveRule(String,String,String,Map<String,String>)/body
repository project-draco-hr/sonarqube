{
  List<ActiveRule> activeRules=Lists.newArrayList(index.findByProfile(profileKey));
  assertThat(activeRules).hasSize(1);
  ActiveRule activeRule=activeRules.get(0);
  assertThat(activeRule.severity()).isEqualTo(expectedSeverity);
  assertThat(activeRule.inheritance()).isEqualTo(expectedInheritance == null ? ActiveRule.Inheritance.NONE : ActiveRule.Inheritance.valueOf(expectedInheritance));
  assertThat(activeRule.params()).hasSize(expectedParams.size());
  for (  Map.Entry<String,String> entry : expectedParams.entrySet()) {
    String value=activeRule.params().get(entry.getKey());
    assertThat(value).isEqualTo(entry.getValue());
  }
}
