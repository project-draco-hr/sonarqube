{
  if (component.getKey() == null) {
    return null;
  }
  Map<Class<Perspective>,Perspective> perspectives=components.get(component);
  if (perspectives == null) {
    perspectives=Maps.newHashMap();
    components.put(component,perspectives);
  }
  P perspective=(P)perspectives.get(toClass);
  if (perspective == null) {
    ComponentWrapper componentWrapper=graph.wrap(component,ComponentWrapper.class);
    perspective=builderFor(toClass).build(componentWrapper);
    perspectives.put((Class)toClass,perspective);
  }
  return perspective;
}
