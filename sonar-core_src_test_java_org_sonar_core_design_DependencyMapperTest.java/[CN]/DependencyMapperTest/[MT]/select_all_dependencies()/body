{
  dbtester.prepareDbUnit(getClass(),"fixture.xml");
  final List<DependencyDto> dependencies=Lists.newArrayList();
  session.getMapper(DependencyMapper.class).selectAll(new ResultHandler(){
    public void handleResult(    ResultContext context){
      dependencies.add((DependencyDto)context.getResultObject());
    }
  }
);
  assertThat(dependencies).hasSize(2);
  DependencyDto dep=dependencies.get(0);
  assertThat(dep.getId()).isEqualTo(1L);
  assertThat(dep.getFromSnapshotId()).isEqualTo(1000L);
  assertThat(dep.getToSnapshotId()).isEqualTo(1001L);
  assertThat(dep.getUsage()).isEqualTo("compile");
}
