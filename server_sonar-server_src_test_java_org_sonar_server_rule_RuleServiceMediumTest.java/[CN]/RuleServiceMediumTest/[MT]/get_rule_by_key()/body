{
  userSessionRule.logon().setGlobalPermissions(GlobalPermissions.QUALITY_PROFILE_ADMIN);
  RuleKey key=RuleKey.of("java","S001");
  dao.insert(dbSession,RuleTesting.newDto(key));
  dbSession.commit();
  dbSession.clearCache();
  Rule rule=service.getByKey(key);
  assertThat(rule).isNotNull();
  assertThat(service.getByKey(RuleKey.of("un","known"))).isNull();
}
