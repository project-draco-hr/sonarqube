{
  ImmutableMap.Builder<String,QProfile> builder=ImmutableMap.builder();
  String defaultName=settings.getString(SONAR_PROFILE_PROP);
  for (  Language language : languages.all()) {
    QProfile profile=null;
    if (StringUtils.isNotBlank(defaultName)) {
      profile=loadDefaultQProfile(dao,defaultName,language.getKey());
    }
    if (profile == null) {
      profile=loadQProfile(dao,settings,language.getKey());
    }
    if (profile != null) {
      builder.put(profile.language(),profile);
    }
  }
  byLanguage=builder.build();
}
