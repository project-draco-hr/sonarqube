{
  ImmutableMap.Builder<String,QProfile> builder=ImmutableMap.builder();
  if (loaders.length == 0) {
    String defaultName=settings.getString("sonar.profile");
    for (    Language language : languages.all()) {
      QProfile profile;
      if (StringUtils.isNotBlank(defaultName)) {
        profile=loadDefaultQProfile(dao,defaultName,language.getKey());
      }
 else {
        profile=loadQProfile(dao,settings,language.getKey());
      }
      if (profile != null) {
        LOG.info("Quality profile for {}: {}",profile.language(),profile.name());
        builder.put(profile.language(),profile);
      }
    }
  }
  byLanguage=builder.build();
}
