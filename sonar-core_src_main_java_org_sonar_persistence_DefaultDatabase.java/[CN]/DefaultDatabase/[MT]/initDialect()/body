{
  dialect=DialectUtils.find(properties.getProperty("sonar.jdbc.dialect"),properties.getProperty("sonar.jdbc.url"));
  if (dialect == null) {
    throw new IllegalStateException("Can not guess the JDBC dialect. Please check the property sonar.jdbc.url.");
  }
  if (Derby.ID.equals(dialect.getId())) {
    LoggerFactory.getLogger(DefaultDatabase.class).warn("Derby database should be used for evaluation purpose only");
  }
  if (!properties.containsKey("sonar.jdbc.driverClassName")) {
    properties.setProperty("sonar.jdbc.driverClassName",dialect.getDefaultDriverClassName());
  }
}
