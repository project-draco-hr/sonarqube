{
  coberturaPlugin.setParameter("formats/format","xml");
  for (  String pattern : project.getExclusionPatterns()) {
    if (pattern.endsWith(".java")) {
      pattern=StringUtils.substringBeforeLast(pattern,".") + ".class";
    }
 else     if (StringUtils.substringAfterLast(pattern,"/").indexOf(".") < 0) {
      pattern=pattern + ".class";
    }
    coberturaPlugin.addParameter("instrumentation/excludes/exclude",pattern);
  }
  String maxmem="";
  if (settings.hasKey("sonar.cobertura.maxmen")) {
    maxmem=settings.getString("sonar.cobertura.maxmen");
  }
 else {
    maxmem=settings.getString(CoreProperties.COBERTURA_MAXMEM_PROPERTY);
  }
  coberturaPlugin.setParameter("maxmem",maxmem);
}
