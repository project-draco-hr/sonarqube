{
  BootstrapContainer bootstrapModule=null;
  try {
    List all=Lists.newArrayList(components);
    all.add(new BootstrapProperties(globalProperties));
    all.add(projectReactor);
    bootstrapModule=BootstrapContainer.create(all);
    bootstrapModule.startComponents();
    TaskContainer taskContainer=new TaskContainer(bootstrapModule);
    taskContainer.add(ScanTask.DEFINITION,ScanTask.class,ListTasksTask.DEFINITION,ListTasksTask.class);
    taskContainer.executeTask(taskCommand);
  }
 catch (  RuntimeException e) {
    PicoUtils.propagateStartupException(e);
  }
 finally {
    try {
      if (bootstrapModule != null) {
        bootstrapModule.stopComponents();
      }
    }
 catch (    Exception e) {
      LoggerFactory.getLogger(Batch.class).error("Error while stopping batch",e);
    }
  }
}
