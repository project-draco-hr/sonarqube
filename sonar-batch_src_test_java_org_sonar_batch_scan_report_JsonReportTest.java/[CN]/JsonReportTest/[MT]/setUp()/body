{
  SIMPLE_DATE_FORMAT.setTimeZone(TimeZone.getTimeZone("GMT+02:00"));
  when(resource.getEffectiveKey()).thenReturn("Action.java");
  when(server.getVersion()).thenReturn("3.6");
  settings=new Settings();
  mode=mock(AnalysisMode.class);
  when(mode.isPreview()).thenReturn(true);
  userFinder=mock(UserFinder.class);
  InputFileCache inputFileCache=mock(InputFileCache.class);
  InputFile inputFile=mock(InputFile.class);
  when(inputFile.attribute(DefaultInputFile.ATTRIBUTE_COMPONENT_KEY)).thenReturn("struts:/src/main/java/org/apache/struts/Action.java");
  when(inputFile.attribute(DefaultInputFile.ATTRIBUTE_COMPONENT_DEPRECATED_KEY)).thenReturn("struts:org.apache.struts.Action");
  when(inputFileCache.all()).thenReturn(Arrays.asList(inputFile));
  jsonReport=new JsonReport(settings,fileSystem,server,ruleFinder,issueCache,mock(EventBus.class),new DefaultComponentSelector(inputFileCache),mode,userFinder);
}
