{
  when(pluginRepository.getMetadata()).thenReturn(of(plugin("A","name2"),plugin("B","name1"),plugin("C","name0"),plugin("D","name0")));
  underTest.handle(request,response);
  assertJson(response.outputAsString()).setStrictArrayOrder(true).isSimilarTo("{" + "  \"plugins\":" + "  ["+ "    {\"key\": \"C\"}"+ ","+ "    {\"key\": \"D\"}"+ ","+ "    {\"key\": \"B\"}"+ ","+ "    {\"key\": \"A\"}"+ "  ]"+ "}");
}
