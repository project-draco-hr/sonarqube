{
  myBatis=mock(MyBatis.class);
  session=mock(DbSession.class);
  when(myBatis.openSession(false)).thenReturn(session);
  serverFileSystem=mock(ServerFileSystem.class);
  propertiesDao=mock(PropertiesDao.class);
  resourceDao=mock(ResourceDao.class);
  dryRunDatabaseFactory=mock(PreviewDatabaseFactory.class);
  File tempLocation=temp.newFolder();
  when(serverFileSystem.getTempDir()).thenReturn(tempLocation);
  dryRunCacheLocation=new File(tempLocation,"dryRun");
  dryRunCache=new PreviewCache(myBatis,serverFileSystem,propertiesDao,resourceDao,dryRunDatabaseFactory);
}
