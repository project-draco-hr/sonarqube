{
  boolean alive=true;
  while (alive) {
    try {
      process.getProcess().waitFor();
      process.setTerminated(true);
      LoggerFactory.getLogger(getClass()).info(process + " is down");
      monitor.stop();
      alive=false;
    }
 catch (    InterruptedException ignored) {
      if (ProcessUtils.isAlive(process.getProcess())) {
        LoggerFactory.getLogger(getClass()).error(String.format("Watcher of [%s] was interrupted but process is still alive. Killing it.",process.getKey()));
      }
      alive=false;
    }
 finally {
      process.hardKill();
    }
  }
}
