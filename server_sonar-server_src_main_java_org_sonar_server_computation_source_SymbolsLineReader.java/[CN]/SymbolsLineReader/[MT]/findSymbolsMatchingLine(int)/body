{
  List<BatchReport.Symbols.Symbol> lineSymbols=newArrayList();
  Set<BatchReport.Symbols.Symbol> symbolsIndex=newHashSet();
  for (  BatchReport.Symbols.Symbol symbol : symbols) {
    if (matchLine(symbol.getDeclaration(),line) && !symbolsIndex.contains(symbol)) {
      lineSymbols.add(symbol);
      symbolsIndex.add(symbol);
    }
 else {
      for (      BatchReport.Range range : symbol.getReferenceList()) {
        if (matchLine(range,line) && !symbolsIndex.contains(symbol)) {
          lineSymbols.add(symbol);
          symbolsIndex.add(symbol);
        }
      }
    }
  }
  return lineSymbols;
}
