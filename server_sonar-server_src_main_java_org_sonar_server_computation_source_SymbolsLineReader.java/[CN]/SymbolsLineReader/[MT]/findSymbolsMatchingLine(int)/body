{
  List<BatchReport.Symbol> lineSymbols=new ArrayList<>();
  Set<BatchReport.Symbol> symbolsIndex=new HashSet<>();
  for (  BatchReport.Symbol symbol : symbols) {
    if (matchLine(symbol.getDeclaration(),line) && !symbolsIndex.contains(symbol)) {
      lineSymbols.add(symbol);
      symbolsIndex.add(symbol);
    }
 else {
      for (      BatchReport.TextRange range : symbol.getReferenceList()) {
        if (matchLine(range,line) && !symbolsIndex.contains(symbol)) {
          lineSymbols.add(symbol);
          symbolsIndex.add(symbol);
        }
      }
    }
  }
  return lineSymbols;
}
