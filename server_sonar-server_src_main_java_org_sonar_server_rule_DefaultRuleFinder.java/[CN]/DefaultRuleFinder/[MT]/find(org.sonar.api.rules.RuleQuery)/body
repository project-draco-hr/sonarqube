{
  DbSession dbSession=dbClient.openSession(false);
  try {
    List<RuleDto> rules=ruleDao.selectByQuery(dbSession,query);
    if (!rules.isEmpty()) {
      RuleDto rule=rules.get(0);
      return toRule(rule,ruleDao.selectRuleParamsByRuleKey(dbSession,rule.getKey()));
    }
    return null;
  }
  finally {
    dbClient.closeSession(dbSession);
  }
}
