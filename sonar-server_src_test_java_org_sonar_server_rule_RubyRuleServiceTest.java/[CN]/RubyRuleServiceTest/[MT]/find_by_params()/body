{
  Map<String,Object> params=newHashMap();
  params.put("searchQuery","NPE");
  params.put("key","rule");
  params.put("languages",newArrayList("java","xoo"));
  params.put("repositories",newArrayList("pmd","checkstyle"));
  params.put("severities",newArrayList("MINOR","MAJOR"));
  params.put("statuses",newArrayList("READY","BETA"));
  params.put("tags",newArrayList("has-params","keep-enabled"));
  params.put("debtCharacteristics",newArrayList("MODULARITY","REUSABILITY"));
  params.put("hasDebtCharacteristic","true");
  params.put("pageSize",10l);
  params.put("pageIndex",50);
  facade.find(params);
  ArgumentCaptor<RuleQuery> ruleQueryCaptor=ArgumentCaptor.forClass(RuleQuery.class);
  verify(rules).find(ruleQueryCaptor.capture());
  RuleQuery query=ruleQueryCaptor.getValue();
  assertThat(query.searchQuery()).isEqualTo("NPE");
  assertThat(query.key()).isEqualTo("rule");
  assertThat(query.languages()).containsOnly("java","xoo");
  assertThat(query.repositories()).containsOnly("pmd","checkstyle");
  assertThat(query.severities()).containsOnly("MINOR","MAJOR");
  assertThat(query.statuses()).containsOnly("READY","BETA");
  assertThat(query.tags()).containsOnly("has-params","keep-enabled");
  assertThat(query.debtCharacteristics()).containsOnly("MODULARITY","REUSABILITY");
  assertThat(query.hasDebtCharacteristic()).isTrue();
  assertThat(query.pageSize()).isEqualTo(10);
  assertThat(query.pageIndex()).isEqualTo(50);
}
