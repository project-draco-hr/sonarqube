{
  Graph g=TinkerGraphFactory.createTinkerGraph();
  StringWriter stream=new StringWriter();
  GraphsonWriter writer=new GraphsonWriter();
  writer.write(g,stream,GraphsonMode.NORMAL);
  stream.flush();
  stream.close();
  String jsonString=stream.toString();
  JSONObject rootNode=(JSONObject)JSONValue.parse(jsonString);
  assertThat(rootNode).isNotNull();
  assertThat(rootNode.containsKey(GraphsonTokens.MODE)).isTrue();
  assertThat(rootNode.get(GraphsonTokens.MODE)).isEqualTo("NORMAL");
  assertThat(rootNode.containsKey(GraphsonTokens.VERTICES)).isTrue();
  JSONArray vertices=(JSONArray)rootNode.get(GraphsonTokens.VERTICES);
  assertThat(vertices).hasSize(6);
  assertThat(rootNode.containsKey(GraphsonTokens.EDGES)).isTrue();
  JSONArray edges=(JSONArray)rootNode.get(GraphsonTokens.EDGES);
  assertThat(edges).hasSize(6);
}
