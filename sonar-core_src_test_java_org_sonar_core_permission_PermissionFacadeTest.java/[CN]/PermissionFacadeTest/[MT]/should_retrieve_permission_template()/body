{
  PermissionTemplateDto permissionTemplateDto=new PermissionTemplateDto().setName("Test template").setKee("test_template");
  PermissionTemplateDto templateWithPermissions=new PermissionTemplateDto().setKee("test_template");
  permissionTemplateDao=mock(PermissionTemplateDao.class);
  when(permissionTemplateDao.selectTemplateByKey("test_template")).thenReturn(permissionTemplateDto);
  when(permissionTemplateDao.selectPermissionTemplate("test_template")).thenReturn(templateWithPermissions);
  permissionFacade=new PermissionFacade(null,null,null,null,permissionTemplateDao,null);
  PermissionTemplateDto permissionTemplate=permissionFacade.getPermissionTemplateWithPermissions("test_template");
  assertThat(permissionTemplate).isSameAs(templateWithPermissions);
}
