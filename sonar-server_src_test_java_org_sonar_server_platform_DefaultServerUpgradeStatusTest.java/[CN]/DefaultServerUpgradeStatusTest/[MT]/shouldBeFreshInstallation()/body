{
  DatabaseConnector connector=mock(DatabaseConnector.class);
  when(connector.getDatabaseVersion()).thenReturn(-1);
  DefaultServerUpgradeStatus status=new DefaultServerUpgradeStatus(connector);
  status.start();
  assertThat(status.isFreshInstall(),is(true));
  assertThat(status.isUpgraded(),is(false));
  assertThat(status.getInitialDbVersion(),is(-1));
}
