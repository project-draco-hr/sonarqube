{
  Purge purge=mock(Purge.class);
  doThrow(new PersistenceException()).when(purge).purge((PurgeContext)anyObject());
  PurgeRunner runner=new PurgeRunner(getSession(),new Project(""),new Snapshot(),new Purge[]{purge});
  runner.purge();
  verify(purge).purge((PurgeContext)anyObject());
}
