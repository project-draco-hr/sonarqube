{
  ESNode node=new ESNode(settings);
  node.start();
  node.client().admin().indices().prepareCreate("path").addMapping("type1","{\"type1\": {\"properties\": {\"value\": {\"type\": \"string\"}}}}").execute().actionGet();
  node.client().admin().cluster().prepareHealth("path").setWaitForYellowStatus().get(TimeValue.timeValueMillis(1000));
  AnalyzeResponse response=node.client().admin().indices().prepareAnalyze("path","/temp/65236/test path/MyFile.java").setAnalyzer("path_analyzer").get();
  assertThat(response.getTokens()).hasSize(4);
  assertThat(response.getTokens().get(0).getTerm()).isEqualTo("/temp");
  assertThat(response.getTokens().get(1).getTerm()).isEqualTo("/temp/65236");
  assertThat(response.getTokens().get(2).getTerm()).isEqualTo("/temp/65236/test path");
  assertThat(response.getTokens().get(3).getTerm()).isEqualTo("/temp/65236/test path/MyFile.java");
  node.stop();
}
