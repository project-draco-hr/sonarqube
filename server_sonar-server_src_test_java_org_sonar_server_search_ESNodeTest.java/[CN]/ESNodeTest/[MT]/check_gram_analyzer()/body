{
  ESNode node=new ESNode(fs,new Settings());
  node.start();
  node.client().admin().indices().prepareCreate("gram").addMapping("type1","{\"type1\": {\"properties\": {\"value\": {\"type\": \"string\"}}}}").execute().actionGet();
  node.client().admin().cluster().prepareHealth("gram").setWaitForYellowStatus().get(TimeValue.timeValueMillis(1000));
  AnalyzeResponse response=node.client().admin().indices().prepareAnalyze("gram","he.llo w@rl#d").setAnalyzer("index_grams").get();
  assertThat(response.getTokens()).hasSize(10);
  assertThat(response.getTokens().get(0).getTerm()).isEqualTo("he");
  assertThat(response.getTokens().get(7).getTerm()).isEqualTo("w@rl");
  node.stop();
}
