{
  ESNode node=new ESNode(settings);
  node.start();
  node.client().admin().indices().prepareCreate("strict").addMapping("type1","{\"type1\": {\"properties\": {\"value\": {\"type\": \"string\"}}}}").execute().actionGet();
  node.client().admin().cluster().prepareHealth("strict").setWaitForYellowStatus().get(TimeValue.timeValueMillis(1000));
  try {
    node.client().prepareIndex("strict","type1","666").setSource(XContentFactory.jsonBuilder().startObject().field("unknown","plouf").endObject()).get();
  }
  finally {
    node.stop();
  }
}
