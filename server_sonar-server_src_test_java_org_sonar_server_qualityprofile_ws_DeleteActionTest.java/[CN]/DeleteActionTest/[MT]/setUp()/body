{
  dbTester.truncateTables();
  qualityProfileDao=new QualityProfileDao(dbTester.myBatis(),mock(System2.class));
  componentDao=new ComponentDao();
  dbClient=new DbClient(dbTester.database(),dbTester.myBatis(),qualityProfileDao,new ActiveRuleDao(qualityProfileDao,new RuleDao(system2),system2));
  session=dbClient.openSession(false);
  xoo1=LanguageTesting.newLanguage("xoo1");
  xoo2=LanguageTesting.newLanguage("xoo2");
  tester=new WsTester(new QProfilesWs(mock(RuleActivationActions.class),mock(BulkRuleActivationActions.class),mock(ProjectAssociationActions.class),new DeleteAction(new Languages(xoo1,xoo2),new QProfileFactory(dbClient),dbClient,userSessionRule)));
}
