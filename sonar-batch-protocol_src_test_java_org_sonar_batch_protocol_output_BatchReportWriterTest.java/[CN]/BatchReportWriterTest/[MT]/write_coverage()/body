{
  File dir=temp.newFolder();
  BatchReportWriter writer=new BatchReportWriter(dir);
  assertThat(writer.hasComponentData(FileStructure.Domain.COVERAGE,1)).isFalse();
  writer.writeFileCoverage(1,Arrays.asList(BatchReport.Coverage.newBuilder().setLine(1).setConditions(1).setUtHits(true).setItHits(false).setUtCoveredConditions(1).setItCoveredConditions(1).setOverallCoveredConditions(1).build(),BatchReport.Coverage.newBuilder().setLine(2).setConditions(5).setUtHits(false).setItHits(false).setUtCoveredConditions(4).setItCoveredConditions(5).setOverallCoveredConditions(5).build()));
  assertThat(writer.hasComponentData(FileStructure.Domain.COVERAGE,1)).isTrue();
  File file=writer.getFileStructure().fileFor(FileStructure.Domain.COVERAGE,1);
  assertThat(file).exists().isFile();
  InputStream inputStream=new BufferedInputStream(new FileInputStream(file));
  BatchReport.Coverage read=BatchReport.Coverage.PARSER.parseDelimitedFrom(inputStream);
  assertThat(read.getLine()).isEqualTo(1);
  assertThat(read.getConditions()).isEqualTo(1);
  assertThat(read.getUtHits()).isTrue();
  assertThat(read.getItHits()).isFalse();
  assertThat(read.getUtCoveredConditions()).isEqualTo(1);
  assertThat(read.getItCoveredConditions()).isEqualTo(1);
  assertThat(read.getOverallCoveredConditions()).isEqualTo(1);
  read=BatchReport.Coverage.PARSER.parseDelimitedFrom(inputStream);
  assertThat(read.getLine()).isEqualTo(2);
  assertThat(read.getConditions()).isEqualTo(5);
  assertThat(read.getUtHits()).isFalse();
  assertThat(read.getItHits()).isFalse();
  assertThat(read.getUtCoveredConditions()).isEqualTo(4);
  assertThat(read.getItCoveredConditions()).isEqualTo(5);
  assertThat(read.getOverallCoveredConditions()).isEqualTo(5);
}
