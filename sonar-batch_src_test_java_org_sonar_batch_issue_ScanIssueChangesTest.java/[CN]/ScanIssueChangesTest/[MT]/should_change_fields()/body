{
  DefaultIssue issue=new DefaultIssue().setComponentKey("org/struts/Action.java").setKey("ABCDE");
  when(cache.componentIssue("org/struts/Action.java","ABCDE")).thenReturn(issue);
  IssueChange change=IssueChange.create().setTransition("resolve");
  changes.apply(issue,change);
  verify(cache).addOrUpdate(issue);
  verify(workflow).apply(issue,change);
}
