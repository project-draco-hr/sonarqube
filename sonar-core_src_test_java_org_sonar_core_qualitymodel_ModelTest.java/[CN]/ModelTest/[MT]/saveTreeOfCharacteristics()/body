{
  setupData("testTreeOfCharacteristics");
  Model model=Model.createByName("fake");
  Characteristic efficiency=model.createCharacteristicByName("Efficiency");
  Characteristic usability=model.createCharacteristicByName("Usability");
  Characteristic cpuEfficiency=model.createCharacteristicByName("CPU Efficiency");
  Characteristic ramEfficiency=model.createCharacteristicByName("RAM Efficiency");
  efficiency.addChildren(cpuEfficiency,ramEfficiency);
  getSession().save(model);
  getSession().commit();
  model=getSession().getSingleResult(Model.class,"name","fake");
  assertThat(model.getCharacteristics().size(),is(4));
  assertThat(model.getCharacteristics(),hasItems(efficiency,usability,ramEfficiency,cpuEfficiency));
  assertThat(efficiency.getChildren(),hasItems(ramEfficiency,cpuEfficiency));
  assertTrue(ramEfficiency.getChildren().isEmpty());
  assertThat(ramEfficiency.getParents(),hasItems(efficiency));
}
