{
  RuleActivatorContext context=new RuleActivatorContext();
  RuleDto rule=initRule(key.ruleKey(),context,session);
  QualityProfileDto profile=initProfile(key,context,session,false);
  initActiveRules(key,context,session,false);
  if (profile.getParent() != null) {
    ActiveRuleKey parentKey=ActiveRuleKey.of(QualityProfileKey.of(profile.getParent(),profile.getLanguage()),rule.getKey());
    initProfile(parentKey,context,session,true);
    initActiveRules(parentKey,context,session,true);
  }
  return context;
}
