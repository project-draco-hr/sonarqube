{
  AnalysisReportDto report=AnalysisReportDto.newForTests(123L);
  when(queue.add(any(String.class),anyLong(),any(InputStream.class))).thenReturn(report);
  WsTester.TestRequest request=wsTester.newGetRequest(ComputationWebService.API_ENDPOINT,"submit_report").setParam(SubmitReportWsAction.PARAM_PROJECT_KEY,"789-123").setParam(SubmitReportWsAction.PARAM_SNAPSHOT,"456").setParam(SubmitReportWsAction.PARAM_REPORT_DATA,null);
  request.execute();
  verify(queue).add(eq("789-123"),eq(456L),any(InputStream.class));
  verify(taskLauncher).startAnalysisTaskNow();
}
