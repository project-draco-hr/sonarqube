{
  Characteristic defaultRootCharacteristic=new Characteristic().setKey("PORTABILITY");
  new Characteristic().setKey("COMPILER_RELATED_PORTABILITY").setParent(defaultRootCharacteristic);
  defaultModel.addRootCharacteristic(defaultRootCharacteristic);
  CharacteristicDto dbRootCharacteristic=new CharacteristicDto().setId(1).setKey("PORTABILITY");
  CharacteristicDto dbCharacteristic=new CharacteristicDto().setId(2).setKey("COMPILER_RELATED_PORTABILITY").setParentId(1);
  CharacteristicDto requirement=new CharacteristicDto().setId(3).setRuleId(10).setParentId(2).setFactorValue(30.0).setFactorUnit("mn");
  when(ruleCache.exists(10)).thenReturn(false);
  when(dao.selectEnabledCharacteristics()).thenReturn(newArrayList(dbRootCharacteristic,dbCharacteristic,requirement));
  manager.initAndMergePlugins(ValidationMessages.create(),ruleCache);
  verify(dao).selectEnabledCharacteristics();
  verify(dao).disable(eq(3),eq(session));
  verifyNoMoreInteractions(dao);
}
