{
  if (resource.getId() != null) {
    SqlSession session=myBatis.openSession();
    try {
      removePermissions(resource,session);
      grantDefaultPermissions(resource,UserRole.ADMIN,session);
      grantDefaultPermissions(resource,UserRole.USER,session);
      grantDefaultPermissions(resource,UserRole.CODEVIEWER,session);
      session.commit();
    }
  finally {
      MyBatis.closeQuietly(session);
    }
  }
}
