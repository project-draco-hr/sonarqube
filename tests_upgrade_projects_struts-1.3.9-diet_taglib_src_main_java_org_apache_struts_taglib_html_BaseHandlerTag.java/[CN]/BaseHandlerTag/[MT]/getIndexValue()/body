{
  IterateTag iterateTag=(IterateTag)findAncestorWithClass(this,IterateTag.class);
  if (iterateTag != null) {
    return iterateTag.getIndex();
  }
  Integer i=getJstlLoopIndex();
  if (i != null) {
    return i.intValue();
  }
  JspException e=new JspException(messages.getMessage("indexed.noEnclosingIterate"));
  TagUtils.getInstance().saveException(pageContext,e);
  throw e;
}
