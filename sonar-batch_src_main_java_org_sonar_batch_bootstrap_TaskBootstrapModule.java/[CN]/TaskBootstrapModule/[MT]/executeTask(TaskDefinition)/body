{
  if (task.getTaskDescriptor().isRequiresProject() && container.getComponentByType(ProjectReactor.class) == null) {
    throw new SonarException("Task " + task.getTaskDescriptor().getName() + " requires to be run on a project");
  }
  Module childModule;
  if (task.getTaskDescriptor().isRequiresProject()) {
    childModule=new ProjectTaskModule(task);
  }
 else {
    childModule=new ProjectLessTaskModule(task);
  }
  try {
    installChild(childModule);
    childModule.start();
  }
  finally {
    childModule.stop();
    uninstallChild();
  }
}
