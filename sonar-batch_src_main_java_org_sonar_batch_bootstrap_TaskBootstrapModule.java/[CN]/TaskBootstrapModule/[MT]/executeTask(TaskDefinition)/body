{
  boolean projectPresent=container.getComponentByType(ProjectReactor.class) != null;
  if (ExtensionUtils.requiresProject(taskDefinition.getTask()) && !projectPresent) {
    throw new SonarException("Task " + taskDefinition.getName() + " requires to be run on a project");
  }
  Module childModule;
  if (projectPresent) {
    childModule=new ProjectTaskModule(taskDefinition);
  }
 else {
    childModule=new ProjectLessTaskModule(taskDefinition);
  }
  try {
    installChild(childModule);
    childModule.start();
  }
  finally {
    childModule.stop();
    uninstallChild();
  }
}
