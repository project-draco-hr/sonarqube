{
  BatchReportWriter writer=reportPublisher.getWriter();
  DefaultInputFile inputFile=(DefaultInputFile)highlighting.inputFile();
  writer.writeComponentSyntaxHighlighting(resourceCache.get(inputFile).batchId(),Iterables.transform(highlighting.getSyntaxHighlightingRuleSet(),new Function<SyntaxHighlightingRule,HighlightingRule>(){
    private HighlightingRule.Builder builder=HighlightingRule.newBuilder();
    private Range.Builder rangeBuilder=Range.newBuilder();
    @Override public HighlightingRule apply(    SyntaxHighlightingRule input){
      builder.clear();
      rangeBuilder.clear();
      builder.setRange(rangeBuilder.setStartLine(input.range().start().line()).setStartOffset(input.range().start().lineOffset()).setEndLine(input.range().end().line()).setEndOffset(input.range().end().lineOffset()).build());
      builder.setType(BatchReportUtils.toProtocolType(input.getTextType()));
      return builder.build();
    }
  }
));
}
