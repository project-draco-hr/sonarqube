{
  try {
    if (ProcessUtils.isAlive(process)) {
      process.waitFor();
    }
  }
 catch (  Exception e) {
    LOGGER.info("ProcessThread has been interrupted. Killing process.");
    LOGGER.trace("Process exception",e);
  }
 finally {
    waitUntilFinish(outputGobbler);
    waitUntilFinish(errorGobbler);
    ProcessUtils.closeStreams(process);
    this.interrupt();
  }
}
