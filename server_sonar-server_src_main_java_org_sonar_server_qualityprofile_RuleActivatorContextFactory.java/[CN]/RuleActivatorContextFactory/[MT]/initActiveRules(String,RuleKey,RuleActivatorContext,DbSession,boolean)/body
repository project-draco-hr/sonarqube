{
  ActiveRuleKey key=ActiveRuleKey.of(profileKey,ruleKey);
  ActiveRuleDto activeRule=db.deprecatedActiveRuleDao().getNullableByKey(session,key);
  Collection<ActiveRuleParamDto> activeRuleParams=null;
  if (activeRule != null) {
    activeRuleParams=db.deprecatedActiveRuleDao().selectParamsByActiveRuleKey(session,key);
  }
  if (parent) {
    context.setParentActiveRule(activeRule);
    context.setParentActiveRuleParams(activeRuleParams);
  }
 else {
    context.setActiveRule(activeRule);
    context.setActiveRuleParams(activeRuleParams);
  }
}
