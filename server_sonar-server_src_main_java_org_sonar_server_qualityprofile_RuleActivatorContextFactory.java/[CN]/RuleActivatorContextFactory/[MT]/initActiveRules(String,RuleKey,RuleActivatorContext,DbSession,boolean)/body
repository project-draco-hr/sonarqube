{
  ActiveRuleKey key=ActiveRuleKey.of(profileKey,ruleKey);
  Optional<ActiveRuleDto> activeRule=db.activeRuleDao().selectByKey(session,key);
  Collection<ActiveRuleParamDto> activeRuleParams=null;
  if (activeRule.isPresent()) {
    activeRuleParams=db.activeRuleDao().selectParamsByActiveRuleKey(session,key);
  }
  if (parent) {
    context.setParentActiveRule(activeRule.orNull());
    context.setParentActiveRuleParams(activeRuleParams);
  }
 else {
    context.setActiveRule(activeRule.orNull());
    context.setActiveRuleParams(activeRuleParams);
  }
}
