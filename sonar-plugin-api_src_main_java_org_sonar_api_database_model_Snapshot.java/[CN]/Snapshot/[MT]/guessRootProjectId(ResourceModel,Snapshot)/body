{
  Integer result;
  if ("TRK".equals(resource.getQualifier()) || "VW".equals(resource.getQualifier()) || "SVW".equals(resource.getQualifier())) {
    result=resource.getCopyResourceId() != null ? resource.getCopyResourceId() : resource.getId();
  }
 else   if (parent == null) {
    result=resource.getCopyResourceId() != null ? resource.getCopyResourceId() : resource.getId();
  }
 else {
    result=(parent.getRootProjectId() == null ? parent.getResourceId() : parent.getRootProjectId());
  }
  return result;
}
