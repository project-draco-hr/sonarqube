{
  RuleDto ruleDto=RuleTesting.newXooX1().setTags(ImmutableSet.of("hello")).setName("first name");
  dao.insert(dbSession,ruleDto);
  dbSession.commit();
  Rule hit=index.getByKey(RuleTesting.XOO_X1);
  assertThat(hit.tags()).containsExactly("hello");
  assertThat(hit.name()).isEqualTo("first name");
  ruleDto.setTags(ImmutableSet.of("world")).setName("second name");
  dao.update(dbSession,ruleDto);
  dbSession.commit();
  hit=index.getByKey(RuleTesting.XOO_X1);
  assertThat(hit.tags()).containsExactly("world");
  assertThat(hit.name()).isEqualTo("second name");
}
