{
  diff=new DiffAlgorithm().diff(a,b,cmp);
  int added=0;
  int deleted=0;
  BitSet remains=new BitSet(a.length());
  for (  Edit edit : diff) {
switch (edit.getType()) {
case INSERT:
      added+=edit.endB - edit.beginB + 1;
    break;
case MOVE:
  for (int i=edit.beginA; i <= edit.endA; i++) {
    remains.set(i);
  }
break;
default :
throw new IllegalStateException();
}
}
for (int i=0; i < a.length(); i++) {
if (!remains.get(i)) {
deleted++;
}
}
this.added=added;
this.deleted=deleted;
}
