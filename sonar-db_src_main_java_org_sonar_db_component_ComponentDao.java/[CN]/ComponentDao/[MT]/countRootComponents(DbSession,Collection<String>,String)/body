{
  Map<String,Object> parameters=newHashMapWithExpectedSize(2);
  addPartialQueryParameterIfNotNull(parameters,query);
  addQualifiers(parameters,qualifiers);
  return mapper(session).countRootComponents(parameters);
}
