{
  Locale locale=UserSession.get().locale();
  String localeParam=request.param("locale");
  if (localeParam != null) {
    locale=LocaleUtils.toLocale(localeParam);
  }
  JsonWriter json=response.newJsonWriter().beginObject();
  for (  String messageKey : i18n.getPropertyKeys()) {
    json.prop(messageKey,i18n.message(locale,messageKey,messageKey));
  }
  json.endObject().close();
}
