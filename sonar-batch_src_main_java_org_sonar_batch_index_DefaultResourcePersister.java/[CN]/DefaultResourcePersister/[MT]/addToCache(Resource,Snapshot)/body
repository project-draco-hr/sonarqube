{
  if (snapshot != null && !ResourceUtils.isLibrary(resource)) {
    snapshotsByResource.put(resource,snapshot);
    resourceCache.add(resource);
    snapshotCache.put(resource.getEffectiveKey(),snapshot);
  }
}
