{
  setupData("fixture");
  reviewsDecorator.closeReviewsOnResolvedViolations(null,666,222);
  int count=reviewsDecorator.reopenReviewsOnUnresolvedViolations(null,666);
  assertThat(count,is(1));
  verify(notificationManager,times(4)).scheduleForSending(any(Notification.class));
  checkTablesWithExcludedColumns("shouldReopenResolvedReviewWithNonFixedViolation",new String[]{"updated_at"},"reviews");
  try {
    checkTables("shouldReopenResolvedReviewWithNonFixedViolation","reviews");
    fail("'updated_at' columns are identical whereas they should be different.");
  }
 catch (  ComparisonFailure e) {
  }
}
