{
  String encodedKey=settings.getString(SECRET_KEY_PROPERTY);
  if (encodedKey == null) {
    SecretKey newSecretKey=generateSecretKey();
    settings.setProperty(SECRET_KEY_PROPERTY,Base64.getEncoder().encodeToString(newSecretKey.getEncoded()));
    this.secretKey=newSecretKey;
  }
 else {
    this.secretKey=decodeSecretKeyProperty(encodedKey);
  }
}
