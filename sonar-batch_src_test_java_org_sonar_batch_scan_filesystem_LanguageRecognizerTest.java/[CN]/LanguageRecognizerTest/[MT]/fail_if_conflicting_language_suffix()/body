{
  Languages languages=new Languages(new MockLanguage("xml","xhtml"),new MockLanguage("web","xhtml"));
  Settings settings=new Settings();
  LanguageRecognizer recognizer=new LanguageRecognizer(settings,languages);
  recognizer.start();
  thrown.expect(SonarException.class);
  thrown.expectMessage(new BaseMatcher<String>(){
    @Override public void describeTo(    Description arg0){
    }
    @Override public boolean matches(    Object arg0){
      return arg0.toString().contains("Language of file 'abc.xhtml' can not be decided as the file matches patterns of both ") && arg0.toString().contains("sonar.lang.patterns.web : **/*.xhtml") && arg0.toString().contains("sonar.lang.patterns.xml : **/*.xhtml");
    }
  }
);
  recognizer.of(newInputFile("abc.xhtml"));
  recognizer.stop();
}
