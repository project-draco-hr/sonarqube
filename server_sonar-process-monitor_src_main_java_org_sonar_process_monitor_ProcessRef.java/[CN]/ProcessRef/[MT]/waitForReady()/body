{
  boolean ready=false;
  while (!ready) {
    if (isStopped()) {
      throw new MessageException(String.format("%s failed to start",this));
    }
    ready=commands.isReady();
    try {
      Thread.sleep(200L);
    }
 catch (    InterruptedException e) {
      throw new IllegalStateException(String.format("Interrupted while waiting for %s to be ready",this),e);
    }
  }
}
