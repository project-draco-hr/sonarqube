{
  RuleFailureModel referenceViolation=getSession().getSingleResult(RuleFailureModel.class,"id",1);
  Violation violation=Violation.create(rule1,javaFile).setSeverity(RulePriority.MAJOR).setMessage("new message");
  when(tracker.getReferenceViolation(violation)).thenReturn(referenceViolation);
  decorator.saveViolations(project,Arrays.asList(violation));
  checkTables("shouldCopyPermanentIdFromReferenceViolation","rule_failures");
}
