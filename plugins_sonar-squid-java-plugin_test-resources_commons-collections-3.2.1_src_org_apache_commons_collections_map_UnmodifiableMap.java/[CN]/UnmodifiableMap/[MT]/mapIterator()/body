{
  if (map instanceof IterableMap) {
    MapIterator it=((IterableMap)map).mapIterator();
    return UnmodifiableMapIterator.decorate(it);
  }
 else {
    MapIterator it=new EntrySetMapIterator(map);
    return UnmodifiableMapIterator.decorate(it);
  }
}
