{
  Property function=properties.function();
  Property factor=properties.factor();
  Property offset=properties.offset();
  if (function != null) {
    String functionKey=function.getTextValue();
    if ("linear_threshold".equals(functionKey)) {
      function.setTextValue(Requirement.FUNCTION_LINEAR);
      offset.setValue(0d);
      messages.addWarningText(String.format("Linear with threshold function is no more used, function of the requirement '%s' is replaced by linear.",requirement.ruleKey()));
    }
 else     if ("constant_resource".equals(functionKey)) {
      messages.addWarningText(String.format("Constant/file function is no more used, requirements '%s' are ignored.",requirement.ruleKey()));
      return null;
    }
    requirement.setFunction(function.getTextValue());
    if (factor != null) {
      requirement.setFactor(WorkUnit.create(factor.getValue(),factor.getTextValue()));
    }
    if (offset != null) {
      requirement.setOffset(WorkUnit.create(offset.getValue(),offset.getTextValue()));
    }
    return requirement;
  }
  return null;
}
