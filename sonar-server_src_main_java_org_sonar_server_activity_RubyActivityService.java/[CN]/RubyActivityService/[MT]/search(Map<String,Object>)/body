{
  QProfileActivityQuery query=new QProfileActivityQuery();
  List<String> profileKeys=RubyUtils.toStrings(params.get("profileKeys"));
  if (profileKeys != null) {
    query.setQprofileKeys(profileKeys);
  }
  Date since=RubyUtils.toDate(params.get("since"));
  if (since != null) {
    query.setSince(since);
  }
  Date to=RubyUtils.toDate(params.get("to"));
  if (to != null) {
    query.setTo(to);
  }
  return service.findActivities(query,new QueryOptions().setMaxLimit());
}
