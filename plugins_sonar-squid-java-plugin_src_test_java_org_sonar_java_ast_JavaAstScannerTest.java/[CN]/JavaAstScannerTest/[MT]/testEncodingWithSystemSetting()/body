{
  SourceProject macRoman;
  SourceProject cp1252;
  String currentEncoding=System.getProperty("file.encoding");
  try {
    System.setProperty("file.encoding","UTF-16");
    Charset defaultEncoding=Charset.defaultCharset();
    if (!defaultEncoding.displayName().equals("UTF-16")) {
      return;
    }
    System.setProperty("file.encoding","MacRoman");
    squid=new Squid(new JavaSquidConfiguration(false));
    squid.register(JavaAstScanner.class).scanFile(getFile("/special_cases/encoding/MacRomanEncoding.java"));
    macRoman=squid.aggregate();
    System.setProperty("file.encoding","CP1252");
    squid=new Squid(new JavaSquidConfiguration(false));
    squid.register(JavaAstScanner.class).scanFile(getFile("/special_cases/encoding/CP1252Encoding.java"));
    cp1252=squid.aggregate();
  }
  finally {
    System.setProperty("file.encoding",currentEncoding);
  }
  assertEquals(4,macRoman.getInt(Metric.METHODS));
  assertEquals(4,cp1252.getInt(Metric.METHODS));
}
