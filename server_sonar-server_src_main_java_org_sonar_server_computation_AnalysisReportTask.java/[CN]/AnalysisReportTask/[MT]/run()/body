{
  AnalysisReportDto report=queue.bookNextAvailable();
  if (report != null) {
    try {
      service.analyzeReport(report);
      report.succeed();
    }
 catch (    Exception exception) {
      LOG.error(String.format("Analysis of report %s failed",report),exception);
      report.fail();
    }
 finally {
      removeFromQueue(report);
    }
  }
}
