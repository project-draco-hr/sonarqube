{
  RulesProfile profile=RulesProfile.create();
  try {
    XStream xStream=FindBugsFilter.createXStream();
    FindBugsFilter filter=(FindBugsFilter)xStream.fromXML(findbugsConf);
    activateRulesByCategory(profile,filter,messages);
    activateRulesByCode(profile,filter,messages);
    activateRulesByPattern(profile,filter,messages);
    return profile;
  }
 catch (  Exception e) {
    String errorMessage="The Findbugs configuration file is not valid";
    messages.addErrorText(errorMessage + " : " + e.getMessage());
    LOG.error(errorMessage,e);
    return profile;
  }
}
