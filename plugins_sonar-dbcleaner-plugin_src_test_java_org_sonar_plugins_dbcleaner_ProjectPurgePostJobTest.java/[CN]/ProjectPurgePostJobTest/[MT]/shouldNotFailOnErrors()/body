{
  PurgeDao purgeDao=mock(PurgeDao.class);
  when(purgeDao.purgeProject(anyInt())).thenThrow(new RuntimeException());
  ProjectPurgePostJob job=new ProjectPurgePostJob(purgeDao,new Settings(),mock(DefaultPeriodCleaner.class));
  job.executeOn(newProject(),mock(SensorContext.class));
  verify(purgeDao).purgeProject(anyInt());
}
