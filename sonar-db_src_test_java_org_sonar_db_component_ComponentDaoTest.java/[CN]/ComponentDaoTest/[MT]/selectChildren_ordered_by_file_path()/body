{
  ComponentDto project=newProjectDto(PROJECT_UUID);
  SnapshotDto projectSnapshot=componentDb.insertProjectAndSnapshot(project);
  componentDb.insertComponentAndSnapshot(newFileDto(project,"file-uuid-1").setName("file-name-1").setPath("3"),projectSnapshot);
  componentDb.insertComponentAndSnapshot(newFileDto(project,"file-uuid-2").setName("file-name-2").setPath("2"),projectSnapshot);
  componentDb.insertComponentAndSnapshot(newFileDto(project,"file-uuid-3").setName("file-name-3").setPath("1"),projectSnapshot);
  db.commit();
  componentDb.indexAllComponents();
  ComponentTreeQuery query=newTreeQuery(PROJECT_UUID).setSortFields(singletonList("path")).setAsc(true).build();
  List<ComponentDto> result=underTest.selectChildren(dbSession,query);
  assertThat(result).extracting("uuid").containsExactly("file-uuid-3","file-uuid-2","file-uuid-1");
}
