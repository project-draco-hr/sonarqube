{
  DefaultIssue issue=createStandardIssue().setStatus("RESOLVED").setResolution("FIXED");
  when(issueService.getIssueByKey(session,issue.key())).thenReturn(issue);
  when(issueService.listTransitions(eq(issue))).thenReturn(newArrayList(Transition.create("reopen","RESOLVED","REOPEN")));
  MockUserSession.set().setLogin("john");
  WsTester.TestRequest request=tester.newGetRequest("api/issues","show").setParam("key",issue.key());
  request.execute().assertJson(getClass(),"show_issue_with_transitions.json");
}
