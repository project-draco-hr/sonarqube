{
  String issueKey="ABCD";
  DefaultIssue issue=createIssue();
  when(issueService.getIssueByKey(session,issueKey)).thenReturn(issue);
  ComponentDto project=mock(ComponentDto.class);
  when(project.key()).thenReturn("org.sonar.Sonar");
  when(project.longName()).thenReturn("SonarQube");
  when(componentDao.getNullableByKey(session,project.key())).thenReturn(project);
  MockUserSession.set();
  WsTester.TestRequest request=tester.newGetRequest("api/issues","show").setParam("key",issueKey);
  request.execute().assertJson(getClass(),"show_issue_on_removed_component.json");
}
