{
  try {
    currentLine=new Line(1);
    int nextChar;
    do {
      nextChar=reader.read();
      if (isEndOfFile(nextChar)) {
        notifyHandlersAboutEndOfLine();
        break;
      }
      lastReadCharacter=(char)nextChar;
      if (isEndOfLine(nextChar)) {
        popOptionalRemainingEndOfLineChar(reader);
        createNewLine();
        continue;
      }
      appendToStringBuilder(nextChar);
      notifyHandlersAboutNewChar();
    }
 while (true);
  }
 catch (  IOException e) {
    throw new AnalysisException("Unable to read the source code.",e);
  }
catch (  Exception e) {
    throw new AnalysisException("A problem was encountered when analyzing line " + lines.size() + " : '"+ currentStringBuilder.toString()+ "'",e);
  }
}
