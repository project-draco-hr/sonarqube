{
  NodesStatsRequestBuilder nodesStatsRequest=searchClient.prepareNodesStats().all();
  NodesStatsResponse nodesStats=nodesStatsRequest.get();
  Map<String,NodeHealth> health=Maps.newHashMap();
  for (  Entry<String,NodeStats> nodeEntry : nodesStats.getNodesMap().entrySet()) {
    health.put(nodeEntry.getKey(),new NodeHealth(nodeEntry.getValue()));
  }
  return ImmutableMap.copyOf(health);
}
