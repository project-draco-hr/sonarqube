{
  NodesStatsRequestBuilder nodesStatsRequest=searchClient.admin().cluster().prepareNodesStats().all();
  NodesStatsResponse nodesStats=searchClient.execute(nodesStatsRequest);
  Map<String,NodeHealth> health=Maps.newHashMap();
  for (  Entry<String,NodeStats> nodeEntry : nodesStats.getNodesMap().entrySet()) {
    health.put(nodeEntry.getKey(),new NodeHealth(nodeEntry.getValue()));
  }
  return ImmutableMap.copyOf(health);
}
