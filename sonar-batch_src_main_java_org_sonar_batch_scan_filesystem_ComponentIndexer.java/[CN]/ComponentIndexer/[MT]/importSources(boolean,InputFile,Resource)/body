{
  try {
    String source=Files.toString(inputFile.file(),inputFile.encoding());
    source=CharMatcher.anyOf("\uFEFF").removeFrom(source);
    String[] lines=source.split("(\r)?\n|\r",-1);
    inputFile.attributes().put(InputFile.ATTRIBUTE_LINE_COUNT,String.valueOf(lines.length));
    fileCache.put(module.getKey(),inputFile);
    if (shouldImportSource) {
      sonarIndex.setSource(sonarFile,source);
    }
  }
 catch (  Exception e) {
    throw new SonarException("Unable to read and import the source file : '" + inputFile.absolutePath() + "' with the charset : '"+ inputFile.encoding()+ "'.",e);
  }
}
