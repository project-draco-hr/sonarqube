{
  DbSession dbSession=db.openSession(false);
  try {
    List<UpdateRequest> requests=new ArrayList<UpdateRequest>();
    requests.addAll(normalize(db.ruleDao().getNullableByKey(dbSession,key)));
    for (    RuleParamDto param : db.ruleDao().findRuleParamsByRuleKey(dbSession,key)) {
      requests.addAll(normalizeNested(param,key));
    }
    return requests;
  }
  finally {
    dbSession.close();
  }
}
