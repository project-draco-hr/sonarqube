{
  DbSession dbSession=db.openSession(false);
  List<UpdateRequest> requests=new ArrayList<UpdateRequest>();
  try {
    RuleDto rule=db.ruleDao().getByKey(dbSession,key);
    requests.addAll(normalize(rule));
    for (    RuleParamDto param : db.ruleDao().findRuleParamsByRuleKey(dbSession,key)) {
      requests.addAll(normalizeNested(param,key));
    }
  }
  finally {
    dbSession.close();
  }
  return requests;
}
