{
  configure(getClass().getResource("SwitchLogbackAppenderTest/valid-switch.xml"));
  String initialThreadName=Thread.currentThread().getName();
  Thread.currentThread().setName(AnalysisReportTaskLauncher.ANALYSIS_REPORT_THREAD_NAME_PREFIX + "test");
  try {
    logger.info("hello");
    assertThat(analyisReport.list).hasSize(1);
    assertThat(analyisReport.list.get(0).getMessage()).isEqualTo("hello");
    assertThat(console.list).isEmpty();
    logger.warn("a warning");
    assertThat(analyisReport.list).hasSize(2);
    assertThat(analyisReport.list.get(1).getMessage()).isEqualTo("a warning");
    assertThat(console.list).hasSize(1);
    assertThat(console.list.get(0).getMessage()).isEqualTo("a warning");
    logger.warn("an error");
    assertThat(analyisReport.list).hasSize(3);
    assertThat(analyisReport.list.get(2).getMessage()).isEqualTo("an error");
    assertThat(console.list).hasSize(2);
    assertThat(console.list.get(1).getMessage()).isEqualTo("an error");
  }
  finally {
    Thread.currentThread().setName(initialThreadName);
  }
}
