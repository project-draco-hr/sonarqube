{
  Issue issue=createStandardIssue().setStatus("OPEN");
  issues.add(issue);
  Action action=mock(Action.class);
  when(action.key()).thenReturn("link-to-jira");
  when(actionService.listAvailableActions(issue)).thenReturn(newArrayList(action));
  MockUserSession.set().setLogin("john");
  WsTester.TestRequest request=tester.newRequest("show").setParam("key",issue.key());
  request.execute().assertJson(getClass(),"show_issue_with_actions_defined_by_plugins.json");
}
