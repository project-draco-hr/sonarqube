{
  setupData("deactivate_user");
  when(system2.now()).thenReturn(1500000000000L);
  String login="marius";
  boolean deactivated=dao.deactivateUserByLogin(login);
  assertThat(deactivated).isTrue();
  assertThat(dao.selectActiveUserByLogin(login)).isNull();
  UserDto userDto=dao.getUser(100);
  assertThat(userDto.isActive()).isFalse();
  assertThat(userDto.getUpdatedAt()).isEqualTo(1500000000000L);
  checkTables("deactivate_user","dashboards","active_dashboards","groups_users","issue_filters","issue_filter_favourites","measure_filters","measure_filter_favourites","properties","user_roles");
}
