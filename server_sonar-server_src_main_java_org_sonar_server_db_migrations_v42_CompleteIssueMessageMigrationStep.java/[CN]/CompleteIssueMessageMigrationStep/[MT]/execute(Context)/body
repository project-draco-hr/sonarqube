{
  MassUpdate massUpdate=context.prepareMassUpdate();
  massUpdate.select("SELECT i.id, r.name FROM issues i INNER JOIN rules r ON r.id=i.rule_id WHERE i.message IS NULL");
  massUpdate.update("UPDATE issues SET message=? WHERE id=?");
  massUpdate.execute(new MassUpdate.Handler(){
    @Override public boolean handle(    Select.Row row,    SqlStatement update) throws SQLException {
      Long issueId=row.getNullableLong(1);
      String ruleName=row.getNullableString(2);
      update.setString(1,ruleName);
      update.setLong(2,issueId);
      return true;
    }
  }
);
}
