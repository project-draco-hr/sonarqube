{
  Properties properties=new Properties();
  properties.setProperty(MonitoredProcess.NAME_PROPERTY,DummyProcess.NAME);
  final DummyProcess dummyProcess=new DummyProcess(new Props(properties),true);
  dummyProcess.setTimeout(1000L).setCheckDelay(500L);
  Thread process=new Thread(new Runnable(){
    @Override public void run(){
      dummyProcess.start();
    }
  }
);
  assertThat(dummyProcess.isReady()).isFalse();
  assertThat(dummyProcess.isTerminated()).isFalse();
  process.start();
  Thread.sleep(100);
  int count=0;
  for (int i=0; i < 3; i++) {
    dummyProcess.ping();
    assertThat(dummyProcess.isReady()).isTrue();
    assertThat(dummyProcess.isTerminated()).isFalse();
    Thread.sleep(300);
    count++;
  }
  assertThat(count).isEqualTo(3);
  process.join();
  assertThat(dummyProcess.isReady()).isTrue();
  assertThat(dummyProcess.isTerminated()).isTrue();
  assertThat(dummyProcess.getCheckFile()).isNotNull();
  assertThat(dummyProcess.getCheckFile().getName()).isEqualTo(DummyProcess.CHECKFILE_NAME);
}
