{
  Properties properties=new Properties();
  properties.setProperty(MonitoredProcess.NAME_PROPERTY,DummyProcess.NAME);
  final DummyProcess dummyProcess=new DummyProcess(new Props(properties),true);
  dummyProcess.setTimeout(Long.MAX_VALUE).setCheckDelay(500L);
  Thread process=new Thread(new Runnable(){
    @Override public void run(){
      dummyProcess.start();
    }
  }
);
  assertThat(dummyProcess.isReady()).isFalse();
  assertThat(dummyProcess.isTerminated()).isFalse();
  process.start();
  Thread.sleep(100);
  assertThat(dummyProcess.isReady()).isTrue();
  assertThat(dummyProcess.isTerminated()).isFalse();
  dummyProcess.terminate();
  Thread.sleep(100);
  assertThat(dummyProcess.isReady()).isTrue();
  assertThat(dummyProcess.isTerminated()).isTrue();
  assertThat(dummyProcess.getCheckFile()).isNotNull();
  assertThat(dummyProcess.getCheckFile().getName()).isEqualTo(DummyProcess.CHECKFILE_NAME);
}
