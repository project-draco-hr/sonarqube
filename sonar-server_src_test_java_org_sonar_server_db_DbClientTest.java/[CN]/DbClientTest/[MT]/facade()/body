{
  MyBatis myBatis=db.myBatis();
  RuleDao ruleDao=new RuleDao();
  QualityProfileDao qualityProfileDao=new QualityProfileDao(myBatis,System2.INSTANCE);
  ActiveRuleDao activeRuleDao=new ActiveRuleDao(qualityProfileDao,ruleDao);
  DbClient client=new DbClient(db.database(),myBatis,ruleDao,activeRuleDao,qualityProfileDao);
  assertThat(client.database()).isSameAs(db.database());
  DbSession dbSession=client.openSession(true);
  assertThat(dbSession).isNotNull();
  assertThat(dbSession.getConnection().isClosed()).isFalse();
  dbSession.close();
  assertThat(client.qualityProfileDao()).isSameAs(qualityProfileDao);
  assertThat(client.activeRuleDao()).isSameAs(activeRuleDao);
  assertThat(client.ruleDao()).isSameAs(ruleDao);
}
