{
  final MemoryDatabaseConnector connector=new MemoryDatabaseConnector();
  connector.start();
  final DatabaseSessionFactory factory=new ThreadLocalDatabaseSessionFactory(connector);
  final DatabaseSession junitThreadSession=factory.getSession();
  assertTrue(junitThreadSession == factory.getSession());
  new Thread(){
    @Override public void run(){
      DatabaseSession threadSession=factory.getSession();
      assertTrue(threadSession != junitThreadSession);
    }
  }
.start();
}
