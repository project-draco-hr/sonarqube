{
  HttpRequestFactory requestFactory=new HttpRequestFactory(httpServer.url());
  httpServer.doReturnStatus(500);
  ActionPlanClient client=new DefaultActionPlanClient(requestFactory);
  try {
    client.delete("382f6f2e-ad9d-424a-b973-9b065e04348a");
    fail();
  }
 catch (  IllegalStateException e) {
    assertThat(e).hasMessage("Fail to delete action plan. Bad HTTP response status: 500");
  }
}
