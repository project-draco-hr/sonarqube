{
  TimeMachineConfiguration conf=mock(TimeMachineConfiguration.class);
  when(conf.isFileVariationEnabled()).thenReturn(true);
  VariationDecorator decorator=new VariationDecorator(mock(PastMeasuresLoader.class),mock(MetricFinder.class),conf);
  assertThat(decorator.shouldComputeVariation(CoreProperties.TIMEMACHINE_MODE_PREVIOUS_ANALYSIS,new JavaFile("org.foo.Bar")),is(true));
  assertThat(decorator.shouldComputeVariation(CoreProperties.TIMEMACHINE_MODE_DATE,new JavaFile("org.foo.Bar")),is(false));
  assertThat(decorator.shouldComputeVariation(CoreProperties.TIMEMACHINE_MODE_PREVIOUS_ANALYSIS,new File("org/foo/Bar.php")),is(true));
  assertThat(decorator.shouldComputeVariation(CoreProperties.TIMEMACHINE_MODE_DATE,new File("org/foo/Bar.php")),is(false));
  assertThat(decorator.shouldComputeVariation(CoreProperties.TIMEMACHINE_MODE_PREVIOUS_ANALYSIS,new Project("foo")),is(true));
}
