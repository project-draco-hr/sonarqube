{
  Notification notification=new Notification("issue-changes").setFieldValue("projectName","Struts").setFieldValue("projectKey","org.apache:struts").setFieldValue("componentName","org.apache.struts.Action").setFieldValue("key","ABCDE").setFieldValue("new.assignee","louis").setFieldValue("ruleName","Avoid Cycles").setFieldValue("message","Avoid Cycles");
  EmailMessage email=template.format(notification);
  String message=email.getMessage();
  String expectedMessage=TestUtils.getResourceContent("/org/sonar/plugins/core/issue/notification/IssueChangesEmailTemplateTest/email_with_issue_message_same_than_rule_name.txt");
  expectedMessage=StringUtils.remove(expectedMessage,'\r');
  assertThat(message).isEqualTo(expectedMessage);
}
