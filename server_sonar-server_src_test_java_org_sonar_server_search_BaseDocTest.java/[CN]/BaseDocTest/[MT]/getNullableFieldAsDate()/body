{
  BaseDoc doc=new BaseDoc(Maps.newHashMap()){
    @Override public String getId(){
      return null;
    }
    @Override public String getRouting(){
      return null;
    }
    @Override public String getParent(){
      return null;
    }
  }
;
  long now=System.currentTimeMillis();
  doc.setField("javaDate",new Date(now));
  assertThat(doc.getNullableFieldAsDate("javaDate").getTime()).isEqualTo(now);
  doc.setField("stringDate",IndexUtils.format(new Date(now)));
  assertThat(doc.getNullableFieldAsDate("stringDate").getTime()).isEqualTo(now);
  doc.setField("noValue",null);
  assertThat(doc.getNullableFieldAsDate("noValue")).isNull();
}
