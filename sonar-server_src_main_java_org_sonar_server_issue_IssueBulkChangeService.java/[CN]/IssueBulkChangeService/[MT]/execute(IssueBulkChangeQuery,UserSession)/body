{
  List<Issue> issues=newArrayList();
  verifyLoggedIn(userSession);
  for (  String actionName : issueBulkChangeQuery.actions()) {
    Action action=getAction(actionName);
    action.verify(issueBulkChangeQuery.properties(actionName),userSession);
  }
  IssueQueryResult issueQueryResult=issueFinder.find(IssueQuery.builder().issueKeys(issueBulkChangeQuery.issues()).requiredRole(UserRole.USER).build());
  IssueChangeContext issueChangeContext=IssueChangeContext.createUser(new Date(),userSession.login());
  for (  Issue issue : issueQueryResult.issues()) {
    for (    String actionName : issueBulkChangeQuery.actions()) {
      try {
        Action action=getAction(actionName);
        ActionContext actionContext=new ActionContext(issue,issueUpdater,issueChangeContext);
        if (action.supports(issue) && action.execute(issueBulkChangeQuery.properties(actionName),actionContext)) {
          issueStorage.save((DefaultIssue)issue);
          issueNotifications.sendChanges((DefaultIssue)issue,issueChangeContext,issueQueryResult);
          issues.add(issue);
        }
      }
 catch (      Exception e) {
        LOG.info("An error occur when trying to apply the action : " + actionName + " on issue : "+ issue.key()+ ". This issue has been ignored.",e);
      }
    }
  }
  return issues;
}
