{
  dbTester.truncateTables();
  groupDao=new GroupDao(System2.INSTANCE);
  userGroupDao=new UserGroupDao();
  roleDao=new RoleDao();
  permissionTemplateDao=new PermissionTemplateDao(dbTester.myBatis(),System2.INSTANCE);
  DbClient dbClient=new DbClient(dbTester.database(),dbTester.myBatis(),groupDao,userGroupDao,roleDao,permissionTemplateDao);
  session=dbClient.openSession(false);
  Settings settings=new Settings().setProperty(CoreProperties.CORE_DEFAULT_GROUP,CoreProperties.CORE_DEFAULT_GROUP_DEFAULT_VALUE);
  GroupDto defaultGroup=groupDao.insert(session,new GroupDto().setName(CoreProperties.CORE_DEFAULT_GROUP_DEFAULT_VALUE));
  defaultGroupId=defaultGroup.getId();
  session.commit();
  tester=new WsTester(new UserGroupsWs(new DeleteAction(dbClient,userSession,settings)));
}
