byte[] buf
int ptr
int end
