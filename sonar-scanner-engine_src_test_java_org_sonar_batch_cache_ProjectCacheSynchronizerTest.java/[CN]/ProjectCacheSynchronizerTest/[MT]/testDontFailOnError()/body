{
  ProjectCacheSynchronizer synchronizer=createMockedLoaders(true,new Date());
  Date d=new Date(new Date().getTime() - 60 * 60 * 24* 1000);
  when(cacheStatus.getSyncStatus()).thenReturn(d);
  when(projectRepositoriesLoader.load(anyString(),anyBoolean(),any(MutableBoolean.class))).thenThrow(IllegalStateException.class);
  synchronizer.load(PROJECT_KEY,false);
  verify(cacheStatus).getSyncStatus();
  verifyNoMoreInteractions(cacheStatus);
}
