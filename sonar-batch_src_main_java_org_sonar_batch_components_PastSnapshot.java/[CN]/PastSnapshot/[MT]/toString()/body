{
  if (StringUtils.equals(mode,PastSnapshotFinderByVersion.MODE)) {
    String label=String.format("Compare to version %s",modeParameter);
    if (getTargetDate() != null) {
      label+=String.format(" (%s)",DateUtils.formatDate(getTargetDate()));
    }
    return label;
  }
  if (StringUtils.equals(mode,PastSnapshotFinderByDays.MODE)) {
    String label=String.format("Compare over %s days (%s",modeParameter,DateUtils.formatDate(getTargetDate()));
    if (isRelatedToSnapshot()) {
      label+=", analysis of " + getDate();
    }
    label+=")";
    return label;
  }
  if (StringUtils.equals(mode,CoreProperties.TIMEMACHINE_MODE_PREVIOUS_ANALYSIS)) {
    String label="Compare to previous analysis";
    if (isRelatedToSnapshot()) {
      label+=String.format(" (%s)",DateUtils.formatDate(getDate()));
    }
    return label;
  }
  if (StringUtils.equals(mode,PastSnapshotFinderByDate.MODE)) {
    String label="Compare to date " + DateUtils.formatDate(getTargetDate());
    if (isRelatedToSnapshot()) {
      label+=String.format(" (analysis of %s)",DateUtils.formatDate(getDate()));
    }
    return label;
  }
  return ReflectionToStringBuilder.toString(this);
}
