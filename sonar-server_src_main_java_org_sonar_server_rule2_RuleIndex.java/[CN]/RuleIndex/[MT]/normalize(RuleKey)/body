{
  RuleDto rule=dao.getByKey(key);
  try {
    XContentBuilder document=jsonBuilder().startObject();
    Map<String,Object> properties=BeanUtils.describe(rule);
    for (    Entry<String,Object> property : properties.entrySet()) {
      LOG.info("NORMALIZING: {} -> {}",property.getKey(),property.getValue());
      document.field(property.getKey(),property.getValue());
    }
    for (    ActiveRuleDto activeRule : activeRuleDao.selectByRuleId(rule.getId())) {
      Map<String,Object> activeRuleProperties=BeanUtils.describe(activeRule);
      for (      Entry<String,Object> activeRuleProp : activeRuleProperties.entrySet()) {
        LOG.info("NORMALIZING: --- {} -> {}",activeRuleProp.getKey(),activeRuleProp.getValue());
        document.field(activeRuleProp.getKey(),activeRuleProp.getValue());
      }
    }
    return document.endObject();
  }
 catch (  IOException e) {
    LOG.error("Could not normalize {} in {}",key,this.getClass().getSimpleName());
    e.printStackTrace();
  }
catch (  IllegalAccessException e) {
    LOG.error("Could not normalize {} in {}",key,this.getClass().getSimpleName());
    e.printStackTrace();
  }
catch (  InvocationTargetException e) {
    LOG.error("Could not normalize {} in {}",key,this.getClass().getSimpleName());
    e.printStackTrace();
  }
catch (  NoSuchMethodException e) {
    LOG.error("Could not normalize {} in {}",key,this.getClass().getSimpleName());
    e.printStackTrace();
  }
  return null;
}
