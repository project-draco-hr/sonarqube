{
  if (query.onComponentOnly()) {
    Set<String> allComponents=Sets.newHashSet();
    allComponents.addAll(query.projectUuids());
    allComponents.addAll(query.moduleUuids());
    allComponents.addAll(query.componentUuids());
    filters.put(IssueIndexDefinition.FIELD_ISSUE_COMPONENT_UUID,matchFilter(IssueIndexDefinition.FIELD_ISSUE_COMPONENT_UUID,allComponents));
  }
 else {
    filters.put(IssueIndexDefinition.FIELD_ISSUE_PROJECT_UUID,matchFilter(IssueIndexDefinition.FIELD_ISSUE_PROJECT_UUID,query.projectUuids()));
    filters.put(IssueIndexDefinition.FIELD_ISSUE_MODULE_UUID,matchFilter(IssueIndexDefinition.FIELD_ISSUE_MODULE_UUID,query.moduleUuids()));
    FilterBuilder componentFilter=matchFilter(IssueIndexDefinition.FIELD_ISSUE_COMPONENT_UUID,query.componentUuids());
    FilterBuilder modulePathFilter=matchFilter(IssueIndexDefinition.FIELD_ISSUE_MODULE_PATH,query.componentUuids());
    FilterBuilder compositeFilter=null;
    if (componentFilter != null) {
      if (modulePathFilter != null) {
        compositeFilter=FilterBuilders.orFilter(componentFilter,modulePathFilter);
      }
 else {
        compositeFilter=componentFilter;
      }
    }
 else     if (modulePathFilter != null) {
      compositeFilter=modulePathFilter;
    }
    filters.put(IssueIndexDefinition.FIELD_ISSUE_COMPONENT_UUID,compositeFilter);
  }
}
