{
  FilterBuilder viewFilter=viewFilter(query.viewUuids());
  FilterBuilder projectFilter=matchFilter(IssueIndexDefinition.FIELD_ISSUE_PROJECT_UUID,query.projectUuids());
  FilterBuilder moduleRootFilter=moduleRootFilter(query.moduleRootUuids());
  FilterBuilder moduleFilter=matchFilter(IssueIndexDefinition.FIELD_ISSUE_MODULE_UUID,query.moduleUuids());
  FilterBuilder directoryRootFilter=directoryFilter(query.moduleUuids(),query.directories());
  FilterBuilder directoryFilter=matchFilter(IssueIndexDefinition.FIELD_ISSUE_DIRECTORY_PATH,query.directories());
  FilterBuilder fileFilter=matchFilter(IssueIndexDefinition.FIELD_ISSUE_COMPONENT_UUID,query.fileUuids());
  FilterBuilder componentFilter=matchFilter(IssueIndexDefinition.FIELD_ISSUE_COMPONENT_UUID,query.componentUuids());
  if (BooleanUtils.isTrue(query.isContextualized())) {
    if (viewFilter != null) {
      filters.put(FILTER_COMPONENT_ROOT,viewFilter);
      filters.put(IssueIndexDefinition.FIELD_ISSUE_PROJECT_UUID,projectFilter);
      filters.put(IssueIndexDefinition.FIELD_ISSUE_MODULE_UUID,moduleFilter);
      filters.put(IssueIndexDefinition.FIELD_ISSUE_DIRECTORY_PATH,directoryFilter);
      filters.put(IssueIndexDefinition.FIELD_ISSUE_COMPONENT_UUID,fileFilter);
    }
 else     if (projectFilter != null) {
      filters.put(FILTER_COMPONENT_ROOT,projectFilter);
      filters.put(IssueIndexDefinition.FIELD_ISSUE_MODULE_UUID,moduleFilter);
      filters.put(IssueIndexDefinition.FIELD_ISSUE_DIRECTORY_PATH,directoryFilter);
      filters.put(IssueIndexDefinition.FIELD_ISSUE_COMPONENT_UUID,fileFilter);
    }
 else     if (moduleRootFilter != null) {
      filters.put(FILTER_COMPONENT_ROOT,moduleRootFilter);
      filters.put(IssueIndexDefinition.FIELD_ISSUE_MODULE_UUID,moduleFilter);
      filters.put(IssueIndexDefinition.FIELD_ISSUE_DIRECTORY_PATH,directoryFilter);
      filters.put(IssueIndexDefinition.FIELD_ISSUE_COMPONENT_UUID,fileFilter);
    }
 else     if (directoryRootFilter != null) {
      filters.put(FILTER_COMPONENT_ROOT,directoryRootFilter);
      filters.put(IssueIndexDefinition.FIELD_ISSUE_COMPONENT_UUID,fileFilter);
    }
 else     if (fileFilter != null) {
      filters.put(FILTER_COMPONENT_ROOT,fileFilter);
    }
 else     if (componentFilter != null) {
      filters.put(FILTER_COMPONENT_ROOT,componentFilter);
    }
  }
 else {
    if (query.onComponentOnly()) {
      filters.put(IssueIndexDefinition.FIELD_ISSUE_COMPONENT_UUID,componentFilter);
    }
 else {
      filters.put(IssueIndexDefinition.FIELD_ISSUE_COMPONENT_UUID,fileFilter);
    }
    filters.put(IssueIndexDefinition.FIELD_ISSUE_PROJECT_UUID,projectFilter);
    filters.put(IssueIndexDefinition.FIELD_ISSUE_MODULE_UUID,moduleFilter);
    filters.put(IssueIndexDefinition.FIELD_ISSUE_DIRECTORY_PATH,directoryFilter);
    filters.put("view",viewFilter);
  }
}
