{
  SearchRequestBuilder esSearch=getClient().prepareSearch(IssueIndexDefinition.INDEX).setTypes(IssueIndexDefinition.TYPE_ISSUE);
  if (options.isScroll()) {
    esSearch.setSearchType(SearchType.SCAN);
    esSearch.setScroll(TimeValue.timeValueMinutes(3));
  }
  setSorting(query,esSearch);
  setPagination(options,esSearch);
  QueryBuilder esQuery=QueryBuilders.matchAllQuery();
  Map<String,FilterBuilder> filters=getFilters(query,options);
  setQueryFilter(esSearch,esQuery,filters);
  setFacets(query,options,filters,esQuery,esSearch);
  SearchResponse response=esSearch.get();
  return new Result<>(this,response);
}
