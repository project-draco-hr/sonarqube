{
  if (options.isFacet()) {
    StickyFacetBuilder stickyFacetBuilder=stickyFacetBuilder(esQuery,filters);
    addSimpleStickyFacetIfNeeded(options,stickyFacetBuilder,esSearch,IssueFilterParameters.SEVERITIES,IssueNormalizer.IssueField.SEVERITY.field(),0);
    addSimpleStickyFacetIfNeeded(options,stickyFacetBuilder,esSearch,IssueFilterParameters.STATUSES,IssueNormalizer.IssueField.STATUS.field(),0);
    addSimpleStickyFacetIfNeeded(options,stickyFacetBuilder,esSearch,IssueFilterParameters.ACTION_PLANS,IssueNormalizer.IssueField.ACTION_PLAN.field(),1,query.actionPlans().toArray());
    addSimpleStickyFacetIfNeeded(options,stickyFacetBuilder,esSearch,IssueFilterParameters.COMPONENT_ROOT_UUIDS,IssueNormalizer.IssueField.MODULE_PATH.field(),1,query.componentRootUuids().toArray());
    addSimpleStickyFacetIfNeeded(options,stickyFacetBuilder,esSearch,IssueFilterParameters.COMPONENT_UUIDS,IssueNormalizer.IssueField.COMPONENT.field(),1,query.componentUuids().toArray());
    addSimpleStickyFacetIfNeeded(options,stickyFacetBuilder,esSearch,IssueFilterParameters.LANGUAGES,IssueNormalizer.IssueField.LANGUAGE.field(),0,query.languages().toArray());
    addSimpleStickyFacetIfNeeded(options,stickyFacetBuilder,esSearch,IssueFilterParameters.RULES,IssueNormalizer.IssueField.RULE_KEY.field(),1,query.rules().toArray());
    addSimpleStickyFacetIfNeeded(options,stickyFacetBuilder,esSearch,IssueFilterParameters.REPORTERS,IssueNormalizer.IssueField.REPORTER.field(),1);
    if (options.facets().contains(IssueFilterParameters.RESOLUTIONS)) {
      esSearch.addAggregation(getResolutionFacet(query,options,filters,esQuery));
    }
    if (options.facets().contains(IssueFilterParameters.ASSIGNEES)) {
      esSearch.addAggregation(getAssigneesFacet(query,options,filters,esQuery));
    }
  }
}
