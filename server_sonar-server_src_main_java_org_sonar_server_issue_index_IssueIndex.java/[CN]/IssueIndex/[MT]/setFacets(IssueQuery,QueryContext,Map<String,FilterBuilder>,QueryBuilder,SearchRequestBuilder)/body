{
  if (options.isFacet()) {
    addSimpleStickyFacetIfNeeded(query,options,filters,esQuery,esSearch,IssueFilterParameters.SEVERITIES,IssueNormalizer.IssueField.SEVERITY.field());
    addSimpleStickyFacetIfNeeded(query,options,filters,esQuery,esSearch,IssueFilterParameters.STATUSES,IssueNormalizer.IssueField.STATUS.field());
    addSimpleStickyFacetIfNeeded(query,options,filters,esQuery,esSearch,IssueFilterParameters.ACTION_PLANS,IssueNormalizer.IssueField.ACTION_PLAN.field(),query.actionPlans().toArray());
    addSimpleStickyFacetIfNeeded(query,options,filters,esQuery,esSearch,IssueFilterParameters.COMPONENT_ROOTS,IssueNormalizer.IssueField.PROJECT.field(),query.componentRoots().toArray());
    addSimpleStickyFacetIfNeeded(query,options,filters,esQuery,esSearch,IssueFilterParameters.COMPONENTS,IssueNormalizer.IssueField.COMPONENT.field(),query.components().toArray());
    addSimpleStickyFacetIfNeeded(query,options,filters,esQuery,esSearch,IssueFilterParameters.LANGUAGES,IssueNormalizer.IssueField.LANGUAGE.field(),query.languages().toArray());
    addSimpleStickyFacetIfNeeded(query,options,filters,esQuery,esSearch,IssueFilterParameters.RULES,IssueNormalizer.IssueField.RULE_KEY.field(),query.rules().toArray());
    if (options.facets().contains(IssueFilterParameters.RESOLUTIONS)) {
      esSearch.addAggregation(getResolutionFacet(query,options,filters,esQuery));
    }
    if (options.facets().contains(IssueFilterParameters.ASSIGNEES)) {
      esSearch.addAggregation(getAssigneesFacet(query,options,filters,esQuery));
    }
  }
}
