{
  String rootProjectKey="project-key";
  String moduleKey="module-key";
  ResourceDto rootResource=mock(ResourceDto.class);
  when(rootResource.getKey()).thenReturn("another-project-key");
  when(resourceDao.getRootProjectByComponentKey(moduleKey)).thenReturn(rootResource);
  ProjectReactor reactor=createProjectReactor(rootProjectKey);
  reactor.getRoot().addSubProject(ProjectDefinition.create().setProperty(CoreProperties.PROJECT_KEY_PROPERTY,moduleKey));
  validator.validate(reactor);
}
