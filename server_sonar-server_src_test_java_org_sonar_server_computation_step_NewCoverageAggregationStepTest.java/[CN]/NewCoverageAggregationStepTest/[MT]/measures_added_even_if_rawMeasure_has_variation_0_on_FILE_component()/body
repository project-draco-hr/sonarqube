{
  treeRootHolder.setRoot(MOST_SIMPLE_ONE_FILE_TREE);
  periodHolder.setPeriods(createPeriod(2));
  measureRepository.addRawMeasure(4,NEW_LINES_TO_COVER_KEY,createMeasure(0d));
  underTest.execute();
  MeasureRepoEntry expectedEntry=entryOf(NEW_LINES_TO_COVER_KEY,createMeasure(0d));
  assertThat(toEntries(measureRepository.getNewRawMeasures(1))).containsOnly(expectedEntry);
  assertThat(toEntries(measureRepository.getNewRawMeasures(2))).containsOnly(expectedEntry);
  assertThat(toEntries(measureRepository.getNewRawMeasures(3))).containsOnly(expectedEntry);
  assertThat(measureRepository.getNewRawMeasures(4).isEmpty()).isTrue();
}
