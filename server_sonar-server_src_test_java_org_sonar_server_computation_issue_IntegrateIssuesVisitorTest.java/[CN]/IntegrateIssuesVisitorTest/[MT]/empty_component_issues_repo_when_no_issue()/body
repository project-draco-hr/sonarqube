{
  componentsWithUnprocessedIssues.setUuids(Collections.<String>emptySet());
  BatchReport.Issue reportIssue=BatchReport.Issue.newBuilder().setMsg("the message").setRuleRepository("xoo").setRuleKey("S001").setSeverity(Constants.Severity.BLOCKER).build();
  reportReader.putIssues(FILE_REF,asList(reportIssue));
  reportReader.putFileSourceLines(FILE_REF,"line1");
  underTest.visitAny(FILE);
  assertThat(componentIssuesRepository.getIssues(FILE_REF)).hasSize(1);
  underTest.visitAny(PROJECT);
  assertThat(componentIssuesRepository.getIssues(PROJECT)).isEmpty();
}
