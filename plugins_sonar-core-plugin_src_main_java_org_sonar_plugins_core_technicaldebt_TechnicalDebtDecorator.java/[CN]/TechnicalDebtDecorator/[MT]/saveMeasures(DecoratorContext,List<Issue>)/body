{
  ListMultimap<Requirement,Issue> issuesByRequirement=issuesByRequirement(issues);
  double total=0.0;
  Map<Characteristic,Double> characteristicCosts=newHashMap();
  Map<Requirement,Double> requirementCosts=newHashMap();
  for (  Requirement requirement : technicalDebtModel.requirements()) {
    List<Issue> requirementIssues=issuesByRequirement.get(requirement);
    double value=computeTechnicalDebt(CoreMetrics.TECHNICAL_DEBT,context,requirement,requirementIssues);
    requirementCosts.put(requirement,value);
    total+=value;
    propagateTechnicalDebtInParents(requirement.characteristic(),value,characteristicCosts);
  }
  context.saveMeasure(new Measure(CoreMetrics.TECHNICAL_DEBT,total,DECIMALS_PRECISION));
  saveOnCharacteristic(context,characteristicCosts);
  saveOnRequirement(context,requirementCosts);
}
