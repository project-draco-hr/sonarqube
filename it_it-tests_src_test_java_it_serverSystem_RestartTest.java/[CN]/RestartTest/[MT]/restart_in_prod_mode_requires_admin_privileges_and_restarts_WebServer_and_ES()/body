{
  if (!SystemUtils.IS_OS_WINDOWS) {
    orchestrator=Orchestrator.builderEnv().setOrchestratorProperty("orchestrator.keepWorkspace","true").build();
    orchestrator.start();
    try {
      newWsClient(orchestrator).system().restart();
      fail();
    }
 catch (    Exception e) {
      assertThat(e.getMessage()).contains("403");
    }
    newAdminWsClient(orchestrator).system().restart();
    Thread.sleep(5000);
    assertThat(FileUtils.readFileToString(orchestrator.getServer().getLogs())).contains("Requesting SonarQube restart");
  }
}
