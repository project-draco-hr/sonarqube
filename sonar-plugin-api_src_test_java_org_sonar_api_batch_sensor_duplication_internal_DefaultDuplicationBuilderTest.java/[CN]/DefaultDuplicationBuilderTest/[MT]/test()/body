{
  DefaultDuplicationBuilder builder=new DefaultDuplicationBuilder(new DefaultInputFile("foo.php").setKey("foo:foo.php"));
  List<DuplicationGroup> duplicationGroup=builder.originBlock(1,11).isDuplicatedBy(new DefaultInputFile("foo.php"),40,50).isDuplicatedBy(new DefaultInputFile("foo2.php"),1,10).originBlock(20,30).isDuplicatedBy(new DefaultInputFile("foo3.php"),30,40).build();
  assertThat(duplicationGroup).hasSize(2);
  Block originBlock=duplicationGroup.get(0).originBlock();
  assertThat(originBlock.resourceKey()).isEqualTo("foo:foo.php");
  assertThat(originBlock.startLine()).isEqualTo(1);
  assertThat(originBlock.length()).isEqualTo(11);
  assertThat(duplicationGroup.get(0).duplicates()).hasSize(2);
}
