{
  if (project.getReuseExistingRulesConfig()) {
    String existingExcludeFilterConfig=getFindbugsMavenPlugin().getParameter("excludeFilterFile");
    if (!StringUtils.isBlank(existingExcludeFilterConfig)) {
      return existingExcludeFilterConfig;
    }
  }
  FindBugsFilter findBugsFilter=new FindBugsFilter();
  if (project.getExclusionPatterns() != null) {
    for (    String exclusion : project.getExclusionPatterns()) {
      ClassFilter classFilter=new ClassFilter(FindbugsAntConverter.antToJavaRegexpConvertor(exclusion));
      findBugsFilter.addMatch(new Match(classFilter));
    }
  }
  return project.getFileSystem().writeToWorkingDirectory(findBugsFilter.toXml(),"findbugs-exclude.xml").getAbsolutePath();
}
