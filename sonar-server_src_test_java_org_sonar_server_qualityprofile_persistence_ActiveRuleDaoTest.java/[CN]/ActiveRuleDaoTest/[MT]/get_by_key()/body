{
  QualityProfileDto profile=QualityProfileDto.createFor("profile","xoo");
  qualityProfileDao.insert(session,profile);
  RuleDto rule=RuleDto.createFor(RuleKey.of("repo","rule"));
  ruleDao.insert(rule,session);
  ActiveRuleDto activeRuleDto=ActiveRuleDto.createFor(profile,rule).setSeverity("BLOCKER");
  activeRuleDao.insert(activeRuleDto,session);
  session.commit();
  ActiveRuleDto result=activeRuleDao.getByKey(activeRuleDto.getKey(),session);
  assertThat(result).isNotNull();
  assertThat(result.getKey()).isNotNull();
}
