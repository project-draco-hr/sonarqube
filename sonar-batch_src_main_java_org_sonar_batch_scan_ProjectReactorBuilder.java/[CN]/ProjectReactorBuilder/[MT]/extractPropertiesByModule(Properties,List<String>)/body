{
  Map<String,Properties> result=new HashMap<String,Properties>();
  for (  String moduleId : moduleIds) {
    result.put(moduleId,new Properties());
  }
  result.put("",new Properties());
  for (  Map.Entry<Object,Object> entry : allProperties.entrySet()) {
    String key=(String)entry.getKey();
    boolean found=false;
    for (    String moduleId : moduleIds) {
      String propertyPrefix=moduleId + ".";
      int prefixLength=propertyPrefix.length();
      if (key.startsWith(propertyPrefix)) {
        result.get(moduleId).put(key.substring(prefixLength),entry.getValue());
        found=true;
        break;
      }
    }
    if (!found) {
      result.get("").put(key,entry.getValue());
    }
  }
  return result;
}
