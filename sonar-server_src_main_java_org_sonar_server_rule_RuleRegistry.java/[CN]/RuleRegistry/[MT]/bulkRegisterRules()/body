{
  TimeProfiler profiler=new TimeProfiler();
  DatabaseSession session=sessionFactory.getSession();
  profiler.start("Rebuilding rules index");
  List<Rule> rules=session.getResults(Rule.class);
  try {
    bulkIndex(rules);
  }
 catch (  IOException ioe) {
    throw new IllegalStateException("Unable to index rules",ioe);
  }
 finally {
    profiler.stop();
  }
}
