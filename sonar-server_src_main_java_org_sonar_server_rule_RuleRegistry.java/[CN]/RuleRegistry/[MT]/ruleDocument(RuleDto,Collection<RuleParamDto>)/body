{
  XContentBuilder document=XContentFactory.jsonBuilder().startObject().field(RuleDocument.FIELD_ID,rule.getId()).field(RuleDocument.FIELD_KEY,rule.getRuleKey()).field(RuleDocument.FIELD_LANGUAGE,rule.getLanguage()).field(RuleDocument.FIELD_NAME,rule.getName()).field(RuleDocument.FIELD_DESCRIPTION,rule.getDescription()).field(RuleDocument.FIELD_PARENT_KEY,rule.getParentId() == null ? null : rule.getParentId()).field(RuleDocument.FIELD_REPOSITORY_KEY,rule.getRepositoryKey()).field(RuleDocument.FIELD_SEVERITY,rule.getPriority()).field(RuleDocument.FIELD_STATUS,rule.getStatus()).field(RuleDocument.FIELD_CREATED_AT,rule.getCreatedAt()).field(RuleDocument.FIELD_UPDATED_AT,rule.getUpdatedAt());
  if (!params.isEmpty()) {
    document.startArray(RuleDocument.FIELD_PARAMS);
    for (    RuleParamDto param : params) {
      document.startObject().field(RuleDocument.FIELD_PARAM_KEY,param.getName()).field(RuleDocument.FIELD_PARAM_TYPE,param.getType()).field(RuleDocument.FIELD_PARAM_DEFAULT_VALUE,param.getDefaultValue()).field(RuleDocument.FIELD_PARAM_DESCRIPTION,param.getDescription()).endObject();
    }
    document.endArray();
  }
  document.endObject();
  return document;
}
