{
  Map<String,String> params=Maps.newHashMap(query);
  SearchQuery searchQuery=SearchQuery.create();
  searchQuery.index(INDEX_RULES).type(TYPE_RULE).scrollSize(500);
  if (params.containsKey("nameOrKey")) {
    searchQuery.searchString(query.get("nameOrKey"));
    params.remove("nameOrKey");
  }
  for (  String key : params.keySet()) {
    searchQuery.field(key,params.get(key));
  }
  List<Integer> result=Lists.newArrayList();
  for (  String docId : searchIndex.findDocumentIds(searchQuery)) {
    result.add(Integer.parseInt(docId));
  }
  return result;
}
