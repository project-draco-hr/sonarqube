{
  if (shouldDecorateResource(resource)) {
    sumChildren(context,CoreMetrics.TEST_EXECUTION_TIME);
    sumChildren(context,CoreMetrics.SKIPPED_TESTS);
    Double tests=sumChildren(context,CoreMetrics.TESTS);
    Double errors=sumChildren(context,CoreMetrics.TEST_ERRORS);
    Double failures=sumChildren(context,CoreMetrics.TEST_FAILURES);
    if (isPositive(tests,true) && isPositive(errors,false) && isPositive(failures,false)) {
      Double errorsAndFailuresRatio=(errors + failures) * 100.0 / tests;
      context.saveMeasure(CoreMetrics.TEST_SUCCESS_DENSITY,100.0 - errorsAndFailuresRatio);
    }
  }
}
