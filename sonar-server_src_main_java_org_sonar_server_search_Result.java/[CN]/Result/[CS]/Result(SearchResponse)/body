{
  scrollId=response.getScrollId();
  this.hits=new ArrayList<K>();
  this.facets=LinkedListMultimap.create();
  this.total=(int)response.getHits().totalHits();
  this.timeInMillis=response.getTookInMillis();
  for (  SearchHit hit : response.getHits()) {
    this.hits.add(getSearchResult(hit.getSource()));
  }
  if (response.getAggregations() != null) {
    for (    Map.Entry<String,Aggregation> facet : response.getAggregations().asMap().entrySet()) {
      Terms aggregation=(Terms)facet.getValue();
      for (      Terms.Bucket value : aggregation.getBuckets()) {
        this.facets.put(facet.getKey(),new FacetValue(value.getKey(),(int)value.getDocCount()));
      }
    }
  }
}
