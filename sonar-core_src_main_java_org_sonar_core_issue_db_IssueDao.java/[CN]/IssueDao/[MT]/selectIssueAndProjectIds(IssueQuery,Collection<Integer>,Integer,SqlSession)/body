{
  final List<IssueDto> issues=newArrayList();
  ResultHandler resultHandler=new ResultHandler(){
    @Override public void handleResult(    ResultContext context){
      IssueDto issueDto=(IssueDto)context.getResultObject();
      if (authorizedRootProjectIds.contains(issueDto.getProjectId())) {
        issues.add(issueDto);
      }
      if (issues.size() >= maxResults) {
        context.stop();
      }
    }
  }
;
  session.select("selectIssueAndProjectIds",query,resultHandler);
  return issues;
}
