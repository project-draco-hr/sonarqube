{
  String translation=defaultText;
  String bundleBaseName=keys.get(key);
  if (bundleBaseName == null) {
    handleMissingBundle(key,defaultText,bundleBaseName);
  }
 else {
    try {
      ResourceBundle bundle=ResourceBundle.getBundle(bundleBaseName,locale,bundleClassLoader);
      String value=bundle.getString(key);
      if ("".equals(value)) {
        if (translation == null) {
          throw new MissingResourceException("VOID KEY : Key '" + key + "' (from bundle '"+ bundleBaseName+ "') returns a void value.",bundleBaseName,key);
        }
        LOG.warn("VOID KEY : Key '{}' (from bundle '{}') returns a void value. Default value '{}' is returned.",new Object[]{key,bundleBaseName,defaultText});
      }
 else {
        translation=value;
      }
    }
 catch (    MissingResourceException e) {
      if (translation == null) {
        throw e;
      }
      LOG.warn("BUNDLE NOT LOADED : Failed loading bundle {} from classloader {}. Default value '{}' is returned.",new Object[]{bundleBaseName,bundleClassLoader,defaultText});
    }
  }
  if (objects.length > 0) {
    LOG.debug("Translation : {}, {}, {}, {}",new String[]{locale.toString(),key,defaultText,Arrays.deepToString(objects)});
    return MessageFormat.format(translation,objects);
  }
 else {
    return translation;
  }
}
