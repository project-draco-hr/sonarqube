{
  String translation=defaultText;
  String bundleBaseName=keyToBundles.get(key);
  if (bundleBaseName == null) {
    handleMissingBundle(key,defaultText,bundleBaseName);
  }
 else {
    try {
      ResourceBundle bundle=ResourceBundle.getBundle(bundleBaseName,locale,bundleClassLoader);
      String value=bundle.getString(key);
      if ("".equals(value)) {
        if (translation == null) {
          throw new MissingResourceException("VOID KEY : Key '" + key + "' (from bundle '"+ bundleBaseName+ "') returns a void value.",bundleBaseName,key);
        }
      }
 else {
        translation=value;
      }
    }
 catch (    MissingResourceException e) {
      if (translation == null) {
        throw e;
      }
    }
  }
  if (objects.length > 0) {
    return MessageFormat.format(translation,objects);
  }
  return translation;
}
