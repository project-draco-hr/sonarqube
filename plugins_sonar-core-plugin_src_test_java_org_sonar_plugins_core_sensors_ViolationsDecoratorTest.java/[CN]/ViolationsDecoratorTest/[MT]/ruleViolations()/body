{
  when(context.getViolations()).thenReturn(createViolations());
  decorator.decorate(resource,context);
  verify(context).saveMeasure(argThat(new IsRuleMeasure(CoreMetrics.VIOLATIONS,ruleA1,RulePriority.CRITICAL,2.0)));
  verify(context).saveMeasure(argThat(new IsRuleMeasure(CoreMetrics.VIOLATIONS,ruleA2,RulePriority.MAJOR,1.0)));
  verify(context).saveMeasure(argThat(new IsRuleMeasure(CoreMetrics.VIOLATIONS,ruleB1,RulePriority.MINOR,1.0)));
}
