{
  RuleDto ruleDto=RuleTesting.newXooX1();
  dao.insert(dbSession,ruleDto);
  dbSession.commit();
  RuleDto persistedDto=dao.getNullableByKey(dbSession,RuleTesting.XOO_X1);
  assertThat(persistedDto.getTags().containsAll(ruleDto.getTags())).isTrue();
  assertThat(persistedDto.getSystemTags().containsAll(ruleDto.getSystemTags())).isTrue();
  Rule hit=index.getByKey(RuleTesting.XOO_X1);
  assertThat(hit.tags().containsAll(ruleDto.getTags())).isTrue();
  assertThat(hit.systemTags().containsAll(ruleDto.getSystemTags())).isTrue();
}
