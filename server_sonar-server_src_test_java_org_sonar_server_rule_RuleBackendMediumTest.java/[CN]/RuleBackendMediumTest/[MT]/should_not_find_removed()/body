{
  dao.insert(dbSession,RuleTesting.newXooX1(),RuleTesting.newXooX2().setStatus(RuleStatus.REMOVED));
  dbSession.commit();
  assertThat(dao.findAll(dbSession)).hasSize(2);
  assertThat(index.getByKey(RuleTesting.XOO_X2)).isNotNull();
  List<Rule> rules=index.search(new RuleQuery(),new QueryContext(userSessionRule)).getHits();
  assertThat(rules).hasSize(1);
  assertThat(rules.get(0).key()).isEqualTo(RuleTesting.XOO_X1);
}
