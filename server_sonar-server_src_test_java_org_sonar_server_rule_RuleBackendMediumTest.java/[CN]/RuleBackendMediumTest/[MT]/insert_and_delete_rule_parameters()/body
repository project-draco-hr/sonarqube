{
  RuleDto ruleDto=RuleTesting.newXooX1();
  dao.insert(dbSession,ruleDto);
  dbSession.commit();
  RuleParamDto minParamDto=new RuleParamDto().setName("min").setType(RuleParamType.INTEGER.type()).setDefaultValue("2").setDescription("Minimum");
  dao.addRuleParam(dbSession,ruleDto,minParamDto);
  RuleParamDto maxParamDto=new RuleParamDto().setName("max").setType(RuleParamType.INTEGER.type()).setDefaultValue("10").setDescription("Maximum");
  dao.addRuleParam(dbSession,ruleDto,maxParamDto);
  dbSession.commit();
  assertThat(dao.findRuleParamsByRuleKey(dbSession,RuleTesting.XOO_X1)).hasSize(2);
  assertThat(index.getByKey(RuleTesting.XOO_X1).params()).hasSize(2);
  dao.removeRuleParam(dbSession,ruleDto,maxParamDto);
  dbSession.commit();
  assertThat(dao.findRuleParamsByRuleKey(dbSession,RuleTesting.XOO_X1)).hasSize(1);
  assertThat(index.getByKey(RuleTesting.XOO_X1).params()).hasSize(1);
}
