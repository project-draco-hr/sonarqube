{
  if (!cmp.equals(a,startA,b,startB)) {
    return 0;
  }
  int length=0;
  int ai=startA;
  int bi=startB;
  while (ai < a.length() && bi < b.length() && cmp.equals(a,ai,b,bi)) {
    ai++;
    bi++;
    length++;
  }
  ai=startA;
  bi=startB;
  while (ai >= 0 && bi >= 0 && cmp.equals(a,ai,b,bi)) {
    ai--;
    bi--;
    length++;
  }
  return length - 1;
}
