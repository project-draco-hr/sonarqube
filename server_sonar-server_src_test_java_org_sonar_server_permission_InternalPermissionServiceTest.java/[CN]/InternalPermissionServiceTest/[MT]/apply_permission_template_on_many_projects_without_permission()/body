{
  MockUserSession.set().setLogin("admin").setGlobalPermissions();
  ComponentDto c1=mock(ComponentDto.class);
  when(c1.getId()).thenReturn(1L);
  when(componentDao.getByKey(session,"org.sample.Sample1")).thenReturn(c1);
  ComponentDto c2=mock(ComponentDto.class);
  when(c2.getId()).thenReturn(2L);
  when(componentDao.getByKey(session,"org.sample.Sample2")).thenReturn(c1);
  ComponentDto c3=mock(ComponentDto.class);
  when(c3.getId()).thenReturn(3L);
  when(componentDao.getByKey(session,"org.sample.Sample3")).thenReturn(c3);
  params=Maps.newHashMap();
  params.put("template_key","my_template_key");
  params.put("components","org.sample.Sample1,org.sample.Sample2,org.sample.Sample3");
  service.applyPermissionTemplate(params);
  verify(permissionFacade,never()).applyPermissionTemplate(eq(session),anyString(),anyLong());
  verifyZeroInteractions(issueAuthorizationDao);
}
