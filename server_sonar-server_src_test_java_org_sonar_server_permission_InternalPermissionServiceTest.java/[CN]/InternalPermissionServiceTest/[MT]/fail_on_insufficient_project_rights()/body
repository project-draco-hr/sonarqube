{
  try {
    ComponentDto project=ComponentTesting.newProjectDto().setId(10L).setKey("org.sample.Sample");
    when(componentDao.getAuthorizedComponentByKey("org.sample.Sample",session)).thenReturn(project);
    params=buildPermissionChangeParams(null,DefaultGroups.ANYONE,"org.sample.Sample","user");
    MockUserSession.set().setLogin("admin").addProjectPermissions(UserRole.ADMIN);
    service.addPermission(params);
  }
 catch (  Exception e) {
    assertThat(e).isInstanceOf(ForbiddenException.class).hasMessage("Insufficient privileges");
  }
}
