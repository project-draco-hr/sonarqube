{
  if (!analysisMode.isPreview() && StringUtils.isNotBlank(getProject().getKey())) {
    Semaphores.Semaphore semaphore=acquire();
    if (!semaphore.isLocked()) {
      LOG.error(getErrorMessage(semaphore));
      throw new SonarException("The project is already being analysed.");
    }
  }
}
