{
  try {
    lockRandomAccessFile=new RandomAccessFile(lockFilePath.toFile(),"rw");
    lockChannel=lockRandomAccessFile.getChannel();
    hideLockFileWindows(lockFilePath);
    lockFile=lockChannel.tryLock(0,1024,false);
    if (lockFile == null) {
      failAlreadyInProgress(null);
    }
  }
 catch (  OverlappingFileLockException e) {
    failAlreadyInProgress(e);
  }
catch (  IOException e) {
    throw new IllegalStateException("Failed to create project lock in " + lockFilePath.toString(),e);
  }
}
