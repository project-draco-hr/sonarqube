{
  File file=temp.newFile();
  Fake item1=Fake.newBuilder().setAString("one").setAnInt(1).build();
  Fake item2=Fake.newBuilder().setAString("two").build();
  Protobuf.writeStream(asList(item1,item2),file,false);
  CloseableIterator<Fake> it=Protobuf.readStream(file,Fake.PARSER);
  Fake read=it.next();
  assertThat(read.getAString()).isEqualTo("one");
  assertThat(read.getAnInt()).isEqualTo(1);
  read=it.next();
  assertThat(read.getAString()).isEqualTo("two");
  assertThat(read.hasAnInt()).isFalse();
  assertThat(it.hasNext()).isFalse();
}
