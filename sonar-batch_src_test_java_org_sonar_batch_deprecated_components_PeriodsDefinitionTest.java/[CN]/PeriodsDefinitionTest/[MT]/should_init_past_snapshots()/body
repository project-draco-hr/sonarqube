{
  DefaultProjectTree projectTree=mock(DefaultProjectTree.class);
  when(projectTree.getRootProject()).thenReturn(new Project("my:project"));
  new PeriodsDefinition(getSession(),projectTree,settings,pastSnapshotFinder);
  verify(pastSnapshotFinder).find(argThat(new ArgumentMatcher<Snapshot>(){
    @Override public boolean matches(    Object o){
      return ((Snapshot)o).getResourceId() == 2;
    }
  }
),anyString(),eq(settings),eq(1));
}
