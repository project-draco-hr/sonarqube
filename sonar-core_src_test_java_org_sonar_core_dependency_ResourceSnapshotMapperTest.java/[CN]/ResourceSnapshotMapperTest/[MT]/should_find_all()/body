{
  setupData("fixture");
  final List<ResourceSnapshotDto> snapshots=Lists.newArrayList();
  SqlSession session=getMyBatis().openSession();
  try {
    session.getMapper(ResourceSnapshotMapper.class).selectAll(new ResultHandler(){
      public void handleResult(      ResultContext context){
        snapshots.add((ResourceSnapshotDto)context.getResultObject());
      }
    }
);
  }
  finally {
    MyBatis.closeQuietly(session);
  }
  assertThat(snapshots).hasSize(2);
  ResourceSnapshotDto dep=snapshots.get(0);
  assertThat(dep.getId()).isEqualTo(1L);
  assertThat(dep.getProjectId()).isEqualTo(1000L);
  assertThat(dep.getVersion()).isEqualTo("1.0");
}
