{
  File propertiesFile=null;
  try {
    propertiesFile=File.createTempFile("sq-process","properties");
    Properties props=new Properties();
    props.putAll(javaCommand.getArguments());
    props.setProperty(ProcessEntryPoint.PROPERTY_PROCESS_KEY,javaCommand.getKey());
    props.setProperty(ProcessEntryPoint.PROPERTY_PROCESS_INDEX,Integer.toString(javaCommand.getProcessIndex()));
    props.setProperty(ProcessEntryPoint.PROPERTY_TERMINATION_TIMEOUT,String.valueOf(timeouts.getTerminationTimeout()));
    props.setProperty(ProcessEntryPoint.PROPERTY_SHARED_PATH,javaCommand.getTempDir().getAbsolutePath());
    OutputStream out=new FileOutputStream(propertiesFile);
    props.store(out,String.format("Temporary properties file for command [%s]",javaCommand.getKey()));
    out.close();
    return propertiesFile;
  }
 catch (  Exception e) {
    throw new IllegalStateException("Cannot write temporary settings to " + propertiesFile,e);
  }
}
