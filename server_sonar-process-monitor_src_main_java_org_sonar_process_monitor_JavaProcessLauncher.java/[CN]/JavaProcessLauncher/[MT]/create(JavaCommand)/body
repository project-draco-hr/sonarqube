{
  List<String> commands=new ArrayList<>();
  commands.add(buildJavaPath());
  commands.addAll(javaCommand.getJavaOptions());
  commands.add(String.format("-Djava.io.tmpdir=%s",javaCommand.getTempDir().getAbsolutePath()));
  commands.addAll(buildClasspath(javaCommand));
  commands.add(javaCommand.getClassName());
  commands.add(buildPropertiesFile(javaCommand).getAbsolutePath());
  ProcessBuilder processBuilder=new ProcessBuilder();
  processBuilder.command(commands);
  processBuilder.directory(javaCommand.getWorkDir());
  processBuilder.environment().putAll(javaCommand.getEnvVariables());
  processBuilder.redirectErrorStream(true);
  return processBuilder;
}
