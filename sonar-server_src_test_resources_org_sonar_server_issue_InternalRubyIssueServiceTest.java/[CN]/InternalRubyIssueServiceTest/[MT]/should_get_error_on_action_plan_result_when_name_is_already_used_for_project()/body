{
  Map<String,String> parameters=newHashMap();
  parameters.put("name","Long term");
  parameters.put("description","Long term issues");
  parameters.put("projectKey","org.sonar.Sample");
  when(actionPlanService.isNameAlreadyUsedForProject(anyString(),anyString())).thenReturn(true);
  Result result=internalRubyIssueService.createActionPlanResult(parameters,"Short term");
  assertThat(result.ok()).isFalse();
  assertThat(result.errors()).contains(new Result.Message("issues_action_plans.same_name_in_same_project"));
}
