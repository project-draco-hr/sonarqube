{
  Map<String,String> parameters=newHashMap();
  parameters.put("name","Long term");
  parameters.put("description","Long term issues");
  parameters.put("projectKey","org.sonar.Sample");
  parameters.put("deadLine","13/05/2113");
  ArgumentCaptor<ActionPlan> actionPlanCaptor=ArgumentCaptor.forClass(ActionPlan.class);
  Result result=internalRubyIssueService.createActionPlan(parameters);
  assertThat(result.ok()).isTrue();
  verify(actionPlanService).create(actionPlanCaptor.capture(),eq("org.sonar.Sample"));
  ActionPlan actionPlan=actionPlanCaptor.getValue();
  assertThat(actionPlan).isNotNull();
  assertThat(actionPlan.key()).isNotNull();
  assertThat(actionPlan.name()).isEqualTo("Long term");
  assertThat(actionPlan.description()).isEqualTo("Long term issues");
  assertThat(actionPlan.deadLine()).isNotNull();
}
