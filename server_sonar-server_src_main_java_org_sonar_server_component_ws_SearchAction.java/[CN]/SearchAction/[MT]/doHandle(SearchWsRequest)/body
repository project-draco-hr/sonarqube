{
  userSession.checkLoggedIn().checkPermission(GlobalPermissions.SYSTEM_ADMIN);
  DbSession dbSession=dbClient.openSession(false);
  try {
    ComponentQuery query=buildQuery(request);
    Paging paging=buildPaging(dbSession,request,query);
    List<ComponentDto> components=searchComponents(dbSession,query,paging);
    return buildResponse(components,paging);
  }
  finally {
    dbClient.closeSession(dbSession);
  }
}
