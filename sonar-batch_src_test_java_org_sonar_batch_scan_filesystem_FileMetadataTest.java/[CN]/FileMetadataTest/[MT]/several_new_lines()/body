{
  File tempFile=temp.newFile();
  FileUtils.write(tempFile,"foo\n\n\nbar",Charsets.UTF_8,true);
  FileMetadata.Metadata metadata=new FileMetadata().read(tempFile,Charsets.UTF_8);
  assertThat(metadata.lines).isEqualTo(4);
  assertThat(metadata.hash).isEqualTo(md5Hex("foo\n\n\nbar"));
  assertThat(metadata.originalLineOffsets).containsOnly(0,4,5,6);
  assertThat(metadata.lineHashes[0]).containsOnly(md5("foo"));
  assertThat(metadata.lineHashes[1]).isNull();
  assertThat(metadata.lineHashes[2]).isNull();
  assertThat(metadata.lineHashes[3]).containsOnly(md5("bar"));
}
