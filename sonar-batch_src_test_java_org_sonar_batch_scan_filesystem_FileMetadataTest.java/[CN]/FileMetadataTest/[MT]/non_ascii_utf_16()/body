{
  File tempFile=temp.newFile();
  FileUtils.write(tempFile,"f??o\r\nb??r\r\n\u1D11Eba??z\r\n",Charsets.UTF_16,true);
  FileMetadata.Metadata metadata=FileMetadata.INSTANCE.read(tempFile,Charsets.UTF_16);
  assertThat(metadata.lines).isEqualTo(4);
  assertThat(metadata.hash).isEqualTo(NON_ASCII);
  assertThat(metadata.originalLineOffsets).containsOnly(0,5,10,18);
  assertThat(metadata.lineHashes[0]).containsOnly(md5("f??o"));
  assertThat(metadata.lineHashes[1]).containsOnly(md5("b??r"));
  assertThat(metadata.lineHashes[2]).containsOnly(md5("\u1D11Eba??z"));
  assertThat(metadata.lineHashes[3]).isNull();
}
