{
  File tempFile=temp.newFile();
  FileUtils.write(tempFile," foo\nb ar\r\nbaz \t",Charsets.UTF_8,true);
  FileMetadata.Metadata metadata=FileMetadata.INSTANCE.read(tempFile,Charsets.UTF_8);
  assertThat(metadata.lines).isEqualTo(3);
  assertThat(metadata.lineHashes).containsOnly(md5("foo"),md5("bar"),md5("baz"));
}
