{
  HighlightingLineReader highlightingLineReader=new HighlightingLineReader(newArrayList(BatchReport.SyntaxHighlighting.newBuilder().setRange(BatchReport.Range.newBuilder().setStartLine(1).setEndLine(3).setStartOffset(3).setEndOffset(2).build()).setType(Constants.HighlightingType.ANNOTATION).build(),BatchReport.SyntaxHighlighting.newBuilder().setRange(BatchReport.Range.newBuilder().setStartLine(2).setEndLine(4).setStartOffset(0).setEndOffset(3).build()).setType(Constants.HighlightingType.HIGHLIGHTING_STRING).build(),BatchReport.SyntaxHighlighting.newBuilder().setRange(BatchReport.Range.newBuilder().setStartLine(2).setEndLine(2).setStartOffset(1).setEndOffset(2).build()).setType(Constants.HighlightingType.COMMENT).build()).iterator());
  FileSourceDb.Line.Builder line1=FileSourceDb.Data.newBuilder().addLinesBuilder().setSource("line1").setLine(1);
  highlightingLineReader.read(line1);
  FileSourceDb.Line.Builder line2=FileSourceDb.Data.newBuilder().addLinesBuilder().setSource("line2").setLine(2);
  highlightingLineReader.read(line2);
  FileSourceDb.Line.Builder line3=FileSourceDb.Data.newBuilder().addLinesBuilder().setSource("line3").setLine(3);
  highlightingLineReader.read(line3);
  FileSourceDb.Line.Builder line4=FileSourceDb.Data.newBuilder().addLinesBuilder().setSource("line4").setLine(4);
  highlightingLineReader.read(line4);
  assertThat(line1.getHighlighting()).isEqualTo("3,4,a");
  assertThat(line2.getHighlighting()).isEqualTo("0,4,a;0,4,s;1,2,cd");
  assertThat(line3.getHighlighting()).isEqualTo("0,2,a;0,4,s");
  assertThat(line4.getHighlighting()).isEqualTo("0,3,s");
}
