{
  Tokenizer tokenizer=new Tokenizer(){
    public void tokenize(    SourceCode tokens,    Tokens tokenEntries) throws IOException {
      tokenEntries.add(new TokenEntry("t1","src",1));
      tokenEntries.add(new TokenEntry("t2","src",1));
      tokenEntries.add(new TokenEntry("t3","src",2));
      tokenEntries.add(new TokenEntry("t1","src",4));
      tokenEntries.add(new TokenEntry("t3","src",4));
      tokenEntries.add(TokenEntry.getEOF());
    }
  }
;
  TokenizerBridge bridge=new TokenizerBridge(tokenizer,"UTF-8");
  List<Statement> statements=bridge.tokenize(null);
  bridge.clearCache();
  assertThat(statements.size(),is(3));
  Statement statement=statements.get(0);
  assertThat(statement.getStartLine(),is(1));
  assertThat(statement.getEndLine(),is(1));
  assertThat(statement.getValue(),is("t1t2"));
  statement=statements.get(1);
  assertThat(statement.getStartLine(),is(2));
  assertThat(statement.getEndLine(),is(2));
  assertThat(statement.getValue(),is("t3"));
  statement=statements.get(2);
  assertThat(statement.getStartLine(),is(4));
  assertThat(statement.getEndLine(),is(4));
  assertThat(statement.getValue(),is("t1t3"));
}
