{
  ReviewDao reviewDao=mock(ReviewDao.class);
  DecoratorContext context=mock(DecoratorContext.class);
  Violation newViolation=Violation.create(new Rule(),project).setSeverity(RulePriority.MINOR);
  when(context.getViolations()).thenReturn(Arrays.<Violation>asList(newViolation));
  ViolationSeverityUpdater updater=new ViolationSeverityUpdater(reviewDao);
  updater.decorate(project,context);
  assertThat(newViolation.getSeverity(),Is.is(RulePriority.MINOR));
  verifyZeroInteractions(reviewDao);
}
