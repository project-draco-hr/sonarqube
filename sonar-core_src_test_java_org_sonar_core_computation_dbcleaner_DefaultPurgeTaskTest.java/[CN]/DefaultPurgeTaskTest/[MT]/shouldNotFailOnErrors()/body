{
  PurgeDao purgeDao=mock(PurgeDao.class);
  when(purgeDao.purge(any(PurgeConfiguration.class))).thenThrow(new RuntimeException());
  DefaultPurgeTask task=new DefaultPurgeTask(purgeDao,new Settings(),mock(DefaultPeriodCleaner.class),mock(PurgeProfiler.class));
  task.purge(1L);
  verify(purgeDao,times(1)).purge(any(PurgeConfiguration.class));
}
