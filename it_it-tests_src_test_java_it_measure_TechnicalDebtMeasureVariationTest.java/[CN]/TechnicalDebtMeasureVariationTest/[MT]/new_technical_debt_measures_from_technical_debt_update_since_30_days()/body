{
  provisionSampleProject();
  setSampleProjectQualityProfile("empty");
  runSampleProjectAnalysis("sonar.projectDate","2013-01-01");
  String profileXmlFile="one-issue-per-file";
  defineQualityProfile(profileXmlFile);
  setSampleProjectQualityProfile("one-issue-per-file");
  runSampleProjectAnalysis();
  runSampleProjectAnalysis("sonar.oneIssuePerFile.effortToFix","10");
  Resource newTechnicalDebt=getSampleProjectResourceWithVariations("new_technical_debt");
  List<Measure> measures=newTechnicalDebt.getMeasures();
  assertThat(measures.get(0).getVariation2()).isEqualTo(90);
  runSampleProjectAnalysis("sonar.oneIssuePerFile.effortToFix","10");
  newTechnicalDebt=getSampleProjectResourceWithVariations("new_technical_debt");
  measures=newTechnicalDebt.getMeasures();
  assertThat(measures.get(0).getVariation2()).isEqualTo(90);
}
