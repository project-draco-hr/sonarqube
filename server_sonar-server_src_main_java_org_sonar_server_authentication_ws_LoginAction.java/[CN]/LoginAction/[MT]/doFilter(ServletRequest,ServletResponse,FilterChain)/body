{
  HttpServletRequest request=(HttpServletRequest)servletRequest;
  HttpServletResponse response=(HttpServletResponse)servletResponse;
  if (!request.getMethod().equals(POST)) {
    response.setStatus(HTTP_BAD_REQUEST);
    return;
  }
  try {
    UserDto userDto=authenticate(request);
    jwtHttpHandler.generateToken(userDto,request,response);
    threadLocalUserSession.set(ServerUserSession.createForUser(dbClient,userDto));
  }
 catch (  UnauthorizedException e) {
    response.setStatus(e.httpCode());
  }
}
