{
  settings.setProperty(CoreProperties.PARTIAL_ANALYSIS,true);
  settings.setProperty(CoreProperties.DRY_RUN,true);
  Snapshot previousSnapshot=mock(Snapshot.class);
  PastSnapshot pastSnapshot=new PastSnapshot("foo",new Date(),previousSnapshot);
  when(pastSnapshotFinder.findPreviousAnalysis(snapshot)).thenReturn(pastSnapshot);
  filter.start();
  assertThat(filter.accept(new File(baseDir,"src/main/java/foo/Bar.java"),mock(FileSystemFilter.Context.class))).isTrue();
}
