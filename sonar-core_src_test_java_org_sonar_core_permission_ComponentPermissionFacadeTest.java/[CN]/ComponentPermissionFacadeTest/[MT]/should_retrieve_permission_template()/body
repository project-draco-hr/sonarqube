{
  PermissionTemplateDto permissionTemplateDto=new PermissionTemplateDto().setName("Test template");
  PermissionTemplateDto templateWithPermissions=new PermissionTemplateDto();
  permissionDao=mock(PermissionDao.class);
  when(permissionDao.selectTemplateByKey("test_template")).thenReturn(permissionTemplateDto);
  when(permissionDao.selectPermissionTemplate("Test template")).thenReturn(templateWithPermissions);
  permissionFacade=new ComponentPermissionFacade(null,null,null,permissionDao);
  PermissionTemplateDto permissionTemplate=permissionFacade.getPermissionTemplate("test_template");
  assertThat(permissionTemplate).isSameAs(templateWithPermissions);
}
