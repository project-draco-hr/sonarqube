{
  Collection<Measure> unfiltered;
  if (filter instanceof MeasuresFilters.MetricFilter) {
    unfiltered=measuresByMetric.get(((MeasuresFilters.MetricFilter<M>)filter).filterOnMetricKey());
  }
 else {
    unfiltered=measuresByMetric.values();
  }
  return filter.filter(unfiltered);
}
