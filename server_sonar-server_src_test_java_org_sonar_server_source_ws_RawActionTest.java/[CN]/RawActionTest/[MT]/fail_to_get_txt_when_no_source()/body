{
  String fileKey="src/Foo.java";
  when(componentDao.getByKey(session,fileKey)).thenReturn(file);
  when(sourceService.getLinesAsTxt(session,fileKey)).thenReturn(null);
  WsTester.TestRequest request=tester.newGetRequest("api/sources","raw").setParam("key",fileKey);
  try {
    request.execute();
    fail();
  }
 catch (  Exception e) {
    assertThat(e).isInstanceOf(NotFoundException.class).hasMessage("File 'src/Foo.java' does not exist");
  }
}
