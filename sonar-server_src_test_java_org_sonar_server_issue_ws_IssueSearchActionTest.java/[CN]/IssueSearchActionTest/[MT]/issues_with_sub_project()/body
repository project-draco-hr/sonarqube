{
  Issue issue=createStandardIssue().setComponentKey("sample:sample-module:src/main/xoo/sample/Sample.xoo");
  issues.add(issue);
  ComponentDto component=new ComponentDto().setId(10L).setKey("sample:sample-module:src/main/xoo/sample/Sample.xoo").setLongName("src/main/xoo/sample/Sample.xoo").setName("Sample.xoo").setQualifier("FIL").setPath("src/main/xoo/sample/Sample.xoo").setSubProjectId(8L).setProjectId(7L);
  ComponentDto subProject=new ComponentDto().setId(8L).setKey("sample-module").setLongName("Sample Project :: Sample Module").setName("Sample Project :: Sample Module").setQualifier("BRC").setSubProjectId(7L).setProjectId(7L);
  ComponentDto project=new ComponentDto().setId(7L).setKey("sample").setLongName("Sample Project").setName("Sample Project").setQualifier("TRK").setProjectId(7L);
  result.addComponents(Lists.<Component>newArrayList(component,subProject,project));
  result.addProjects(Lists.<Component>newArrayList(project));
  WsTester.TestRequest request=tester.newGetRequest("api/issues","search");
  request.execute().assertJson(getClass(),"issues_with_sub_project.json");
}
