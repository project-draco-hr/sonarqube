{
  Issue issue=createStandardIssue().setActionPlanKey("AP-ABCD").setAssignee("john");
  issues.add(issue);
  MockUserSession.set().setLogin("john");
  when(issueService.listTransitions(eq(issue),any(UserSession.class))).thenReturn(newArrayList(Transition.create("reopen","RESOLVED","REOPEN")));
  result.addActionPlans(newArrayList((ActionPlan)new DefaultActionPlan().setKey("AP-ABCD").setName("1.0")));
  result.addUsers(Lists.<User>newArrayList(new DefaultUser().setName("John").setLogin("john")));
  WsTester.TestRequest request=tester.newGetRequest("api/issues","search").setParam("extra_fields","actions,transitions,assigneeName,actionPlanName");
  request.execute().assertJson(getClass(),"issues_with_extra_fields.json");
}
