{
  dbTester.truncateTables();
  session=dbTester.myBatis().openSession(false);
  dbClient=new DbClient(dbTester.database(),dbTester.myBatis(),new MeasureDao(),new MetricDao());
  reportDir=temp.newFolder();
  projectSettings=new Settings();
  dbComponentsRefCache=new DbComponentsRefCache();
  languageRepository=mock(LanguageRepository.class);
  sut=new PersistDuplicationsStep(dbClient,dbComponentsRefCache);
}
