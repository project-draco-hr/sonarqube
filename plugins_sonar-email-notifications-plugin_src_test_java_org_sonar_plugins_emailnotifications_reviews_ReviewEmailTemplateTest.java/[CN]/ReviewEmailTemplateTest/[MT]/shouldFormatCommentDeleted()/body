{
  Notification notification=new Notification("review-changed").setFieldValue("reviewId","1").setFieldValue("project","Sonar").setFieldValue("resource","org.sonar.server.ui.DefaultPages").setFieldValue("title","Utility classes should not have a public or default constructor.").setFieldValue("old.comment","This is deleted comment").setFieldValue("new.comment",null).setFieldValue("author","freddy.mallet");
  EmailMessage message=template.format(notification);
  assertThat(message.getMessageId(),is("review/1"));
  assertThat(message.getSubject(),is("Review #1"));
  assertThat(message.getFrom(),is("Freddy Mallet"));
  assertThat(message.getMessage(),is("" + "Project: Sonar\n" + "Resource: org.sonar.server.ui.DefaultPages\n"+ "\n"+ "Utility classes should not have a public or default constructor.\n"+ "\n"+ "Comment deleted, was:\n"+ "  This is deleted comment\n"+ "\n"+ "--\n"+ "See it in Sonar: http://nemo.sonarsource.org/reviews/view/1\n"));
}
