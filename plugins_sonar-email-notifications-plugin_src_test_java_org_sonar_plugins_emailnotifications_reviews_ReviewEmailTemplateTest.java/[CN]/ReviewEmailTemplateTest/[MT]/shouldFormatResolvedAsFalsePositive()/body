{
  Notification notification=new Notification("review-changed").setFieldValue("reviewId","1").setFieldValue("author","freddy.mallet").setFieldValue("old.status","REOPENED").setFieldValue("old.resolution",null).setFieldValue("new.status","RESOLVED").setFieldValue("new.resolution","FALSE-POSITIVE").setFieldValue("new.comment","Because!");
  EmailMessage message=template.format(notification);
  assertThat(message.getMessageId(),is("review/1"));
  assertThat(message.getSubject(),is("Review #1"));
  assertThat(message.getFrom(),is("Freddy Mallet"));
  assertThat(message.getMessage(),is("" + "Status: RESOLVED (was REOPENED)\n" + "Resolution: FALSE-POSITIVE\n"+ "Comment:\n"+ "  Because!\n"+ "\n"+ "--\n"+ "See it in Sonar: http://nemo.sonarsource.org/reviews/view/1\n"));
}
