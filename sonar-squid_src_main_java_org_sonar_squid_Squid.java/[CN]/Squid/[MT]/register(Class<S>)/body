{
  if (pico.getComponent(scannerClass) != null) {
    throw new IllegalStateException("The Squid SCANNER '" + scannerClass.getName() + "' can't be registered multiple times.");
  }
  addToPicocontainer(scannerClass);
  S scanner=pico.getComponent(scannerClass);
  for (  Object clazz : scanner.getVisitorClasses()) {
    addToPicocontainer((Class)clazz);
    scanner.accept(pico.<CodeVisitor>getComponent((Class)clazz));
  }
  for (  CodeVisitor externalVisitor : externalCodeVisitors) {
    scanner.accept(externalVisitor);
  }
  return scanner;
}
