{
  SqlSession session=mybatis.openSession();
  try {
    MeasureMapper mapper=session.getMapper(MeasureMapper.class);
    for (    MeasureModelAndDetails value : values) {
      try {
        mapper.insert(value.getMeasureModel());
        if (value.getMeasureModel().getMeasureData() != null) {
          mapper.insertData(value.getMeasureModel().getMeasureData());
        }
      }
 catch (      Exception e) {
        throw new SonarException(String.format("Unable to save measure for metric [%s] on component [%s]",value.getMetricKey(),value.getResourceKey()),e);
      }
    }
    session.commit();
  }
  finally {
    MyBatis.closeQuietly(session);
  }
}
