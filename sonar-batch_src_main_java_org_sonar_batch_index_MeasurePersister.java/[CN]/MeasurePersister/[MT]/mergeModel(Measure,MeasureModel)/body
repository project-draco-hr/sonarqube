{
  merge.setMetricId(measure.getMetric().getId());
  merge.setDescription(measure.getDescription());
  merge.setData(measure.getData());
  merge.setAlertStatus(measure.getAlertStatus());
  merge.setAlertText(measure.getAlertText());
  merge.setTendency(measure.getTendency());
  merge.setVariationValue1(measure.getVariation1());
  merge.setVariationValue2(measure.getVariation2());
  merge.setVariationValue3(measure.getVariation3());
  merge.setVariationValue4(measure.getVariation4());
  merge.setVariationValue5(measure.getVariation5());
  merge.setUrl(measure.getUrl());
  merge.setCharacteristic(measure.getCharacteristic());
  merge.setPersonId(measure.getPersonId());
  if (measure.getValue() != null) {
    merge.setValue(measure.getValue().doubleValue());
  }
 else {
    merge.setValue(null);
  }
  if (measure instanceof RuleMeasure) {
    RuleMeasure ruleMeasure=(RuleMeasure)measure;
    merge.setRulePriority(ruleMeasure.getSeverity());
    if (ruleMeasure.getRule() != null) {
      Rule ruleWithId=ruleFinder.findByKey(ruleMeasure.getRule().getRepositoryKey(),ruleMeasure.getRule().getKey());
      if (ruleWithId != null) {
        merge.setRuleId(ruleWithId.getId());
      }
 else {
        throw new SonarException("Can not save a measure with unknown rule " + ruleMeasure);
      }
    }
  }
  return merge;
}
