{
  try {
    ServerSocket s=new ServerSocket(0);
    int port=s.getLocalPort();
    s.close();
    return port;
  }
 catch (  IOException e) {
    throw new IllegalStateException("Can not find an open network port",e);
  }
}
