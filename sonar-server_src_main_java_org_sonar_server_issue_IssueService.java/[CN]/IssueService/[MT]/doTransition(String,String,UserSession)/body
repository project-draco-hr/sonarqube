{
  verifyLoggedIn(userSession);
  IssueQueryResult queryResult=loadIssue(issueKey);
  DefaultIssue defaultIssue=(DefaultIssue)queryResult.first();
  IssueChangeContext context=IssueChangeContext.createUser(new Date(),userSession.login());
  checkTransitionPermission(transitionKey,userSession,defaultIssue);
  if (workflow.doTransition(defaultIssue,transitionKey,context)) {
    issueStorage.save(defaultIssue);
    issueNotifications.sendChanges(defaultIssue,context,queryResult);
    dryRunCache.reportResourceModification(defaultIssue.componentKey());
  }
  return defaultIssue;
}
