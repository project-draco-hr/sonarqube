{
  if (issue == null) {
    return Collections.emptyList();
  }
  List<Transition> outTransitions=workflow.outTransitions(issue);
  List<Transition> allowedTransitions=new ArrayList<Transition>();
  for (  Transition transition : outTransitions) {
    DefaultIssue defaultIssue=(DefaultIssue)issue;
    String projectKey=defaultIssue.projectKey();
    if (StringUtils.isBlank(transition.requiredProjectPermission()) || (projectKey != null && userSession.hasProjectPermission(UserRole.ISSUE_ADMIN,projectKey))) {
      allowedTransitions.add(transition);
    }
  }
  return allowedTransitions;
}
