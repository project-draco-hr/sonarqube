{
  ServerPluginRepository repository=new ServerPluginRepository(mock(PluginDeployer.class));
  TransientPicoContainer container=new TransientPicoContainer();
  repository.registerExtensions(container,Arrays.<Plugin>asList(new FakePlugin(Arrays.<Class>asList(FakeExtensionProvider.class))));
  assertThat(container.getComponents(Extension.class).size(),is(2));
  assertThat(container.getComponents(FakeServerExtension.class).size(),is(1));
  assertThat(container.getComponents(FakeBatchExtension.class).size(),is(0));
}
