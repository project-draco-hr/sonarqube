{
  File baseDir=temp.newFolder();
  File file1=new File(baseDir,"src/com/foo/Bar.java");
  FileUtils.write(file1,"Bar");
  File file2=new File(baseDir,"src/com/foo/Foo.java");
  FileUtils.write(file2,"Foo");
  when(fileSystem.baseDir()).thenReturn(baseDir);
  when(fileSystem.files(any(FileQuery.class))).thenReturn(Arrays.asList(file1,file2)).thenReturn(Collections.<File>emptyList());
  sensor.analyse(project,mock(SensorContext.class));
  verify(componentDataCache).setStringData("java_project","hash","src/com/foo/Bar.java=ddc35f88fa71b6ef142ae61f35364653\n" + "src/com/foo/Foo.java=1356c67d7ad1638d816bfb822dd2c25d\n");
}
