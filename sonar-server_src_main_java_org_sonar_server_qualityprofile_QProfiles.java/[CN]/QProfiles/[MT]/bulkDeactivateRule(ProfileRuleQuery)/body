{
  List<Integer> activeRuleIdsToDeactivate=rules.searchProfileRuleIds(query);
  activeRuleOperations.deactivateRules(query.profileId(),activeRuleIdsToDeactivate,UserSession.get());
  return activeRuleIdsToDeactivate.size();
}
