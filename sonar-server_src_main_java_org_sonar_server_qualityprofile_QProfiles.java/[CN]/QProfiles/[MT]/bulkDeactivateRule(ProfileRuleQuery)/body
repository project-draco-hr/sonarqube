{
  List<Integer> ruleIdsToActivate=rules.searchProfileRuleIds(query);
  activeRuleOperations.deactivateRules(query.profileId(),ruleIdsToActivate,UserSession.get());
  return ruleIdsToActivate.size();
}
