{
  ActiveRuleDto activeRule=findActiveRuleNotNull(activeRuleId);
  RuleDto rule=findRuleNotNull(ruleId);
  String sanitizedNote=Strings.emptyToNull(note);
  if (sanitizedNote != null) {
    operations.updateRuleNote(activeRule,rule,note,UserSession.get());
  }
 else {
    operations.deleteRuleNote(activeRule,rule,UserSession.get());
  }
  return rules.getFromActiveRuleId(activeRule.getId());
}
