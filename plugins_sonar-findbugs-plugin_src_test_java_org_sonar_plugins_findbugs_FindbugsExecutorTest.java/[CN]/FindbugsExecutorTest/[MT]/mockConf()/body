{
  FindbugsConfiguration conf=mock(FindbugsConfiguration.class);
  edu.umd.cs.findbugs.Project project=new edu.umd.cs.findbugs.Project();
  project.addFile(new File("test-resources/classes").getCanonicalPath());
  project.addSourceDir(new File("test-resources/src").getCanonicalPath());
  project.setCurrentWorkingDirectory(new File("test-resources"));
  when(conf.getFindbugsProject()).thenReturn(project);
  when(conf.saveExcludeConfigXml()).thenReturn(new File("test-resources/findbugs-exclude.xml"));
  when(conf.saveIncludeConfigXml()).thenReturn(new File("test-resources/findbugs-include.xml"));
  when(conf.getExcludesFilters()).thenReturn(Lists.newArrayList(new File("test-resources/findbugs-exclude.xml"),new File("test-resources/fake-file.xml")));
  when(conf.getEffort()).thenReturn("default");
  when(conf.getTimeout()).thenReturn(CoreProperties.FINDBUGS_TIMEOUT_DEFAULT_VALUE);
  when(conf.getLocale()).thenReturn(Locale.ENGLISH);
  return conf;
}
