{
  RuleDto manualRule=RuleTesting.newManualRule("My manual");
  ruleDao.insert(dbSession,manualRule);
  dbSession.commit();
  try {
    RuleUpdate.createForManualRule(manualRule.getKey()).setStatus(RuleStatus.BETA).setParameters(ImmutableMap.of("regex","b.*","message","a message"));
    fail();
  }
 catch (  Exception e) {
    assertThat(e).isInstanceOf(IllegalStateException.class).hasMessage("Not a custom rule");
  }
}
