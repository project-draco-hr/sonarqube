{
  grantPermission();
  db.ruleDao().insert(dbSession,RuleTests.newDto(RULE_KEY).setStatus(RuleStatus.REMOVED.name()));
  dbSession.commit();
  RuleUpdate update=new RuleUpdate(RULE_KEY).setTags(Sets.newHashSet("java9"));
  try {
    updater.update(update,UserSession.get());
    fail();
  }
 catch (  IllegalArgumentException e) {
    assertThat(e).hasMessage("Rule with REMOVED status cannot be updated: squid:S001");
  }
}
