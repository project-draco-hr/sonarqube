{
  grantPermission();
  db.ruleDao().insert(dbSession,RuleTesting.newDto(RULE_KEY).setNoteData("my *note*").setNoteUserLogin("me"));
  dbSession.commit();
  RuleUpdate update=new RuleUpdate(RULE_KEY).setMarkdownNote(null);
  updater.update(update,UserSession.get());
  dbSession.clearCache();
  RuleDto rule=db.ruleDao().getNullableByKey(dbSession,RULE_KEY);
  assertThat(rule.getNoteData()).isNull();
  assertThat(rule.getNoteUserLogin()).isNull();
  assertThat(rule.getNoteCreatedAt()).isNull();
  assertThat(rule.getNoteUpdatedAt()).isNull();
}
