{
  String issueKey="ABCD";
  Issue issue=new DefaultIssue().setKey(issueKey).setComponentKey("org.sonar.server.issue.IssueClient").setProjectKey("org.sonar.Sonar").setRuleKey(RuleKey.of("squid","AvoidCycle")).setLine(12).setEffortToFix(2.0).setMessage("Fix it").setResolution("FIXED").setStatus("CLOSED").setSeverity("MAJOR").setCreationDate(issue_creation_date);
  issues.add(issue);
  result.addComponents(Lists.<Component>newArrayList(new ComponentDto().setId(10L).setKey("org.sonar.server.issue.IssueClient").setLongName("SonarQube :: Issue Client").setQualifier("FIL").setSubProjectId(2L).setProjectId(1L)));
  result.addComponents(Lists.<Component>newArrayList(new ComponentDto().setId(2L).setKey("org.sonar.server.Server").setLongName("SonarQube :: Server").setQualifier("BRC").setSubProjectId(1L).setProjectId(1L)));
  result.addComponents(Lists.<Component>newArrayList(new ComponentDto().setId(1L).setKey("org.sonar.Sonar").setLongName("SonarQube")));
  MockUserSession.set();
  WsTester.TestRequest request=tester.newGetRequest("api/issues","show").setParam("key",issueKey);
  request.execute().assertJson(getClass(),"show_issue_with_sub_project.json");
}
