{
  if (DebtRemediationFunction.Type.CONSTANT_ISSUE.equals(function.type()) && effortToFix != null) {
    throw new IllegalArgumentException("Rule '" + ruleKey + "' can not use 'Constant/issue' remediation function "+ "because this rule does not have a fixed remediation cost.");
  }
  Duration result=Duration.create(0);
  Duration factor=function.coefficient();
  Duration offset=function.offset();
  if (factor != null) {
    int effortToFixValue=Objects.firstNonNull(effortToFix,1).intValue();
    result=factor.multiply(effortToFixValue);
  }
  if (offset != null) {
    result=result.add(offset);
  }
  return result;
}
