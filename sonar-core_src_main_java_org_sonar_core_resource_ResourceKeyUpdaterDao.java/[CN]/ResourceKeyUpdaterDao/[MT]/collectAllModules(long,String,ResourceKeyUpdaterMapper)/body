{
  ResourceDto project=mapper.selectProject(projectId);
  Set<ResourceDto> modules=Sets.newHashSet();
  if (project.getKey().startsWith(oldPrefix)) {
    modules.add(project);
  }
  for (  ResourceDto submodule : mapper.selectDescendantProjects(projectId)) {
    modules.addAll(collectAllModules(submodule.getId(),oldPrefix,mapper));
  }
  return modules;
}
