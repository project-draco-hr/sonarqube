{
  List<ProjectQprofileAssociationDto> projects=Lists.newArrayList();
  SelectionMode selectionMode=SelectionMode.fromParam(selected);
  if (SelectionMode.SELECTED == selectionMode) {
    projects.addAll(dbClient.qualityProfileDao().selectSelectedProjects(profileKey,query,session));
  }
 else   if (SelectionMode.DESELECTED == selectionMode) {
    projects.addAll(dbClient.qualityProfileDao().selectDeselectedProjects(profileKey,query,session));
  }
 else {
    projects.addAll(dbClient.qualityProfileDao().selectProjectAssociations(profileKey,query,session));
  }
  return projects;
}
