{
  SourceCode currentResource=peekSourceCode();
  int complexity=currentResource.getInt(Metric.COMPLEXITY) + currentResource.getInt(Metric.BRANCHES) + 1;
  if (complexity > threshold) {
    CheckMessage message=new CheckMessage(this,"Method complexity exceeds " + threshold + ".");
    message.setLine(ast.getLineNo());
    message.setCost(complexity - threshold);
    SourceFile sourceFile=currentResource.getParent(SourceFile.class);
    sourceFile.log(message);
  }
}
