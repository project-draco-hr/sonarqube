{
  if (input.isEmpty()) {
    return Collections.emptyList();
  }
  List<OUTPUT> results=new ArrayList<>(input.size());
  for (  List<INPUT> partition : toUniqueAndSortedPartitions(input)) {
    List<OUTPUT> subResults=function.apply(partition);
    if (subResults != null) {
      results.addAll(subResults);
    }
  }
  return results;
}
