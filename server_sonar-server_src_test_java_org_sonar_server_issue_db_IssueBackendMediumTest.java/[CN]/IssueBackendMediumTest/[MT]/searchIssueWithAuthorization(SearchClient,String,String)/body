{
  BoolFilterBuilder fb=FilterBuilders.boolFilter();
  OrFilterBuilder or=FilterBuilders.orFilter(FilterBuilders.termFilter("user",user));
  for (  String group : groups) {
    or.add(FilterBuilders.termFilter("group",group));
  }
  fb.must(FilterBuilders.termFilter("permission","read"),or).cache(true);
  SearchRequestBuilder request=searchClient.prepareSearch(IndexDefinition.ISSUES.getIndexName()).setTypes(IndexDefinition.ISSUES.getIndexType()).setQuery(QueryBuilders.filteredQuery(QueryBuilders.matchAllQuery(),FilterBuilders.hasParentFilter(IndexDefinition.ISSUES_PROJECT.getIndexType(),QueryBuilders.hasChildQuery(IndexDefinition.ISSUES_PERMISSION.getIndexType(),QueryBuilders.filteredQuery(QueryBuilders.matchAllQuery(),fb))))).setSize(Integer.MAX_VALUE);
  return searchClient.execute(request);
}
