{
  RuleDto rule=RuleTesting.newXooX1();
  tester.get(RuleDao.class).insert(dbSession,rule);
  ComponentDto project=new ComponentDto().setId(1L).setProjectId(1L);
  tester.get(ComponentDao.class).insert(dbSession,project);
  ComponentDto resource=new ComponentDto().setProjectId(1L).setId(2L);
  tester.get(ComponentDao.class).insert(dbSession,resource);
  IssueDto issue=new IssueDto().setId(1L).setRuleId(50).setComponentId(123l).setRootComponentId(100l).setRuleId(rule.getId()).setRootComponentId(project.getId()).setComponentId(resource.getId()).setStatus("OPEN").setResolution("OPEN").setKee(UUID.randomUUID().toString());
  dbClient.issueDao().insert(dbSession,issue);
  dbSession.commit();
  assertThat(issue.getId()).isNotNull();
  Date t0=new Date(0);
  assertThat(dbClient.issueDao().findAfterDate(dbSession,t0)).hasSize(1);
  Date t1=new Date();
  assertThat(dbClient.issueDao().findAfterDate(dbSession,t1)).hasSize(0);
}
