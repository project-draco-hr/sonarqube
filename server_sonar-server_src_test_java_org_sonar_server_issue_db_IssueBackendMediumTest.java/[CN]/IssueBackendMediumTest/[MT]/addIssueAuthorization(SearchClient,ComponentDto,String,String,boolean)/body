{
  Map<String,Object> permissionSource=newHashMap();
  permissionSource.put("_parent",project.key());
  permissionSource.put("permission","read");
  permissionSource.put("project",project.key());
  if (user != null) {
    permissionSource.put("user",user);
  }
  if (group != null) {
    permissionSource.put("group",group);
  }
  searchClient.prepareIndex(IndexDefinition.ISSUES_PERMISSION.getIndexName(),IndexDefinition.ISSUES_PERMISSION.getIndexType()).setSource(permissionSource).setRefresh(refresh).get();
  Map<String,Object> projectSource=newHashMap();
  projectSource.put("key",project.key());
  searchClient.prepareIndex(IndexDefinition.ISSUES_PROJECT.getIndexName(),IndexDefinition.ISSUES_PROJECT.getIndexType()).setId(project.key()).setSource(projectSource).setRefresh(refresh).get();
}
