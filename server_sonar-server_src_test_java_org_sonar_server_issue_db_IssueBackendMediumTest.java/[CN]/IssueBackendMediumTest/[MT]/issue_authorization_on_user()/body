{
  SearchClient searchClient=tester.get(SearchClient.class);
  RuleDto rule=RuleTesting.newXooX1();
  tester.get(RuleDao.class).insert(dbSession,rule);
  ComponentDto project=addComponent(1L,1L,"SonarQube");
  ComponentDto file=addComponent(2L,1L,"IssueAction.java");
  addIssue(rule,project,file);
  addIssueAuthorization(searchClient,project,newArrayList("julien"),null).get();
  dbSession.commit();
  assertThat(searchIssueWithAuthorization(searchClient,"julien","user").getHits().getTotalHits()).isEqualTo(1);
  assertThat(searchIssueWithAuthorization(searchClient,"simon","user").getHits().getTotalHits()).isEqualTo(0);
}
