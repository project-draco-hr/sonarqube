{
  checkArgument(report.getStatus().isInFinalState());
  DbSession session=dbClient.openSession(false);
  try {
    report.setFinishedAt(new Date(system2.now()));
    dbClient.analysisReportDao().delete(session,report.getId());
    session.commit();
  }
  finally {
    MyBatis.closeQuietly(session);
  }
}
