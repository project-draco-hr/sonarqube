{
  List<Decorator> decorators=new ArrayList<Decorator>(batchExtDictionnary.select(Decorator.class,project,false,null));
  SetMultimap<Metric,Decorator> decoratorsByGeneratedMetric=getDecoratorsByMetric(decorators);
  for (  Metric metric : batchExtDictionnary.select(Metric.class,null,false,null)) {
    if (metric.getFormula() != null) {
      decorators.add(new FormulaDecorator(metric,decoratorsByGeneratedMetric.get(metric)));
    }
  }
  return batchExtDictionnary.sort(decorators);
}
