{
  ByteArrayOutputStream output=new ByteArrayOutputStream();
  try {
    new GraphonWriter().write(graph,output,GraphonMode.COMPACT);
    output.flush();
    output.close();
    return new String(output.toByteArray());
  }
 catch (  IOException e) {
    throw new IllegalStateException("Fail to export graph to JSON",e);
  }
 finally {
    IOUtils.closeQuietly(output);
  }
}
