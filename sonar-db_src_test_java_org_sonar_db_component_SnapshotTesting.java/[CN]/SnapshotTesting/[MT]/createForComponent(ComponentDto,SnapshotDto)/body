{
  checkNotNull(parentSnapshot.getId(),"The parent snapshot need to be persisted before creating this snapshot");
  Long parentRootId=parentSnapshot.getRootId();
  return createBasicSnapshot(component,parentSnapshot.getRootComponentUuid()).setRootId(parentRootId != null ? parentRootId : parentSnapshot.getId()).setParentId(parentSnapshot.getId()).setDepth(parentSnapshot.getDepth() + 1).setPath(Strings.isNullOrEmpty(parentSnapshot.getPath()) ? Long.toString(parentSnapshot.getId()) + "." : parentSnapshot.getPath() + Long.toString(parentSnapshot.getId()) + ".");
}
