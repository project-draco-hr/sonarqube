{
  index=mock(SonarIndex.class);
  decorator=new DirectoryDsmDecorator(index);
  dir=Directory.create("src");
  dirContext=mock(DecoratorContext.class);
  file1=File.create("src/Foo1.java",null,false);
  file1.setId(1);
  file2=File.create("src/Foo2.java",null,false);
  file2.setId(2);
  file1Context=mock(DecoratorContext.class);
  when(file1Context.getResource()).thenReturn(file1);
  file2Context=mock(DecoratorContext.class);
  when(file2Context.getResource()).thenReturn(file2);
  when(dirContext.getChildren()).thenReturn(Arrays.asList(file1Context,file2Context));
}
