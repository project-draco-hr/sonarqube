{
  if (pastViolation != null) {
    LOG.debug("Mapping with old violation from newViolation : " + newViolation + " and pastViolation : "+ pastViolation);
    newViolation.setCreatedAt(pastViolation.getCreatedAt());
    newViolation.setPermanentId(pastViolation.getPermanentId());
    newViolation.setSwitchedOff(pastViolation.isSwitchedOff());
    newViolation.setPersonId(pastViolation.getPersonId());
    newViolation.setNew(false);
    lastViolationsByRule.remove(newViolation.getRule().getId(),pastViolation);
    violationMap.put(newViolation,pastViolation);
    unmappedLastViolations.remove(pastViolation);
  }
 else {
    LOG.debug("No old violation, creating new one with newViolation : " + newViolation + " and pastViolation : "+ pastViolation);
    newViolation.setNew(true);
    newViolation.setCreatedAt(project.getAnalysisDate());
  }
}
