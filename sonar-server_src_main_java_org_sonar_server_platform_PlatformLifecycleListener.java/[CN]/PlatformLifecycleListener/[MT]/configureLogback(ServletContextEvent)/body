{
  String configProfilingLevel=defaultIfEmpty(event.getServletContext().getInitParameter(Profiling.CONFIG_PROFILING_LEVEL),System.getProperty(Profiling.CONFIG_PROFILING_LEVEL));
  Profiling.Level profilingLevel=Profiling.Level.fromConfigString(configProfilingLevel);
  String consoleEnabled=defaultIfEmpty(defaultIfEmpty(event.getServletContext().getInitParameter(CONFIG_LOG_CONSOLE),System.getProperty(CONFIG_LOG_CONSOLE)),"false");
  Map<String,String> variables=ImmutableMap.of("RAILS_LOGGER_LEVEL",profilingLevel == Profiling.Level.FULL ? "DEBUG" : "WARN","LOGFILE_LOGGING_FORMAT",profilingLevel == Profiling.Level.FULL ? LOGFILE_FULL_LOGGING_FORMAT : LOGFILE_STANDARD_LOGGING_FORMAT,"CONSOLE_LOGGING_FORMAT",profilingLevel == Profiling.Level.FULL ? CONSOLE_FULL_LOGGING_FORMAT : CONSOLE_STANDARD_LOGGING_FORMAT,"CONSOLE_ENABLED",consoleEnabled);
  Logback.configure("/org/sonar/server/platform/logback.xml",variables);
}
