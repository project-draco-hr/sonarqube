{
  ScheduledExecutorService scheduler=Executors.newScheduledThreadPool(1);
  Runnable updater=new Runnable(){
    public void run(){
      try {
        LOG.debug("Updating semaphore " + semaphore.getName());
        dao.update(semaphore);
      }
 catch (      Exception e) {
        LOG.error("Unable to update semaphore",e);
      }
    }
  }
;
  scheduler.scheduleWithFixedDelay(updater,updatePeriodInSeconds,updatePeriodInSeconds,TimeUnit.SECONDS);
  handlers.put(semaphore.getName(),scheduler);
}
