{
  try {
    File deployedPlugin=copyPlugin(pluginBasedir,pluginFile);
    DefaultPluginMetadata metadata=extractMetadata(deployedPlugin,isCore);
    metadata.setDeprecatedExtensions(deprecatedExtensions);
    install(metadata,pluginBasedir,deployedPlugin);
    return metadata;
  }
 catch (  IOException e) {
    throw new SonarException("Fail to install plugin: " + pluginFile,e);
  }
}
