{
  if (analysisMetadataHolder.isFirstAnalysis()) {
    return Optional.absent();
  }
  LOGGER.trace("Reading SCM info from db for file '{}'",file.getKey());
  DbSession dbSession=dbClient.openSession(false);
  try {
    FileSourceDto dto=dbClient.fileSourceDao().selectSourceByFileUuid(dbSession,file.getUuid());
    if (dto == null || !sourceHashRepository.getRawSourceHash(file).equals(dto.getSrcHash())) {
      return Optional.absent();
    }
    return DbScmInfo.create(file,dto.getSourceData().getLinesList());
  }
  finally {
    dbClient.closeSession(dbSession);
  }
}
