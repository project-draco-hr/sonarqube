{
  try {
    XContentBuilder document=jsonBuilder().startObject();
    document.startObject(RuleNormalizer.RuleField.ACTIVE.key());
    document.startObject(key.toString());
    document.startObject(ActiveRuleField.PARAMS.key());
    document.startObject(param.getKey());
    indexField(ActiveRuleParamField.VALUE.key(),param.getValue(),document);
    document.endObject();
    document.endObject();
    document.endObject();
    document.endObject();
    document.endObject();
    UpdateRequest request=new UpdateRequest().doc(document);
    request.docAsUpsert(true);
    return request;
  }
 catch (  Exception e) {
    throw new IllegalStateException(String.format("Could not normalize Object with key %s",key.toString()),e);
  }
}
