{
  PluginDeployer deployer=mock(PluginDeployer.class);
  List<PluginMetadata> metadata=Arrays.asList(newMetadata("checkstyle",null),newMetadata("checkstyle-extensions","checkstyle"),newMetadata("sqale",null));
  when(deployer.getMetadata()).thenReturn(metadata);
  DefaultServerPluginRepository repository=new DefaultServerPluginRepository(deployer);
  repository.disable("checkstyle");
  assertTrue(repository.isDisabled("checkstyle"));
  assertTrue(repository.isDisabled("checkstyle-extensions"));
  assertFalse(repository.isDisabled("sqale"));
}
