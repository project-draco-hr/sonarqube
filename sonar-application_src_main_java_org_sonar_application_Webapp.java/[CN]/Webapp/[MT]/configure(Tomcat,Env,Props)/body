{
  String ctx=getContext(props);
  try {
    Context context=tomcat.addWebapp(ctx,env.file("web").getAbsolutePath());
    context.setConfigFile(env.file("web/META-INF/context.xml").toURI().toURL());
    context.addParameter(PROPERTY_LOG_PROFILING_LEVEL,props.of(PROPERTY_LOG_PROFILING_LEVEL,"NONE"));
    context.addParameter(PROPERTY_LOG_CONSOLE,props.of(PROPERTY_LOG_CONSOLE,"false"));
    configureRailsMode(props,context);
    context.setJarScanner(new NullJarScanner());
  }
 catch (  Exception e) {
    throw new IllegalStateException("Fail to configure webapp",e);
  }
}
