{
  RuleActivation activation=new RuleActivation(RuleTesting.XOO_X1);
  activation.setSeverity(Severity.BLOCKER);
  activation.setParameter("max","7");
  List<ActiveRuleChange> changes=ruleActivator.activate(dbSession,activation,XOO_P1_KEY);
  dbSession.commit();
  dbSession.clearCache();
  assertThat(countActiveRules(XOO_P1_KEY)).isEqualTo(1);
  verifyHasActiveRule(ActiveRuleKey.of(XOO_P1_KEY,RuleTesting.XOO_X1),Severity.BLOCKER,null,ImmutableMap.of("max","7"));
  assertThat(changes).hasSize(1);
  assertThat(changes.get(0).getType()).isEqualTo(ActiveRuleChange.Type.ACTIVATED);
}
