{
  Collection<File> files=FileUtils.listFiles(dirToIndex,FILE_FILTER,DIR_FILTER);
  for (  File sourceFile : files) {
    DefaultInputFile inputFile=inputFileBuilder.create(sourceFile);
    if (inputFile != null) {
      if (exclusionFilters.accept(inputFile,InputFile.Type.MAIN)) {
        indexFile(inputFileBuilder,fileSystem,status,inputFile,InputFile.Type.MAIN);
      }
      if (exclusionFilters.accept(inputFile,InputFile.Type.TEST)) {
        indexFile(inputFileBuilder,fileSystem,status,inputFile,InputFile.Type.TEST);
      }
    }
  }
}
