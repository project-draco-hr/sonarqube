{
  tasks.add(executorService.submit(new Callable<Void>(){
    @Override public Void call(){
      InputFileMetadata metadata=inputFileBuilder.completeAndComputeMetadata(inputFile,type);
      if (metadata != null && accept(inputFile)) {
        fs.add(inputFile);
        status.markAsIndexed(inputFile);
        inputPathCache.put(inputFile.moduleKey(),inputFile.relativePath(),metadata);
        File parentDir=inputFile.file().getParentFile();
        String relativePath=new PathResolver().relativePath(fs.baseDir(),parentDir);
        if (relativePath != null) {
          DefaultInputDir inputDir=new DefaultInputDir(fs.moduleKey(),relativePath);
          fs.add(inputDir);
        }
      }
      return null;
    }
  }
));
}
