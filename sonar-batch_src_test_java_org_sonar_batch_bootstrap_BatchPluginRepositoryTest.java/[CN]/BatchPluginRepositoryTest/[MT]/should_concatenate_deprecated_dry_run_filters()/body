{
  Settings settings=new Settings().setProperty(CoreProperties.DRY_RUN_INCLUDE_PLUGINS,"cockpit").setProperty(CoreProperties.DRY_RUN_EXCLUDE_PLUGINS,"views").setProperty(CoreProperties.BATCH_EXCLUDE_PLUGINS,"checkstyle,pmd");
  when(mode.isPreview()).thenReturn(true);
  BatchPluginRepository.PluginFilter filter=new BatchPluginRepository.PluginFilter(settings,mode);
  assertThat(filter.whites).containsOnly("cockpit");
  assertThat(filter.blacks).containsOnly("views","checkstyle","pmd");
}
