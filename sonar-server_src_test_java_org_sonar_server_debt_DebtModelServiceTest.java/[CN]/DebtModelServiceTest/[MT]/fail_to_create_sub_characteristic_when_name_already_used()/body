{
  when(dao.selectByName("Compilation",session)).thenReturn(new CharacteristicDto());
  when(dao.selectById(1)).thenReturn(rootCharacteristicDto);
  try {
    service.createCharacteristic("Compilation",1);
    fail();
  }
 catch (  BadRequestException e) {
    assertThat(e.l10nKey()).isEqualTo("errors.is_already_used");
    assertThat(e.l10nParams().iterator().next()).isEqualTo("Compilation");
  }
}
