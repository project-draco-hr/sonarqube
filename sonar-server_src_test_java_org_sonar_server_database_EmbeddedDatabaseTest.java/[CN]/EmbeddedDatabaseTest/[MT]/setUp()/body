{
  try {
    InMemoryDatabase.stopDatabase();
  }
 catch (  Exception e) {
  }
  windowsCleanup();
  if (testPort == null) {
    testPort=Integer.toString(findFreeServerPort());
  }
  defaultProps=EmbeddedDatabase.getDefaultProperties(new Settings());
  defaultProps.put("derby.drda.portNumber",testPort);
  driverUrl="jdbc:derby://localhost:" + testPort + "/sonar;create=true;user=sonar;password=sonar";
}
