{
  when(myBatis.openSession(false)).thenReturn(session);
  when(sessionFactory.getSession()).thenReturn(hibernateSession);
  definitions=newArrayList();
  backup=new QProfileBackup(sessionFactory,xmlProfileParser,xmlProfileSerializer,myBatis,qProfileLookup,qProfileOperations,qProfileActiveRuleOperations,ruleDao,definitions,defaultProfilesCache,dryRunCache);
  MockUserSession.set().setLogin("nicolas").setName("Nicolas").setGlobalPermissions(GlobalPermissions.QUALITY_PROFILE_ADMIN);
}
