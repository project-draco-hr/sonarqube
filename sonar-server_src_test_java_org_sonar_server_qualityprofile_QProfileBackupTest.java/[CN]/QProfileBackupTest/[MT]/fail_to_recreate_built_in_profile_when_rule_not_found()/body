{
  String name="Default";
  String language="java";
  RulesProfile profile=RulesProfile.create(name,language);
  Rule rule=Rule.create("pmd","rule");
  profile.activateRule(rule,null);
  ProfileDefinition profileDefinition=mock(ProfileDefinition.class);
  when(profileDefinition.createProfile(any(ValidationMessages.class))).thenReturn(profile);
  definitions.add(profileDefinition);
  when(ruleDao.getByKey(RuleKey.of("pmd","rule"),session)).thenReturn(null);
  when(qProfileOperations.newProfile(eq(name),eq(language),eq(true),any(UserSession.class),eq(session))).thenReturn(new QProfile().setId(1));
  try {
    backup.recreateBuiltInProfilesByLanguage(language);
    fail();
  }
 catch (  Exception e) {
    assertThat(e).isInstanceOf(NotFoundException.class);
  }
  verifyZeroInteractions(qProfileActiveRuleOperations);
  verifyZeroInteractions(esActiveRule);
}
