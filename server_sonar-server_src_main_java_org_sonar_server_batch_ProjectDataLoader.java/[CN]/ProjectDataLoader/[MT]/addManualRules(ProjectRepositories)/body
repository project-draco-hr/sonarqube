{
  Result<Rule> ruleSearchResult=ruleService.search(new RuleQuery().setRepositories(newArrayList(RuleKey.MANUAL_REPOSITORY_KEY)),new QueryContext(userSession).setScroll(true).setFieldsToReturn(newArrayList(RuleNormalizer.RuleField.KEY.field(),RuleNormalizer.RuleField.NAME.field())));
  Iterator<Rule> rules=ruleSearchResult.scroll();
  while (rules.hasNext()) {
    Rule rule=rules.next();
    ref.addActiveRule(new org.sonar.batch.protocol.input.ActiveRule(RuleKey.MANUAL_REPOSITORY_KEY,rule.key().rule(),null,rule.name(),null,null,null));
  }
}
