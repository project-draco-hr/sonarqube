{
  Snapshot snapshot=findProject(resourceModel.getId(),bucket.getResource().getVersion());
  if (snapshot == null) {
    snapshot=findLibrary(resourceModel.getId(),bucket.getResource().getVersion());
  }
  if (snapshot == null) {
    snapshot=new Snapshot(resourceModel,null);
    snapshot.setCreatedAt(now);
    snapshot.setVersion(bucket.getResource().getVersion());
    snapshot.setStatus(Snapshot.STATUS_PROCESSED);
    snapshot.setQualifier(Resource.QUALIFIER_LIB);
  }
  return snapshot;
}
