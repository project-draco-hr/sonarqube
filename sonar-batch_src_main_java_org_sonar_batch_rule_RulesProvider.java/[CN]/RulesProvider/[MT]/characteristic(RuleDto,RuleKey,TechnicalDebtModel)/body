{
  Integer characteristicId=ruleDto.getCharacteristicId();
  Integer defaultCharacteristicId=ruleDto.getDefaultCharacteristicId();
  Integer effectiveCharacteristicId=characteristicId != null ? characteristicId : defaultCharacteristicId;
  Characteristic characteristic=debtModel.characteristicById(effectiveCharacteristicId);
  if (characteristic == null) {
    throw new IllegalStateException(String.format("Characteristic id '%s' on rule '%s' has not been found",effectiveCharacteristicId,ruleKey));
  }
  return characteristic;
}
