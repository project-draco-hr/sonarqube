{
  RuleDto templateRule=newRuleDto(RuleKey.of("java","S001")).setCardinality(Cardinality.MULTIPLE);
  dao.insert(dbSession,templateRule);
  dao.insert(dbSession,newRuleDto(RuleKey.of("java","S001_MY_CUSTOM")).setTemplateId(templateRule.getId()));
  dbSession.commit();
  RuleQuery query=new RuleQuery();
  Result<Rule> results=index.search(query,new QueryOptions());
  assertThat(results.getHits()).hasSize(2);
  assertThat(index.getByKey(RuleKey.of("java","S001_MY_CUSTOM")).templateKey()).isEqualTo(RuleKey.of("java","S001"));
}
