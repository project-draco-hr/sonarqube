{
  RuleDto ruleDto=RuleTesting.newDto(RuleKey.of("javascript","S001"));
  dao.insert(dbSession,ruleDto);
  dbSession.commit();
  Rule rule=index.getByKey(RuleKey.of("javascript","S001"));
  assertThat(rule.htmlDescription()).isEqualTo(ruleDto.getDescription());
  assertThat(rule.key()).isEqualTo(ruleDto.getKey());
  assertThat(rule.debtRemediationFunction().type().name()).isEqualTo(ruleDto.getRemediationFunction());
  assertThat(Sets.newHashSet(rule.tags())).isEqualTo(ruleDto.getTags());
  assertThat(Sets.newHashSet(rule.systemTags())).isEqualTo(ruleDto.getSystemTags());
}
