{
  json.name("scm").beginArray();
  SourceLineDoc previousLine=null;
  boolean started=false;
  for (  SourceLineDoc lineDoc : lines) {
    if (hasScm(lineDoc) && (!started || showCommitsByLine || !isSameCommit(previousLine,lineDoc))) {
      json.beginArray().value(lineDoc.line()).value(lineDoc.scmAuthor());
      Date date=lineDoc.scmDate();
      json.value(date == null ? null : DateUtils.formatDateTime(date));
      json.value(lineDoc.scmRevision());
      json.endArray();
      started=true;
    }
    previousLine=lineDoc;
  }
  json.endArray();
}
