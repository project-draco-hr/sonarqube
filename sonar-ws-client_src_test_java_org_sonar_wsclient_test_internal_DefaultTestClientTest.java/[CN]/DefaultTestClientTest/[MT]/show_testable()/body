{
  HttpRequestFactory requestFactory=new HttpRequestFactory(httpServer.url());
  httpServer.stubResponseBody(Resources.toString(Resources.getResource(this.getClass(),"DefaultTestClientTest/show_testable.json"),Charsets.UTF_8));
  TestClient client=new DefaultTestClient(requestFactory);
  TestableTestCases coveringTestCases=client.testable("MyFile",10);
  assertThat(httpServer.requestedPath()).isEqualTo("/api/tests/testable?key=MyFile&line=10");
  assertThat(coveringTestCases.tests()).hasSize(1);
  assertThat(coveringTestCases.files()).hasSize(1);
  TestableTestCases.TestCase testCase=coveringTestCases.tests().get(0);
  assertThat(testCase.name()).isEqualTo("find_by_params");
  assertThat(testCase.status()).isEqualTo("OK");
  assertThat(testCase.durationInMs()).isEqualTo(10L);
  TestableTestCases.File file=coveringTestCases.fileByTest("find_by_params");
  assertThat(file.key()).isEqualTo("org.codehaus.sonar:sonar-server:src/test/java/org/sonar/server/rule/RubyRuleServiceTest.java");
  assertThat(file.longName()).isEqualTo("src/test/java/org/sonar/server/rule/RubyRuleServiceTest.java");
  assertThat(coveringTestCases.fileByTest("unknown")).isNull();
}
