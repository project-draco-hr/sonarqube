{
  RuleDao dao=tester.get(RuleDao.class);
  dao.insert(newRuleDto(RuleKey.of("javascript","S001")).setConfigKey("I should not see this"));
  RuleService service=tester.get(RuleService.class).refresh();
  RuleQuery query=service.newRuleQuery();
  QueryOptions options=new QueryOptions();
  options.getFieldsToReturn().add(RuleNormalizer.RuleField.INTERNAL_KEY.key());
  Results results=service.search(query,options);
  assertThat(results.getTotal()).isEqualTo(1);
  assertThat(results.getHits()).hasSize(1);
  assertThat(Iterables.getFirst(results.getHits(),null).getFieldAsString("key")).isEqualTo("S001");
  assertThat(Iterables.getFirst(results.getHits(),null).getFieldAsString(RuleNormalizer.RuleField.INTERNAL_KEY.key())).isNull();
}
