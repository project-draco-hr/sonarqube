{
  StandardProfileXmlParser standardProfileXmlParser=new StandardProfileXmlParser();
  InputStream input=getClass().getResourceAsStream("/org/sonar/api/rules/test_profile.xml");
  Profile profile=standardProfileXmlParser.buildProfileFromXml(IOUtils.toString(input));
  assertThat("Sonar way",is(profile.getName()));
  assertThat(profile.getRules().size(),is(3));
  org.sonar.api.rules.xml.Rule rule1=profile.getRules().get(0);
  assertThat(rule1.getKey(),is("2006"));
  assertThat(rule1.getPriority(),is("warning"));
  assertNull(rule1.getProperties());
  org.sonar.api.rules.xml.Rule rule2=profile.getRules().get(1);
  assertThat(rule2.getKey(),is("2007"));
  assertThat(rule2.getPriority(),is("error"));
  assertThat(rule2.getProperties().size(),is(1));
  org.sonar.api.rules.xml.Rule rule3=profile.getRules().get(2);
  assertThat(rule3.getKey(),is("2008"));
  assertThat(rule3.getPriority(),is("critical"));
  assertNull(rule3.getProperties());
  Property rule2Property=rule2.getProperties().get(0);
  assertThat(rule2Property.getName(),is("toto"));
  assertThat(rule2Property.getValue(),is("titi"));
}
