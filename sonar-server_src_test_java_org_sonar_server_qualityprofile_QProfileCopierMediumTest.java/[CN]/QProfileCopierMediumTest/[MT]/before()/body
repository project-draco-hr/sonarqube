{
  tester.clearDbAndIndexes();
  db=tester.get(DbClient.class);
  dbSession=db.openSession(false);
  ruleActivator=tester.get(RuleActivator.class);
  index=tester.get(ActiveRuleIndex.class);
  copier=tester.get(QProfileCopier.class);
  RuleDto xooRule1=RuleTesting.newDto(XOO_RULE_1).setSeverity("MINOR").setLanguage("xoo");
  RuleDto xooRule2=RuleTesting.newDto(XOO_RULE_2).setSeverity("MAJOR").setLanguage("xoo");
  db.ruleDao().insert(dbSession,xooRule1,xooRule2);
  db.ruleDao().addRuleParam(dbSession,xooRule1,RuleParamDto.createFor(xooRule1).setName("max").setDefaultValue("10").setType(RuleParamType.INTEGER.type()));
  db.qualityProfileDao().insert(dbSession,QualityProfileDto.createFor(XOO_PROFILE_1));
  dbSession.commit();
  dbSession.clearCache();
}
