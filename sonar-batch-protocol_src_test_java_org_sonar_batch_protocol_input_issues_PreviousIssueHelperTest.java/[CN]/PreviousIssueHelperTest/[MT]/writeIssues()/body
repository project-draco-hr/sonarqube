{
  PreviousIssueHelper helper=PreviousIssueHelper.create();
  StringWriter out=new StringWriter();
  PreviousIssue issue1=new PreviousIssue();
  issue1.setKey("key1");
  issue1.setComponentPath("path");
  issue1.setRuleKey("repokey","rulekey");
  issue1.setLine(2);
  issue1.setMessage("message");
  issue1.setSeverity("severity");
  issue1.setResolution("resolution");
  issue1.setStatus("status");
  issue1.setChecksum("checksum");
  issue1.setAssigneeLogin("login");
  issue1.setAssigneeFullname("fullname");
  PreviousIssue issue2=new PreviousIssue();
  issue2.setKey("key2");
  helper.streamIssues(out,Arrays.asList(issue1,issue2),new PreviousIssueHelper.Function<PreviousIssue,PreviousIssue>(){
    @Override public PreviousIssue apply(    PreviousIssue from){
      return from;
    }
  }
);
  JSONAssert.assertEquals("[{\"key\": \"key1\", \"componentPath\": \"path\", \"ruleKey\": \"rulekey\", \"ruleRepo\": \"repokey\", \"line\": 2,\"message\": \"message\", \"severity\": \"severity\", \"resolution\": \"resolution\", \"status\": \"status\", \"checksum\": \"checksum\",\"assigneeLogin\": \"login\", \"assigneeFullname\": \"fullname\"}," + "{\"key\": \"key2\"}]",out.getBuffer().toString(),true);
}
