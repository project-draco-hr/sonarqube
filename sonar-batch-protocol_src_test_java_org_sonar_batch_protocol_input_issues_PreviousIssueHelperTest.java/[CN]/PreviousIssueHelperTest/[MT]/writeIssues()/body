{
  StringWriter out=new StringWriter();
  PreviousIssueHelper helper=PreviousIssueHelper.create(out);
  PreviousIssue issue1=new PreviousIssue();
  issue1.setKey("key1");
  issue1.setComponentPath("path");
  issue1.setRuleKey("repokey","rulekey");
  issue1.setLine(2);
  issue1.setMessage("message");
  issue1.setSeverity("severity");
  issue1.setResolution("resolution");
  issue1.setStatus("status");
  issue1.setChecksum("checksum");
  issue1.setAssigneeLogin("login");
  issue1.setAssigneeFullname("fullname");
  PreviousIssue issue2=new PreviousIssue();
  issue2.setKey("key2");
  PreviousIssueFunction previousIssueFunction=new PreviousIssueFunction();
  helper.addIssue(issue1,previousIssueFunction);
  helper.addIssue(issue2,previousIssueFunction);
  helper.close();
  JSONAssert.assertEquals("[{\"key\": \"key1\", \"componentPath\": \"path\", \"ruleKey\": \"rulekey\", \"ruleRepo\": \"repokey\", \"line\": 2,\"message\": \"message\", \"severity\": \"severity\", \"resolution\": \"resolution\", \"status\": \"status\", \"checksum\": \"checksum\",\"assigneeLogin\": \"login\", \"assigneeFullname\": \"fullname\"}," + "{\"key\": \"key2\"}]",out.getBuffer().toString(),true);
}
