{
  ElementKey key=new ElementKey(element,beanClass);
  T bean=(T)cache.get(key);
  if (bean == null) {
    try {
      bean=(T)key.beanClass.newInstance();
      bean.setElement(key.element);
      bean.setBeanGraph(graph);
      cache.put(key,bean);
    }
 catch (    InstantiationException e) {
      throw new IllegalStateException("Class has no default constructor: " + beanClass.getName(),e);
    }
catch (    IllegalAccessException e) {
      throw new IllegalStateException("Can not access to default constructor: " + beanClass.getName(),e);
    }
  }
  return bean;
}
