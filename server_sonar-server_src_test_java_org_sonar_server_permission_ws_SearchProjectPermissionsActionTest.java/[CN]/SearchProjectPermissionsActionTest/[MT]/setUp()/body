{
  resourceTypes=mock(ResourceTypes.class);
  when(resourceTypes.getRoots()).thenReturn(rootResourceTypes());
  ComponentFinder componentFinder=new ComponentFinder(dbClient);
  initI18nMessages();
  dataLoader=new SearchProjectPermissionsDataLoader(dbClient,componentFinder,resourceTypes);
  underTest=new SearchProjectPermissionsAction(dbClient,userSession,i18n,dataLoader);
  ws=new WsActionTester(underTest);
  userSession.login().setGlobalPermissions(GlobalPermissions.SYSTEM_ADMIN);
}
