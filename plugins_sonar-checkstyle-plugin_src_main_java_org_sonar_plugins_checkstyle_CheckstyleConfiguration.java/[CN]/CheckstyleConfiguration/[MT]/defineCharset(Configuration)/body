{
  Configuration[] modules=configuration.getChildren();
  for (  Configuration module : modules) {
    if ("Checker".equals(module.getName()) || "com.puppycrawl.tools.checkstyle.Checker".equals(module.getName())) {
      if (module instanceof DefaultConfiguration) {
        Charset charset=getCharset();
        LOG.info("Checkstyle charset: " + charset.name());
        ((DefaultConfiguration)module).addAttribute("charset",charset.name());
      }
    }
  }
}
