{
  PermissionQuery.Builder builder=PermissionQuery.builder();
  builder.permission((String)params.get("permission"));
  builder.component((String)params.get("component"));
  builder.template((String)params.get("template"));
  builder.membership(membership(params));
  builder.search((String)params.get("query"));
  builder.pageIndex(RubyUtils.toInteger(params.get("page")));
  builder.pageSize(RubyUtils.toInteger(params.get("pageSize")));
  return builder.build();
}
