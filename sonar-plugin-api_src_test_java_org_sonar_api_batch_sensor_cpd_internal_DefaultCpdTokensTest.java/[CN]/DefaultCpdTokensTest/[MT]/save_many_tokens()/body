{
  SensorStorage sensorStorage=mock(SensorStorage.class);
  DefaultCpdTokens tokens=new DefaultCpdTokens(sensorStorage).onFile(INPUT_FILE).addToken(INPUT_FILE.newRange(1,2,1,5),"foo").addToken(INPUT_FILE.newRange(1,6,1,10),"bar").addToken(INPUT_FILE.newRange(1,20,1,25),"biz").addToken(INPUT_FILE.newRange(2,1,2,10),"next");
  tokens.save();
  verify(sensorStorage).store(tokens);
  assertThat(tokens.getTokenLines()).extracting("value","startLine","hashCode","startUnit","endUnit").containsExactly(tuple("foobarbiz",1,"foobarbiz".hashCode(),1,3),tuple("next",2,"next".hashCode(),4,4));
}
