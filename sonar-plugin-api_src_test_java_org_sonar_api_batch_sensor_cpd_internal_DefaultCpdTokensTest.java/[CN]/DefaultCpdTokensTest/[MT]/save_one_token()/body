{
  SensorStorage sensorStorage=mock(SensorStorage.class);
  DefaultCpdTokens tokens=new DefaultCpdTokens(new MapSettings(),sensorStorage).onFile(INPUT_FILE).addToken(INPUT_FILE.newRange(1,2,1,5),"foo");
  tokens.save();
  verify(sensorStorage).store(tokens);
  assertThat(tokens.getTokenLines()).extracting("value","startLine","hashCode","startUnit","endUnit").containsExactly(tuple("foo",1,"foo".hashCode(),1,1));
}
