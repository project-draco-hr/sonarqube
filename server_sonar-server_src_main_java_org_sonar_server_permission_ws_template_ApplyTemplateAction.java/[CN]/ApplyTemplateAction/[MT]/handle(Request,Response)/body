{
  DbSession dbSession=dbClient.openSession(false);
  try {
    PermissionTemplateDto template=finder.getTemplate(dbSession,WsTemplateRef.fromRequest(wsRequest));
    ComponentDto project=finder.getRootComponentOrModule(dbSession,WsProjectRef.newWsProjectRef(wsRequest));
    ApplyPermissionTemplateQuery query=ApplyPermissionTemplateQuery.create(template.getUuid(),singletonList(project.key()));
    permissionService.applyPermissionTemplate(query);
  }
  finally {
    dbClient.closeSession(dbSession);
  }
  wsResponse.noContent();
}
