{
  setupData("shouldReloadEvictedMeasure");
  MemoryOptimizer optimizer=new MemoryOptimizer(getSession());
  Measure measure=new Measure(CoreMetrics.CONDITIONS_BY_LINE).setData("initial").setPersistenceMode(PersistenceMode.DATABASE).setId(12345L);
  optimizer.evictDataMeasure(measure,newPersistedModel());
  assertThat(measure.getData(),nullValue());
  optimizer.reloadMeasure(measure);
  assertThat(measure.getData().length(),greaterThan(5));
  optimizer.flushMemory();
  assertThat(measure.getData(),nullValue());
}
