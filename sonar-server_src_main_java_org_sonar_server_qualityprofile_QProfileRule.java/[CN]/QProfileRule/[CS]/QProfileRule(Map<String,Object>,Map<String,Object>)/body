{
  id=(Integer)ruleSource.get(RuleDocument.FIELD_ID);
  key=(String)ruleSource.get(RuleDocument.FIELD_KEY);
  repositoryKey=(String)ruleSource.get(RuleDocument.FIELD_REPOSITORY_KEY);
  name=(String)ruleSource.get(RuleDocument.FIELD_NAME);
  description=(String)ruleSource.get(RuleDocument.FIELD_DESCRIPTION);
  status=(String)ruleSource.get(RuleDocument.FIELD_STATUS);
  cardinality=(String)ruleSource.get("cardinality");
  templateId=(Integer)ruleSource.get(RuleDocument.FIELD_TEMPLATE_ID);
  createdAt=parseOptionalDate(RuleDocument.FIELD_CREATED_AT,ruleSource);
  updatedAt=parseOptionalDate(RuleDocument.FIELD_UPDATED_AT,ruleSource);
  if (ruleSource.containsKey(RuleDocument.FIELD_NOTE)) {
    Map<String,Object> ruleNoteDocument=(Map<String,Object>)ruleSource.get(RuleDocument.FIELD_NOTE);
    ruleNote=new QProfileRuleNote((String)ruleNoteDocument.get(RuleDocument.FIELD_NOTE_DATA),(String)ruleNoteDocument.get(RuleDocument.FIELD_NOTE_USER_LOGIN),parseOptionalDate(RuleDocument.FIELD_NOTE_CREATED_AT,ruleNoteDocument),parseOptionalDate(RuleDocument.FIELD_NOTE_UPDATED_AT,ruleNoteDocument));
  }
 else {
    ruleNote=null;
  }
  if (activeRuleSource.isEmpty()) {
    activeRuleId=null;
    severity=(String)ruleSource.get(ActiveRuleDocument.FIELD_SEVERITY);
    inheritance=null;
    activeRuleNote=null;
    activeRuleParentId=null;
  }
 else {
    activeRuleId=(Integer)activeRuleSource.get(ActiveRuleDocument.FIELD_ID);
    severity=(String)activeRuleSource.get(ActiveRuleDocument.FIELD_SEVERITY);
    inheritance=(String)activeRuleSource.get(ActiveRuleDocument.FIELD_INHERITANCE);
    activeRuleParentId=(Integer)activeRuleSource.get(ActiveRuleDocument.FIELD_ACTIVE_RULE_PARENT_ID);
    if (activeRuleSource.containsKey(ActiveRuleDocument.FIELD_NOTE)) {
      Map<String,Object> ruleNoteDocument=(Map<String,Object>)activeRuleSource.get(ActiveRuleDocument.FIELD_NOTE);
      activeRuleNote=new QProfileRuleNote((String)ruleNoteDocument.get(ActiveRuleDocument.FIELD_NOTE_DATA),(String)ruleNoteDocument.get(ActiveRuleDocument.FIELD_NOTE_USER_LOGIN),parseOptionalDate(ActiveRuleDocument.FIELD_NOTE_CREATED_AT,ruleNoteDocument),parseOptionalDate(ActiveRuleDocument.FIELD_NOTE_UPDATED_AT,ruleNoteDocument));
    }
 else {
      activeRuleNote=null;
    }
  }
  params=Lists.newArrayList();
  if (ruleSource.containsKey(RuleDocument.FIELD_PARAMS)) {
    Map<String,Map<String,Object>> ruleParams=Maps.newHashMap();
    for (    Map<String,Object> ruleParam : (List<Map<String,Object>>)ruleSource.get(RuleDocument.FIELD_PARAMS)) {
      ruleParams.put((String)ruleParam.get(RuleDocument.FIELD_PARAM_KEY),ruleParam);
    }
    Map<String,Map<String,Object>> activeRuleParams=Maps.newHashMap();
    if (activeRuleSource.containsKey(ActiveRuleDocument.FIELD_PARAMS)) {
      for (      Map<String,Object> activeRuleParam : (List<Map<String,Object>>)activeRuleSource.get(ActiveRuleDocument.FIELD_PARAMS)) {
        activeRuleParams.put((String)activeRuleParam.get(ActiveRuleDocument.FIELD_PARAM_KEY),activeRuleParam);
      }
    }
    for (    Map.Entry<String,Map<String,Object>> ruleParam : ruleParams.entrySet()) {
      params.add(new QProfileRuleParam((String)ruleParam.getValue().get(RuleDocument.FIELD_PARAM_KEY),activeRuleParams.containsKey(ruleParam.getKey()) ? (String)activeRuleParams.get(ruleParam.getKey()).get(ActiveRuleDocument.FIELD_PARAM_VALUE) : null,(String)ruleParam.getValue().get(RuleDocument.FIELD_PARAM_DESCRIPTION),(String)ruleParam.getValue().get(RuleDocument.FIELD_PARAM_DEFAULT_VALUE),(String)ruleParam.getValue().get(RuleDocument.FIELD_PARAM_TYPE)));
    }
  }
  systemTags=Lists.newArrayList();
  if (ruleSource.containsKey(RuleDocument.FIELD_SYSTEM_TAGS)) {
    for (    String tag : (List<String>)ruleSource.get(RuleDocument.FIELD_SYSTEM_TAGS)) {
      systemTags.add(tag);
    }
  }
  adminTags=Lists.newArrayList();
  if (ruleSource.containsKey(RuleDocument.FIELD_ADMIN_TAGS)) {
    for (    String tag : (List<String>)ruleSource.get(RuleDocument.FIELD_ADMIN_TAGS)) {
      adminTags.add(tag);
    }
  }
}
