{
  rule=RuleDocumentParser.parse(ruleSource);
  if (activeRuleSource.isEmpty()) {
    activeRuleId=null;
    severity=(String)ruleSource.get(ActiveRuleDocument.FIELD_SEVERITY);
    inheritance=null;
    activeRuleParentId=null;
  }
 else {
    activeRuleId=(Integer)activeRuleSource.get(ActiveRuleDocument.FIELD_ID);
    severity=(String)activeRuleSource.get(ActiveRuleDocument.FIELD_SEVERITY);
    inheritance=(String)activeRuleSource.get(ActiveRuleDocument.FIELD_INHERITANCE);
    activeRuleParentId=(Integer)activeRuleSource.get(ActiveRuleDocument.FIELD_ACTIVE_RULE_PARENT_ID);
  }
  params=Lists.newArrayList();
  Map<String,String> paramValues=Maps.newHashMap();
  if (activeRuleSource.containsKey(ActiveRuleDocument.FIELD_PARAMS)) {
    for (    Map<String,Object> activeRuleParam : (List<Map<String,Object>>)activeRuleSource.get(ActiveRuleDocument.FIELD_PARAMS)) {
      paramValues.put((String)activeRuleParam.get(ActiveRuleDocument.FIELD_PARAM_KEY),(String)activeRuleParam.get(ActiveRuleDocument.FIELD_PARAM_VALUE));
    }
  }
  for (  RuleParam param : rule.params()) {
    params.add(new QProfileRuleParam(param,paramValues.get(param.key())));
  }
}
