{
  rule=new Rule(ruleSource);
  if (activeRuleSource.isEmpty()) {
    activeRuleId=null;
    severity=(String)ruleSource.get(ActiveRuleDocument.FIELD_SEVERITY);
    inheritance=null;
    activeRuleNote=null;
    activeRuleParentId=null;
  }
 else {
    activeRuleId=(Integer)activeRuleSource.get(ActiveRuleDocument.FIELD_ID);
    severity=(String)activeRuleSource.get(ActiveRuleDocument.FIELD_SEVERITY);
    inheritance=(String)activeRuleSource.get(ActiveRuleDocument.FIELD_INHERITANCE);
    activeRuleParentId=(Integer)activeRuleSource.get(ActiveRuleDocument.FIELD_ACTIVE_RULE_PARENT_ID);
    if (activeRuleSource.containsKey(ActiveRuleDocument.FIELD_NOTE)) {
      Map<String,Object> ruleNoteDocument=(Map<String,Object>)activeRuleSource.get(ActiveRuleDocument.FIELD_NOTE);
      activeRuleNote=new RuleNote((String)ruleNoteDocument.get(ActiveRuleDocument.FIELD_NOTE_DATA),(String)ruleNoteDocument.get(ActiveRuleDocument.FIELD_NOTE_USER_LOGIN),Rule.parseOptionalDate(ActiveRuleDocument.FIELD_NOTE_CREATED_AT,ruleNoteDocument),Rule.parseOptionalDate(ActiveRuleDocument.FIELD_NOTE_UPDATED_AT,ruleNoteDocument));
    }
 else {
      activeRuleNote=null;
    }
  }
  params=Lists.newArrayList();
  Map<String,String> paramValues=Maps.newHashMap();
  if (activeRuleSource.containsKey(ActiveRuleDocument.FIELD_PARAMS)) {
    for (    Map<String,Object> activeRuleParam : (List<Map<String,Object>>)activeRuleSource.get(ActiveRuleDocument.FIELD_PARAMS)) {
      paramValues.put((String)activeRuleParam.get(ActiveRuleDocument.FIELD_PARAM_KEY),(String)activeRuleParam.get(ActiveRuleDocument.FIELD_PARAM_VALUE));
    }
  }
  for (  RuleParam param : rule.params()) {
    params.add(new QProfileRuleParam(param,paramValues.get(param.key())));
  }
}
