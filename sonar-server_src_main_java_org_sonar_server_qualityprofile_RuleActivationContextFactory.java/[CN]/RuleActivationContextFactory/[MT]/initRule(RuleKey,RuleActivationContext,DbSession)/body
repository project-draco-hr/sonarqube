{
  RuleDto rule=db.ruleDao().getByKey(dbSession,ruleKey);
  if (rule == null) {
    throw new IllegalArgumentException("Rule not found: " + ruleKey);
  }
  if (RuleStatus.REMOVED == rule.getStatus()) {
    throw new IllegalArgumentException("Rule was removed: " + ruleKey);
  }
  if (Cardinality.MULTIPLE.equals(rule.getCardinality())) {
    throw new IllegalArgumentException("A rule template can't be activated on a Quality profile: " + ruleKey);
  }
  context.setRule(rule);
  context.setRuleParams(db.ruleDao().findRuleParamsByRuleKey(rule.getKey(),dbSession));
  return rule;
}
