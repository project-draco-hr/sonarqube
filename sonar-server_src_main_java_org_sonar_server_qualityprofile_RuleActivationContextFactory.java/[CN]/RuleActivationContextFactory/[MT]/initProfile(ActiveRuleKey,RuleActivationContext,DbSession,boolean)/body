{
  QualityProfileDto profile=db.qualityProfileDao().getByKey(key.qProfile(),session);
  if (profile == null) {
    throw new IllegalArgumentException("Quality profile not found: " + key.qProfile());
  }
  if (parent) {
    context.setParentProfile(profile);
  }
 else {
    context.setProfile(profile);
  }
  return profile;
}
