{
  List<String> keys=Arrays.asList("one","two","three");
  Map<String,String> values=new HashMap<>();
  values.put("one","un");
  values.put("two","deux");
  values.put("three",null);
  when(loader.loadAll(keys)).thenReturn(values);
  assertThat(cache.getAll(keys)).hasSize(3).containsEntry("one","un").containsEntry("two","deux").containsEntry("three",null);
  when(loader.loadAll(Arrays.asList("four"))).thenReturn(ImmutableMap.of("four","quatre"));
  assertThat(cache.getAll(Arrays.asList("one","two","four"))).hasSize(3).containsEntry("one","un").containsEntry("two","deux").containsEntry("four","quatre");
  verify(loader,times(2)).loadAll(anyCollection());
}
