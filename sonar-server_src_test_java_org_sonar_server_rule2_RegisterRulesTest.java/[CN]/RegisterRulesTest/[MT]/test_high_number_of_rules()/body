{
  task=new RegisterRules(new RuleDefinitionsLoader(mock(RuleRepositories.class),new RulesDefinition[]{new BigRepository()}),profilesManager,dbClient,characteristicDao);
  setupData("shared");
  task.start();
  assertThat(ruleDao.findAll(session)).hasSize(BigRepository.SIZE + 1);
  assertThat(ruleDao.findAllRuleParams(session)).hasSize(BigRepository.SIZE * 20);
}
