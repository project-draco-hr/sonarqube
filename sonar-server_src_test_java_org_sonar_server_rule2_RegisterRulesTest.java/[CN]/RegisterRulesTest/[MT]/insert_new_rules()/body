{
  setupData("shared");
  task.start();
  verify(ruleRegistry).reindex(rulesCaptor.capture(),any(SqlSession.class));
  assertThat(rulesCaptor.getValue()).hasSize(3);
  verify(ruleRegistry).removeDeletedRules(any(String[].class));
  verify(esRuleTags).putAllTags(ruleTagsCaptor.capture());
  assertThat(ruleTagsCaptor.getValue()).hasSize(3);
  checkTables("insert_new_rules",EXCLUDED_COLUMN_NAMES,"rules","rules_parameters","rules_rule_tags","rule_tags");
}
