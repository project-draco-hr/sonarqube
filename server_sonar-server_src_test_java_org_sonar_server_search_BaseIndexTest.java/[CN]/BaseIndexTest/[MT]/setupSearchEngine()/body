{
  clusterName="cluster-mem-" + System.currentTimeMillis();
  clusterPort=NetworkUtils.freePort();
  Properties properties=new Properties();
  properties.setProperty(IndexProperties.CLUSTER_NAME,clusterName);
  properties.setProperty(IndexProperties.NODE_PORT,clusterPort.toString());
  properties.setProperty(MonitoredProcess.NAME_PROPERTY,"ES");
  properties.setProperty("sonar.path.data",temp.getRoot().getAbsolutePath());
  properties.setProperty("sonar.path.logs",temp.getRoot().getAbsolutePath());
  properties.setProperty("sonar.path.temp",temp.getRoot().getAbsolutePath());
  try {
    searchServer=new SearchServer(new Props(properties),false,false);
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
  searchServer.start();
}
