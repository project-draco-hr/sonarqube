{
  Long total=0L;
  SumMap<RuleKey> ruleDebts=new SumMap<>();
  SumMap<Characteristic> characteristicDebts=new SumMap<>();
  for (  Issue issue : issues) {
    Long debt=((DefaultIssue)issue).debtInMinutes();
    total+=computeDebt(debt,issue.ruleKey(),ruleDebts,characteristicDebts);
  }
  for (  Measure measure : context.getChildrenMeasures(MeasuresFilters.rules(CoreMetrics.TECHNICAL_DEBT))) {
    Long debt=measure.getValue().longValue();
    RuleMeasure ruleMeasure=(RuleMeasure)measure;
    total+=computeDebt(debt,ruleMeasure.ruleKey(),ruleDebts,characteristicDebts);
  }
  context.saveMeasure(CoreMetrics.TECHNICAL_DEBT,total.doubleValue());
  saveOnRule(context,ruleDebts);
  for (  Characteristic characteristic : model.characteristics()) {
    Long debt=characteristicDebts.get(characteristic);
    saveCharacteristicMeasure(context,characteristic,debt != null ? debt.doubleValue() : 0d,false);
  }
}
