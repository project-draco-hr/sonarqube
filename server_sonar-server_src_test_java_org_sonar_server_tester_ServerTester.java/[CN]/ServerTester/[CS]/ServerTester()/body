{
  homeDir=createTempDir();
  platform=new Platform();
  clusterName="cluster-mem-" + System.currentTimeMillis();
  clusterPort=NetworkUtils.freePort();
  Properties properties=new Properties();
  properties.setProperty(IndexProperties.CLUSTER_NAME,clusterName);
  properties.setProperty(IndexProperties.NODE_PORT,clusterPort.toString());
  properties.setProperty(MonitoredProcess.NAME_PROPERTY,"ES");
  properties.setProperty("sonar.path.data",new File(homeDir,"data/es").getAbsolutePath());
  properties.setProperty("sonar.path.logs",new File(homeDir,"logs").getAbsolutePath());
  properties.setProperty("sonar.path.temp",new File(homeDir,"temp").getAbsolutePath());
  try {
    searchServer=new SearchServer(new Props(properties),false,false);
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
}
