{
  int countClearedRules=0;
  for (  RuleDto rule : dbClient.deprecatedRuleDao().selectAll(session)) {
    if (isDebtOverridden(rule)) {
      rule.setSubCharacteristicId(null);
      rule.setRemediationFunction(null);
      rule.setRemediationCoefficient(null);
      rule.setRemediationOffset(null);
      dbClient.deprecatedRuleDao().update(session,rule);
      countClearedRules++;
    }
  }
  if (countClearedRules > 0) {
    LOG.warn("The SQALE model has been cleaned to remove useless data left over by previous migrations. The technical debt of {} rules was reset to their default values.",countClearedRules);
    LOG.warn("=> As a consequence, the overall technical debt of your projects might slightly evolve during the next analysis.");
  }
}
