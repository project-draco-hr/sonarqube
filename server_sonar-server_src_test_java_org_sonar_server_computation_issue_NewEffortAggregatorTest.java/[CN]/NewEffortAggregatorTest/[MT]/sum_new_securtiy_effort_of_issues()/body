{
  periodsHolder.setPeriods(PERIOD);
  DefaultIssue unresolved1=newVulnerabilityIssue(10L);
  DefaultIssue unresolved2=newVulnerabilityIssue(30L);
  DefaultIssue unresolvedWithoutDebt=newVulnerabilityIssueWithoutEffort();
  DefaultIssue resolved=newVulnerabilityIssue(50L).setResolution(RESOLUTION_FIXED);
  when(calculator.calculate(same(unresolved1),anyList(),same(PERIOD))).thenReturn(4L);
  when(calculator.calculate(same(unresolved2),anyList(),same(PERIOD))).thenReturn(3L);
  verifyNoMoreInteractions(calculator);
  underTest.beforeComponent(FILE);
  underTest.onIssue(FILE,unresolved1);
  underTest.onIssue(FILE,unresolved2);
  underTest.onIssue(FILE,unresolvedWithoutDebt);
  underTest.onIssue(FILE,resolved);
  underTest.afterComponent(FILE);
  assertVariation(FILE,NEW_SECURITY_REMEDIATION_EFFORT_KEY,3 + 4);
}
