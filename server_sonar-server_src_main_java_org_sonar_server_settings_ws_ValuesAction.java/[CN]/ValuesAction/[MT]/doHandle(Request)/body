{
  DbSession dbSession=dbClient.openSession(true);
  try {
    ValuesRequest valuesRequest=toWsRequest(request);
    Optional<ComponentDto> component=getComponent(dbSession,valuesRequest);
    checkAdminPermission(component);
    Set<String> keys=new HashSet<>(valuesRequest.getKeys());
    return new ValuesResponseBuilder(loadSettings(dbSession,component,keys),component).build();
  }
  finally {
    dbClient.closeSession(dbSession);
  }
}
