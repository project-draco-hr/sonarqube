{
  setupData("shared");
  ModelDefinition existingDefinition=new FakeDefinition("M1");
  ModelDefinition newDefinition=new FakeDefinition("NEWMODEL");
  ModelDefinition[] definitions=new ModelDefinition[]{existingDefinition,newDefinition};
  DefaultModelProvider provider=new DefaultModelProvider(getSessionFactory(),definitions);
  provider.registerDefinitions();
  List<Model> models=getSession().getResults(Model.class);
  assertThat(models.size(),is(3));
}
