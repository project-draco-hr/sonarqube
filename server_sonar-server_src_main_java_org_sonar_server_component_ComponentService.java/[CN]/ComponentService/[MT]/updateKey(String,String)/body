{
  UserSession.get().checkComponentPermission(UserRole.ADMIN,projectOrModuleKey);
  DbSession session=dbClient.openSession(false);
  try {
    ComponentDto projectOrModule=getByKey(session,projectOrModuleKey);
    resourceKeyUpdaterDao.updateKey(projectOrModule.getId(),newKey);
    session.commit();
    previewCache.reportResourceModification(newKey);
    session.commit();
  }
  finally {
    session.close();
  }
}
