{
  DbSession session=dbClient.openSession(false);
  try {
    ComponentDto projectOrModule=getByKey(session,projectOrModuleKey);
    userSession.checkProjectUuidPermission(UserRole.ADMIN,projectOrModule.projectUuid());
    resourceKeyUpdaterDao.updateKey(projectOrModule.getId(),newKey);
    session.commit();
    session.commit();
  }
  finally {
    session.close();
  }
}
