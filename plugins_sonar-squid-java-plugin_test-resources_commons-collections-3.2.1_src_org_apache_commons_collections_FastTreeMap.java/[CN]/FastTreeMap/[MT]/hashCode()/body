{
  if (fast) {
    int h=0;
    Iterator i=map.entrySet().iterator();
    while (i.hasNext()) {
      h+=i.next().hashCode();
    }
    return (h);
  }
 else {
synchronized (map) {
      int h=0;
      Iterator i=map.entrySet().iterator();
      while (i.hasNext()) {
        h+=i.next().hashCode();
      }
      return (h);
    }
  }
}
