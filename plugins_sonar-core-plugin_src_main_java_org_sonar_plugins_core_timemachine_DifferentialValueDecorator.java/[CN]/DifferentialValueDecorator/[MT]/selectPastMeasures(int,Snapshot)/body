{
  String hql="select m from " + MeasureModel.class.getSimpleName() + " m, "+ Snapshot.class.getSimpleName()+ " s "+ "where m.snapshotId=s.id and m.metricId in (:metricIds) and m.rule=null and m.rulePriority=null and m.rulesCategoryId=null and m.characteristic=null "+ "and (s.rootId=:rootSnapshotId or s.id=:rootSnapshotId) and s.resourceId=:resourceId and s.status=:status";
  return session.createQuery(hql).setParameter("metricIds",metricByIds.keySet()).setParameter("rootSnapshotId",ObjectUtils.defaultIfNull(projectTargetSnapshot.getRootId(),projectTargetSnapshot.getId())).setParameter("resourceId",resourceId).setParameter("status",Snapshot.STATUS_PROCESSED).getResultList();
}
