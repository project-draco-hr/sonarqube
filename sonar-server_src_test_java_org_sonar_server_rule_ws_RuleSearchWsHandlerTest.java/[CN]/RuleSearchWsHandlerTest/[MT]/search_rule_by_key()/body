{
  String ruleKey="squid:AvoidCycle";
  Rule rule=ruleBuilder.build();
  when(rules.findByKey(RuleKey.parse(ruleKey))).thenReturn(rule);
  Language lang=mock(Language.class);
  when(lang.getName()).thenReturn("Java");
  when(languages.get("java")).thenReturn(lang);
  MockUserSession.set();
  WsTester.TestRequest request=tester.newRequest("list").setParam("k",ruleKey);
  request.execute().assertJson(getClass(),"search_rules.json");
}
