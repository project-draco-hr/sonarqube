{
  Component project=treeRootHolder.getRoot();
  Optional<ComponentDto> projectDto=dbClient.componentDao().selectByKey(session,project.getKey());
  if (projectDto.isPresent()) {
    List<Period> periods=new ArrayList<>(5);
    PeriodResolver periodResolver=new PeriodResolver(session,projectDto.get().getId(),analysisMetadataHolder.getAnalysisDate().getTime(),project.getReportAttributes().getVersion(),Qualifiers.PROJECT);
    for (int index=1; index <= NUMBER_OF_PERIODS; index++) {
      Period period=periodResolver.resolve(index);
      if (period != null) {
        periods.add(period);
      }
    }
    return periods;
  }
  return Collections.emptyList();
}
