{
  List<SnapshotDto> snapshotDtos=dbClient.snapshotDao().selectPreviousVersionSnapshots(session,projectId,currentVersion);
  if (snapshotDtos.isEmpty()) {
    return null;
  }
  SnapshotDto snapshotDto=snapshotDtos.get(0);
  LOG.debug(String.format("Compare to previous version (%s)",formatDate(snapshotDto.getCreatedAt())));
  return new Period(index,CoreProperties.TIMEMACHINE_MODE_PREVIOUS_VERSION,snapshotDto.getVersion(),snapshotDto.getCreatedAt(),snapshotDto.getId());
}
