{
  String version=Objects.firstNonNull(currentVersion,"");
  List<SnapshotDto> snapshotDtos=dbClient.snapshotDao().selectPreviousVersionSnapshots(session,projectId,version);
  if (snapshotDtos.isEmpty()) {
    return null;
  }
  SnapshotDto snapshotDto=snapshotDtos.get(0);
  LOG.debug("Compare to previous version ({})",formatDate(snapshotDto.getCreatedAt()));
  return new Period(index,CoreProperties.TIMEMACHINE_MODE_PREVIOUS_VERSION,snapshotDto.getVersion(),snapshotDto.getCreatedAt(),snapshotDto.getId());
}
