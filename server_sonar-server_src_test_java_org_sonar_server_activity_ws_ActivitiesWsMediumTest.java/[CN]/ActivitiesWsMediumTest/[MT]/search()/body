{
  Activity activity=new Activity();
  activity.setType(Activity.Type.ANALYSIS_REPORT);
  activity.setAction("THE_ACTION");
  activity.setMessage("THE_MSG");
  activity.setData("foo","bar");
  activity.setProfileKey("PROFILE_KEY");
  service.save(activity);
  WsTester.TestRequest request=tester.wsTester().newGetRequest("api/activities","search");
  String result=request.execute().outputAsString();
  assertJson(result).isSimilarTo("{" + "  \"total\": 1," + "  \"p\": 1,"+ "  \"ps\": 10,"+ "  \"logs\": ["+ "    {"+ "      \"type\": \"ANALYSIS_REPORT\","+ "      \"action\": \"THE_ACTION\","+ "      \"message\": \"THE_MSG\","+ "      \"details\": {"+ "        \"profileKey\": \"PROFILE_KEY\","+ "        \"foo\": \"bar\""+ "      }"+ "    }"+ "  ]"+ "}");
}
