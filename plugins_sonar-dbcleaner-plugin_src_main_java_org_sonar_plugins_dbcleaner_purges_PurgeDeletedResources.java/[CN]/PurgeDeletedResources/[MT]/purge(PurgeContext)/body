{
  Query query=getSession().createQuery("SELECT s.id FROM " + Snapshot.class.getSimpleName() + " s WHERE NOT EXISTS(FROM "+ ResourceModel.class.getSimpleName()+ " r WHERE r.id=s.resourceId)");
  final List<Integer> snapshotIds=query.getResultList();
  PurgeUtils.deleteSnapshotsData(getSession(),snapshotIds);
}
