{
  if (shouldRegisterExtension(pluginKey,extension)) {
    LOG.debug("Register the extension: {}",extension);
    container.as(Characteristics.CACHE).addComponent(getExtensionKey(extension),extension);
    pluginByExtension.put(extension,plugin);
  }
  if (isExtensionProvider(extension)) {
    LOG.debug("Register the extension provider: {}",extension);
    container.as(Characteristics.CACHE).addAdapter(new ExtensionProviderAdapter(extension));
  }
}
