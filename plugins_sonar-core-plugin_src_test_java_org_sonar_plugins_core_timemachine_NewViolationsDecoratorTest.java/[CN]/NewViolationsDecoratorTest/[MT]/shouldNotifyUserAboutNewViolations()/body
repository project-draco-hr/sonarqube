{
  Project project=new Project("key").setName("LongName");
  project.setId(45);
  when(timeMachineConfiguration.getLastAnalysisPeriodIndex()).thenReturn(2);
  Measure m=new Measure(CoreMetrics.NEW_VIOLATIONS).setVariation2(32.0);
  when(context.getMeasure(CoreMetrics.NEW_VIOLATIONS)).thenReturn(m);
  decorator.decorate(project,context);
  Notification notification=new Notification("new-violations").setFieldValue("count","32").setFieldValue("projectName","LongName").setFieldValue("projectKey","key").setFieldValue("projectId","45").setFieldValue("period","2");
  verify(notificationManager,times(1)).scheduleForSending(eq(notification));
}
