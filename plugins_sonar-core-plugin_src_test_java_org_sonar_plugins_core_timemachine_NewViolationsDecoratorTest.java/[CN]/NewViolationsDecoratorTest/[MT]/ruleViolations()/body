{
  when(context.getViolations()).thenReturn(createViolations());
  decorator.decorate(resource,context);
  verify(context).saveMeasure(argThat(new IsVariationRuleMeasure(CoreMetrics.NEW_VIOLATIONS,rule1,RulePriority.CRITICAL,1.0,1.0)));
  verify(context).saveMeasure(argThat(new IsVariationRuleMeasure(CoreMetrics.NEW_VIOLATIONS,rule2,RulePriority.MAJOR,0.0,1.0)));
  verify(context).saveMeasure(argThat(new IsVariationRuleMeasure(CoreMetrics.NEW_VIOLATIONS,rule3,RulePriority.MINOR,0.0,1.0)));
}
