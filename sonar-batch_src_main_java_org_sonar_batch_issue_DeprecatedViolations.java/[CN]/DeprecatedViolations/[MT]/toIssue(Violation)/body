{
  DefaultIssue issue=new DefaultIssue();
  issue.setComponentKey(violation.getResource().getEffectiveKey());
  if (violation.getPermanentId() != null) {
    issue.setKey(violation.getPermanentId().toString());
  }
 else {
    issue.setKey(UUID.randomUUID().toString());
  }
  issue.setRuleRepositoryKey(violation.getRule().getRepositoryKey());
  issue.setRuleKey(violation.getRule().getKey());
  issue.setCost(violation.getCost());
  issue.setChecksum(violation.getChecksum());
  issue.setCreatedAt(violation.getCreatedAt());
  issue.setLine(violation.getLineId());
  issue.setMessage(violation.getMessage());
  if (violation.getSeverity() != null) {
    issue.setSeverity(violation.getSeverity().name());
  }
  return issue;
}
