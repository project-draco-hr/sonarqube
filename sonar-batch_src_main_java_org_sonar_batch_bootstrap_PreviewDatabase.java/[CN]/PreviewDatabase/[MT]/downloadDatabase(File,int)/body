{
  String projectKey=null;
  try {
    projectKey=settings.getString(CoreProperties.PROJECT_KEY_PROPERTY);
    String branch=settings.getString(CoreProperties.PROJECT_BRANCH_PROPERTY);
    if (StringUtils.isNotBlank(branch)) {
      projectKey=String.format("%s:%s",projectKey,branch);
    }
    if (StringUtils.isBlank(projectKey)) {
      server.download("/batch_bootstrap/db",toFile,readTimeoutMillis);
    }
 else {
      server.download("/batch_bootstrap/db?project=" + projectKey,toFile,readTimeoutMillis);
    }
    LOG.debug("Dry Run database size: {}",FileUtils.byteCountToDisplaySize(FileUtils.sizeOf(toFile)));
  }
 catch (  SonarException e) {
    handleException(readTimeoutMillis,projectKey,e);
    throw e;
  }
}
