{
  String idField=XContentMapValues.nodeStringValue(params.get(ProcessConstants.ES_PLUGIN_LISTUPDATE_ID_FIELD),null);
  String idValue=XContentMapValues.nodeStringValue(params.get(ProcessConstants.ES_PLUGIN_LISTUPDATE_ID_VALUE),null);
  String field=XContentMapValues.nodeStringValue(params.get(ProcessConstants.ES_PLUGIN_LISTUPDATE_FIELD),null);
  Map value=null;
  if (idField == null) {
    throw new IllegalStateException(String.format("Missing '%s' parameter",ProcessConstants.ES_PLUGIN_LISTUPDATE_ID_FIELD));
  }
  if (idValue == null) {
    throw new IllegalStateException(String.format("Missing '%s' parameter",ProcessConstants.ES_PLUGIN_LISTUPDATE_ID_VALUE));
  }
  if (field == null) {
    throw new IllegalStateException(String.format("Missing '%s' parameter",ProcessConstants.ES_PLUGIN_LISTUPDATE_FIELD));
  }
  if (params.containsKey(ProcessConstants.ES_PLUGIN_LISTUPDATE_VALUE)) {
    Object obj=params.get(ProcessConstants.ES_PLUGIN_LISTUPDATE_VALUE);
    if (obj != null) {
      value=XContentMapValues.nodeMapValue(params.get(ProcessConstants.ES_PLUGIN_LISTUPDATE_VALUE),"Update item");
    }
  }
  return new ListUpdate(idField,idValue,field,value);
}
