{
  getSession().save(rule);
  sonarConfig.setRules(Arrays.asList(createUserRule()));
  rulesBackup.importXml(sonarConfig);
  assertThat(getSession().getResults(Rule.class).size(),is(2));
  Rule importedRule=getDao().getRulesDao().getRuleByKey("repo","key2");
  assertThat(importedRule.getParent(),is(rule));
  assertThat(importedRule.isEnabled(),is(true));
  assertThat(importedRule.getName(),is("name2"));
  assertThat(importedRule.getDescription(),is("description2"));
  assertThat(importedRule.getSeverity(),is(RulePriority.INFO));
  assertThat(importedRule.getParams().size(),is(1));
  RuleParam param=importedRule.getParams().get(0);
  assertThat(param.getKey(),is("param"));
  assertThat(param.getDefaultValue(),is("value"));
}
