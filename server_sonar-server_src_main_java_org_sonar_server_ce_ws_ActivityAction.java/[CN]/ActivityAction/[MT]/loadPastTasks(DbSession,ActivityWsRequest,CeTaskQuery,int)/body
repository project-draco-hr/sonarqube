{
  int offset=Math.max(0,offset(PAGE_INDEX,request.getPageSize()) - totalQueuedTasks);
  List<CeActivityDto> dtos=dbClient.ceActivityDao().selectByQuery(dbSession,query,offset,request.getPageSize());
  Iterable<WsCe.Task> ceTasks=formatter.formatActivity(dbSession,dtos);
  return new TaskResult(ceTasks,MAX_PAGE_SIZE);
}
