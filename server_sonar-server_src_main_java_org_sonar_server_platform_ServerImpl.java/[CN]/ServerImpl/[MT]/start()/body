{
  try {
    id=new SimpleDateFormat("yyyyMMddHHmmss").format(startedAt);
    version=readVersion(versionPath);
    implementationBuild=read(buildProperties).getProperty("Implementation-Build");
    contextPath=StringUtils.defaultIfBlank(settings.getString("sonar.web.context"),"").replaceFirst("(\\/+)$","");
    sonarHome=new File(settings.getString("sonar.path.home"));
    if (!sonarHome.isDirectory()) {
      throw new IllegalStateException("SonarQube home directory is not valid");
    }
    deployDir=new File(sonarHome,"/web/deploy/");
    LOG.info("SonarQube {}",Joiner.on(" / ").skipNulls().join("Server",version,implementationBuild));
  }
 catch (  IOException e) {
    throw new IllegalStateException("Can not load metadata",e);
  }
}
