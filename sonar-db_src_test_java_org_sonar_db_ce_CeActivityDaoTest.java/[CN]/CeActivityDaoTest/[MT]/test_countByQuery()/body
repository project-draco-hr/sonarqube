{
  insert("TASK_1",REPORT,"PROJECT_1",CeActivityDto.Status.SUCCESS);
  insert("TASK_2",REPORT,"PROJECT_1",CeActivityDto.Status.FAILED);
  insert("TASK_3",REPORT,"PROJECT_2",CeActivityDto.Status.SUCCESS);
  insert("TASK_4","views",null,CeActivityDto.Status.SUCCESS);
  CeTaskQuery query=new CeTaskQuery();
  assertThat(underTest.countByQuery(db.getSession(),query)).isEqualTo(4);
  query=new CeTaskQuery().setComponentUuid("PROJECT_1");
  assertThat(underTest.countByQuery(db.getSession(),query)).isEqualTo(2);
  query=new CeTaskQuery().setStatuses(singletonList(CeActivityDto.Status.SUCCESS.name()));
  assertThat(underTest.countByQuery(db.getSession(),query)).isEqualTo(3);
  query=new CeTaskQuery().setType(REPORT);
  assertThat(underTest.countByQuery(db.getSession(),query)).isEqualTo(3);
  query=new CeTaskQuery().setType("views");
  assertThat(underTest.countByQuery(db.getSession(),query)).isEqualTo(1);
  query=new CeTaskQuery().setType(REPORT).setOnlyCurrents(true).setComponentUuid("PROJECT_1");
  assertThat(underTest.countByQuery(db.getSession(),query)).isEqualTo(1);
}
