{
  insert("TASK_1",REPORT,"PROJECT_1",CeActivityDto.Status.SUCCESS);
  insert("TASK_2",REPORT,"PROJECT_1",FAILED);
  insert("TASK_3",REPORT,"PROJECT_2",CeActivityDto.Status.SUCCESS);
  insert("TASK_4","views",null,CeActivityDto.Status.SUCCESS);
  CeTaskQuery query=new CeTaskQuery().setStatuses(Collections.<String>emptyList());
  List<CeActivityDto> dtos=underTest.selectByQuery(db.getSession(),query,0,10);
  assertThat(dtos).extracting("uuid").containsExactly("TASK_4","TASK_3","TASK_2","TASK_1");
  query=new CeTaskQuery().setComponentUuid("PROJECT_1");
  dtos=underTest.selectByQuery(db.getSession(),query,0,100);
  assertThat(dtos).extracting("uuid").containsExactly("TASK_2","TASK_1");
  query=new CeTaskQuery().setStatuses(singletonList(CeActivityDto.Status.SUCCESS.name()));
  dtos=underTest.selectByQuery(db.getSession(),query,0,100);
  assertThat(dtos).extracting("uuid").containsExactly("TASK_4","TASK_3","TASK_1");
  query=new CeTaskQuery().setType(REPORT);
  dtos=underTest.selectByQuery(db.getSession(),query,0,100);
  assertThat(dtos).extracting("uuid").containsExactly("TASK_3","TASK_2","TASK_1");
  query=new CeTaskQuery().setType("views");
  dtos=underTest.selectByQuery(db.getSession(),query,0,100);
  assertThat(dtos).extracting("uuid").containsExactly("TASK_4");
  query=new CeTaskQuery().setType(REPORT).setOnlyCurrents(true).setComponentUuid("PROJECT_1");
  dtos=underTest.selectByQuery(db.getSession(),query,0,100);
  assertThat(dtos).extracting("uuid").containsExactly("TASK_2");
}
