{
  when(inputFile.getFile()).thenReturn(new File("source.java"));
  when(inputFile.getInputStream()).thenReturn(inputStream);
  new PmdTemplate(pmd).process(inputFile,Charsets.UTF_8,rulesets,ruleContext);
  verify(ruleContext).setSourceCodeFilename(new File("source.java").getAbsolutePath());
  verify(pmd).processFile(inputStream,Charsets.UTF_8.displayName(),rulesets,ruleContext);
}
