{
  issueService=mock(IssueService.class);
  issueQueryService=mock(IssueQueryService.class);
  commentService=mock(IssueCommentService.class);
  changelogService=mock(IssueChangelogService.class);
  actionPlanService=mock(ActionPlanService.class);
  resourceDao=mock(ResourceDao.class);
  actionService=mock(ActionService.class);
  issueFilterService=mock(IssueFilterService.class);
  issueBulkChangeService=mock(IssueBulkChangeService.class);
  ResourceDto project=new ResourceDto().setKey("org.sonar.Sample");
  when(resourceDao.getResource(any(ResourceQuery.class))).thenReturn(project);
  service=new InternalRubyIssueService(issueService,issueQueryService,commentService,changelogService,actionPlanService,resourceDao,actionService,issueFilterService,issueBulkChangeService,userSessionRule);
}
