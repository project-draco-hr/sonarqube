{
  Map<String,Object> props=newHashMap();
  props.put("componentRoots","struts");
  props.put("statuses","OPEN");
  when(issueFilterService.deserializeIssueFilterQuery(any(DefaultIssueFilter.class))).thenReturn(props);
  Map<String,Object> overrideProps=newHashMap();
  overrideProps.put("statuses","CLOSED");
  overrideProps.put("resolved",true);
  overrideProps.put("pageSize",20);
  overrideProps.put("pageIndex",2);
  when(issueQueryService.createFromMap(eq(overrideProps))).thenReturn(IssueQuery.builder().build());
  service.execute(10L,overrideProps);
  ArgumentCaptor<IssueQuery> issueQueryArgumentCaptor=ArgumentCaptor.forClass(IssueQuery.class);
  ArgumentCaptor<SearchOptions> contextArgumentCaptor=ArgumentCaptor.forClass(SearchOptions.class);
  verify(issueFilterService).execute(issueQueryArgumentCaptor.capture(),contextArgumentCaptor.capture());
  verify(issueFilterService).find(eq(10L),any(UserSession.class));
  SearchOptions searchOptions=contextArgumentCaptor.getValue();
  assertThat(searchOptions.getLimit()).isEqualTo(20);
  assertThat(searchOptions.getPage()).isEqualTo(2);
}
