{
  MeasureCache cache=new MeasureCache(caches);
  Project p=new Project("struts");
  assertThat(cache.entries()).hasSize(0);
  assertThat(cache.byResource(p)).hasSize(0);
  Measure m=new Measure(CoreMetrics.NCLOC,1.0).setDate(new Date());
  StringBuilder data=new StringBuilder();
  for (int i=0; i < 50000000; i++) {
    data.append((char)('z' * Math.random()));
  }
  m.setData(data.toString());
  thrown.expect(IllegalStateException.class);
  thrown.expectMessage("Fail to put element in the cache measures");
  cache.put(p,m);
}
