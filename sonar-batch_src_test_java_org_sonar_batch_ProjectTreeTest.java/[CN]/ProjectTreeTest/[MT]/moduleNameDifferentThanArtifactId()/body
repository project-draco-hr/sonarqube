{
  MavenProject parent=loadProject("/org/sonar/batch/ProjectTreeTest/moduleNameDifferentThanArtifactId/pom.xml",true);
  MavenProject module1=loadProject("/org/sonar/batch/ProjectTreeTest/moduleNameDifferentThanArtifactId/path1/pom.xml",false);
  MavenProject module2=loadProject("/org/sonar/batch/ProjectTreeTest/moduleNameDifferentThanArtifactId/path2/pom.xml",false);
  ProjectTree tree=new ProjectTree(newProjectBuilder(),Arrays.asList(parent,module1,module2));
  tree.start();
  Project root=tree.getRootProject();
  assertThat(root.getModules().size(),is(2));
  assertThat(root.getKey(),is("org.test:parent"));
  assertNull(root.getParent());
  assertThat(tree.getProjectByArtifactId("module1").getKey(),is("org.test:module1"));
  assertThat(tree.getProjectByArtifactId("module1").getParent(),is(root));
  assertThat(tree.getProjectByArtifactId("module2").getKey(),is("org.test:module2"));
  assertThat(tree.getProjectByArtifactId("module2").getParent(),is(root));
}
