{
  ComponentDto project=ComponentTesting.newProjectDto();
  ComponentDto file=ComponentTesting.newFileDto(project,null);
  indexIssues(IssueTesting.newDoc("ISSUE1",file).setSeverity(Severity.BLOCKER),IssueTesting.newDoc("ISSUE2",file).setSeverity(Severity.INFO),IssueTesting.newDoc("ISSUE3",file).setSeverity(Severity.MINOR),IssueTesting.newDoc("ISSUE4",file).setSeverity(Severity.CRITICAL),IssueTesting.newDoc("ISSUE5",file).setSeverity(Severity.MAJOR));
  IssueQuery.Builder query=IssueQuery.builder(userSessionRule).sort(IssueQuery.SORT_BY_SEVERITY).asc(true);
  SearchResult<IssueDoc> result=underTest.search(query.build(),new SearchOptions());
  assertThat(result.getDocs().get(0).severity()).isEqualTo(Severity.INFO);
  assertThat(result.getDocs().get(1).severity()).isEqualTo(Severity.MINOR);
  assertThat(result.getDocs().get(2).severity()).isEqualTo(Severity.MAJOR);
  assertThat(result.getDocs().get(3).severity()).isEqualTo(Severity.CRITICAL);
  assertThat(result.getDocs().get(4).severity()).isEqualTo(Severity.BLOCKER);
  query=IssueQuery.builder(userSessionRule).sort(IssueQuery.SORT_BY_SEVERITY).asc(false);
  result=underTest.search(query.build(),new SearchOptions());
  assertThat(result.getDocs().get(0).severity()).isEqualTo(Severity.BLOCKER);
  assertThat(result.getDocs().get(1).severity()).isEqualTo(Severity.CRITICAL);
  assertThat(result.getDocs().get(2).severity()).isEqualTo(Severity.MAJOR);
  assertThat(result.getDocs().get(3).severity()).isEqualTo(Severity.MINOR);
  assertThat(result.getDocs().get(4).severity()).isEqualTo(Severity.INFO);
}
