{
  return Maps.uniqueIndex(rules,new Function<Rule,RuleKey>(){
    @Override public RuleKey apply(    @Nullable Rule input){
      return input != null ? input.key() : null;
    }
  }
);
}
