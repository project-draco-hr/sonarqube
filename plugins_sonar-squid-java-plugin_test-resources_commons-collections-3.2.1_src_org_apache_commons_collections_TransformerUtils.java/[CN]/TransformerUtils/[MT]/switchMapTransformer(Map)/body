{
  Transformer[] trs=null;
  Predicate[] preds=null;
  if (objectsAndTransformers == null) {
    throw new IllegalArgumentException("The object and transformer map must not be null");
  }
  Transformer def=(Transformer)objectsAndTransformers.remove(null);
  int size=objectsAndTransformers.size();
  trs=new Transformer[size];
  preds=new Predicate[size];
  int i=0;
  for (Iterator it=objectsAndTransformers.entrySet().iterator(); it.hasNext(); ) {
    Map.Entry entry=(Map.Entry)it.next();
    preds[i]=EqualPredicate.getInstance(entry.getKey());
    trs[i]=(Transformer)entry.getValue();
    i++;
  }
  return switchTransformer(preds,trs,def);
}
