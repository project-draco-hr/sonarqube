{
  DbSession session=db.openSession(true);
  try {
    synchronize(session,db.ruleDao(),index.get(RuleIndex.class));
    synchronize(session,db.activeRuleDao(),index.get(ActiveRuleIndex.class));
    synchronize(session,db.activityDao(),index.get(ActivityIndex.class));
    LOG.info("Indexing issues");
    issueAuthorizationIndexer.index();
    issueIndexer.indexAll();
    LOG.info("Indexing source files");
    sourceLineIndexer.index();
    session.commit();
  }
  finally {
    session.close();
  }
}
