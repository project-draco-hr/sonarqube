{
  DbSession session=db.openSession(true);
  try {
    LOG.info("Starting DB to Index synchronization");
    long start=System.currentTimeMillis();
    List<String> projectUuids=db.componentDao().findProjectUuids(session);
    synchronize(session,db.ruleDao(),index.get(RuleIndex.class));
    synchronizeByProject(session,db.issueDao(),index.get(IssueIndex.class),IssueNormalizer.IssueField.PROJECT.field(),projectUuids);
    synchronizeByProject(session,db.issueAuthorizationDao(),index.get(IssueAuthorizationIndex.class),IssueAuthorizationNormalizer.IssueAuthorizationField.PROJECT.field(),projectUuids);
    synchronize(session,db.activeRuleDao(),index.get(ActiveRuleIndex.class));
    synchronize(session,db.activityDao(),index.get(ActivityIndex.class));
    LOG.info("Indexing of sourceLine records");
    sourceLineIndexer.indexSourceLines(true);
    session.commit();
    LOG.info("Synchronization done in {}ms...",System.currentTimeMillis() - start);
  }
  finally {
    session.close();
  }
}
