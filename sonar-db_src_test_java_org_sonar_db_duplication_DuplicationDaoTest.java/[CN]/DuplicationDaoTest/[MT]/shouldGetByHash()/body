{
  db.prepareDbUnit(getClass(),"shouldGetByHash.xml");
  List<DuplicationUnitDto> blocks=dao.selectCandidates(10,7,"java");
  assertThat(blocks.size(),is(1));
  DuplicationUnitDto block=blocks.get(0);
  assertThat("block resourceId",block.getResourceKey(),is("bar-last"));
  assertThat("block hash",block.getHash(),is("aa"));
  assertThat("block index in file",block.getIndexInFile(),is(0));
  assertThat("block start line",block.getStartLine(),is(1));
  assertThat("block end line",block.getEndLine(),is(2));
  blocks=dao.selectCandidates(10,null,"java");
  assertThat(blocks.size(),is(2));
}
