{
  Long durationInMinutes=duration.toMinutes();
  if (durationInMinutes == 0) {
    return "0";
  }
  boolean isNegative=durationInMinutes < 0;
  Long absDuration=Math.abs(durationInMinutes);
  int days=((Double)((double)absDuration / hoursInDay() / 60)).intValue();
  Long remainingDuration=absDuration - (days * hoursInDay() * 60);
  int hours=((Double)(remainingDuration.doubleValue() / 60)).intValue();
  remainingDuration=remainingDuration - (hours * 60);
  int minutes=remainingDuration.intValue();
  StringBuilder message=new StringBuilder();
  if (days > 0) {
    message.append(message(locale,"work_duration.x_days",isNegative ? -1 * days : days));
  }
  if (displayHours(days,hours)) {
    addSpaceIfNeeded(message);
    message.append(message(locale,"work_duration.x_hours",isNegative && message.length() == 0 ? -1 * hours : hours));
  }
  if (displayMinutes(days,hours,minutes)) {
    addSpaceIfNeeded(message);
    message.append(message(locale,"work_duration.x_minutes",isNegative && message.length() == 0 ? -1 * minutes : minutes));
  }
  return message.toString();
}
