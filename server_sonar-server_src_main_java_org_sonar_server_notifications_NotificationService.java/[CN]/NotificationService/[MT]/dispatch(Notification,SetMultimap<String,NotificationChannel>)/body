{
  for (  Map.Entry<String,Collection<NotificationChannel>> entry : recipients.asMap().entrySet()) {
    String username=entry.getKey();
    Collection<NotificationChannel> userChannels=entry.getValue();
    LOG.debug("For user {} via {}",username,userChannels);
    for (    NotificationChannel channel : userChannels) {
      try {
        channel.deliver(notification,username);
      }
 catch (      Exception e) {
        LOG.warn("Unable to deliver notification " + notification + " for user "+ username+ " via "+ channel,e);
      }
    }
  }
}
