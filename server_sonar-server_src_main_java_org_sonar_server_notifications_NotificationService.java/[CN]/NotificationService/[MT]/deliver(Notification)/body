{
  LOG.debug("Delivering notification " + notification);
  final SetMultimap<String,NotificationChannel> recipients=HashMultimap.create();
  for (  NotificationDispatcher dispatcher : dispatchers) {
    NotificationDispatcher.Context context=new NotificationDispatcher.Context(){
      @Override public void addUser(      String username){
      }
      @Override public void addUser(      String userLogin,      NotificationChannel notificationChannel){
        if (userLogin != null) {
          recipients.put(userLogin,notificationChannel);
        }
      }
    }
;
    try {
      dispatcher.performDispatch(notification,context);
    }
 catch (    Exception e) {
      LOG.warn("Unable to dispatch notification " + notification + " using "+ dispatcher,e);
    }
  }
  dispatch(notification,recipients);
}
