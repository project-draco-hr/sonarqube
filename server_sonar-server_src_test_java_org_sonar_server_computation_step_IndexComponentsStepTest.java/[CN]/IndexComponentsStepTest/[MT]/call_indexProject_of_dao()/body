{
  dbComponentsRefCache.addComponent(1,new DbComponent(123L,PROJECT_KEY,"PROJECT_UUID"));
  reportReader.setMetadata(BatchReport.Metadata.newBuilder().setRootComponentRef(1).build());
  ComponentDto project=mock(ComponentDto.class);
  when(project.getId()).thenReturn(123L);
  ComputationContext context=new ComputationContext(reportReader,PROJECT_KEY,new Settings(),mock(DbClient.class),ComponentTreeBuilders.from(DumbComponent.DUMB_PROJECT),mock(LanguageRepository.class));
  sut.execute(context);
  verify(resourceIndexerDao).indexProject(123L);
}
