{
  center.getSonar().addRelease(Version.create("2.3"));
  center.getSonar().addRelease(Version.create("2.4"));
  UpdateCenterMatrix matrix=new UpdateCenterMatrix(center,"2.2");
  matrix.registerInstalledPlugin("foo",Version.create("1.0"));
  matrix.registerInstalledPlugin("bar",Version.create("1.0"));
  List<SonarUpdate> updates=matrix.findSonarUpdates();
  assertThat(updates.size(),is(2));
  assertThat(updates.get(0).hasWarnings(),is(true));
  assertThat(updates.get(0).requiresPluginUpgrades(),is(true));
  assertThat(updates.get(0).getPluginsToUpgrade().size(),is(2));
  assertThat(updates.get(1).hasWarnings(),is(true));
  assertThat(updates.get(1).isIncompatible(),is(true));
  assertThat(updates.get(1).getIncompatiblePlugins().size(),is(2));
}
