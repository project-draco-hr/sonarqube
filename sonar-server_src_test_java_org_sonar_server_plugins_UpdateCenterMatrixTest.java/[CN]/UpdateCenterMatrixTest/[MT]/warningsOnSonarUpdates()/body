{
  center.getSonar().addRelease(Version.create("2.3"));
  center.getSonar().addRelease(Version.create("2.4"));
  UpdateCenterMatrix matrix=new UpdateCenterMatrix(center,Version.create("2.2"));
  matrix.registerInstalledPlugin("foo",Version.create("1.0"));
  matrix.registerInstalledPlugin("bar",Version.create("1.0"));
  List<SonarUpdate> updates=matrix.findSonarUpdates();
  assertThat(updates).hasSize(2);
  assertThat(updates.get(0).hasWarnings()).isTrue();
  assertThat(updates.get(0).requiresPluginUpgrades()).isTrue();
  assertThat(updates.get(0).getPluginsToUpgrade()).hasSize(2);
  assertThat(updates.get(1).hasWarnings()).isTrue();
  assertThat(updates.get(1).isIncompatible()).isTrue();
  assertThat(updates.get(1).getIncompatiblePlugins()).hasSize(2);
}
