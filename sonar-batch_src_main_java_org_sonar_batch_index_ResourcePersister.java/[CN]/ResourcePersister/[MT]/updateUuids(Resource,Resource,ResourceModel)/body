{
  if (ResourceUtils.isLibrary(resource) && !Qualifiers.LIBRARY.equals(model.getQualifier())) {
    return;
  }
  if (parentResource != null) {
    ResourceModel parentModel=session.getSingleResult(ResourceModel.class,"id",parentResource.getId());
    model.setProjectUuid(parentModel.getProjectUuid());
    if (Scopes.isProject(parentResource)) {
      model.setModuleUuid(parentResource.getUuid());
      String parentModuleUuidPath=parentModel.getModuleUuidPath();
      model.setModuleUuidPath(parentModuleUuidPath + parentModel.getUuid() + ".");
    }
 else {
      model.setModuleUuid(parentModel.getModuleUuid());
      String parentModuleUuidPath=parentModel.getModuleUuidPath();
      model.setModuleUuidPath(parentModuleUuidPath);
    }
  }
 else {
    model.setProjectUuid(model.getUuid());
    model.setModuleUuidPath(".");
  }
}
