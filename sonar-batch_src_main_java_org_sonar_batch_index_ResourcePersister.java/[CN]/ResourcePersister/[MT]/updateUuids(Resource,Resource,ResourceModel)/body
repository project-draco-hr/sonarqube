{
  if (parentResource == null) {
    model.setProjectUuid(model.getUuid());
    model.setModuleUuidPath(MODULE_UUID_PATH_SEPARATOR + model.getUuid() + MODULE_UUID_PATH_SEPARATOR);
  }
 else {
    ResourceModel parentModel=session.getSingleResult(ResourceModel.class,"id",parentResource.getId());
    model.setProjectUuid(parentModel.getProjectUuid());
    if (Scopes.isProject(resource)) {
      model.setModuleUuid(parentResource.getUuid());
      String parentModuleUuidPath=parentModel.getModuleUuidPath();
      model.setModuleUuidPath(parentModuleUuidPath + model.getUuid() + MODULE_UUID_PATH_SEPARATOR);
    }
 else     if (Scopes.isProject(parentResource)) {
      model.setModuleUuid(parentResource.getUuid());
      String parentModuleUuidPath=parentModel.getModuleUuidPath();
      model.setModuleUuidPath(parentModuleUuidPath);
    }
 else {
      model.setModuleUuid(parentModel.getModuleUuid());
      String parentModuleUuidPath=parentModel.getModuleUuidPath();
      model.setModuleUuidPath(parentModuleUuidPath);
    }
  }
}
