{
  Snapshot snapshot;
  if (resource instanceof Project) {
    snapshot=persistProject((Project)resource,(Project)parent);
  }
 else   if (resource instanceof Library) {
    snapshot=persistLibrary(project.getAnalysisDate(),(Library)resource);
  }
 else {
    snapshot=persistFileOrDirectory(project,resource,parent);
  }
  return snapshot;
}
