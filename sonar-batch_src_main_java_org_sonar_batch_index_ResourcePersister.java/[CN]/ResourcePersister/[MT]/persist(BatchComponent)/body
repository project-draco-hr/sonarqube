{
  if (batchResource.snapshot() != null) {
    return;
  }
  BatchComponent parentBatchResource=batchResource.parent();
  Snapshot s;
  if (parentBatchResource != null) {
    persist(parentBatchResource);
    s=persist(findModule(parentBatchResource),batchResource.resource(),parentBatchResource.resource());
  }
 else {
    s=persistProject((Project)batchResource.resource(),null);
  }
  batchResource.setSnapshot(s);
}
