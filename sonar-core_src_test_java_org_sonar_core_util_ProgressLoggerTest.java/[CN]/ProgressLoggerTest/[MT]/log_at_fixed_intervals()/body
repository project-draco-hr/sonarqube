{
  AtomicLong counter=new AtomicLong(42L);
  ProgressLogger progress=new ProgressLogger("ProgressLoggerTest",counter,Loggers.get(getClass()));
  progress.setPeriodMs(1L);
  progress.start();
  while (!hasInfoLog("42 rows processed")) {
    Uninterruptibles.sleepUninterruptibly(1,TimeUnit.MILLISECONDS);
  }
  progress.stop();
  counter.incrementAndGet();
  progress.log();
  assertThat(hasInfoLog("43 rows processed")).isTrue();
}
