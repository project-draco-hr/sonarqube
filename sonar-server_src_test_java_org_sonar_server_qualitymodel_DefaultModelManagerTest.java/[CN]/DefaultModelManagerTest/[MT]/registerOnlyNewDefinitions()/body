{
  setupData("shared");
  ModelDefinition existingDefinition=new FakeDefinition("M1",Model.create());
  ModelDefinition newDefinition=new FakeDefinition("NEWMODEL",Model.create());
  ModelDefinition[] definitions=new ModelDefinition[]{existingDefinition,newDefinition};
  ModelManager manager=new DefaultModelManager(getSessionFactory(),definitions);
  manager.registerDefinitions();
  List<Model> models=getSession().getResults(Model.class);
  assertThat(models.size(),is(3));
}
