{
  List<File> sourceDirs=InputFile.Type.MAIN == inputFile.type() ? fs.sourceDirs() : fs.testDirs();
  for (  File sourceDir : sourceDirs) {
    String sourceRelativePath=pathResolver.relativePath(sourceDir,inputFile.file());
    if (sourceRelativePath != null) {
      inputFile.setPathRelativeToSourceDir(sourceRelativePath);
      inputFile.setSourceDirAbsolutePath(FilenameUtils.normalize(sourceDir.getAbsolutePath(),true));
      if ("java".equals(inputFile.language())) {
        inputFile.setDeprecatedKey(new StringBuilder().append(moduleKey).append(":").append(JavaFile.fromRelativePath(sourceRelativePath,false).getDeprecatedKey()).toString());
      }
 else {
        inputFile.setDeprecatedKey(new StringBuilder().append(moduleKey).append(":").append(sourceRelativePath).toString());
      }
    }
  }
}
