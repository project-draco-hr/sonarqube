{
  fileCursor.setFilter(SMFilterFactory.getElementOnlyFilter("file"));
  while (fileCursor.getNext() != null) {
    if (fileCursor.asEvent().isStartElement()) {
      String classKey=extractClassName(fileCursor.getAttrValue("name"));
      if (classKey != null) {
        SMInputCursor fileChildrenCursor=fileCursor.childCursor(new SimpleFilter(SMEvent.START_ELEMENT));
        if (canBeIncludedInFileMetrics(fileChildrenCursor)) {
          JavaFile resource=new JavaFile(pack.getKey(),classKey,false);
          analyseMetricsNode(resource,fileChildrenCursor);
          saveHitsData(resource,fileChildrenCursor);
        }
      }
    }
  }
}
