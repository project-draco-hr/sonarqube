{
  Project p=new Project("foo").setAnalysisDate(new Date(1234567L));
  BatchComponentCache resourceCache=new BatchComponentCache();
  sampleFile=org.sonar.api.resources.File.create("src/Foo.php").setEffectiveKey("foo:src/Foo.php");
  resourceCache.add(p,null).setSnapshot(new Snapshot().setId(2));
  resourceCache.add(sampleFile,null).setInputPath(new DefaultInputFile("foo","src/Foo.php").setLines(5));
  measureCache=mock(MeasureCache.class);
  when(measureCache.byMetric(anyString(),anyString())).thenReturn(Collections.<Measure>emptyList());
  publisher=new CoveragePublisher(resourceCache,measureCache);
}
