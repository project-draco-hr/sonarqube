{
  try {
    if (tomcat != null && !stopping) {
      stopping=true;
      tomcat.stop();
      tomcat.destroy();
    }
    tomcat=null;
    stopping=false;
    ready=false;
    File tempDir=env.file(TEMP_RELATIVE_PATH);
    FileUtils.deleteQuietly(tempDir);
  }
 catch (  LifecycleException e) {
    throw new IllegalStateException("Fail to stop web server",e);
  }
}
