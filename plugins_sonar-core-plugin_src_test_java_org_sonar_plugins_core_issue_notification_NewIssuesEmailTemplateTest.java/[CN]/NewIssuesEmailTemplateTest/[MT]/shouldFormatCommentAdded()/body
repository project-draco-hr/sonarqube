{
  Notification notification=new Notification("new-issues").setFieldValue("count","32").setFieldValue("count-INFO","1").setFieldValue("count-MINOR","3").setFieldValue("count-MAJOR","10").setFieldValue("count-CRITICAL","5").setFieldValue("count-BLOCKER","0").setFieldValue("projectName","Struts").setFieldValue("projectKey","org.apache:struts").setFieldValue("projectDate","2010-05-18T14:50:45+0000");
  when(i18n.message(any(Locale.class),eq("severity.BLOCKER"),anyString())).thenReturn("Blocker");
  when(i18n.message(any(Locale.class),eq("severity.CRITICAL"),anyString())).thenReturn("Critical");
  when(i18n.message(any(Locale.class),eq("severity.MAJOR"),anyString())).thenReturn("Major");
  when(i18n.message(any(Locale.class),eq("severity.MINOR"),anyString())).thenReturn("Minor");
  when(i18n.message(any(Locale.class),eq("severity.INFO"),anyString())).thenReturn("Info");
  EmailMessage message=template.format(notification);
  assertThat(message.getMessageId()).isEqualTo("new-issues/org.apache:struts");
  assertThat(message.getSubject()).isEqualTo("Struts: new issues");
  assertThat(message.getMessage()).isEqualTo("" + "Project: Struts\n" + "\n"+ "32 new issues\n"+ "\n"+ "   Blocker: 0   Critical: 5   Major: 10   Minor: 3   Info: 1\n"+ "\n"+ "See it in SonarQube: http://nemo.sonarsource.org/issues/search?componentRoots=org.apache%3Astruts&createdAt=2010-05-18T14%3A50%3A45%2B0000\n");
}
