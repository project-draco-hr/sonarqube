{
  this.env=env;
  this.executor=Executors.newFixedThreadPool(2);
  this.monitor=new MonitorService(systemAvailableSocket());
  this.esPort=Integer.toString(NetworkUtils.freePort());
  Runtime.getRuntime().addShutdownHook(new Thread(){
    @Override public void run(){
      LOGGER.info("Shutting down sonar Node");
      if (elasticsearch != null) {
        elasticsearch.shutdown();
      }
      if (sonarqube != null) {
        sonarqube.shutdown();
      }
      executor.shutdown();
      try {
        executor.awaitTermination(10L,TimeUnit.SECONDS);
      }
 catch (      InterruptedException e) {
        LOGGER.warn("Executing terminated",e);
      }
    }
  }
);
}
