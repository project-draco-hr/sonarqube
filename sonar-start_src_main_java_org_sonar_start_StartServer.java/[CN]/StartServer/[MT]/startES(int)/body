{
  elasticsearch=new ProcessWrapper("org.sonar.search.ElasticSearch",ImmutableMap.of("SONAR_HOME",env.rootDir().getAbsolutePath(),"esDebug",properties.containsKey("esDebug") ? properties.get("esDebug") : "false","esPort",esPort,"esHome",env.rootDir().getAbsolutePath()),"ES",port,env.rootDir().getAbsolutePath() + "/lib/search/sonar-search-4.5-SNAPSHOT.jar");
  while (!elasticsearch.isReady()) {
    LOGGER.info("Waiting for ES");
    try {
      Thread.sleep(1000);
    }
 catch (    InterruptedException e) {
      e.printStackTrace();
    }
  }
}
