{
  String ruleKey=StringUtils.defaultIfEmpty(checkAnnotation.key(),clazz.getCanonicalName());
  String ruleName=StringUtils.defaultIfEmpty(checkAnnotation.title(),ruleKey);
  Rule rule=Rule.create(repositoryKey,ruleKey,ruleName);
  rule.setDescription(checkAnnotation.description());
  rule.setSeverity(RulePriority.fromCheckPriority(checkAnnotation.priority()));
  List<Field> fields=FieldUtils2.getFields(clazz,true);
  for (  Field field : fields) {
    addCheckProperty(rule,field);
  }
  return rule;
}
