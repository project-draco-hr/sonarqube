{
  userSession.checkPermission(GlobalPermissions.SYSTEM_ADMIN);
  DbSession dbSession=dbClient.openSession(false);
  try {
    save(dbSession,SMTP_HOST,request.param(PARAM_HOST),PARAM_HOST);
    save(dbSession,SMTP_PORT,request.hasParam(PARAM_PORT) ? Integer.toString(request.paramAsInt(PARAM_PORT)) : null,PARAM_PORT);
    save(dbSession,SMTP_SECURE_CONNECTION,request.param(PARAM_SECURE),PARAM_SECURE);
    save(dbSession,SMTP_USERNAME,request.param(PARAM_USERNAME),PARAM_USERNAME);
    save(dbSession,SMTP_PASSWORD,request.param(PARAM_PASSWORD),PARAM_PASSWORD);
    save(dbSession,FROM,request.param(PARAM_FROM),PARAM_FROM);
    save(dbSession,PREFIX,request.param(PARAM_PREFIX),PARAM_PREFIX);
    dbSession.commit();
  }
  finally {
    dbClient.closeSession(dbSession);
  }
  response.noContent();
}
