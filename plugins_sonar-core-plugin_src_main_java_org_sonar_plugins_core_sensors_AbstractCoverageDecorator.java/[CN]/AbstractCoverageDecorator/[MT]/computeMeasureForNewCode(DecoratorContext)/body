{
  Measure measure=new Measure(getGeneratedMetricForNewCode());
  boolean hasValue=false;
  for (int periodIndex=1; periodIndex <= 5; periodIndex++) {
    Long elements=countElementsForNewCode(context,periodIndex);
    if (elements != null && elements > 0L) {
      long coveredElements=countCoveredElementsForNewCode(context,periodIndex);
      measure.setVariation(periodIndex,calculateCoverage(coveredElements,elements));
      hasValue=true;
    }
  }
  if (hasValue) {
    context.saveMeasure(measure);
  }
}
