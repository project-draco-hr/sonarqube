{
  ProcessRef processRef1=newProcessRef(1);
  ProcessRef processRef2=newProcessRef(2);
  RestartRequestWatcherThread underTest=newSingleProcessRefRestartWatcher(processRef1,processRef2);
  underTest.start();
  Thread.sleep(123L);
  if (new Random().nextInt() % 2 == 1) {
    processRef1.getCommands().askForRestart();
  }
 else {
    processRef2.getCommands().askForRestart();
  }
  underTest.join();
  assertThat(underTest.isWatching()).isFalse();
  verify(monitor).restartAsync();
}
