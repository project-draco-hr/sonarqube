{
  Connector connector=null;
  int port=props.valueAsInt("sonar.web.https.port",DISABLED_PORT);
  if (port > DISABLED_PORT) {
    connector=newConnector(props,HTTP_PROTOCOL,"https");
    connector.setPort(port);
    connector.setSecure(true);
    connector.setScheme("https");
    configureMaxHttpHeaderSize(connector);
    setConnectorAttribute(connector,"keyAlias",props.value("sonar.web.https.keyAlias"));
    String keyPassword=props.value("sonar.web.https.keyPass","changeit");
    setConnectorAttribute(connector,"keyPass",keyPassword);
    setConnectorAttribute(connector,"keystorePass",props.value("sonar.web.https.keystorePass",keyPassword));
    setConnectorAttribute(connector,"keystoreFile",props.value("sonar.web.https.keystoreFile"));
    setConnectorAttribute(connector,"keystoreType",props.value("sonar.web.https.keystoreType","JKS"));
    setConnectorAttribute(connector,"keystoreProvider",props.value("sonar.web.https.keystoreProvider"));
    setConnectorAttribute(connector,"truststorePass",props.value("sonar.web.https.truststorePass","changeit"));
    setConnectorAttribute(connector,"truststoreFile",props.value("sonar.web.https.truststoreFile"));
    setConnectorAttribute(connector,"truststoreType",props.value("sonar.web.https.truststoreType","JKS"));
    setConnectorAttribute(connector,"truststoreProvider",props.value("sonar.web.https.truststoreProvider"));
    setConnectorAttribute(connector,"clientAuth",props.value("sonar.web.https.clientAuth","false"));
    setConnectorAttribute(connector,"ciphers",props.value(PROP_HTTPS_CIPHERS));
    setConnectorAttribute(connector,"sslEnabledProtocols","TLSv1,TLSv1.1,TLSv1.2");
    setConnectorAttribute(connector,"sslProtocol","TLS");
    setConnectorAttribute(connector,"SSLEnabled",true);
  }
  return connector;
}
