{
  BatchResource fromResource=resourceCache.get(dependency.getFrom());
  BatchResource toResource=resourceCache.get(dependency.getTo());
  BatchResource projectResource=resourceCache.get(project);
  if (fromResource.isFile() && toResource.isFile()) {
    dependencyCache.put(project.getEffectiveKey(),new DefaultDependency().setFromKey(fromResource.key()).setToKey(toResource.key()).setWeight(dependency.getWeight()));
  }
  if (session != null) {
    saveInDB(project,dependency,fromResource,toResource,projectResource);
  }
}
