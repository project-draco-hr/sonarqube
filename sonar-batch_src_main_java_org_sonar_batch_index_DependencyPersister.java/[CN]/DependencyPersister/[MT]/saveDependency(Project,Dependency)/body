{
  BatchResource fromResource=resourceCache.get(dependency.getFrom());
  BatchResource toResource=resourceCache.get(dependency.getTo());
  BatchResource projectResource=resourceCache.get(project);
  if (fromResource.isFile() && toResource.isFile()) {
    builder.clear();
    reportPublisher.getWriter().appendFileDependency(fromResource.batchId(),builder.setToFileRef(toResource.batchId()).setWeight(dependency.getWeight()).build());
  }
  if (session != null) {
    saveInDB(project,dependency,fromResource,toResource,projectResource);
  }
}
