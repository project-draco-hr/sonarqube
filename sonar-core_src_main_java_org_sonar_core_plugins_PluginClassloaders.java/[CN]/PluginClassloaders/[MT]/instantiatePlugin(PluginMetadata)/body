{
  try {
    Class clazz=get(plugin.getKey()).loadClass(plugin.getMainClass());
    return (Plugin)clazz.newInstance();
  }
 catch (  UnsupportedClassVersionError e) {
    throw new SonarException(String.format("The plugin %s is not supported with Java %s",plugin.getKey(),SystemUtils.JAVA_VERSION_TRIMMED),e);
  }
catch (  Exception e) {
    throw new SonarException(String.format("Fail to load plugin %s",plugin.getKey()),e);
  }
}
