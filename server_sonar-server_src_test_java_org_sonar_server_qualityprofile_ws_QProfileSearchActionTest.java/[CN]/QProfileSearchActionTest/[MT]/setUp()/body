{
  dbTester.truncateTables();
  qualityProfileDao=new QualityProfileDao(dbTester.myBatis(),mock(System2.class));
  dbClient=new DbClient(dbTester.database(),dbTester.myBatis(),qualityProfileDao);
  session=dbClient.openSession(false);
  profileLoader=mock(QProfileLoader.class);
  xoo1=LanguageTesting.newLanguage("xoo1");
  xoo2=LanguageTesting.newLanguage("xoo2");
  tester=new WsTester(new QProfilesWs(mock(RuleActivationActions.class),mock(BulkRuleActivationActions.class),mock(ProjectAssociationActions.class),new QProfileSearchAction(new Languages(xoo1,xoo2),new QProfileLookup(dbClient),profileLoader)));
}
