{
  MockUserSession.set().setLogin("john").setGlobalPermissions(GlobalPermissions.SCAN_EXECUTION);
  String projectKey="org.codehaus.sonar:sonar";
  when(qProfileFactory.getByNameAndLanguage(session,"Default","java")).thenReturn(QualityProfileDto.createFor("abcd").setName("Default").setLanguage("java").setRulesUpdatedAt("2014-01-14T14:00:00+0200"));
  WsTester.TestRequest request=tester.newGetRequest("batch","project").setParam("key",projectKey).setParam("profile","Default");
  request.execute().assertJson(getClass(),"return_quality_profile_from_given_profile_name.json");
}
