{
  Tasks tasks=new Tasks(settings,new TaskDefinition[]{ScanTask.DEFINITION,ListTasksTask.DEFINITION});
  tasks.start();
  assertThat(tasks.getTaskDefinition(ListTasksTask.COMMAND)).isEqualTo(ListTasksTask.DEFINITION);
  assertThat(tasks.getTaskDefinition(null)).isEqualTo(ScanTask.DEFINITION);
  settings.setProperty(CoreProperties.TASK,ListTasksTask.COMMAND);
  assertThat(tasks.getTaskDefinition(null)).isEqualTo(ListTasksTask.DEFINITION);
  assertThat(tasks.getTaskDefinition(ScanTask.COMMAND)).isEqualTo(ScanTask.DEFINITION);
}
