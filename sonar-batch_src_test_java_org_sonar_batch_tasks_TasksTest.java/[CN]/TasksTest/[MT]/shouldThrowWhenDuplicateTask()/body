{
  Tasks tasks=new Tasks(settings,new TaskDefinition[]{TaskDefinition.create().setName("foo1").setTask(FakeTask1.class).setCommand("cmd1"),TaskDefinition.create().setName("foo2").setTask(FakeTask1.class).setCommand("cmd2")});
  thrown.expect(SonarException.class);
  thrown.expectMessage("Task 'org.sonar.batch.tasks.TasksTest$FakeTask1' is defined twice: first by 'foo1' and then by 'foo2'");
  tasks.start();
}
