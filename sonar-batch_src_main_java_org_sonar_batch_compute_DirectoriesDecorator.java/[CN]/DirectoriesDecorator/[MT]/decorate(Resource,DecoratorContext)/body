{
  if (MeasureUtils.hasValue(context.getMeasure(CoreMetrics.DIRECTORIES))) {
    return;
  }
  if (Resource.QUALIFIER_DIRECTORY.equals(resource.getQualifier())) {
    context.saveMeasure(CoreMetrics.DIRECTORIES,1.0);
  }
 else   if (ResourceUtils.isSet(resource)) {
    Collection<Measure> childrenMeasures=context.getChildrenMeasures(CoreMetrics.DIRECTORIES);
    Double sum=MeasureUtils.sum(false,childrenMeasures);
    if (sum != null) {
      context.saveMeasure(CoreMetrics.DIRECTORIES,sum);
    }
  }
}
