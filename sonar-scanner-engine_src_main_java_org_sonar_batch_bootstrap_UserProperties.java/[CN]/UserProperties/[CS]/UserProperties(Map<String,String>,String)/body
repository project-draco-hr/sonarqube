{
  encryption=new Encryption(pathToSecretKey);
  Map<String,String> decryptedProps=Maps.newHashMap();
  for (  Map.Entry<String,String> entry : properties.entrySet()) {
    String value=entry.getValue();
    if (value != null && encryption.isEncrypted(value)) {
      try {
        value=encryption.decrypt(value);
      }
 catch (      Exception e) {
        throw new IllegalStateException("Fail to decrypt the property " + entry.getKey() + ". Please check your secret key.",e);
      }
    }
    decryptedProps.put(entry.getKey(),value);
  }
  this.properties=Maps.newHashMap(decryptedProps);
}
