{
  RuleFinder ruleFinder=mock(RuleFinder.class);
  when(ruleFinder.find(any(RuleQuery.class))).then(new Answer<Rule>(){
    public Rule answer(    InvocationOnMock invocation){
      RuleQuery query=(RuleQuery)invocation.getArguments()[0];
      Rule rule=Rule.create(query.getRepositoryKey(),"","").setConfigKey(query.getConfigKey()).setSeverity(RulePriority.BLOCKER);
      if (rule.getConfigKey().equals("rulesets/coupling.xml/ExcessiveImports")) {
        rule.createParameter("max");
      }
      return rule;
    }
  }
);
  return ruleFinder;
}
