{
  Project project=new Project(dependency.key());
  Resource result=context.getResource(project);
  if (result == null || !((Project)result).getAnalysisVersion().equals(dependency.version())) {
    Library lib=new Library(project.getKey(),dependency.version());
    index.addResource(lib);
    resourcePersister.persist();
    result=context.getResource(lib);
  }
  return result;
}
