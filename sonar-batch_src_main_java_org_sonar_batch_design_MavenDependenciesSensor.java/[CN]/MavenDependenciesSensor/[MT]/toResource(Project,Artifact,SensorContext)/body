{
  Project depWithBranch=Project.createFromMavenIds(artifact.getGroupId(),artifact.getArtifactId(),project.getBranch());
  Resource result=context.getResource(depWithBranch);
  if (result == null || !((Project)result).getAnalysisVersion().equals(artifact.getBaseVersion())) {
    Library lib=Library.createFromMavenIds(artifact.getGroupId(),artifact.getArtifactId(),artifact.getBaseVersion());
    index.addResource(lib);
    resourcePersister.persist();
    result=context.getResource(lib);
  }
  return result;
}
