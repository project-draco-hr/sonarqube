{
  List<PluginUpdate> updates=new ArrayList<PluginUpdate>();
  for (  Map.Entry<Plugin,Version> entry : installedPlugins.entrySet()) {
    Plugin plugin=entry.getKey();
    if (!isAlreadyDownloaded(plugin)) {
      Version pluginVersion=entry.getValue();
      for (      Release release : plugin.getReleasesGreaterThan(pluginVersion)) {
        updates.add(PluginUpdate.createForPluginRelease(release,installedSonarVersion));
      }
    }
  }
  return updates;
}
