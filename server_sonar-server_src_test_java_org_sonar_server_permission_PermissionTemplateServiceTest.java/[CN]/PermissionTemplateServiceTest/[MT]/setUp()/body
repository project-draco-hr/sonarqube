{
  userSessionRule.login("admin").setGlobalPermissions(GlobalPermissions.SYSTEM_ADMIN);
  DbClient dbClient=mock(DbClient.class);
  when(dbClient.openSession(false)).thenReturn(session);
  when(dbClient.permissionTemplateDao()).thenReturn(permissionTemplateDao);
  when(dbClient.userDao()).thenReturn(userDao);
  when(dbClient.groupDao()).thenReturn(groupDao);
  underTest=new PermissionTemplateService(dbClient,userSessionRule,finder);
}
