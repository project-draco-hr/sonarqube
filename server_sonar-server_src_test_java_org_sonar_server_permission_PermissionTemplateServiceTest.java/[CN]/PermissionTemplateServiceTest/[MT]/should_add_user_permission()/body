{
  UserDto userDto=new UserDto().setId(1L).setLogin("user").setName("user");
  when(userDao.selectActiveUserByLogin("user")).thenReturn(userDto);
  when(permissionTemplateDao.selectByKey(DEFAULT_KEY)).thenReturn(DEFAULT_TEMPLATE);
  underTest.addUserPermission(DEFAULT_KEY,DEFAULT_PERMISSION,"user");
  verify(permissionTemplateDao,times(1)).insertUserPermission(1L,1L,DEFAULT_PERMISSION);
}
