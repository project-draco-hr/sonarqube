{
  workflow.start();
  DefaultIssue issue=new DefaultIssue().setKey("ABCDE").setResolution(null).setStatus(Issue.STATUS_CONFIRMED).setNew(false).setBeingClosed(true);
  Date now=new Date();
  workflow.doAutomaticTransition(issue,IssueChangeContext.createScan(now));
  Assertions.assertThat(issue.resolution()).isEqualTo(Issue.RESOLUTION_FIXED);
  Assertions.assertThat(issue.status()).isEqualTo(Issue.STATUS_CLOSED);
  Assertions.assertThat(issue.closeDate()).isNotNull();
  Assertions.assertThat(issue.updateDate()).isEqualTo(DateUtils.truncate(now,Calendar.SECOND));
}
