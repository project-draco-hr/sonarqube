{
  workflow.start();
  DefaultIssue issue=new DefaultIssue().setKey("ABCDE").setRuleKey(RuleKey.of("js","S001")).setResolution(Issue.RESOLUTION_FIXED).setStatus(Issue.STATUS_RESOLVED).setNew(false).setBeingClosed(true);
  Date now=new Date();
  workflow.doAutomaticTransition(issue,IssueChangeContext.createScan(now));
  assertThat(issue.resolution()).isEqualTo(Issue.RESOLUTION_FIXED);
  assertThat(issue.status()).isEqualTo(Issue.STATUS_CLOSED);
  assertThat(issue.closeDate()).isNotNull();
  assertThat(issue.updateDate()).isEqualTo(DateUtils.truncate(now,Calendar.SECOND));
}
