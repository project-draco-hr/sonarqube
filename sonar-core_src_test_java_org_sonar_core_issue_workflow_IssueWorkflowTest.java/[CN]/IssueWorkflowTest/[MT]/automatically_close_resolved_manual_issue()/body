{
  DefaultIssue issue=new DefaultIssue().setKey("ABCDE").setStatus(Issue.STATUS_OPEN).setRuleKey(RuleKey.of(MANUAL_REPOSITORY_KEY,"Performance"));
  workflow.start();
  assertThat(workflow.outTransitions(issue)).containsOnly(Transition.create("confirm","OPEN","CONFIRMED"),Transition.create("resolve","OPEN","RESOLVED"),Transition.create("falsepositive","OPEN","RESOLVED"),Transition.create("wontfix","OPEN","RESOLVED"));
  workflow.doTransition(issue,"resolve",mock(IssueChangeContext.class));
  assertThat(issue.resolution()).isEqualTo(RESOLUTION_FIXED);
  assertThat(issue.status()).isEqualTo("RESOLVED");
  assertThat(workflow.outTransitions(issue)).containsOnly(Transition.create("reopen","RESOLVED","REOPENED"));
  workflow.doAutomaticTransition(issue,mock(IssueChangeContext.class));
  assertThat(issue.resolution()).isEqualTo(RESOLUTION_FIXED);
  assertThat(issue.status()).isEqualTo(STATUS_CLOSED);
}
