{
  DbSession dbSession=dbClient.openSession(false);
  try {
    List<String> domains=dbClient.metricDao().selectDomains(dbSession);
    JsonWriter json=response.newJsonWriter();
    json.beginObject();
    writeDomains(json,domains);
    json.endObject();
    json.close();
  }
  finally {
    MyBatis.closeQuietly(dbSession);
  }
}
