{
  int days=0, hours=0, minutes=0;
  String sanitizedText=StringUtils.deleteWhitespace(text);
  Pattern pattern=Pattern.compile("\\s*+(?:(\\d++)\\s*+" + DAY + ")?+\\s*+(?:(\\d++)\\s*+"+ HOUR+ ")?+\\s*+(?:(\\d++)\\s*+"+ MINUTE+ ")?+\\s*+");
  Matcher matcher=pattern.matcher(text);
  try {
    if (matcher.find()) {
      String daysDuration=matcher.group(1);
      if (daysDuration != null) {
        days=Integer.parseInt(daysDuration);
        sanitizedText=sanitizedText.replace(daysDuration + DAY,"");
      }
      String hoursText=matcher.group(2);
      if (hoursText != null) {
        hours=Integer.parseInt(hoursText);
        if (hours > 24) {
          throw new IllegalArgumentException(String.format("The number of hours should not be greater than 24, got %s",hours));
        }
        sanitizedText=sanitizedText.replace(hoursText + HOUR,"");
      }
      String minutesText=matcher.group(3);
      if (minutesText != null) {
        minutes=Integer.parseInt(minutesText);
        if (minutes > 60) {
          throw new IllegalArgumentException(String.format("The number of minutes should not be greater than 60, got %s",minutes));
        }
        sanitizedText=sanitizedText.replace(minutesText + MINUTE,"");
      }
      if (sanitizedText.isEmpty()) {
        return new Duration(days,hours,minutes,hoursInDay);
      }
    }
    throw invalid(text,null);
  }
 catch (  NumberFormatException e) {
    throw invalid(text,e);
  }
}
