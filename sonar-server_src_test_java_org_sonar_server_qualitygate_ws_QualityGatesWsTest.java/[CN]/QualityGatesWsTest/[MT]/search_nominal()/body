{
  long gateId=12345L;
  Association assoc=mock(Association.class);
  when(assoc.hasMoreResults()).thenReturn(true);
  List<ProjectQgateAssociation> projects=ImmutableList.of(new ProjectQgateAssociation().setId(42L).setName("Project One").setMember(false),new ProjectQgateAssociation().setId(24L).setName("Project Two").setMember(true));
  when(assoc.projects()).thenReturn(projects);
  when(projectFinder.find(any(ProjectQgateAssociationQuery.class))).thenReturn(assoc);
  tester.newRequest("search").setParam("gateId",Long.toString(gateId)).execute().assertJson("{'more':true,'results':[" + "{'id':42,'name':'Project One','selected':false}," + "{'id':24,'name':'Project Two','selected':true}"+ "]}");
}
