{
  when(characteristicsXMLImporter.importXML(anyString())).thenReturn(new DebtModel().addRootCharacteristic(new DefaultDebtCharacteristic().setKey("PORTABILITY").setName("Portability").setOrder(1)));
  CharacteristicDto dto1=new CharacteristicDto().setId(1).setKey("PORTABILITY").setName("Portability").setOrder(1);
  CharacteristicDto dto2=new CharacteristicDto().setId(2).setKey("COMPILER").setName("Compiler").setParentId(1);
  when(dao.selectEnabledCharacteristics(session)).thenReturn(newArrayList(dto1,dto2));
  underTest.restoreFromXml("<xml/>","java");
  verify(debtModelOperations).delete(dto2,now,session);
  verify(session).commit();
}
