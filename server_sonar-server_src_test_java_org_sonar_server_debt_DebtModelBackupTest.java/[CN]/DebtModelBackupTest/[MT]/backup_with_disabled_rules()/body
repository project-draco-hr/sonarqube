{
  when(dao.selectEnabledCharacteristics(session)).thenReturn(newArrayList(new CharacteristicDto().setId(1).setKey("PORTABILITY").setName("Portability updated").setOrder(2),new CharacteristicDto().setId(2).setKey("COMPILER").setName("Compiler updated").setParentId(1)));
  when(ruleDao.selectEnabledAndNonManual(session)).thenReturn(newArrayList(new RuleDto().setRepositoryKey("squid").setRuleKey("UselessImportCheck").setSubCharacteristicId(RuleDto.DISABLED_CHARACTERISTIC_ID),new RuleDto().setRepositoryKey("squid").setRuleKey("AvoidNPE")));
  underTest.backup();
  verify(debtModelXMLExporter).export(any(DebtModel.class),ruleDebtListCaptor.capture());
  assertThat(ruleDebtListCaptor.getValue()).isEmpty();
}
