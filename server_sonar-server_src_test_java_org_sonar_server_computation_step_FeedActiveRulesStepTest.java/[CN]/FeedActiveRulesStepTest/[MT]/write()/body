{
  BatchReport.ActiveRule.Builder batch1=BatchReport.ActiveRule.newBuilder().setRuleRepository("java").setRuleKey("S001").setSeverity(Constants.Severity.BLOCKER);
  batch1.addParamBuilder().setKey("p1").setValue("v1").build();
  BatchReport.ActiveRule.Builder batch2=BatchReport.ActiveRule.newBuilder().setRuleRepository("java").setRuleKey("S002").setSeverity(Constants.Severity.MAJOR);
  batchReportReader.putActiveRules(Arrays.asList(batch1.build(),batch2.build()));
  underTest.execute();
  assertThat(activeRulesHolder.getAll()).hasSize(2);
  Optional<ActiveRule> ar1=activeRulesHolder.get(RuleKey.of("java","S001"));
  assertThat(ar1.get().getSeverity()).isEqualTo(Severity.BLOCKER);
  assertThat(ar1.get().getParams()).containsExactly(MapEntry.entry("p1","v1"));
  Optional<ActiveRule> ar2=activeRulesHolder.get(RuleKey.of("java","S002"));
  assertThat(ar2.get().getSeverity()).isEqualTo(Severity.MAJOR);
  assertThat(ar2.get().getParams()).isEmpty();
}
