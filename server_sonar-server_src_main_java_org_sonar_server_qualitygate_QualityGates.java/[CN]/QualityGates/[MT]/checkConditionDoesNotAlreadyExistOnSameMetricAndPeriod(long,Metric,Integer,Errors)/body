{
  Collection<QualityGateConditionDto> conditions=conditionDao.selectForQualityGate(qGateId);
  if (conditions.isEmpty()) {
    return;
  }
  boolean conditionExists=from(conditions).anyMatch(new MatchMetricAndPeriod(metric.getId(),period));
  String errorMessage=period == null ? format("Condition on metric '%s' already exists.",metric.getName()) : format("Condition on metric '%s' over leak period already exists.",metric.getName());
  errors.check(!conditionExists,errorMessage);
}
