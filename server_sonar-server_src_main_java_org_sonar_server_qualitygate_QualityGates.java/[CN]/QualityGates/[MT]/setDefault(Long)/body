{
  checkPermission();
  if (idToUseAsDefault == null) {
    propertiesDao.deleteGlobalProperty(SONAR_QUALITYGATE_PROPERTY);
    settings.removeProperty(SONAR_QUALITYGATE_PROPERTY);
  }
 else {
    QualityGateDto newDefault=getNonNullQgate(idToUseAsDefault);
    propertiesDao.setProperty(new PropertyDto().setKey(SONAR_QUALITYGATE_PROPERTY).setValue(newDefault.getId().toString()));
    settings.setProperty(SONAR_QUALITYGATE_PROPERTY,idToUseAsDefault);
  }
}
