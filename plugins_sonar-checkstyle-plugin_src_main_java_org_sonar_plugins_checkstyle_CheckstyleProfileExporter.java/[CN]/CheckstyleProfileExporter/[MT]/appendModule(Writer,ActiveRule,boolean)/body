{
  String moduleName=StringUtils.substringAfterLast(activeRule.getConfigKey(),"/");
  writer.append("<module name=\"");
  StringEscapeUtils.escapeXml(writer,moduleName);
  writer.append("\">");
  if (manyInstances) {
    appendModuleProperty(writer,"id",activeRule.getRuleKey());
  }
  appendModuleProperty(writer,"severity",toCheckstyleSeverity(activeRule.getPriority()));
  for (  RuleParam ruleParam : activeRule.getRule().getParams()) {
    ActiveRuleParam activeParam=activeRule.getParameter(ruleParam.getKey());
    String value=null;
    if (activeParam == null) {
      value=ruleParam.getDefaultValue();
    }
 else {
      value=activeParam.getValue(true);
    }
    if (value != null) {
      appendModuleProperty(writer,ruleParam.getKey(),value);
    }
  }
  writer.append("</module>");
}
