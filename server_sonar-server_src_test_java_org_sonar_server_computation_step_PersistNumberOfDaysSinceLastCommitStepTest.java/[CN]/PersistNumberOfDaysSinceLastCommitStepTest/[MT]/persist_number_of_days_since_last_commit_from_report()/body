{
  long threeDaysAgo=DateUtils.addDays(new Date(),-3).getTime();
  BatchReportWriter reportWriter=initReportWithProjectAndFile();
  reportWriter.writeComponentChangesets(BatchReport.Changesets.newBuilder().setComponentRef(2).addChangeset(BatchReport.Changesets.Changeset.newBuilder().setDate(threeDaysAgo)).build());
  ComputationContext context=new ComputationContext(new BatchReportReader(dir),"PROJECT_KEY",projectSettings,dbClient,ComponentTreeBuilders.from(DumbComponent.DUMB_PROJECT),languageRepository);
  sut.execute(context);
  db.assertDbUnit(getClass(),"insert-from-report-result.xml",new String[]{"id"},"project_measures");
}
