{
  dbClient=new DbClient(db.database(),db.myBatis(),new MeasureDao());
  sourceLineIndex=mock(SourceLineIndex.class);
  metricCache=mock(MetricCache.class);
  when(metricCache.get(anyString())).thenReturn(new MetricDto().setId(10));
  dir=temp.newFolder();
  db.truncateTables();
  sut=new PersistNumberOfDaysSinceLastCommitStep(System2.INSTANCE,dbClient,sourceLineIndex,metricCache);
}
