{
  esTester.putDocuments(UserIndexDefinition.INDEX,UserIndexDefinition.TYPE_USER,this.getClass(),"user1.json","user3-with-same-email-as-user1.json","inactive-user.json");
  assertThat(index.getAtMostThreeActiveUsersForScmAccount("user_1")).extractingResultOf("login").containsOnly("user1");
  assertThat(index.getAtMostThreeActiveUsersForScmAccount("user1")).extractingResultOf("login").containsOnly("user1");
  assertThat(index.getAtMostThreeActiveUsersForScmAccount("user1@mail.com")).extractingResultOf("login").containsOnly("user1","user3");
  assertThat(index.getAtMostThreeActiveUsersForScmAccount("")).isEmpty();
  assertThat(index.getAtMostThreeActiveUsersForScmAccount("unknown")).isEmpty();
}
