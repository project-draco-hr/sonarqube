{
  ComponentDto provisionedProject=newProjectDto().setKey("provisionedProject");
  dbClient.componentDao().insert(dbSession,provisionedProject);
  dbSession.commit();
  userSession.login("john").addProjectUuidPermissions(UserRole.ADMIN,provisionedProject.uuid());
  underTest.updateKey(provisionedProject.key(),"provisionedProject2");
  dbSession.commit();
  assertComponentKeyHasBeenUpdated(provisionedProject.key(),"provisionedProject2");
}
