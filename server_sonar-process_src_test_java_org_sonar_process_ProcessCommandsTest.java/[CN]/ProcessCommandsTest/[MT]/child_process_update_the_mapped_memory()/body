{
  File dir=temp.newFolder();
  ProcessCommands commands=new ProcessCommands(dir,1);
  assertThat(commands.isReady()).isFalse();
  assertThat(commands.mappedByteBuffer.get(commands.offset())).isEqualTo(ProcessCommands.EMPTY);
  assertThat(commands.mappedByteBuffer.getLong(2 + commands.offset())).isEqualTo(0L);
  commands.setReady();
  assertThat(commands.isReady()).isTrue();
  assertThat(commands.mappedByteBuffer.get(commands.offset())).isEqualTo(ProcessCommands.READY);
  long currentTime=System.currentTimeMillis();
  commands.ping();
  assertThat(commands.mappedByteBuffer.getLong(2 + commands.offset())).isGreaterThanOrEqualTo(currentTime);
}
