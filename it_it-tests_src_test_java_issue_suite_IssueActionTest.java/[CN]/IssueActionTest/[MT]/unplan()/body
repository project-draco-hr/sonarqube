{
  assertThat(issue.actionPlan()).isNull();
  ActionPlan newActionPlan=adminActionPlanClient().create(NewActionPlan.create().name("Short term").project("sample").description("Short term issues").deadLine(toDate("2113-01-31")));
  assertThat(newActionPlan.key()).isNotNull();
  adminIssueClient().plan(issue.key(),newActionPlan.key());
  assertThat(search(IssueQuery.create().actionPlans(newActionPlan.key())).list()).hasSize(1);
  adminIssueClient().plan(issue.key(),null);
  assertThat(search(IssueQuery.create().actionPlans(newActionPlan.key())).list()).hasSize(0);
  orchestrator.executeBuild(scan);
  Issue reloaded=searchIssueByKey(issue.key());
  assertThat(reloaded.actionPlan()).isNull();
  assertThat(reloaded.creationDate()).isEqualTo(issue.creationDate());
}
