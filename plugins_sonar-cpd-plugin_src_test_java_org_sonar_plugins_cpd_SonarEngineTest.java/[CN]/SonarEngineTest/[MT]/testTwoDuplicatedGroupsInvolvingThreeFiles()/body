{
  List<CloneGroup> groups=Arrays.asList(newCloneGroup(new ClonePart("key1",0,5,204),new ClonePart("key2",0,15,214)),newCloneGroup(new ClonePart("key1",0,15,214),new ClonePart("key3",0,15,214)));
  SonarEngine.save(context,resource,groups);
  verify(context).saveMeasure(resource,CoreMetrics.DUPLICATED_FILES,1d);
  verify(context).saveMeasure(resource,CoreMetrics.DUPLICATED_BLOCKS,2d);
  verify(context).saveMeasure(resource,CoreMetrics.DUPLICATED_LINES,210d);
  verify(context).saveMeasure(eq(resource),argThat(new IsMeasure(CoreMetrics.DUPLICATIONS_DATA,"<duplications>" + "<g>" + "<b s=\"5\" l=\"200\" r=\"key1\"/>"+ "<b s=\"15\" l=\"200\" r=\"key2\"/>"+ "</g>"+ "<g>"+ "<b s=\"15\" l=\"200\" r=\"key1\"/>"+ "<b s=\"15\" l=\"200\" r=\"key3\"/>"+ "</g>"+ "</duplications>")));
}
