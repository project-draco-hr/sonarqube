{
  PathResolver pathResolver=mock(PathResolver.class);
  ModuleFileSystem fileSystem=mock(ModuleFileSystem.class);
  RelativePath relativePath=mock(RelativePath.class);
  when(pathResolver.relativePath(anyCollection(),any(java.io.File.class))).thenReturn(relativePath);
  when(relativePath.path()).thenReturn("com/foo/Bar.java");
  SonarEngine engine=new SonarEngine(null,fileSystem,pathResolver);
  Resource<?> resource=engine.getResource(new java.io.File(""));
  assertThat(resource.getKey()).isEqualTo("com.foo.Bar");
  assertThat(resource).isInstanceOf(JavaFile.class);
}
