{
  FunctorUtils.validate(predicates);
  FunctorUtils.validate(closures);
  if (predicates.length != closures.length) {
    throw new IllegalArgumentException("The predicate and closure arrays must be the same size");
  }
  if (predicates.length == 0) {
    return (defaultClosure == null ? NOPClosure.INSTANCE : defaultClosure);
  }
  predicates=FunctorUtils.copy(predicates);
  closures=FunctorUtils.copy(closures);
  return new SwitchClosure(predicates,closures,defaultClosure);
}
