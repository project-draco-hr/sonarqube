{
  dao.insert(dbSession,RuleTesting.newDto(RuleKey.of("java","S001")));
  dao.insert(dbSession,RuleTesting.newDto(RuleKey.of("java","S002")));
  dao.insert(dbSession,RuleTesting.newDto(RuleKey.of("java","S003")));
  dbSession.commit();
  QueryContext options=new QueryContext(userSessionRule);
  options.setOffset(0).setLimit(2);
  Result results=index.search(new RuleQuery(),options);
  assertThat(results.getTotal()).isEqualTo(3);
  assertThat(results.getHits()).hasSize(2);
  options.setOffset(0).setLimit(10);
  results=index.search(new RuleQuery(),options);
  assertThat(results.getTotal()).isEqualTo(3);
  assertThat(results.getHits()).hasSize(3);
  options.setOffset(2).setLimit(10);
  results=index.search(new RuleQuery(),options);
  assertThat(results.getTotal()).isEqualTo(3);
  assertThat(results.getHits()).hasSize(1);
  options.setOffset(2).setLimit(0);
  results=index.search(new RuleQuery(),options);
  assertThat(results.getTotal()).isEqualTo(3);
  assertThat(results.getHits()).hasSize(0);
}
