{
  dao.insert(dbSession,RuleTesting.newDto(RuleKey.of("java","S001")).setName("abcd"));
  dao.insert(dbSession,RuleTesting.newDto(RuleKey.of("java","S002")).setName("ABC"));
  dao.insert(dbSession,RuleTesting.newDto(RuleKey.of("java","S003")).setName("FGH"));
  dbSession.commit();
  RuleQuery query=new RuleQuery().setSortField(RuleNormalizer.RuleField.NAME);
  Result<Rule> results=index.search(query,new QueryContext(userSessionRule));
  assertThat(results.getHits()).hasSize(3);
  assertThat(Iterables.getFirst(results.getHits(),null).key().rule()).isEqualTo("S002");
  assertThat(Iterables.getLast(results.getHits(),null).key().rule()).isEqualTo("S003");
  query=new RuleQuery().setSortField(RuleNormalizer.RuleField.NAME).setAscendingSort(false);
  results=index.search(query,new QueryContext(userSessionRule));
  assertThat(results.getHits()).hasSize(3);
  assertThat(Iterables.getFirst(results.getHits(),null).key().rule()).isEqualTo("S003");
  assertThat(Iterables.getLast(results.getHits(),null).key().rule()).isEqualTo("S002");
}
