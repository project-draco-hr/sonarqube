{
  dao.insert(dbSession,RuleTesting.newDto(RuleKey.of("javascript","S001")));
  dbSession.commit();
  QueryContext options=new QueryContext(userSessionRule);
  options.addFieldsToReturn(RuleNormalizer.RuleField.LANGUAGE.field(),RuleNormalizer.RuleField.STATUS.field());
  Result<Rule> results=index.search(new RuleQuery(),options);
  assertThat(results.getHits()).hasSize(1);
  Rule hit=Iterables.getFirst(results.getHits(),null);
  assertThat(hit.language()).isEqualTo("js");
  assertThat(hit.status()).isEqualTo(RuleStatus.READY);
  try {
    hit.htmlDescription();
    fail();
  }
 catch (  IllegalStateException e) {
    assertThat(e).hasMessage("Field htmlDesc not specified in query options");
  }
}
