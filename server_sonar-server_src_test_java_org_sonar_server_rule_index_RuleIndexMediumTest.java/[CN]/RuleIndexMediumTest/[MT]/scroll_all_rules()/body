{
  int max=100;
  for (int i=0; i < max; i++) {
    dao.insert(dbSession,RuleTesting.newDto(RuleKey.of("java","scroll_" + i)));
  }
  dbSession.commit();
  Result results=index.search(new RuleQuery(),new QueryContext(userSessionRule).setScroll(true));
  assertThat(results.getTotal()).isEqualTo(max);
  assertThat(results.getHits()).hasSize(0);
  Iterator<Rule> it=results.scroll();
  int count=0;
  while (it.hasNext()) {
    count++;
    it.next();
  }
  assertThat(count).isEqualTo(max);
}
