{
  if (!isConnectedToDB()) {
    return Status.DOWN;
  }
  Platform.Status platformStatus=platform.status();
switch (platformStatus) {
case BOOTING:
    return Status.DOWN;
case UP:
  return restartFlagHolder.isRestarting() ? Status.RESTARTING : Status.UP;
case SAFEMODE:
return computeFromDbMigrationStatus();
default :
throw new IllegalArgumentException("Unsupported Platform.Status " + platformStatus);
}
}
