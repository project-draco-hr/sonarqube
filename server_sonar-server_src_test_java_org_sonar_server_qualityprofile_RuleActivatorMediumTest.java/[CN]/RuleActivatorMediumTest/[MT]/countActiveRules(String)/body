{
  List<ActiveRuleDto> activeRuleDtos=db.deprecatedActiveRuleDao().selectByProfileKey(dbSession,profileKey);
  List<ActiveRule> activeRules=Lists.newArrayList(index.findByProfile(profileKey));
  assertThat(activeRuleDtos.size()).as("Not same active rules between db and index").isEqualTo(activeRules.size());
  return activeRuleDtos.size();
}
