{
  BufferedReader reader=null;
  try {
    final InputStream inputStream=method.getResponseBodyAsStream();
    reader=new BufferedReader(new InputStreamReader(inputStream));
    final StringBuilder sb=new StringBuilder();
    String line;
    while ((line=reader.readLine()) != null) {
      sb.append(line).append("\n");
    }
    return sb.toString();
  }
 catch (  IOException e) {
    throw new ConnectionException("Can not read response",e);
  }
 finally {
    if (reader != null) {
      try {
        reader.close();
      }
 catch (      Exception e) {
        throw new RuntimeException("Fail to close HTTP stream",e);
      }
    }
  }
}
