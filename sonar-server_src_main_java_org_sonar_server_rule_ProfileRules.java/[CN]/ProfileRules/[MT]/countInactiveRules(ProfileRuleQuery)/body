{
  return index.executeCount(index.client().prepareCount(INDEX_RULES).setTypes(TYPE_RULE).setQuery(QueryBuilders.filteredQuery(QueryBuilders.matchAllQuery(),boolFilter().must(parentRuleFilter(query)).mustNot(hasChildFilter(TYPE_ACTIVE_RULE,termFilter(ActiveRuleDocument.FIELD_PROFILE_ID,query.profileId()))))));
}
