{
  setupData("should_create_database");
  File existingDb=new File(dryRunCacheFolder,"123456.h2.db");
  FileUtils.write(existingDb,"fakeDbContent");
  when(dryRunCache.getModificationTimestamp(123L)).thenReturn(123457L);
  byte[] database=localDatabaseFactory.createDatabaseForDryRun(123L);
  dataSource=createDatabase(database);
  assertThat(rowCount("metrics")).isEqualTo(2);
  assertThat(rowCount("projects")).isEqualTo(1);
  assertThat(rowCount("snapshots")).isEqualTo(1);
  assertThat(rowCount("project_measures")).isEqualTo(1);
  verify(dryRunCache).clean(123L);
}
