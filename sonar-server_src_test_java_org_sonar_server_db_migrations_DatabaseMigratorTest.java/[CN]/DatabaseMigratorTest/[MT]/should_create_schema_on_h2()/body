{
  Dialect supportedDialect=new H2();
  when(database.getDialect()).thenReturn(supportedDialect);
  Connection connection=mock(Connection.class);
  SonarSession session=mock(SonarSession.class);
  when(session.getConnection()).thenReturn(connection);
  when(mybatis.openSession()).thenReturn(session);
  when(serverUpgradeStatus.isFreshInstall()).thenReturn(true);
  DatabaseMigrator databaseMigrator=new DatabaseMigrator(mybatis,database,migrations,serverUpgradeStatus,null){
    @Override protected void createSchema(    Connection connection,    String dialectId){
    }
  }
;
  assertThat(databaseMigrator.createDatabase()).isTrue();
}
