{
  boolean dryRun=settings.getBoolean(CoreProperties.DRY_RUN);
  for (  Map.Entry<PluginMetadata,Plugin> entry : pluginRepository.getPluginsByMetadata().entrySet()) {
    PluginMetadata metadata=entry.getKey();
    Plugin plugin=entry.getValue();
    container.addExtension(metadata,plugin);
    for (    Object extension : plugin.getExtensions()) {
      installTaskExtension(container,metadata,extension,projectPresent);
      if (projectPresent) {
        installBatchExtension(container,metadata,extension,dryRun,InstantiationStrategy.PER_BATCH);
      }
    }
  }
  List<ExtensionProvider> providers=container.getComponentsByType(ExtensionProvider.class);
  for (  ExtensionProvider provider : providers) {
    executeTaskExtensionProvider(container,provider,projectPresent);
    if (projectPresent) {
      executeBatchExtensionProvider(container,InstantiationStrategy.PER_BATCH,dryRun,provider);
    }
  }
}
