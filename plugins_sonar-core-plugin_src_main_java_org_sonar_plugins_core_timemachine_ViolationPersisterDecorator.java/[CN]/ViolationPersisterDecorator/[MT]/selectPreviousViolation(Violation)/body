{
  Snapshot snapshot=resourcePersister.getSnapshot(violation.getResource());
  Snapshot previousLastSnapshot=resourcePersister.getLastSnapshot(snapshot,true);
  if (previousLastSnapshot == null) {
    return null;
  }
  List<RuleFailureModel> models=session.getResults(RuleFailureModel.class,"snapshotId",previousLastSnapshot.getId(),"line",violation.getLineId(),"message",violation.getMessage());
  if (models != null && !models.isEmpty()) {
    return models.get(0);
  }
  return null;
}
