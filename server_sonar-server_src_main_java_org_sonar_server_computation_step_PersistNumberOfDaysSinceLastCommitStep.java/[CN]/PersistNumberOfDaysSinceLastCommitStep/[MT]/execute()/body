{
  NumberOfDaysSinceLastCommitVisitor visitor=new NumberOfDaysSinceLastCommitVisitor();
  Component project=treeRootHolder.getRoot();
  new DepthTraversalTypeAwareCrawler(visitor).visit(project);
  long lastCommitTimestamp=visitor.lastCommitTimestampFromReport;
  if (lastCommitTimestamp == 0L) {
    Long lastCommitFromIndex=lastCommitFromIndex(treeRootHolder.getRoot().getUuid());
    lastCommitTimestamp=firstNonNull(lastCommitFromIndex,lastCommitTimestamp);
  }
  if (lastCommitTimestamp != 0L) {
    persistNumberOfDaysSinceLastCommit(lastCommitTimestamp,dbIdsRepository.getSnapshotId(project));
  }
}
