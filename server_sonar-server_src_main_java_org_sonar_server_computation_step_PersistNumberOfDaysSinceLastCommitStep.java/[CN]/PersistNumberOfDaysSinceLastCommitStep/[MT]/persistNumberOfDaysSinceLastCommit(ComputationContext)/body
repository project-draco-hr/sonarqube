{
  checkState(lastCommitTimestamp != 0,"The last commit time should exist");
  long numberOfDaysSinceLastCommit=(system.now() - lastCommitTimestamp) / MILLISECONDS_PER_DAY;
  DbSession dbSession=dbClient.openSession(true);
  try {
    dbClient.measureDao().insert(dbSession,new MeasureDto().setValue((double)numberOfDaysSinceLastCommit).setMetricId(metricCache.get(CoreMetrics.DAYS_SINCE_LAST_COMMIT_KEY).getId()).setSnapshotId(context.getReportMetadata().getSnapshotId()));
    dbSession.commit();
  }
  finally {
    MyBatis.closeQuietly(dbSession);
  }
}
