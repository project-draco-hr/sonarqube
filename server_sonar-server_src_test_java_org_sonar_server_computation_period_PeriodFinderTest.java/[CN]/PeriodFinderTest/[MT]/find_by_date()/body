{
  dbTester.prepareDbUnit(getClass(),"find_by_date.xml");
  String textDate="2008-11-22";
  Date date=DATE_FORMAT.parse(textDate);
  Period result=periodFinder.findByDate(dbSession,1L,date);
  assertThat(result.getMode()).isEqualTo(CoreProperties.TIMEMACHINE_MODE_DATE);
  assertThat(result.getModeParameter()).isEqualTo(textDate);
  assertThat(result.getSnapshotDate()).isEqualTo(1227358680000L);
  assertThat(result.getTargetDate()).isEqualTo(date.getTime());
  assertThat(result.getProjectSnapshot().getId()).isEqualTo(1006L);
}
