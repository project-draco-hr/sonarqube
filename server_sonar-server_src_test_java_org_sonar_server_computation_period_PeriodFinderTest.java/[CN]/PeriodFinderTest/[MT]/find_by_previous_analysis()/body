{
  dbTester.prepareDbUnit(getClass(),"find_by_previous_analysis.xml");
  Period result=periodFinder.findByPreviousAnalysis(dbSession,1L,DATE_FORMAT.parse("2008-11-27").getTime());
  assertThat(result.getMode()).isEqualTo(CoreProperties.TIMEMACHINE_MODE_PREVIOUS_ANALYSIS);
  assertThat(result.getModeParameter()).isEqualTo(DATE_FORMAT.format(new Date(1227617880000L)));
  assertThat(result.getSnapshotDate()).isEqualTo(1227617880000L);
  assertThat(result.getTargetDate()).isEqualTo(1227617880000L);
  assertThat(result.getProjectSnapshot().getId()).isEqualTo(1009L);
}
