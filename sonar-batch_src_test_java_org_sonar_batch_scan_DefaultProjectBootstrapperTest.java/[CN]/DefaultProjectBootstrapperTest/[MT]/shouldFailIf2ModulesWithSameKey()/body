{
  Properties props=new Properties();
  props.put("sonar.projectKey","root");
  ProjectDefinition root=ProjectDefinition.create().setProperties(props);
  Properties props1=new Properties();
  props1.put("sonar.projectKey","mod1");
  root.addSubProject(ProjectDefinition.create().setProperties(props1));
  Properties props2=new Properties();
  props2.put("sonar.projectKey","mod2");
  ProjectDefinition mod2=ProjectDefinition.create().setProperties(props2);
  DefaultProjectBootstrapper.checkUniquenessOfChildKey(mod2,root);
  root.addSubProject(mod2);
  thrown.expect(IllegalStateException.class);
  thrown.expectMessage("Project 'root' can't have 2 modules with the following key: mod2");
  DefaultProjectBootstrapper.checkUniquenessOfChildKey(mod2,root);
}
