{
  server.doReturnBody(WsComponents.WsSearchResponse.newBuilder().addComponents(WsComponents.WsSearchResponse.Component.getDefaultInstance()).build().toByteArray());
  server.doReturnStatus(HTTP_OK);
  server.doReturnContentType(MediaTypes.PROTOBUF);
  WsComponents.WsSearchResponse response=underTest.execute(newGetRequest("api/components/search").setMediaType(WsRequest.MediaType.PROTOBUF),WsComponents.WsSearchResponse.parser());
  assertThat(response.getComponentsCount()).isEqualTo(1);
  assertThat(server.requestHeaders().get(HttpHeaders.ACCEPT)).isEqualTo(MediaTypes.PROTOBUF);
}
