{
  server.doReturnBody(WsComponents.SearchWsResponse.newBuilder().addComponents(WsComponents.SearchWsResponse.Component.getDefaultInstance()).build().toByteArray());
  server.doReturnStatus(HTTP_OK);
  server.doReturnContentType(MediaTypes.PROTOBUF);
  WsComponents.SearchWsResponse response=underTest.execute(newGetRequest("api/components/search").setMediaType(WsRequest.MediaType.PROTOBUF),WsComponents.SearchWsResponse.parser());
  assertThat(response.getComponentsCount()).isEqualTo(1);
  assertThat(server.requestHeaders().get(HttpHeaders.ACCEPT)).isEqualTo(MediaTypes.PROTOBUF);
}
