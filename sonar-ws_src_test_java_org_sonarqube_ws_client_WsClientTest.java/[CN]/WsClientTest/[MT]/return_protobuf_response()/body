{
  server.doReturnBody(WsComponents.WsSearchResponse.newBuilder().addComponents(WsComponents.WsSearchResponse.Component.getDefaultInstance()).build().toByteArray());
  server.doReturnStatus(HTTP_OK);
  server.doReturnContentType(MediaType.PROTOBUF.toString());
  WsComponents.WsSearchResponse response=underTest.execute(new WsRequest("api/components/search").setMediaType(WsRequest.MediaType.PROTOBUF),WsComponents.WsSearchResponse.PARSER);
  assertThat(response.getComponentsCount()).isEqualTo(1);
  assertThat(server.requestHeaders().get(HttpHeaders.ACCEPT)).isEqualTo(MediaType.PROTOBUF.toString());
}
