{
  IssueCache cache=new IssueCache();
  DefaultIssue issue=new DefaultIssue().setKey("111").setComponentKey("org.struts.Action").setSeverity(Severity.BLOCKER);
  cache.addOrUpdate(issue);
  issue.setSeverity(Severity.MINOR);
  cache.addOrUpdate(issue);
  Collection<Issue> issues=cache.componentIssues("org.struts.Action");
  assertThat(issues).hasSize(1);
  Issue reloaded=issues.iterator().next();
  assertThat(reloaded.key()).isEqualTo("111");
  assertThat(reloaded.severity()).isEqualTo(Severity.MINOR);
}
