{
  Metric metric=CoreMetrics.COVERAGE_LINE_HITS_DATA;
  when(measureCache.byMetric("component_key",metric.key())).thenReturn(Arrays.asList(new Measure().setData("1=10;3=4").setMetric(metric)));
  sut.applyLineMeasure("component_key",metric.key(),output,new SourceDataFactory.MeasureOperation(){
    @Override public void apply(    String value,    FileSourceDb.Line.Builder lineBuilder){
      lineBuilder.setUtLineHits(Integer.parseInt(value));
    }
  }
);
  FileSourceDb.Data data=output.build();
  assertThat(data.getLines(0).getUtLineHits()).isEqualTo(10);
  assertThat(data.getLines(1).hasUtLineHits()).isFalse();
  assertThat(data.getLines(2).getUtLineHits()).isEqualTo(4);
}
