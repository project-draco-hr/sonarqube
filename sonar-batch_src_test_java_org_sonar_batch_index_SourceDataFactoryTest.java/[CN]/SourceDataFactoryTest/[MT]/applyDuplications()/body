{
  DuplicationGroup group1=new DuplicationGroup(new DuplicationGroup.Block(inputFile.key(),1,1)).addDuplicate(new DuplicationGroup.Block(inputFile.key(),3,1)).addDuplicate(new DuplicationGroup.Block("anotherFile1",12,1)).addDuplicate(new DuplicationGroup.Block("anotherFile2",13,1));
  DuplicationGroup group2=new DuplicationGroup(new DuplicationGroup.Block(inputFile.key(),1,2)).addDuplicate(new DuplicationGroup.Block("anotherFile1",12,2)).addDuplicate(new DuplicationGroup.Block("anotherFile2",13,2));
  when(duplicationCache.byComponent(inputFile.key())).thenReturn(Lists.newArrayList(group1,group2));
  sut.applyDuplications(inputFile.key(),output);
  FileSourceDb.Data data=output.build();
  assertThat(data.getLines(0).getDuplicationsList()).containsExactly(1,3);
  assertThat(data.getLines(1).getDuplicationsList()).containsExactly(3);
  assertThat(data.getLines(2).getDuplicationsList()).containsExactly(2);
}
