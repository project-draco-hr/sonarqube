{
  DefaultDuplication group1=new DefaultDuplication().setOriginBlock(new Duplication.Block(inputFile.key(),1,1));
  group1.duplicates().add(new Duplication.Block(inputFile.key(),3,1));
  group1.duplicates().add(new Duplication.Block("anotherFile1",12,1));
  group1.duplicates().add(new Duplication.Block("anotherFile2",13,1));
  DefaultDuplication group2=new DefaultDuplication().setOriginBlock(new Duplication.Block(inputFile.key(),1,2));
  group2.duplicates().add(new Duplication.Block("anotherFile1",12,2));
  group2.duplicates().add(new Duplication.Block("anotherFile2",13,2));
  when(duplicationCache.byComponent(inputFile.key())).thenReturn(Lists.newArrayList(group1,group2));
  sut.applyDuplications(inputFile.key(),output);
  FileSourceDb.Data data=output.build();
  assertThat(data.getLines(0).getDuplicationList()).containsExactly(1,3);
  assertThat(data.getLines(1).getDuplicationList()).containsExactly(3);
  assertThat(data.getLines(2).getDuplicationList()).containsExactly(2);
}
