{
  BatchReportWriter writer=new BatchReportWriter(reportDir);
  writer.writeComponentScm(Scm.newBuilder().setComponentRef(1).addChangeset(Changeset.newBuilder().setRevision("ABC").setAuthor("him").setDate(123456L).build()).addChangeset(Changeset.newBuilder().build()).addChangesetIndexByLine(0).addChangesetIndexByLine(1).addChangesetIndexByLine(0).addChangesetIndexByLine(1).build());
  sut.applyScm(inputFile,output);
  FileSourceDb.Data data=output.build();
  assertThat(data.getLines(0).getScmRevision()).isEqualTo("ABC");
  assertThat(data.getLines(0).getScmAuthor()).isEqualTo("him");
  assertThat(data.getLines(1).hasScmRevision()).isFalse();
  assertThat(data.getLines(1).hasScmAuthor()).isFalse();
  assertThat(data.getLines(2).getScmRevision()).isEqualTo("ABC");
  assertThat(data.getLines(2).getScmAuthor()).isEqualTo("him");
}
