{
  SyntaxHighlightingData highlighting=new SyntaxHighlightingDataBuilder().registerHighlightingRule(0,3,TypeOfText.ANNOTATION).registerHighlightingRule(4,6,TypeOfText.COMMENT).registerHighlightingRule(7,16,TypeOfText.CONSTANT).registerHighlightingRule(8,15,TypeOfText.KEYWORD).build();
  when(componentDataCache.getData(inputFile.key(),SnapshotDataTypes.SYNTAX_HIGHLIGHTING)).thenReturn(highlighting);
  metadata.setOriginalLineOffsets(new int[]{0,4,7});
  sut.applyHighlighting(inputFile,metadata,output);
  FileSourceDb.Data data=output.build();
  assertThat(data.getLines(0).getHighlighting()).isEqualTo("0,3,a");
  assertThat(data.getLines(1).getHighlighting()).isEqualTo("0,2,cd");
  assertThat(data.getLines(2).getHighlighting()).isEqualTo("0,9,c;1,8,k");
}
