{
  AbstractSurefireParser parser=newParser();
  SensorContext context=mock(SensorContext.class);
  when(context.isIndexed(argThat(new BaseMatcher<Resource>(){
    public boolean matches(    Object o){
      return !((Resource)o).getName().contains("$");
    }
    public void describeTo(    Description description){
    }
  }
),eq(false))).thenReturn(true);
  parser.collect(new Project("foo"),context,getDir("innerClasses"));
  verify(context).saveMeasure(argThat(new IsResource(Scopes.FILE,Qualifiers.FILE,"org.apache.commons.collections.bidimap.AbstractTestBidiMap")),eq(CoreMetrics.TESTS),eq(7.0));
  verify(context).saveMeasure(argThat(new IsResource(Scopes.FILE,Qualifiers.FILE,"org.apache.commons.collections.bidimap.AbstractTestBidiMap")),eq(CoreMetrics.TEST_ERRORS),eq(1.0));
  verify(context,never()).saveMeasure(argThat(new IsResource(Scopes.FILE,Qualifiers.FILE,"org.apache.commons.collections.bidimap.AbstractTestBidiMap$TestBidiMapEntrySet")),any(Metric.class),anyDouble());
}
