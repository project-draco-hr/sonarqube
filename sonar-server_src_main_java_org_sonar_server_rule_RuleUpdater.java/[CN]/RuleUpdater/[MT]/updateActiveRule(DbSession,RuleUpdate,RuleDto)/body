{
  if (update.isCustomRule() && update.isChangeParameters()) {
    for (    ActiveRuleDto activeRuleDto : dbClient.activeRuleDao().findByRule(dbSession,rule)) {
      for (      ActiveRuleParamDto activeRuleParamDto : dbClient.activeRuleDao().findParamsByActiveRuleKey(dbSession,activeRuleDto.getKey())) {
        String newValue=update.getParameters().get(activeRuleParamDto.getKey());
        if (!Strings.isNullOrEmpty(newValue)) {
          activeRuleParamDto.setValue(newValue);
          dbClient.activeRuleDao().updateParam(dbSession,activeRuleDto,activeRuleParamDto);
        }
      }
    }
  }
}
