{
  String name=resource.getName();
  if (StringUtils.isBlank(name) || resource.getId() == null) {
    return;
  }
  String key=toKey(name);
  if (key.length() >= MINIMUM_KEY_SIZE) {
    ResourceIndexerMapper mapper=session.getMapper(ResourceIndexerMapper.class);
    boolean toBeIndexed=sanitizeIndex(resource,key,mapper);
    if (toBeIndexed) {
      ResourceIndexDto dto=new ResourceIndexDto().setResourceId(resource.getId()).setRootProjectId(loadRootProjectId(resource,mapper,correctProjectRootId)).setNameSize(name.length());
      for (int position=0; position <= key.length() - MINIMUM_KEY_SIZE; position++) {
        dto.setPosition(position);
        dto.setKey(StringUtils.substring(key,position));
        mapper.insert(dto);
      }
      session.commit();
    }
  }
}
