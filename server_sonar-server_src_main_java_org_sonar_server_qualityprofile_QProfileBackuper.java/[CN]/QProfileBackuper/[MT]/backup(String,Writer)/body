{
  QualityProfileDto profile;
  DbSession dbSession=db.openSession(false);
  try {
    profile=db.qualityProfileDao().getNonNullByKey(dbSession,key);
  }
  finally {
    dbSession.close();
  }
  Iterator<ActiveRule> activeRules=index.get(ActiveRuleIndex.class).findByProfile(profile.getKey());
  writeXml(writer,profile,activeRules);
}
