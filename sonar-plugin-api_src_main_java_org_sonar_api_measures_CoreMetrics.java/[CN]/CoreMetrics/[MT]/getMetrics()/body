{
  if (metrics.isEmpty()) {
    for (    Field field : CoreMetrics.class.getFields()) {
      if (Metric.class.isAssignableFrom(field.getType())) {
        try {
          Metric metric=(Metric)field.get(null);
          if (!StringUtils.equals(metric.getDomain(),DOMAIN_RULE_CATEGORIES)) {
            metrics.add(metric);
          }
        }
 catch (        IllegalAccessException e) {
          throw new SonarException("can not load metrics from " + CoreMetrics.class.getSimpleName(),e);
        }
      }
    }
  }
  return metrics;
}
