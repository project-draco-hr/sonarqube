{
  StringBuilder hql=newResourceQuery().append(" and qualifier = '").append(Qualifiers.DIRECTORY).append("'");
  Map<String,ResourceModel> disabledResourceByKey=loadDisabledResources(moduleId,hql);
  List<ResourceModel> resources=loadEnabledResources(moduleId,hql);
  for (  ResourceModel resourceModel : resources) {
    String oldEffectiveKey=resourceModel.getKey();
    if (deprecatedDirectoryKeyMapper.containsKey(oldEffectiveKey)) {
      String newEffectiveKey=deprecatedDirectoryKeyMapper.get(oldEffectiveKey);
      updateKey(resourceModel,newEffectiveKey,disabledResourceByKey);
      resourceModel.setDeprecatedKey(oldEffectiveKey);
      logger.info(COMPONENT_CHANGED_TO,oldEffectiveKey,newEffectiveKey);
    }
 else {
      logger.warn(UNABLE_TO_UPDATE_COMPONENT_NO_MATCH_WAS_FOUND,oldEffectiveKey);
    }
  }
}
