{
  Long userId=userId(query.login());
  int pageSize=query.pageSize();
  int pageIndex=query.pageIndex();
  int offset=(pageIndex - 1) * pageSize;
  int limit=pageSize + 1;
  List<GroupMembershipDto> dtos=groupMembershipDao.selectGroups(query,userId,offset,limit);
  boolean hasMoreResults=false;
  if (dtos.size() == limit) {
    hasMoreResults=true;
    dtos.remove(dtos.size() - 1);
  }
  return new GroupMembershipQueryResult(toGroupMembership(dtos),hasMoreResults);
}
