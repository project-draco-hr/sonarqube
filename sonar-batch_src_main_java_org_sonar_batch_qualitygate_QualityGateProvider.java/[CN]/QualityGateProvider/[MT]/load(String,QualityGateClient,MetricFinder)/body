{
  QualityGateDetails definitionFromServer=null;
  try {
    definitionFromServer=fetch(qualityGateSetting,qualityGateClient);
  }
 catch (  HttpException serverError) {
    if (serverError.status() == HttpURLConnection.HTTP_NOT_FOUND) {
      throw MessageException.of("No quality gate found with configured value '" + qualityGateSetting + "'. Please check your configuration.");
    }
 else {
      throw serverError;
    }
  }
  QualityGate configuredGate=new QualityGate(definitionFromServer.name());
  for (  QualityGateCondition condition : definitionFromServer.conditions()) {
    configuredGate.add(new ResolvedCondition(condition,metricFinder.findByKey(condition.metricKey())));
  }
  return configuredGate;
}
