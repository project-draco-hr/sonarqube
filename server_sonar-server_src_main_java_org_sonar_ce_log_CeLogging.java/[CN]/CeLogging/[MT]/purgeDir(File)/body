{
  if (dir.exists()) {
    int maxLogs=settings.getInt(MAX_LOGS_PROPERTY);
    if (maxLogs < 0) {
      throw new IllegalArgumentException(format("Property %s must be positive. Got: %d",MAX_LOGS_PROPERTY,maxLogs));
    }
    List<File> logFiles=newArrayList(FileUtils.listFiles(dir,FileFilterUtils.fileFileFilter(),FileFilterUtils.falseFileFilter()));
    if (logFiles.size() > maxLogs) {
      Collections.sort(logFiles,LastModifiedFileComparator.LASTMODIFIED_COMPARATOR);
      for (      File logFile : from(logFiles).limit(logFiles.size() - maxLogs)) {
        logFile.delete();
      }
    }
  }
}
