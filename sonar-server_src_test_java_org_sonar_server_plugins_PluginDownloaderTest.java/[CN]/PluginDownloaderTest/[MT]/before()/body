{
  updateCenterMatrixFactory=mock(UpdateCenterMatrixFactory.class);
  updateCenter=mock(UpdateCenter.class);
  when(updateCenterMatrixFactory.getUpdateCenter(anyBoolean())).thenReturn(updateCenter);
  httpDownloader=mock(HttpDownloader.class);
  DefaultServerFileSystem defaultServerFileSystem=mock(DefaultServerFileSystem.class);
  downloadDir=testFolder.newFolder("downloads");
  when(defaultServerFileSystem.getDownloadedPluginsDir()).thenReturn(downloadDir);
  pluginDownloader=new PluginDownloader(updateCenterMatrixFactory,httpDownloader,defaultServerFileSystem);
}
