{
  DecoratorContext context=mock(DecoratorContext.class);
  when(context.getMeasure(CoreMetrics.NCLOC)).thenReturn(new Measure(CoreMetrics.NCLOC,300.0));
  when(context.getMeasure(CoreMetrics.COMMENT_LINES)).thenReturn(new Measure(CoreMetrics.COMMENT_LINES,200.0));
  CommentDensityDecorator decorator=new CommentDensityDecorator();
  decorator.decorate(null,context);
  verify(context).saveMeasure(argThat(new IsMeasure(CoreMetrics.COMMENT_LINES_DENSITY,40.0)));
}
