{
  List<FormulaData> childrenData=Lists.newArrayList();
  FormulaData data1=mock(FormulaData.class);
  childrenData.add(data1);
  when(data1.getMeasure(CoreMetrics.COMPLEXITY)).thenReturn(new Measure(CoreMetrics.COMPLEXITY,43.0));
  when(data.getChildren()).thenReturn(childrenData);
  Measure measure=new AverageFormula(CoreMetrics.COMPLEXITY,CoreMetrics.FUNCTIONS).calculate(data,context);
  assertNull(measure);
}
