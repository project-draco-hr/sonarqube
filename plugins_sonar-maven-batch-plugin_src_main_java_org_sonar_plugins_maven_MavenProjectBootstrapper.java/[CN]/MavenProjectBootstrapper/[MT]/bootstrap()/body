{
  List<MavenProject> sortedProjects=session.getSortedProjects();
  MavenProject topLevelProject=null;
  for (  MavenProject project : sortedProjects) {
    if (project.isExecutionRoot()) {
      topLevelProject=project;
      break;
    }
  }
  if (topLevelProject == null) {
    throw new IllegalStateException("Maven session does not declare a top level project");
  }
  return new ProjectReactor(mavenProjectConverter.configure(sortedProjects,topLevelProject));
}
