{
  final Runnable breakOnMissingPing=new Runnable(){
    @Override public void run(){
      long time=System.currentTimeMillis();
      if (time - lastPing > getTimeout()) {
        if (isMonitored) {
          LoggerFactory.getLogger(getClass()).info(String.format("Did not receive any ping during %d seconds. Shutting down.",getTimeout() / 1000));
          terminate();
        }
      }
    }
  }
;
  lastPing=System.currentTimeMillis();
  monitor=Executors.newScheduledThreadPool(1);
  pingTask=monitor.scheduleAtFixedRate(breakOnMissingPing,getCheckDelay(),getCheckDelay(),TimeUnit.MILLISECONDS);
}
