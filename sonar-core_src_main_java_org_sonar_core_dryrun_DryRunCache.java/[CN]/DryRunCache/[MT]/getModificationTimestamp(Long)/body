{
  if (projectId == null) {
    PropertyDto dto=propertiesDao.selectGlobalProperty(SONAR_DRY_RUN_CACHE_LAST_UPDATE_KEY);
    if (dto == null) {
      return 0;
    }
    return Long.valueOf(dto.getValue());
  }
  Long rootId=resourceDao.getRootProjectByComponentId(projectId).getId();
  PropertyDto dto=propertiesDao.selectProjectProperty(rootId,SONAR_DRY_RUN_CACHE_LAST_UPDATE_KEY);
  if (dto == null) {
    return 0;
  }
  return Long.valueOf(dto.getValue());
}
