{
  requireNonNull(directory,DIRECTORY_CAN_NOT_BE_NULL);
  Path path=directory.toPath();
  if (!Files.exists(path)) {
    return;
  }
  if (Files.isSymbolicLink(path)) {
    throw new IOException(format("Directory '%s' is a symbolic link",directory));
  }
  if (Files.isRegularFile(path)) {
    throw new IOException(format("Directory '%s' is a file",directory));
  }
  deleteDirectoryImpl(path);
  if (Files.exists(path)) {
    throw new IOException(format("Unable to delete directory '%s'",directory));
  }
}
