{
  DefaultProfileDefinition definition=DefaultProfileDefinition.create(cp.getName(),cp.getLanguage());
  for (  Check check : cp.getChecks()) {
    RulePriority priority=null;
    if (check.getPriority() != null) {
      priority=RulePriority.fromCheckPriority(check.getPriority());
    }
    Rule rule=ruleFinder.findByKey(check.getRepositoryKey(),check.getTemplateKey());
    if (rule != null) {
      ActiveRule activeRule=definition.activateRule(rule,priority);
      for (      Map.Entry<String,String> entry : check.getProperties().entrySet()) {
        activeRule.setParameter(entry.getKey(),entry.getValue());
      }
    }
  }
  return definition;
}
