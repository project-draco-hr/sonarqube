{
  final Ruby runtime=recv.getRuntime();
  return withConnectionAndRetry(recv,new SQLBlock(){
    public IRubyObject call(    Connection c) throws SQLException {
      String sql="UPDATE " + rubyApi.convertToRubyString(args[2]) + " SET "+ rubyApi.convertToRubyString(args[1])+ " = ? WHERE "+ rubyApi.convertToRubyString(args[3])+ "="+ rubyApi.convertToRubyString(args[4]);
      PreparedStatement ps=null;
      try {
        ps=c.prepareStatement(sql);
        if (args[0].isTrue()) {
          ByteList outp=rubyApi.convertToRubyString(args[5]).getByteList();
          ps.setBinaryStream(1,new ByteArrayInputStream(outp.bytes,outp.begin,outp.realSize),outp.realSize);
        }
 else {
          String ss=rubyApi.convertToRubyString(args[5]).getUnicodeValue();
          ps.setCharacterStream(1,new StringReader(ss),ss.length());
        }
        ps.executeUpdate();
      }
  finally {
        try {
          ps.close();
        }
 catch (        Exception e) {
        }
      }
      return runtime.getNil();
    }
  }
);
}
