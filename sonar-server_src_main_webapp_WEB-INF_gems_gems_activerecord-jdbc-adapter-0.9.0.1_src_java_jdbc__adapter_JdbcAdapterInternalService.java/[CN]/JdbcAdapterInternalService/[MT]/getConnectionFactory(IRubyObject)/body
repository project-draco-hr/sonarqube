{
  IRubyObject connection_factory=rubyApi.getInstanceVariable(recv,"@connection_factory");
  JdbcConnectionFactory factory=null;
  try {
    factory=(JdbcConnectionFactory)JavaEmbedUtils.rubyToJava(recv.getRuntime(),connection_factory,JdbcConnectionFactory.class);
  }
 catch (  Exception e) {
    factory=null;
  }
  if (factory == null) {
    throw recv.getRuntime().newRuntimeError("@connection_factory not set properly");
  }
  return factory;
}
