{
  Connection conn=(Connection)recv.dataGetStruct();
  if (error && conn == null) {
    RubyClass err=recv.getRuntime().getModule("ActiveRecord").getClass("ConnectionNotEstablished");
    throw new RaiseException(recv.getRuntime(),err,"no connection available",false);
  }
  return conn;
}
