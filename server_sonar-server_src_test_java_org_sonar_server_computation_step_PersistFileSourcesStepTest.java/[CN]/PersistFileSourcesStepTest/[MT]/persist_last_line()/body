{
  treeRootHolder.setRoot(ReportComponent.builder(Component.Type.PROJECT,1).setUuid(PROJECT_UUID).setKey(PROJECT_KEY).addChildren(ReportComponent.builder(Component.Type.FILE,FILE_REF).setUuid(FILE_UUID).setKey("PROJECT_KEY:file").build()).build());
  reportReader.putComponent(BatchReport.Component.newBuilder().setRef(1).setType(Constants.ComponentType.PROJECT).addChildRef(FILE_REF).build());
  reportReader.putComponent(BatchReport.Component.newBuilder().setRef(FILE_REF).setType(Constants.ComponentType.FILE).setLines(3).build());
  fileSourceRepository.addLines(FILE_REF,"line 1;","line 2;");
  underTest.execute();
  assertThat(dbTester.countRowsOfTable("file_sources")).isEqualTo(1);
  FileSourceDto fileSourceDto=dbClient.fileSourceDao().selectSourceByFileUuid(session,FILE_UUID);
  DbFileSources.Data data=FileSourceDto.decodeSourceData(fileSourceDto.getBinaryData());
  assertThat(data.getLinesCount()).isEqualTo(3);
  assertThat(data.getLines(2).getLine()).isEqualTo(3);
  assertThat(data.getLines(2).getSource()).isEmpty();
}
