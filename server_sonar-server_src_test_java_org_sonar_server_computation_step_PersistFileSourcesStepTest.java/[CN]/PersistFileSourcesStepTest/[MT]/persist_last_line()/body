{
  treeRootHolder.setRoot(new DumbComponent(Component.Type.PROJECT,1,PROJECT_UUID,PROJECT_KEY,new DumbComponent(Component.Type.FILE,FILE_REF,FILE_UUID,"PROJECT_KEY:file")));
  reportReader.putComponent(BatchReport.Component.newBuilder().setRef(1).setType(Constants.ComponentType.PROJECT).addChildRef(FILE_REF).build());
  reportReader.putComponent(BatchReport.Component.newBuilder().setRef(FILE_REF).setType(Constants.ComponentType.FILE).setLines(3).build());
  reportReader.putFileSourceLines(FILE_REF,"line1","line2");
  sut.execute();
  assertThat(dbTester.countRowsOfTable("file_sources")).isEqualTo(1);
  FileSourceDto fileSourceDto=dbClient.fileSourceDao().selectSource(FILE_UUID);
  FileSourceDb.Data data=FileSourceDto.decodeSourceData(fileSourceDto.getBinaryData());
  assertThat(data.getLinesCount()).isEqualTo(3);
  assertThat(data.getLines(2).getLine()).isEqualTo(3);
  assertThat(data.getLines(2).getSource()).isEmpty();
}
