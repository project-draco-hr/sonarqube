{
  dbComponentsRefCache.addComponent(1,new DbComponentsRefCache.DbComponent(1L,PROJECT_KEY,PROJECT_UUID));
  dbComponentsRefCache.addComponent(2,new DbComponentsRefCache.DbComponent(2L,"MODULE_KEY","MODULE"));
  dbComponentsRefCache.addComponent(FILE_REF,new DbComponentsRefCache.DbComponent(3L,"MODULE_KEY:src/Foo.java",FILE_UUID));
  reportReader.setMetadata(BatchReport.Metadata.newBuilder().setRootComponentRef(1).setProjectKey(PROJECT_KEY).build());
  reportReader.putComponent(BatchReport.Component.newBuilder().setRef(1).setType(Constants.ComponentType.PROJECT).addChildRef(2).build());
  reportReader.putComponent(BatchReport.Component.newBuilder().setRef(2).setType(Constants.ComponentType.MODULE).addChildRef(FILE_REF).build());
  reportReader.putComponent(BatchReport.Component.newBuilder().setRef(FILE_REF).setType(Constants.ComponentType.FILE).setPath("src/Foo.java").setLines(numberOfLines).build());
  BatchReportWriter writer=new BatchReportWriter(reportDir);
  List<String> lines=newArrayList();
  for (int i=1; i <= numberOfLines; i++) {
    lines.add("line" + i);
  }
  File file=writer.getSourceFile(FILE_REF);
  FileUtils.writeLines(file,lines);
  reportReader.putFileSoure(FILE_REF,file);
  return writer;
}
