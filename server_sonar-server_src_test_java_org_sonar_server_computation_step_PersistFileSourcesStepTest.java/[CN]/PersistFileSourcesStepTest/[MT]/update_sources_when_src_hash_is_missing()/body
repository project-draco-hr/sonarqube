{
  long past=150000L;
  dbClient.fileSourceDao().insert(session,new FileSourceDto().setProjectUuid(PROJECT_UUID).setFileUuid(FILE_UUID).setLineHashes("137f72c3708c6bd0de00a0e5a69c699b").setDataHash("29f25900140c94db38035128cb6de6a2").setBinaryData(FileSourceDto.encodeData(FileSourceDb.Data.newBuilder().addLines(FileSourceDb.Line.newBuilder().setLine(1).setSource("line").build()).build())).setCreatedAt(past).setUpdatedAt(past));
  session.commit();
  initBasicReport(1);
  sut.execute(new ComputationContext(new BatchReportReader(reportDir),ComponentTesting.newProjectDto(PROJECT_UUID)));
  assertThat(dbTester.countRowsOfTable("file_sources")).isEqualTo(1);
  FileSourceDto fileSourceDto=dbClient.fileSourceDao().select(FILE_UUID);
  assertThat(fileSourceDto.getCreatedAt()).isEqualTo(past);
  assertThat(fileSourceDto.getUpdatedAt()).isEqualTo(past);
  assertThat(fileSourceDto.getSrcHash()).isEqualTo("137f72c3708c6bd0de00a0e5a69c699b");
}
