{
  initBasicReport(2);
  sut.execute(new ComputationContext(new BatchReportReader(reportDir),ComponentTesting.newProjectDto(PROJECT_UUID)));
  assertThat(dbTester.countRowsOfTable("file_sources")).isEqualTo(1);
  FileSourceDto fileSourceDto=dbClient.fileSourceDao().selectSource(FILE_UUID);
  assertThat(fileSourceDto.getProjectUuid()).isEqualTo(PROJECT_UUID);
  assertThat(fileSourceDto.getFileUuid()).isEqualTo(FILE_UUID);
  assertThat(fileSourceDto.getBinaryData()).isNotEmpty();
  assertThat(fileSourceDto.getDataHash()).isNotEmpty();
  assertThat(fileSourceDto.getLineHashes()).isNotEmpty();
  assertThat(fileSourceDto.getCreatedAt()).isEqualTo(now);
  assertThat(fileSourceDto.getUpdatedAt()).isEqualTo(now);
  FileSourceDb.Data data=FileSourceDto.decodeSourceData(fileSourceDto.getBinaryData());
  assertThat(data.getLinesCount()).isEqualTo(2);
  assertThat(data.getLines(0).getLine()).isEqualTo(1);
  assertThat(data.getLines(0).getSource()).isEqualTo("line1");
  assertThat(data.getLines(1).getLine()).isEqualTo(2);
  assertThat(data.getLines(1).getSource()).isEqualTo("line2");
}
