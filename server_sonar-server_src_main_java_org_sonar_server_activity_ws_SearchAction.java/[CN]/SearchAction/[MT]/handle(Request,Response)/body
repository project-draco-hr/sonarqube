{
  ActivityQuery query=logService.newActivityQuery();
  SearchOptions searchOptions=SearchOptions.create(request);
  QueryContext queryContext=mapping.newQueryOptions(searchOptions);
  Result<Activity> results=logService.search(query,queryContext);
  JsonWriter json=response.newJsonWriter().beginObject();
  searchOptions.writeStatistics(json,results);
  writeLogs(results,json,queryContext);
  json.endObject().close();
}
