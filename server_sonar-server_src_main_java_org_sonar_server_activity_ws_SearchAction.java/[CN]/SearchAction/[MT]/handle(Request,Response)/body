{
  ActivityQuery query=logService.newActivityQuery();
  SearchOptions searchOptions=SearchOptions.create(request);
  QueryOptions queryOptions=mapping.newQueryOptions(searchOptions);
  Result<Activity> results=logService.search(query,queryOptions);
  JsonWriter json=response.newJsonWriter().beginObject();
  searchOptions.writeStatistics(json,results);
  writeLogs(results,json,searchOptions);
  json.endObject().close();
}
