{
  TreeWsRequest treeWsRequest=new TreeWsRequest().setBaseComponentId(request.param(PARAM_BASE_COMPONENT_ID)).setBaseComponentKey(request.param(PARAM_BASE_COMPONENT_KEY)).setStrategy(request.param(PARAM_STRATEGY)).setQuery(request.param(Param.TEXT_QUERY)).setQualifiers(request.paramAsStrings(PARAM_QUALIFIERS)).setSort(request.mandatoryParamAsStrings(Param.SORT)).setAsc(request.mandatoryParamAsBoolean(Param.ASCENDING)).setPage(request.mandatoryParamAsInt(Param.PAGE)).setPageSize(request.mandatoryParamAsInt(Param.PAGE_SIZE));
  checkRequest(treeWsRequest.getPageSize() <= MAX_SIZE,"The '%s' parameter must be less thant %d",Param.PAGE_SIZE,MAX_SIZE);
  return treeWsRequest;
}
