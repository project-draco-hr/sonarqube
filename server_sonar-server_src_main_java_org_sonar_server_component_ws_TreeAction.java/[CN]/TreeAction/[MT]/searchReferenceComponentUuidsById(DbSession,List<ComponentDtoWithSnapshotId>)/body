{
  List<Long> referenceComponentIds=from(components).transform(ComponentDtoWithSnapshotIdToCopyResourceIdFunction.INSTANCE).filter(Predicates.<Long>notNull()).toList();
  if (referenceComponentIds.isEmpty()) {
    return emptyMap();
  }
  List<ComponentDto> referenceComponents=dbClient.componentDao().selectByIds(dbSession,referenceComponentIds);
  Map<Long,ComponentDto> referenceComponentUuidsById=new HashMap<>();
  for (  ComponentDto referenceComponent : referenceComponents) {
    referenceComponentUuidsById.put(referenceComponent.getId(),referenceComponent);
  }
  return referenceComponentUuidsById;
}
