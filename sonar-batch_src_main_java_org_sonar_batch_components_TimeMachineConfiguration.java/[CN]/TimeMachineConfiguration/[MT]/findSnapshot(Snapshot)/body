{
  String hql="from " + Snapshot.class.getSimpleName() + " where resourceId=:resourceId and (rootId=:rootSnapshotId or id=:rootSnapshotId) and last=:last";
  List<Snapshot> snapshots=session.createQuery(hql).setParameter("resourceId",project.getId()).setParameter("rootSnapshotId",projectSnapshot.getId()).setParameter("last",Boolean.TRUE).setMaxResults(1).getResultList();
  return snapshots.isEmpty() ? null : snapshots.get(0);
}
