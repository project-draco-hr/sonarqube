{
  if (!Qualifiers.SUBVIEW.equals(qualifier)) {
    String createdKey=componentService.create(NewComponent.create(key,name).setQualifier(qualifier).setBranch(branch));
    ComponentDto component=(ComponentDto)resourceDao.findByKey(createdKey);
    if (component == null) {
      throw new BadRequestException(String.format("Component not created: %s",createdKey));
    }
    permissionService.applyDefaultPermissionTemplate(createdKey);
    return component.getId();
  }
  return null;
}
