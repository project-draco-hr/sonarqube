{
  if (!Qualifiers.SUBVIEW.equals(qualifier)) {
    ComponentDto componentDto=componentService.create(NewComponent.create(key,name).setQualifier(qualifier).setBranch(branch));
    if (componentDto == null) {
      throw new BadRequestException(String.format("Component not created: %s",key));
    }
    ComponentDto component=(ComponentDto)resourceDao.selectByKey(componentDto.getKey());
    if (component == null) {
      throw new BadRequestException(String.format("Component not created: %s",key));
    }
    permissionService.applyDefaultPermissionTemplate(component.getKey());
    return component.getId();
  }
  return null;
}
