{
  Iterable<Measure> measures=measureCache.byMetric(inputFileKey,metricKey);
  if (measures.iterator().hasNext()) {
    Measure measure=measures.iterator().next();
    Map<Integer,String> lineMeasures=KeyValueFormat.parseIntString((String)measure.value());
    for (    Map.Entry<Integer,String> lineMeasure : lineMeasures.entrySet()) {
      int lineIdx=lineMeasure.getKey();
      if (lineIdx <= lineCount) {
        String value=lineMeasure.getValue();
        if (StringUtils.isNotEmpty(value)) {
          Coverage.Builder coverageBuilder=coveragePerLine.get(lineIdx);
          if (coverageBuilder == null) {
            coverageBuilder=Coverage.newBuilder();
            coverageBuilder.setLine(lineIdx);
            coveragePerLine.put(lineIdx,coverageBuilder);
          }
          op.apply(value,coverageBuilder);
        }
      }
    }
  }
}
