{
  RuleDto rule=new RuleDto();
  rule.setRepositoryKey("repo");
  rule.setRuleKey("key");
  int id=3;
  rule.setId((long)id);
  when(ruleDao.selectById((long)id)).thenReturn(rule);
  registry.saveOrUpdate(id);
  assertThat(registry.findIds(ImmutableMap.of("repositoryKey","repo"))).hasSize(1);
  rule.setName("polop");
  registry.saveOrUpdate(id);
  assertThat(registry.findIds(ImmutableMap.of("repositoryKey","repo"))).hasSize(1);
}
