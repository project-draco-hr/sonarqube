{
  MeasureFilter filter=new MeasureFilter();
  filter.setBaseResourceKey(properties.get("base"));
  filter.setResourceScopes(toArray(properties.get("scopes")));
  filter.setResourceQualifiers(toArray(properties.get("qualifiers")));
  filter.setResourceLanguages(toArray(properties.get("languages")));
  if (properties.containsKey("onBaseChildren")) {
    filter.setOnBaseResourceChildren(Boolean.valueOf(properties.get("onBaseChildren")));
  }
  filter.setResourceName(properties.get("nameRegexp"));
  filter.setResourceKeyRegexp(properties.get("keyRegexp"));
  if (properties.containsKey("fromDate")) {
    filter.setFromDate(toDate(properties.get("fromDate")));
  }
 else   if (properties.containsKey("afterDays")) {
    filter.setFromDate(toDays(properties.get("afterDays")));
  }
  if (properties.containsKey("toDate")) {
    filter.setToDate(toDate(properties.get("toDate")));
  }
 else   if (properties.containsKey("beforeDays")) {
    filter.setToDate(toDays(properties.get("beforeDays")));
  }
  if (properties.containsKey("favourites")) {
    filter.setUserFavourites(Boolean.valueOf(properties.get("favourites")));
  }
  return filter;
}
