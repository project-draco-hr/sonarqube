{
  Project project=new Project("key");
  ProjectFileSystem fs=mock(ProjectFileSystem.class);
  when(fs.getSonarWorkingDirectory()).thenReturn(new File("/tmp"));
  project.setFileSystem(fs);
  Settings settings=new Settings();
  PmdConfiguration configuration=new PmdConfiguration(null,null,project,settings);
  assertThat(configuration.getTargetXMLReport(),nullValue());
  settings.setProperty(PmdConfiguration.PROPERTY_GENERATE_XML,true);
  assertThat(configuration.getTargetXMLReport(),equalTo(new File("/tmp/pmd-result.xml")));
}
