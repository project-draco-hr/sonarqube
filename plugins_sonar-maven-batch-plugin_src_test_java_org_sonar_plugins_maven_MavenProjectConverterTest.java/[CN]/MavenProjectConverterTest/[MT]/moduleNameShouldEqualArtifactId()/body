{
  File rootDir=TestUtils.getResource("/org/sonar/plugins/maven/MavenProjectConverterTest/moduleNameShouldEqualArtifactId/");
  MavenProject parent=loadPom("/org/sonar/plugins/maven/MavenProjectConverterTest/moduleNameShouldEqualArtifactId/pom.xml",true);
  MavenProject module1=loadPom("/org/sonar/plugins/maven/MavenProjectConverterTest/moduleNameShouldEqualArtifactId/module1/pom.xml",false);
  MavenProject module2=loadPom("/org/sonar/plugins/maven/MavenProjectConverterTest/moduleNameShouldEqualArtifactId/module2/pom.xml",false);
  ProjectDefinition rootDef=mavenProjectConverter.configure(Arrays.asList(parent,module1,module2),parent);
  assertThat(rootDef.getSubProjects().size(),Is.is(2));
  assertThat(rootDef.getKey(),Is.is("org.test:parent"));
  assertNull(rootDef.getParent());
  assertThat(rootDef.getBaseDir(),is(rootDir));
  ProjectDefinition module1Def=rootDef.getSubProjects().get(0);
  assertThat(module1Def.getKey(),Is.is("org.test:module1"));
  assertThat(module1Def.getParent(),Is.is(rootDef));
  assertThat(module1Def.getBaseDir(),Is.is(new File(rootDir,"module1")));
  assertThat(module1Def.getSubProjects().size(),Is.is(0));
}
