{
  setupData("grantDefaultRolesProject");
  settings.setProperty("sonar.permission.template.default","default_20130101_010203");
  settings.setProperty("sonar.permission.template.TRK.default","default_for_trk_20130101_010203");
  assertThat(permissionFacade.selectGroupPermissions(session,"sonar-administrators",PROJECT_ID)).isEmpty();
  assertThat(permissionFacade.selectGroupPermissions(session,"sonar-users",PROJECT_ID)).isEmpty();
  assertThat(permissionFacade.selectGroupPermissions(session,"Anyone",PROJECT_ID)).isEmpty();
  assertThat(permissionFacade.selectUserPermissions(session,"marius",PROJECT_ID)).isEmpty();
  permissions.grantDefaultRoles(session,project);
  assertThat(permissionFacade.selectGroupPermissions(session,"sonar-administrators",PROJECT_ID)).containsOnly("admin","user","codeviewer");
  assertThat(permissionFacade.selectGroupPermissions(session,"sonar-users",PROJECT_ID)).containsOnly("admin");
  assertThat(permissionFacade.selectGroupPermissions(session,"Anyone",PROJECT_ID)).containsOnly("codeviewer");
  assertThat(permissionFacade.selectUserPermissions(session,"marius",PROJECT_ID)).containsOnly("codeviewer");
}
