{
  Metrics metrics=mock(Metrics.class);
  when(metrics.getMetrics()).thenReturn(newArrayList(new Metric.Builder("key","new short name",Metric.ValueType.FLOAT).setDescription("new description").setDirection(-1).setQualitative(true).setDomain("new domain").setUserManaged(true).create()));
  MeasuresDao measuresDao=new MeasuresDao(getSession());
  RegisterMetrics loader=new RegisterMetrics(getSession(),measuresDao,new Metrics[]{metrics});
  List<Metric> result=loader.getMetricsRepositories();
  assertThat(result).hasSize(1);
}
