{
  Date since=DateUtils.parseDate("2014-05-19");
  Date to=DateUtils.parseDate("2014-06-19");
  rubyActivityService.search(ImmutableMap.<String,Object>of("profileKeys","PROFILE_KEY","since",since,"to",to));
  verify(service).findActivities(activityArgumentCaptor.capture(),queryOptionsArgumentCaptor.capture());
  assertThat(queryOptionsArgumentCaptor.getValue().getLimit()).isEqualTo(QueryOptions.MAX_LIMIT);
  assertThat(activityArgumentCaptor.getValue().getQprofileKeys()).containsOnly("PROFILE_KEY");
  assertThat(activityArgumentCaptor.getValue().getTypes()).containsOnly(Activity.Type.QPROFILE);
  assertThat(activityArgumentCaptor.getValue().getSince()).isEqualTo(since);
  assertThat(activityArgumentCaptor.getValue().getTo()).isEqualTo(to);
}
