{
  if (issue.componentId() != null) {
    return issue.componentId();
  }
  ComponentDto componentDto=dbClient.componentDao().getNullableByKey(session,issue.componentKey());
  if (componentDto == null) {
    throw new IllegalStateException("Unknown component: " + issue.componentKey());
  }
  return componentDto.getId();
}
