{
  String textQuery=wsRequest.param(TEXT_QUERY);
  String permission=wsRequest.param(PARAM_PERMISSION);
  PermissionQuery.Builder query=PermissionQuery.builder().setTemplate(template.getUuid()).setPermission(permission != null ? validateProjectPermission(permission) : null).setPageIndex(wsRequest.mandatoryParamAsInt(PAGE)).setPageSize(wsRequest.mandatoryParamAsInt(PAGE_SIZE)).setSearchQuery(textQuery);
  if (textQuery == null) {
    query.withAtLeastOnePermission();
  }
  return query.build();
}
