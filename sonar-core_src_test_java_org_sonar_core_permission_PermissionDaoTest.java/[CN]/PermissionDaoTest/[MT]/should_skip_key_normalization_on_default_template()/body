{
  PermissionTemplateMapper mapper=mock(PermissionTemplateMapper.class);
  SqlSession session=mock(SqlSession.class);
  when(session.getMapper(PermissionTemplateMapper.class)).thenReturn(mapper);
  MyBatis myBatis=mock(MyBatis.class);
  when(myBatis.openSession()).thenReturn(session);
  permissionDao=new PermissionDao(myBatis,dateProvider);
  PermissionTemplateDto permissionTemplate=permissionDao.createPermissionTemplate(PermissionTemplateDto.DEFAULT.getName(),null);
  verify(mapper).insert(permissionTemplate);
  verify(session).commit();
  assertThat(permissionTemplate.getKee()).isEqualTo(PermissionTemplateDto.DEFAULT.getKee());
}
