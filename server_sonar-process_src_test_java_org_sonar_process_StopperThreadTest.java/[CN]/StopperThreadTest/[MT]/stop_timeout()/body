{
  ProcessCommands commands=mock(ProcessCommands.class);
  Monitored monitored=mock(Monitored.class);
  doAnswer(new Answer(){
    @Override public Object answer(    InvocationOnMock invocationOnMock) throws Throwable {
      Thread.sleep(10000L);
      return null;
    }
  }
).when(monitored).stop();
  StopperThread stopper=new StopperThread(monitored,commands,100L);
  stopper.start();
  stopper.join();
  verify(monitored).stop();
}
