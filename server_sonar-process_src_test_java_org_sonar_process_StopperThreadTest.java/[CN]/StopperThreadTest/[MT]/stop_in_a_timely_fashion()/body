{
  File file=temp.newFile();
  SharedStatus sharedStatus=new SharedStatus(file);
  assertThat(file).exists();
  Monitored monitored=mock(Monitored.class);
  StopperThread stopper=new StopperThread(monitored,sharedStatus,5000L);
  stopper.start();
  stopper.join();
  verify(monitored).stop();
  assertThat(file).doesNotExist();
}
