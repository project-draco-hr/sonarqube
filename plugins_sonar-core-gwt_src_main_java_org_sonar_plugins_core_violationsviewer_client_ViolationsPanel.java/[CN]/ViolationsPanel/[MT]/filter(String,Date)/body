{
  filteredViolationsByLine.clear();
  for (  Violation violation : violations) {
    if (filter == null || filter.equals("") || violation.getRuleKey().equals(filter) || violation.getSeverity().equals(filter) || violation.isCreatedAfter(fromDate)) {
      Integer line=0;
      if (violation.getLine() != null) {
        line=violation.getLine();
      }
      List<Violation> lineViolations=filteredViolationsByLine.get(line);
      if (lineViolations == null) {
        lineViolations=new ArrayList<Violation>();
        filteredViolationsByLine.put(line,lineViolations);
      }
      lineViolations.add(violation);
    }
  }
}
