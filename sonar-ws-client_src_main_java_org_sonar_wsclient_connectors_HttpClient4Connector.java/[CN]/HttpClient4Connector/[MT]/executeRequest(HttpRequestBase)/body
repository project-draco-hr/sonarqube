{
  String json=null;
  DefaultHttpClient client=createClient();
  try {
    BasicHttpContext context=createLocalContext(client);
    HttpResponse response=client.execute(request,context);
    HttpEntity entity=response.getEntity();
    if (entity != null) {
      if (response.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
        json=EntityUtils.toString(entity);
      }
 else       if (response.getStatusLine().getStatusCode() != HttpStatus.SC_NOT_FOUND) {
        throw new ConnectionException("HTTP error: " + response.getStatusLine().getStatusCode() + ", msg: "+ response.getStatusLine().getReasonPhrase()+ ", query: "+ request.toString());
      }
    }
  }
 catch (  IOException e) {
    throw new ConnectionException("Query: " + request.getURI(),e);
  }
 finally {
    client.getConnectionManager().shutdown();
  }
  return json;
}
