{
  HttpPut put=new HttpPut(server.getHost() + query.getUrl());
  if (query.getBody() != null) {
    try {
      put.setEntity(new StringEntity(query.getBody(),"UTF-8"));
    }
 catch (    UnsupportedEncodingException e) {
      throw new ConnectionException("Encoding is not supported",e);
    }
  }
  setJsonHeader(put);
  return put;
}
