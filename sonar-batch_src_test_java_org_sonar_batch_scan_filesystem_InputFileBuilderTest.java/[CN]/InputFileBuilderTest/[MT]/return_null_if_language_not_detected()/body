{
  File basedir=temp.newFolder();
  File srcFile=new File(basedir,"src/main/java/foo/Bar.java");
  FileUtils.touch(srcFile);
  FileUtils.write(srcFile,"single line");
  when(fs.baseDir()).thenReturn(basedir);
  when(fs.encoding()).thenReturn(Charsets.UTF_8);
  when(langDetection.language(any(InputFile.class))).thenReturn(null);
  InputFileBuilder builder=new InputFileBuilder("struts",new PathResolver(),langDetection,statusDetection,fs,analysisMode,new Settings(),new FileMetadata(analysisMode));
  DeprecatedDefaultInputFile inputFile=builder.create(srcFile);
  InputFileMetadata metadata=builder.completeAndComputeMetadata(inputFile,InputFile.Type.MAIN);
  assertThat(metadata).isNull();
}
