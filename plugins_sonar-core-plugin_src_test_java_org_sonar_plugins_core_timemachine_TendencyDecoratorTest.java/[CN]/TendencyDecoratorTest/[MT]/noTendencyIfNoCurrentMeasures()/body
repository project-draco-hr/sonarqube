{
  TendencyAnalyser analyser=mock(TendencyAnalyser.class);
  TimeMachineQuery query=new TimeMachineQuery(null).setMetrics(CoreMetrics.LINES,CoreMetrics.COVERAGE);
  TimeMachine timeMachine=mock(TimeMachine.class);
  when(timeMachine.getMeasuresFields(query)).thenReturn(Arrays.<Object[]>asList(new Object[]{date("2009-12-01"),CoreMetrics.LINES,1200.0},new Object[]{date("2009-12-02"),CoreMetrics.LINES,1300.0}));
  DecoratorContext context=mock(DecoratorContext.class);
  TendencyDecorator decorator=new TendencyDecorator(timeMachine,query,analyser,new PropertiesConfiguration());
  decorator.decorate(new JavaPackage("org.foo"),context);
  verify(analyser,never()).analyseLevel(anyList());
}
