{
  Issue issue1=new DefaultIssue().setKey("A").setCreationDate(tenDaysAgo).setDebt(fiveDays).setChanges(newArrayList(new FieldDiffs().setDiff("technicalDebt",twoDays,fiveDays).setCreationDate(rightNow),new FieldDiffs().setDiff("technicalDebt",oneDay,twoDays).setCreationDate(fourDaysAgo),new FieldDiffs().setDiff("technicalDebt",null,oneDay).setCreationDate(nineDaysAgo)));
  Issue issue2=new DefaultIssue().setKey("B").setCreationDate(tenDaysAgo).setDebt(twoDays).setChanges(newArrayList(new FieldDiffs().setDiff("technicalDebt",oneDay,twoDays).setCreationDate(rightNow),new FieldDiffs().setDiff("technicalDebt",null,oneDay).setCreationDate(nineDaysAgo)));
  when(issuable.issues()).thenReturn(newArrayList(issue1,issue2));
  decorator.decorate(resource,context);
  verify(context).saveMeasure(argThat(new IsVariationMeasure(CoreMetrics.NEW_TECHNICAL_DEBT,5.0,7.0)));
}
