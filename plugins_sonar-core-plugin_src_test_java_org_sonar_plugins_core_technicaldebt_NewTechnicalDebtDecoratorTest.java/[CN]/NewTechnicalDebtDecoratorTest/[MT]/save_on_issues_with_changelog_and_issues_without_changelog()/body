{
  Issue issue1=new DefaultIssue().setKey("A").setCreationDate(tenDaysAgo).setDebt(Duration.create(FIVE_DAYS_IN_MINUTES)).setChanges(newArrayList(new FieldDiffs().setDiff("technicalDebt",TWO_DAYS_IN_MINUTES,FIVE_DAYS_IN_MINUTES).setCreationDate(rightNow),new FieldDiffs().setDiff("technicalDebt",ONE_DAY_IN_MINUTES,TWO_DAYS_IN_MINUTES).setCreationDate(fourDaysAgo),new FieldDiffs().setDiff("technicalDebt",null,ONE_DAY_IN_MINUTES).setCreationDate(nineDaysAgo)));
  Issue issue2=new DefaultIssue().setKey("B").setCreationDate(tenDaysAgo).setDebt(Duration.create(TWO_DAYS_IN_MINUTES)).setChanges(newArrayList(new FieldDiffs().setDiff("technicalDebt",ONE_DAY_IN_MINUTES,TWO_DAYS_IN_MINUTES).setCreationDate(rightNow),new FieldDiffs().setDiff("technicalDebt",null,ONE_DAY_IN_MINUTES).setCreationDate(nineDaysAgo)));
  Issue issue3=new DefaultIssue().setKey("C").setCreationDate(nineDaysAgo).setDebt(Duration.create(FIVE_DAYS_IN_MINUTES));
  Issue issue4=new DefaultIssue().setKey("D").setCreationDate(fiveDaysAgo).setDebt(Duration.create(TWO_DAYS_IN_MINUTES));
  when(issuable.issues()).thenReturn(newArrayList(issue1,issue2,issue3,issue4));
  decorator.decorate(resource,context);
  verify(context).saveMeasure(argThat(new IsVariationMeasure(CoreMetrics.NEW_TECHNICAL_DEBT,5.0 * ONE_DAY_IN_MINUTES,14.0 * ONE_DAY_IN_MINUTES)));
}
