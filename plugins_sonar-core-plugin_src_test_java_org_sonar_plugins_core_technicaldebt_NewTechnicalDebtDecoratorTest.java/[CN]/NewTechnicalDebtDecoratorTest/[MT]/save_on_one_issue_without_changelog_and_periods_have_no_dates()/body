{
  when(timeMachineConfiguration.periods()).thenReturn(newArrayList(new Period(1,null,null),new Period(2,null,null)));
  when(issuable.issues()).thenReturn(newArrayList((Issue)new DefaultIssue().setKey("A").setCreationDate(nineDaysAgo).setTechnicalDebt(fiveDaysDebt)));
  Multimap<Issue,FieldDiffs> changelogList=ArrayListMultimap.create();
  when(changelogFinder.findByIssues(anyCollection())).thenReturn(changelogList);
  decorator.decorate(resource,context);
  verify(context).saveMeasure(argThat(new IsVariationMeasure(CoreMetrics.NEW_TECHNICAL_DEBT,5.0,5.0)));
}
