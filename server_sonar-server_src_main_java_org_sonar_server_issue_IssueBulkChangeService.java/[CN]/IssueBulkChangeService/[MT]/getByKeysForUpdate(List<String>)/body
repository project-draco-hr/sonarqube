{
  List<Issue> authorizedIndexIssues=issueService.search(IssueQuery.builder().issueKeys(issueKeys).build(),new QueryContext().setMaxLimit()).getHits();
  List<String> authorizedIssueKeys=newArrayList(Iterables.transform(authorizedIndexIssues,new Function<Issue,String>(){
    @Override public String apply(    @Nullable Issue input){
      return input != null ? input.key() : null;
    }
  }
));
  DbSession session=dbClient.openSession(false);
  try {
    List<IssueDto> issueDtos=dbClient.issueDao().getByKeys(session,authorizedIssueKeys);
    return newArrayList(Iterables.transform(issueDtos,new Function<IssueDto,Issue>(){
      @Override public Issue apply(      @Nullable IssueDto input){
        return input != null ? input.toDefaultIssue() : null;
      }
    }
));
  }
  finally {
    session.close();
  }
}
