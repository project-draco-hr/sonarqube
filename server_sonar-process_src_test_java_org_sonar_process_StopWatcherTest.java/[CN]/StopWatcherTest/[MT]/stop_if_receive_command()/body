{
  ProcessCommands commands=mock(ProcessCommands.class);
  when(commands.askedForStop()).thenReturn(false).thenReturn(true);
  Stoppable stoppable=mock(Stoppable.class);
  StopWatcher watcher=new StopWatcher(commands,stoppable,10L);
  watcher.start();
  watcher.join();
  verify(stoppable).stopAsync();
}
