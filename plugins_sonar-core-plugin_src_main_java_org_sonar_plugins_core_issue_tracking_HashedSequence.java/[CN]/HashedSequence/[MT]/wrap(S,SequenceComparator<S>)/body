{
  int size=base.length();
  int[] hashes=new int[size];
  Multimap<Integer,Integer> linesByHash=LinkedHashMultimap.create();
  for (int i=0; i < size; i++) {
    hashes[i]=cmp.hash(base,i);
    linesByHash.put(hashes[i],i + 1);
  }
  return new HashedSequence<S>(base,hashes,linesByHash);
}
