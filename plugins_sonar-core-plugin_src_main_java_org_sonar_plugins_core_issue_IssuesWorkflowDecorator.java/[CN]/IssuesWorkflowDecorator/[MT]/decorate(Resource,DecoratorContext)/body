{
  if (isComponentSupported(resource)) {
    Collection<Issue> newIssues=moduleIssues.issues(resource.getEffectiveKey());
    Collection<IssueDto> openIssues=initialOpenIssuesStack.selectAndRemove(resource.getId());
    Collection<DefaultIssue> newDefaultIssues=toDefaultIssues(newIssues);
    issueTracking.track(resource,openIssues,newDefaultIssues);
    updateIssues(newDefaultIssues);
    Set<String> issueKeys=Sets.newHashSet(Collections2.transform(newIssues,new IssueToKeyfunction()));
    for (    IssueDto openIssue : openIssues) {
      addManualIssuesAndCloseResolvedOnes(openIssue,resource);
      closeResolvedStandardIssues(openIssue,issueKeys,resource);
      keepFalsePositiveIssues(openIssue,resource);
      reopenUnresolvedIssues(openIssue,resource);
    }
    if (ResourceUtils.isRootProject(resource)) {
      closeIssuesOnDeletedResources(initialOpenIssuesStack.getAllIssues(),resource);
    }
  }
}
