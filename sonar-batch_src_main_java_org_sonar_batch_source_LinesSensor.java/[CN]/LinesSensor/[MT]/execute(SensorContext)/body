{
  FileSystem fs=context.fileSystem();
  for (  InputFile f : fs.inputFiles(fs.predicates().hasType(Type.MAIN))) {
    ((DefaultMeasure<Integer>)context.<Integer>newMeasure().onFile(f).forMetric(CoreMetrics.LINES).withValue(f.lines())).setFromCore().save();
    if (f.language() == null) {
      InputFileMetadata metadata=inputPathCache.getFileMetadata((DefaultInputFile)f);
      ((DefaultMeasure<Integer>)context.<Integer>newMeasure().onFile(f).forMetric(CoreMetrics.NCLOC).withValue(metadata.nonBlankLines())).save();
      ((DefaultMeasure<Integer>)context.<Integer>newMeasure().onFile(f).forMetric(CoreMetrics.LINES_TO_COVER).withValue(0)).save();
    }
  }
}
