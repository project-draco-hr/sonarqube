{
  ActiveRule activeRule=qProfile.getActiveRule(issue.ruleKey().repository(),issue.ruleKey().rule());
  if (activeRule == null || activeRule.getRule() == null) {
    return;
  }
  String key=UUID.randomUUID().toString();
  Preconditions.checkState(!Strings.isNullOrEmpty(key),"Fail to generate issue key");
  issue.setKey(key);
  issue.setCreatedAt(project.getAnalysisDate());
  issue.setResolution(Issue.RESOLUTION_OPEN);
  issue.setStatus(Issue.STATUS_OPEN);
  if (issue.severity() == null) {
    issue.setSeverity(activeRule.getSeverity().name());
  }
  cache.addOrUpdate(issue);
}
