{
  Violation newViolation=newViolation("new message",null,50,"checksum1");
  RuleFailureModel referenceViolation=newReferenceViolation("old message",null,50,"checksum1");
  Map<Violation,RuleFailureModel> mapping=decorator.mapViolations(Lists.newArrayList(newViolation),Lists.newArrayList(referenceViolation));
  assertThat(mapping.get(newViolation),equalTo(referenceViolation));
  assertThat(newViolation.isNew(),is(false));
}
