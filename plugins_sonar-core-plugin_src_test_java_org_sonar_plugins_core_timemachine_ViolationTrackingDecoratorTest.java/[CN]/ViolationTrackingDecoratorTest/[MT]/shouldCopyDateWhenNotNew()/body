{
  Violation newViolation=newViolation("message",1,50,"checksum");
  RuleFailureModel referenceViolation=newReferenceViolation("",1,50,"checksum");
  Date referenceDate=DateUtils.parseDate("2009-05-18");
  referenceViolation.setCreatedAt(referenceDate);
  assertThat(newViolation.getCreatedAt(),nullValue());
  Map<Violation,RuleFailureModel> mapping=decorator.mapViolations(Lists.newArrayList(newViolation),Lists.<RuleFailureModel>newArrayList(referenceViolation));
  assertThat(mapping.size(),is(1));
  assertThat(newViolation.getCreatedAt(),is(referenceDate));
  assertThat(newViolation.isNew(),is(false));
}
