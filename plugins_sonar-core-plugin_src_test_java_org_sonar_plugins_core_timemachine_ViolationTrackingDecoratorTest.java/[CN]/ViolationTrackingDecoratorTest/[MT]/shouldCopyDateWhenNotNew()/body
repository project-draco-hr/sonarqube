{
  Violation newViolation=newViolation("message",1,50,"checksum");
  RuleFailureModel referenceViolation=newReferenceViolation("",1,50,"checksum");
  Date referenceDate=DateUtils.parseDate("2009-05-18");
  referenceViolation.setCreatedAt(referenceDate);
  assertThat(newViolation.getCreatedAt()).isNull();
  Map<Violation,RuleFailureModel> mapping=decorator.mapViolations(Lists.newArrayList(newViolation),Lists.<RuleFailureModel>newArrayList(referenceViolation));
  assertThat(mapping.size()).isEqualTo(1);
  assertThat(newViolation.getCreatedAt()).isEqualTo(referenceDate);
  assertThat(newViolation.isNew()).isFalse();
}
