{
  setupData("fixture");
  final List<DependencyDto> dependencies=Lists.newArrayList();
  SqlSession session=getMyBatis().openSession();
  try {
    session.getMapper(DependencyMapper.class).selectAll(new ResultHandler(){
      public void handleResult(      ResultContext context){
        dependencies.add((DependencyDto)context.getResultObject());
      }
    }
);
  }
  finally {
    MyBatis.closeQuietly(session);
  }
  assertThat(dependencies).hasSize(2);
  DependencyDto dep=dependencies.get(0);
  assertThat(dep.getUsage()).isEqualTo("compile");
  assertThat(dep.getFromResourceId()).isEqualTo(100L);
  assertThat(dep.getFromVersion()).isEqualTo("1.0");
  assertThat(dep.getToResourceId()).isEqualTo(101L);
  assertThat(dep.getToVersion()).isEqualTo("3.0");
  assertThat(dep.getId()).isEqualTo(1L);
}
