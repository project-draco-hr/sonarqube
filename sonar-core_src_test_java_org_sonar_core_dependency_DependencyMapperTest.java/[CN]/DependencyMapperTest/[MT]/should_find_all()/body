{
  setupData("fixture");
  final List<DependencyDto> dependencies=Lists.newArrayList();
  SqlSession session=getMyBatis().openSession();
  try {
    session.getMapper(DependencyMapper.class).selectAll(new ResultHandler(){
      public void handleResult(      ResultContext context){
        dependencies.add((DependencyDto)context.getResultObject());
      }
    }
);
  }
  finally {
    MyBatis.closeQuietly(session);
  }
  assertThat(dependencies).hasSize(2);
  DependencyDto dep=dependencies.get(0);
  assertThat(dep.getId()).isEqualTo(1L);
  assertThat(dep.getFromSnapshotId()).isEqualTo(1000L);
  assertThat(dep.getToSnapshotId()).isEqualTo(1001L);
  assertThat(dep.getUsage()).isEqualTo("compile");
}
