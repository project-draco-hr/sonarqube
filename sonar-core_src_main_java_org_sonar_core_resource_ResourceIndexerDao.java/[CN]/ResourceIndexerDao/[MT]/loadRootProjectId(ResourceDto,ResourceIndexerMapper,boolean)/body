{
  if (correctProjectRootId) {
    return resource.getRootId();
  }
  Integer rootId;
  if (resource.getRootId() != null) {
    ResourceDto root=mapper.selectRootId(resource.getRootId());
    if (root != null) {
      rootId=(Integer)ObjectUtils.defaultIfNull(root.getRootId(),root.getId());
    }
 else {
      rootId=resource.getRootId();
    }
  }
 else {
    rootId=resource.getId();
  }
  return rootId;
}
