{
  MyBatis myBatis=db.myBatis();
  RuleDao ruleDao=new RuleDao(System2.INSTANCE);
  QualityProfileDao qualityProfileDao=new QualityProfileDao(myBatis,System2.INSTANCE);
  ActiveRuleDao activeRuleDao=new ActiveRuleDao(qualityProfileDao,ruleDao,System2.INSTANCE);
  DbClient client=new DbClient(db.database(),myBatis,ruleDao,activeRuleDao,qualityProfileDao);
  assertThat(client.getDatabase()).isSameAs(db.database());
  DbSession dbSession=client.openSession(true);
  assertThat(dbSession).isNotNull();
  assertThat(dbSession.getConnection().isClosed()).isFalse();
  dbSession.close();
  assertThat(client.qualityProfileDao()).isSameAs(qualityProfileDao);
  assertThat(client.deprecatedActiveRuleDao()).isSameAs(activeRuleDao);
  assertThat(client.deprecatedRuleDao()).isSameAs(ruleDao);
}
