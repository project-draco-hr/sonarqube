{
  Map<String,Object> props=new LinkedHashMap<>();
  MemoryMXBean memory=getMBean(ManagementFactory.MEMORY_MXBEAN_NAME,MemoryMXBean.class);
  MemoryUsage heap=memory.getHeapMemoryUsage();
  props.put("Heap Committed (MB)",toMegaBytes(heap.getCommitted()));
  props.put("Heap Init (MB)",toMegaBytes(heap.getInit()));
  props.put("Heap Max (MB)",toMegaBytes(heap.getMax()));
  props.put("Heap Used (MB)",toMegaBytes(heap.getUsed()));
  MemoryUsage nonHeap=memory.getNonHeapMemoryUsage();
  props.put("Non Heap Committed (MB)",toMegaBytes(nonHeap.getCommitted()));
  props.put("Non Heap Init (MB)",toMegaBytes(nonHeap.getInit()));
  props.put("Non Heap Max (MB)",toMegaBytes(nonHeap.getMax()));
  props.put("Non Heap Used (MB)",toMegaBytes(nonHeap.getUsed()));
  ThreadMXBean thread=getMBean(ManagementFactory.THREAD_MXBEAN_NAME,ThreadMXBean.class);
  props.put("Thread Count",thread.getThreadCount());
  return props;
}
