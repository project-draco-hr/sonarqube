{
  StopWatch requestProfile=null;
  if (profilingLevel.ordinal() >= Profiling.Level.BASIC.ordinal()) {
    requestProfile=profiling.start("search",Profiling.Level.BASIC);
  }
  ListenableActionFuture acc=action.execute();
  try {
    K response=(K)acc.get();
    return response;
  }
 catch (  Exception e) {
    throw new IllegalStateException("ES error: ",e);
  }
 finally {
    if (requestProfile != null) {
      requestProfile.stop(action.toString());
    }
  }
}
