{
  for (  Period period : timeMachineConfiguration.periods()) {
    int variationIndex=period.getIndex();
    Collection<Measure> children=context.getChildrenMeasures(measure.getMetric());
    Date datePlusOneSecond=period.getDate() != null ? DateUtils.addSeconds(period.getDate(),1) : null;
    int count=countIssuesAfterDate(issues,datePlusOneSecond);
    double sum=MeasureUtils.sumOnVariation(true,variationIndex,children) + count;
    measure.setVariation(variationIndex,sum);
  }
  context.saveMeasure(measure);
}
