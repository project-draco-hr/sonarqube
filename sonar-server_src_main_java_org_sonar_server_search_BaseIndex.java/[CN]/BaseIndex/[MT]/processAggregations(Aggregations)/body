{
  Multimap<String,FacetValue> stats=ArrayListMultimap.create();
  if (aggregations != null) {
    for (    Aggregation aggregation : aggregations.asList()) {
      System.out.println("aggregation.getClass() = " + aggregation.getClass());
      if (aggregation.getClass().isAssignableFrom(StringTerms.class)) {
        for (        Terms.Bucket value : ((Terms)aggregation).getBuckets()) {
          FacetValue facetValue=new FacetValue(value.getKey(),(int)value.getDocCount());
          facetValue.setSubFacets(processAggregations(value.getAggregations()));
          stats.put(aggregation.getName(),facetValue);
        }
      }
 else       if (aggregation.getClass().isAssignableFrom(InternalValueCount.class)) {
        InternalValueCount count=((InternalValueCount)aggregation);
        FacetValue facetValue=new FacetValue(count.getName(),(int)count.getValue());
        stats.put(count.getName(),facetValue);
      }
    }
  }
  return stats;
}
