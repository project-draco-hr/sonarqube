{
  List<Hit> results=new ArrayList<Hit>();
  for (  SearchHit esHit : hits.getHits()) {
    Hit hit=new Hit(esHit.score());
    for (    Map.Entry<String,SearchHitField> entry : esHit.fields().entrySet()) {
      if (entry.getValue().getValues().size() > 1) {
        hit.getFields().put(entry.getKey(),entry.getValue().getValues());
      }
 else {
        hit.getFields().put(entry.getKey(),entry.getValue().getValue());
      }
    }
    results.add(hit);
  }
  return results;
}
