{
  if (duplicate.hasOtherFileKey()) {
    String crossProjectComponentKey=duplicate.getOtherFileKey();
    appendDuplication(xml,crossProjectComponentKey,duplicate);
  }
 else {
    if (duplicate.hasOtherFileRef()) {
      BatchReport.Component duplicationComponent=reportReader.readComponent(duplicate.getOtherFileRef());
      DbComponentsRefCache.DbComponent dbComponent=dbComponentsRefCache.getByRef(duplicationComponent.getRef());
      appendDuplication(xml,dbComponent.getKey(),duplicate);
    }
 else {
      appendDuplication(xml,componentKey,duplicate);
    }
  }
}
