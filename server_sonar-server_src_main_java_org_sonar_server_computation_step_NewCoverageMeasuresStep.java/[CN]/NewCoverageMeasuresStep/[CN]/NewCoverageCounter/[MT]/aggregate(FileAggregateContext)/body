{
  Component fileComponent=context.getFile();
  BatchReport.Changesets componentScm=batchReportReader.readChangesets(fileComponent.getReportAttributes().getRef());
  if (componentScm == null) {
    return;
  }
  Optional<Measure> hitsByLineMeasure=context.getMeasure(metricKeys.getCoverageLineHitsData());
  if (!hitsByLineMeasure.isPresent() || hitsByLineMeasure.get().getValueType() == Measure.ValueType.NO_VALUE) {
    return;
  }
  Map<Integer,Integer> hitsByLine=parseCountByLine(hitsByLineMeasure);
  Map<Integer,Integer> conditionsByLine=parseCountByLine(context.getMeasure(metricKeys.getConditionsByLine()));
  Map<Integer,Integer> coveredConditionsByLine=parseCountByLine(context.getMeasure(metricKeys.getCoveredConditionsByLine()));
  for (  Map.Entry<Integer,Integer> entry : hitsByLine.entrySet()) {
    int lineId=entry.getKey();
    int hits=entry.getValue();
    int conditions=(Integer)ObjectUtils.defaultIfNull(conditionsByLine.get(lineId),0);
    int coveredConditions=(Integer)ObjectUtils.defaultIfNull(coveredConditionsByLine.get(lineId),0);
    BatchReport.Changesets.Changeset changeset=componentScm.getChangeset(componentScm.getChangesetIndexByLine(lineId - 1));
    Date date=changeset.hasDate() ? new Date(changeset.getDate()) : null;
    analyze(context.getPeriods(),date,hits,conditions,coveredConditions);
  }
}
