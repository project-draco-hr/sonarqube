{
  this.stepRegistry=mock(ComputationStepRegistry.class);
  this.activityService=mock(ActivityService.class);
  this.dbClient=mock(DbClient.class);
  when(dbClient.openSession(anyBoolean())).thenReturn(mock(DbSession.class));
  ComponentDao componentDao=mock(ComponentDao.class);
  when(dbClient.componentDao()).thenReturn(componentDao);
  when(componentDao.getByKey(any(DbSession.class),anyString())).thenReturn(ComponentTesting.newProjectDto());
  this.sut=new ComputationService(dbClient,stepRegistry,activityService);
}
