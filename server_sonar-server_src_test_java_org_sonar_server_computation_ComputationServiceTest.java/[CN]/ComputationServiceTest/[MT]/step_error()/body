{
  when(steps.instances()).thenReturn(Arrays.asList(projectStep1));
  doThrow(new IllegalStateException("pb")).when(projectStep1).execute();
  try {
    underTest.process();
    fail();
  }
 catch (  IllegalStateException e) {
    assertThat(e.getMessage()).isEqualTo("pb");
    assertThat(dto.getStatus()).isEqualTo(Status.FAILED);
    assertThat(dto.getFinishedAt()).isNotNull();
  }
}
