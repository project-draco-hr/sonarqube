{
  AnalysisReportDto report=newDefaultReport();
  File zip=generateZip(ANY_SNAPSHOT_ID);
  logTester.setLevel(LoggerLevel.DEBUG);
  sut.process(new ReportQueue.Item(report,zip));
  assertThat(report.getStatus()).isEqualTo(Status.CANCELLED);
  assertThat(logTester.logs()).contains(String.format("Processing of report #%s is canceled because it was submitted while another report of the same project was already being processed.",report.getId()));
  assertThat(logTester.logs()).contains(String.format("The snapshot ID #%s provided by the report #%s does not exist anymore.",ANY_SNAPSHOT_ID,report.getId()));
}
