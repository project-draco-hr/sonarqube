{
  checkPermission(UserSession.get());
  if (dbClient.qualityProfileDao().selectByNameAndLanguage(name,language,session) != null) {
    throw BadRequestException.ofL10n("quality_profiles.profile_x_already_exists",name);
  }
  QualityProfileDto profile=QualityProfileDto.createFor(name,language).setVersion(1).setUsed(false);
  dbClient.qualityProfileDao().insert(profile,session);
  return profile;
}
