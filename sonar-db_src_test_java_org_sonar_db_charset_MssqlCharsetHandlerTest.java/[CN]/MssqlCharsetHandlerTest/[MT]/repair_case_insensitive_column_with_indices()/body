{
  answerColumns(asList(new ColumnDef(TABLE_ISSUES,COLUMN_KEE,"Latin1_General","Latin1_General_CS_AS","varchar",10,false),new ColumnDef(TABLE_PROJECTS,COLUMN_NAME,"Latin1_General","Latin1_General_CI_AI","varchar",10,false)));
  answerIndices(asList(new MssqlCharsetHandler.ColumnIndex("projects_name",false,"name"),new MssqlCharsetHandler.ColumnIndex("projects_login_and_name",true,"login,name")));
  Connection connection=mock(Connection.class);
  underTest.handle(connection,immutableEnumSet(AUTO_REPAIR_COLLATION));
  verify(selectExecutor).executeUpdate(connection,"DROP INDEX projects.projects_name");
  verify(selectExecutor).executeUpdate(connection,"DROP INDEX projects.projects_login_and_name");
  verify(selectExecutor).executeUpdate(connection,"ALTER TABLE projects ALTER COLUMN name varchar(10) COLLATE Latin1_General_CS_AS NOT NULL");
  verify(selectExecutor).executeUpdate(connection,"CREATE  INDEX projects_name ON projects (name)");
  verify(selectExecutor).executeUpdate(connection,"CREATE UNIQUE INDEX projects_login_and_name ON projects (login,name)");
}
