{
  DbSession session=mybatis.openSession(true);
  PropertiesMapper mapper=session.getMapper(PropertiesMapper.class);
  try {
    for (    Map.Entry<String,String> entry : properties.entrySet()) {
      mapper.deleteGlobalProperty(entry.getKey());
    }
    for (    Map.Entry<String,String> entry : properties.entrySet()) {
      mapper.insert(new PropertyDto().setKey(entry.getKey()).setValue(entry.getValue()));
    }
    session.commit();
  }
  finally {
    MyBatis.closeQuietly(session);
  }
}
