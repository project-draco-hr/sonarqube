{
  Date since=DateUtils.parseDate("2014-05-19");
  Date to=DateUtils.parseDate("2014-06-19");
  Result<QProfileActivity> result=mock(Result.class);
  when(result.getHits()).thenReturn(Lists.<QProfileActivity>newArrayList());
  when(result.getTotal()).thenReturn(10L);
  when(service.searchActivities(any(QProfileActivityQuery.class),any(QueryContext.class))).thenReturn(result);
  rubyQProfileActivityService.search(ImmutableMap.<String,Object>of("profileKeys","PROFILE_KEY","since",since,"to",to));
  verify(service).searchActivities(activityArgumentCaptor.capture(),queryOptionsArgumentCaptor.capture());
  assertThat(queryOptionsArgumentCaptor.getValue().getLimit()).isEqualTo(50);
  assertThat(activityArgumentCaptor.getValue().getQprofileKeys()).containsOnly("PROFILE_KEY");
  assertThat(activityArgumentCaptor.getValue().getTypes()).containsOnly(Activity.Type.QPROFILE);
  assertThat(activityArgumentCaptor.getValue().getSince()).isEqualTo(since);
  assertThat(activityArgumentCaptor.getValue().getTo()).isEqualTo(to);
}
