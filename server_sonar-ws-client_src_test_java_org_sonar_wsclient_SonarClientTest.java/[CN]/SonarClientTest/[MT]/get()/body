{
  HttpRequestFactory requestFactory=mock(HttpRequestFactory.class);
  SonarClient client=new SonarClient(requestFactory);
  client.get("api/foo","key","the_key","max",10);
  ArgumentCaptor<Map> paramsCapture=ArgumentCaptor.forClass(Map.class);
  verify(requestFactory).get(eq("api/foo"),paramsCapture.capture());
  Map params=paramsCapture.getValue();
  assertThat(params).hasSize(2);
  assertThat(params).includes(MapAssert.entry("key","the_key"));
  assertThat(params).includes(MapAssert.entry("max",10));
}
