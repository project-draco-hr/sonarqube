{
  HttpRequestFactory requestFactory=mock(HttpRequestFactory.class);
  SonarClient client=new SonarClient(requestFactory);
  client.post("api/foo","max",10);
  ArgumentCaptor<Map> paramsCapture=ArgumentCaptor.forClass(Map.class);
  verify(requestFactory).post(eq("api/foo"),paramsCapture.capture());
  Map params=paramsCapture.getValue();
  assertThat(params).hasSize(1);
  assertThat(params).containsEntry("max",10);
}
