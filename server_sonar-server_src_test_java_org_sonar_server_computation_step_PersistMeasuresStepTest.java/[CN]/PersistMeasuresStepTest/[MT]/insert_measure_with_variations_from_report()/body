{
  metricRepository.add(1,DOUBLE_METRIC);
  measureRepository.addRawMeasure(PROJECT_REF,DOUBLE_METRIC_KEY,Measure.newMeasureBuilder().setVariations(MeasureVariations.newMeasureVariationsBuilder().setVariation(createPeriod(1),1.1d).setVariation(createPeriod(2),2.2d).setVariation(createPeriod(3),3.3d).setVariation(createPeriod(4),4.4d).setVariation(createPeriod(5),5.5d).build()).create(10d));
  sut.execute();
  assertThat(dbTester.countRowsOfTable("project_measures")).isEqualTo(1);
  List<Map<String,Object>> dtos=selectSnapshots();
  Map<String,Object> dto=dtos.get(0);
  assertThat(dto.get("variation_value_1")).isEqualTo(1.1d);
}
