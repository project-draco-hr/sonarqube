{
  InputStream input=null;
  FileOutputStream output=null;
  String fullUrl=serverUrl + path;
  try {
    HttpURLConnection connection=newHttpConnection(new URL(fullUrl));
    output=new FileOutputStream(toFile,false);
    input=connection.getInputStream();
    BootstrapperIOUtils.copyLarge(input,output);
  }
 catch (  IOException e) {
    BootstrapperIOUtils.closeQuietly(output);
    BootstrapperIOUtils.deleteFileQuietly(toFile);
    throw new BootstrapException("Fail to download the file: " + fullUrl,e);
  }
 finally {
    BootstrapperIOUtils.closeQuietly(input);
    BootstrapperIOUtils.closeQuietly(output);
  }
}
