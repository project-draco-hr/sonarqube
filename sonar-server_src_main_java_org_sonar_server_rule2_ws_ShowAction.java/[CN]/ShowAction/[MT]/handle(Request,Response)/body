{
  String ruleKey=request.mandatoryParam("key");
  String repoKey=request.param("repo");
  if (repoKey == null && ruleKey.contains(":")) {
    repoKey=StringUtils.substringBefore(ruleKey,":");
  }
  Rule rule=service.getByKey(RuleKey.of(repoKey,ruleKey));
  if (rule == null) {
    throw new NotFoundException("Rule not found");
  }
  JsonWriter json=response.newJsonWriter().beginObject().name("rule").beginObject();
  writeRule(rule,json);
  json.endObject().endObject().close();
}
