{
  String fileUuid=request.mandatoryParam("uuid");
  ComponentDto component=componentService.getByUuid(fileUuid);
  UserSession.get().checkProjectUuidPermission(UserRole.CODEVIEWER,component.projectUuid());
  int from=Math.max(request.mandatoryParamAsInt("from"),1);
  int to=(Integer)ObjectUtils.defaultIfNull(request.paramAsInt("to"),Integer.MAX_VALUE);
  List<SourceLineDoc> sourceLines=sourceLineIndex.getLines(fileUuid,from,to);
  if (sourceLines.isEmpty()) {
    throw new NotFoundException("File '" + fileUuid + "' has no sources");
  }
  JsonWriter json=response.newJsonWriter().beginObject();
  writeSource(sourceLines,json);
  json.endObject().close();
}
