{
  if (configuration.forceReloadAll()) {
    LOG.warn("Forced reloading of SCM data for all files.");
  }
  List<InputFile> filesToBlame=new LinkedList<>();
  for (  InputFile f : fs.inputFiles(fs.predicates().all())) {
    if (configuration.forceReloadAll()) {
      addIfNotEmpty(filesToBlame,f);
    }
 else {
      FileData fileData=projectSettings.fileData(projectDefinition.getKeyWithBranch(),f.relativePath());
      if (f.status() != Status.SAME || fileData == null || fileData.needBlame()) {
        addIfNotEmpty(filesToBlame,f);
      }
    }
  }
  return filesToBlame;
}
