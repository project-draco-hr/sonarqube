{
  FileData fileData=projectReferentials.fileData(projectDefinition.getKeyWithBranch(),f.relativePath());
  if (f.status() == Status.SAME && fileData != null) {
    if (fileData.needBlame()) {
      addIfNotEmpty(filesToBlame,(DefaultInputFile)f);
    }
 else {
      String scmAuthorsByLine=fileData.scmAuthorsByLine();
      String scmLastCommitDatetimesByLine=fileData.scmLastCommitDatetimesByLine();
      String scmRevisionsByLine=fileData.scmRevisionsByLine();
      if (scmAuthorsByLine != null && scmLastCommitDatetimesByLine != null && scmRevisionsByLine != null) {
        saveMeasures(context,f,scmAuthorsByLine,scmLastCommitDatetimesByLine,scmRevisionsByLine);
      }
    }
  }
 else {
    addIfNotEmpty(filesToBlame,(DefaultInputFile)f);
  }
}
