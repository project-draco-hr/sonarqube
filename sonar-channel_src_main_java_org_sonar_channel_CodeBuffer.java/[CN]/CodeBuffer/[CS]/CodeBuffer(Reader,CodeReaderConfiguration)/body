{
  this.configuration=configuration;
  lastChar=-1;
  cursor=new Cursor();
  bufferCapacity=configuration.getBufferCapacity();
  tabWidth=configuration.getTabWidth();
  buffer=new char[bufferCapacity];
  Reader reader=initialCodeReader;
  for (  CodeReaderFilter<?> codeReaderFilter : configuration.getCodeReaderFilters()) {
    reader=new Filter(reader,codeReaderFilter,configuration);
  }
  this.code=reader;
  fillBuffer();
}
