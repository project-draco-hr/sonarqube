{
  String sanitizedAssignee=null;
  if (user != null) {
    sanitizedAssignee=StringUtils.defaultIfBlank(user.login(),null);
  }
  if (!Objects.equals(sanitizedAssignee,issue.assignee())) {
    String newAssigneeName=user != null ? user.name() : null;
    issue.setFieldChange(context,ASSIGNEE,UNUSED,newAssigneeName);
    issue.setAssignee(sanitizedAssignee);
    issue.setUpdateDate(context.date());
    issue.setChanged(true);
    issue.setSendNotifications(true);
    return true;
  }
  return false;
}
