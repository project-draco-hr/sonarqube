{
  List<Block[]> result=new ArrayList<>();
  List<Block> beginBlocks=beginGroup.blocks;
  List<Block> endBlocks=endGroup.blocks;
  int i=0;
  int j=0;
  while (i < beginBlocks.size() && j < endBlocks.size()) {
    Block beginBlock=beginBlocks.get(i);
    Block endBlock=endBlocks.get(j);
    int c=RESOURCE_ID_COMPARATOR.compare(beginBlock.getResourceId(),endBlock.getResourceId());
    if (c == 0) {
      c=beginBlock.getIndexInFile() + len - 1 - endBlock.getIndexInFile();
    }
    if (c == 0) {
      result.add(new Block[]{beginBlock,endBlock});
      i++;
      j++;
    }
    if (c > 0) {
      j++;
    }
    if (c < 0) {
      i++;
    }
  }
  return result;
}
