{
  long snapshotId1=insertNewProjectInDbAndReturnSnapshotId(1);
  long snapshotId2=insertNewProjectInDbAndReturnSnapshotId(2);
  newRequest().setParam(PARAM_ID,"project-uuid-1").execute();
  dbSession.commit();
  assertThat(dbClient.componentDao().selectByUuid(dbSession,"project-uuid-1")).isAbsent();
  assertThat(dbClient.componentDao().selectOrFailByUuid(dbSession,"project-uuid-2")).isNotNull();
  assertThat(dbClient.snapshotDao().selectById(dbSession,snapshotId1)).isNull();
  assertThat(dbClient.snapshotDao().selectById(dbSession,snapshotId2)).isNotNull();
  assertThat(dbClient.issueDao().selectByKey(dbSession,"issue-key-1").isPresent()).isFalse();
  assertThat(dbClient.issueDao().selectOrFailByKey(dbSession,"issue-key-2")).isNotNull();
}
