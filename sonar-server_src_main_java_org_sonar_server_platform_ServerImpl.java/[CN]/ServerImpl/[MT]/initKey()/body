{
  DatabaseSession session=dbSessionFactory.getSession();
  Property organization=session.getSingleResult(Property.class,"key",CoreProperties.ORGANIZATION);
  Property baseUrl=session.getSingleResult(Property.class,"key",CoreProperties.SERVER_BASE_URL);
  Property previousKey=session.getSingleResult(Property.class,"key",CoreProperties.SERVER_KEY);
  return keyGenerator.generate(organization != null ? organization.getValue() : null,baseUrl != null ? baseUrl.getValue() : null,previousKey != null ? previousKey.getValue() : null);
}
