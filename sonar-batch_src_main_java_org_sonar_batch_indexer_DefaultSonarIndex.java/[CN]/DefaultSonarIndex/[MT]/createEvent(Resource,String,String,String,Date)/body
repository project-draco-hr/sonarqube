{
  Bucket bucket=getOrCreateBucket(resource,true);
  Event event;
  if (date == null) {
    event=new Event(name,description,category,bucket.getSnapshot());
  }
 else {
    event=new Event(name,description,category,date,bucket.getResourceId());
  }
  return session.save(event);
}
