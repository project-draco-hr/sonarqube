{
  Resource indexedResource=getResource(resource);
  Iterable<Measure> unfiltered;
  if (filter instanceof MeasuresFilters.MetricFilter) {
    unfiltered=measureCache.byMetric(indexedResource,((MeasuresFilters.MetricFilter)filter).filterOnMetricKey());
  }
 else {
    unfiltered=measureCache.byResource(indexedResource);
  }
  return filter.filter(unfiltered);
}
