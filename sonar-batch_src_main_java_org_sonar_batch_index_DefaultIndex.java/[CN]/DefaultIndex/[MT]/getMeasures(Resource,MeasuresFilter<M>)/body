{
  Resource indexedResource=getResource(resource);
  if (indexedResource == null) {
    return null;
  }
  Collection<Measure> unfiltered=new ArrayList<>();
  if (filter instanceof MeasuresFilters.MetricFilter) {
    Measure byMetric=measureCache.byMetric(indexedResource,((MeasuresFilters.MetricFilter<M>)filter).filterOnMetricKey());
    if (byMetric != null) {
      unfiltered.add(byMetric);
    }
  }
 else {
    for (    Measure measure : measureCache.byResource(indexedResource)) {
      unfiltered.add(measure);
    }
  }
  return filter.filter(unfiltered);
}
