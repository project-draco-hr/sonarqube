{
  Resource indexedResource=getResource(resource);
  if (indexedResource == null) {
    return null;
  }
  Iterable<Measure> unfiltered;
  if (filter instanceof MeasuresFilters.MetricFilter) {
    unfiltered=measureCache.byMetric(indexedResource,((MeasuresFilters.MetricFilter<M>)filter).filterOnMetricKey());
  }
 else {
    unfiltered=measureCache.byResource(indexedResource);
  }
  Collection<Measure> all=new ArrayList<>();
  if (unfiltered != null) {
    for (    Measure measure : unfiltered) {
      all.add(measure);
    }
  }
  return filter.filter(all);
}
