{
  Bucket fromBucket=getOrAddBucket(dependency.getFrom());
  Bucket toBucket=getOrAddBucket(dependency.getTo());
  if (fromBucket != null && !fromBucket.isExcluded() && toBucket != null && !toBucket.isExcluded()) {
    dependencies.add(dependency);
    registerOutgoingDependency(dependency);
    registerIncomingDependency(dependency);
    return true;
  }
  return false;
}
