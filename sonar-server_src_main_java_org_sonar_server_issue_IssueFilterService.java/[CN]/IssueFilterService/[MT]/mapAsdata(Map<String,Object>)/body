{
  StringBuilder stringBuilder=new StringBuilder();
  for (  Map.Entry<String,Object> entries : map.entrySet()) {
    String key=entries.getKey();
    Object value=entries.getValue();
    stringBuilder.append(key);
    stringBuilder.append(DefaultIssueFilter.KEY_VALUE_SEPARATOR);
    List valuesList=newArrayList();
    if (value instanceof List) {
      valuesList=(List)value;
    }
 else     if (value instanceof CharSequence) {
      valuesList=Lists.newArrayList(Splitter.on(',').omitEmptyStrings().split((CharSequence)value));
    }
 else {
      stringBuilder.append(value);
    }
    for (Iterator<Object> valueListIter=valuesList.iterator(); valueListIter.hasNext(); ) {
      Object valueList=valueListIter.next();
      stringBuilder.append(valueList);
      if (valueListIter.hasNext()) {
        stringBuilder.append(DefaultIssueFilter.LIST_SEPARATOR);
      }
    }
    stringBuilder.append(DefaultIssueFilter.SEPARATOR);
  }
  if (stringBuilder.length() > 0) {
    stringBuilder.deleteCharAt(stringBuilder.length() - 1);
  }
  return stringBuilder.toString();
}
