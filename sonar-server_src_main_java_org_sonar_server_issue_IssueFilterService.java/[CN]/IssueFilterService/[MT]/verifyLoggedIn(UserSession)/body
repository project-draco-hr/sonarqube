{
  if (!userSession.isLoggedIn() && userSession.login() != null) {
    throw new IllegalStateException("User is not logged in");
  }
}
