{
  List<IssueFilterDto> userFilters=selectUserIssueFilters(issueFilter.user());
  IssueFilterDto userFilterSameName=findFilterWithSameName(userFilters,issueFilter.name());
  if (userFilterSameName != null && !userFilterSameName.getId().equals(issueFilter.id())) {
    throw new BadRequestException("Name already exists");
  }
  if (issueFilter.shared()) {
    List<IssueFilterDto> sharedFilters=selectSharedFilters();
    IssueFilterDto sharedFilterWithSameName=findFilterWithSameName(sharedFilters,issueFilter.name());
    if (sharedFilterWithSameName != null && !sharedFilterWithSameName.getId().equals(issueFilter.id())) {
      throw new BadRequestException("Other users already share filters with the same name");
    }
    verifyCurrentUserCanShareFilter(issueFilter,userSession);
  }
}
