{
  Configuration configuration=session.getConfiguration();
  if (null != configuration) {
    MappedStatement mappedStatement=configuration.getMappedStatement(statement);
    if (null != mappedStatement) {
      KeyGenerator keyGenerator=mappedStatement.getKeyGenerator();
      if (keyGenerator instanceof Jdbc3KeyGenerator) {
        throw new IllegalStateException("Batch updates cannot use generated keys");
      }
    }
  }
}
