{
  PermissionTemplateDto permissionTemplateDto=permissionDao.selectTemplateById(Long.parseLong(templateId));
  if (permissionTemplateDto == null) {
    throw new RuntimeException("Could not retrieve permission template with id " + templateId);
  }
  PermissionTemplateDto templateWithPermissions=permissionDao.selectPermissionTemplate(permissionTemplateDto.getName());
  if (templateWithPermissions == null) {
    throw new RuntimeException("Could not retrieve permissions for template with id " + templateId);
  }
  return templateWithPermissions;
}
