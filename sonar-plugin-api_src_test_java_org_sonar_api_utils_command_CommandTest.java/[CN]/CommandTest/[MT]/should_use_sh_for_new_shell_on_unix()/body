{
  System2 system=mock(System2.class);
  when(system.isOsWindows()).thenReturn(false);
  Command command=new Command("foo.sh",system);
  command.setNewShell(true);
  assertThat(command.toCommandLine()).isEqualTo("sh foo.sh");
  assertThat(command.isNewShell()).isTrue();
}
