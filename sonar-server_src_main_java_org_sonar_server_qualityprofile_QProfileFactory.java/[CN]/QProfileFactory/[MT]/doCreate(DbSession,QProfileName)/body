{
  Date now=new Date();
  for (int i=0; i < 20; i++) {
    String key=Slug.slugify(String.format("%s %s %s",name.getLanguage(),name.getName(),RandomStringUtils.randomNumeric(5)));
    QualityProfileDto dto=QualityProfileDto.createFor(key).setName(name.getName()).setLanguage(name.getLanguage()).setRulesUpdatedAt(now);
    if (db.qualityProfileDao().getByKey(dbSession,dto.getKey()) == null) {
      db.qualityProfileDao().insert(dbSession,dto);
      return dto;
    }
  }
  throw new IllegalStateException("Failed to create an unique quality profile for " + name);
}
