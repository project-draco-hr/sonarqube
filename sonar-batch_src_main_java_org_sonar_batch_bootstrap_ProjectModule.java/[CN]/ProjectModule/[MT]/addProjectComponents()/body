{
  ProjectDefinition projectDefinition=getComponent(ProjectTree.class).getProjectDefinition(project);
  addComponent(projectDefinition);
  for (  Object component : projectDefinition.getContainerExtensions()) {
    addComponent(component);
  }
  addComponent(project);
  addComponent(project.getConfiguration());
  addComponent(DefaultProjectClasspath.class);
  addComponent(DefaultProjectFileSystem2.class);
  addComponent(DaoFacade.class);
  addComponent(RulesDao.class);
  if (!dryRun) {
    addComponent(getComponent(DefaultResourcePersister.class).getSnapshot(project));
  }
  addComponent(org.sonar.api.database.daos.MeasuresDao.class);
  addComponent(ProfilesDao.class);
  addComponent(AsyncMeasuresDao.class);
  addComponent(AsyncMeasuresService.class);
  addComponent(DefaultRulesManager.class);
  addComponent(DefaultSensorContext.class);
  addComponent(Languages.class);
  addComponent(BatchExtensionDictionnary.class);
  addComponent(DefaultTimeMachine.class);
  addComponent(ViolationFilters.class);
  addComponent(ResourceFilters.class);
  addComponent(DefaultModelFinder.class);
  addComponent(ProfileLoader.class,DefaultProfileLoader.class);
  addAdapter(new ProfileProvider());
}
