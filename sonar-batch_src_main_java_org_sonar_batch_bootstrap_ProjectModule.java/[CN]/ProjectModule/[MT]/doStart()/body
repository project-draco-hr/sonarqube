{
  Language language=getComponentByType(Languages.class).get(project.getLanguageKey());
  if (language == null) {
    throw new SonarException("Language with key '" + project.getLanguageKey() + "' not found");
  }
  project.setLanguage(language);
  DefaultIndex index=getComponentByType(DefaultIndex.class);
  index.setCurrentProject(project,getComponentByType(ResourceFilters.class),getComponentByType(ViolationFilters.class),getComponentByType(RulesProfile.class));
  project.setFileSystem(getComponentByType(ProjectFileSystem.class));
  getComponentByType(Phases.class).execute(project);
}
