{
  Language language=getComponent(Languages.class).get(project.getLanguageKey());
  if (language == null) {
    throw new SonarException("Language with key '" + project.getLanguageKey() + "' not found");
  }
  project.setLanguage(language);
  DefaultIndex index=getComponent(DefaultIndex.class);
  index.setCurrentProject(project,getComponent(ResourceFilters.class),getComponent(ViolationFilters.class),getComponent(RulesProfile.class));
  project.setFileSystem(getComponent(ProjectFileSystem.class));
  getComponent(Phases.class).execute(project);
}
