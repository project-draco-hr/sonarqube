{
  Function function=new TweetFunction();
  UserSession userSession=mock(ThreadLocalUserSession.class);
  when(userSession.getLogin()).thenReturn("arthur");
  when(componentDao.getByKey(session,"struts")).thenReturn(new ComponentDto().setKey("struts"));
  when(issueService.getByKeyForUpdate(session,"ABCD")).thenReturn(issue.setProjectKey("struts"));
  actions.add("link-to-jira").setConditions(new AlwaysMatch()).setFunctions(function);
  assertThat(actionService.execute("ABCD","link-to-jira",userSession)).isNotNull();
  verify(propertiesDao).selectProjectProperties(eq("struts"));
}
