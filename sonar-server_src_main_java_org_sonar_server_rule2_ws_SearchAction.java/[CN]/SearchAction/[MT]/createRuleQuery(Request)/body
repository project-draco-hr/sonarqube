{
  RuleQuery query=service.newRuleQuery();
  query.setQueryText(request.param(SearchOptions.PARAM_TEXT_QUERY));
  query.setSeverities(request.paramAsStrings(PARAM_SEVERITIES));
  query.setRepositories(request.paramAsStrings(PARAM_REPOSITORIES));
  query.setStatuses(request.paramAsEnums(PARAM_STATUSES,RuleStatus.class));
  query.setLanguages(request.paramAsStrings(PARAM_LANGUAGES));
  query.setDebtCharacteristics(request.paramAsStrings(PARAM_DEBT_CHARACTERISTICS));
  query.setHasDebtCharacteristic(request.paramAsBoolean(PARAM_HAS_DEBT_CHARACTERISTIC));
  query.setActivation(request.param(PARAM_ACTIVATION));
  query.setQProfileKey(request.param(PARAM_QPROFILE));
  query.setSortField(RuleQuery.SortField.valueOfOrNull(request.param(SearchOptions.PARAM_SORT)));
  query.setAscendingSort(request.mandatoryParamAsBoolean(SearchOptions.PARAM_ASCENDING));
  query.setTags(request.paramAsStrings(PARAM_TAGS));
  return query;
}
