{
  KeyValueFormat.FieldParser reader=new KeyValueFormat.FieldParser("abc=def;ghi=jkl");
  assertThat(reader.nextKey()).isEqualTo("abc");
  assertThat(reader.nextVal()).isEqualTo("def");
  assertThat(reader.nextKey()).isEqualTo("ghi");
  assertThat(reader.nextVal()).isEqualTo("jkl");
  assertThat(reader.nextKey()).isNull();
  reader=new KeyValueFormat.FieldParser("abc=1;ghi=2");
  assertThat(reader.nextKey()).isEqualTo("abc");
  assertThat(reader.nextVal()).isEqualTo("1");
  assertThat(reader.nextKey()).isEqualTo("ghi");
  assertThat(reader.nextVal()).isEqualTo("2");
  assertThat(reader.nextKey()).isNull();
  reader=new KeyValueFormat.FieldParser("abc=;ghi=jkl");
  assertThat(reader.nextKey()).isEqualTo("abc");
  assertThat(reader.nextVal()).isEqualTo("");
  assertThat(reader.nextKey()).isEqualTo("ghi");
  assertThat(reader.nextVal()).isEqualTo("jkl");
  assertThat(reader.nextKey()).isNull();
  reader=new KeyValueFormat.FieldParser("abc=def");
  assertThat(reader.nextKey()).isEqualTo("abc");
  assertThat(reader.nextVal()).isEqualTo("def");
  assertThat(reader.nextKey()).isNull();
  reader=new KeyValueFormat.FieldParser("abc=\"def\";ghi=\"jkl\"");
  assertThat(reader.nextKey()).isEqualTo("abc");
  assertThat(reader.nextVal()).isEqualTo("def");
  assertThat(reader.nextKey()).isEqualTo("ghi");
  assertThat(reader.nextVal()).isEqualTo("jkl");
  assertThat(reader.nextKey()).isNull();
  reader=new KeyValueFormat.FieldParser("\"abc\"=\"def\";\"ghi\"=\"jkl\"");
  assertThat(reader.nextKey()).isEqualTo("abc");
  assertThat(reader.nextVal()).isEqualTo("def");
  assertThat(reader.nextKey()).isEqualTo("ghi");
  assertThat(reader.nextVal()).isEqualTo("jkl");
  assertThat(reader.nextKey()).isNull();
  reader=new KeyValueFormat.FieldParser("abc=\"def\\\"ghi\"");
  assertThat(reader.nextKey()).isEqualTo("abc");
  assertThat(reader.nextVal()).isEqualTo("def\"ghi");
  assertThat(reader.nextKey()).isNull();
  reader=new KeyValueFormat.FieldParser("");
  assertThat(reader.nextKey()).isNull();
  reader=new KeyValueFormat.FieldParser("abc=;def=");
  assertThat(reader.nextKey()).isEqualTo("abc");
  assertThat(reader.nextVal()).isEqualTo("");
  assertThat(reader.nextKey()).isEqualTo("def");
  assertThat(reader.nextVal()).isNull();
  reader=new KeyValueFormat.FieldParser("abc=\"1=2;3\";def=\"4;5=6\"");
  assertThat(reader.nextKey()).isEqualTo("abc");
  assertThat(reader.nextVal()).isEqualTo("1=2;3");
  assertThat(reader.nextKey()).isEqualTo("def");
  assertThat(reader.nextVal()).isEqualTo("4;5=6");
  assertThat(reader.nextKey()).isNull();
}
