{
  Context ctx;
  try {
    ctx=new InitialContext();
  }
 catch (  NamingException e) {
    throw new SonarException("Can not instantiate JNDI context",e);
  }
  try {
    Context envCtx=(Context)ctx.lookup(JNDI_ENV_CONTEXT);
    datasource=(DataSource)envCtx.lookup(jndiKey);
    Logs.INFO.info("JDBC datasource loaded from JNDI: " + jndiKey);
  }
 catch (  NamingException e) {
    throw new SonarException("JNDI context of JDBC datasource not found: " + jndiKey,e);
  }
 finally {
    try {
      ctx.close();
    }
 catch (    NamingException e) {
    }
  }
}
