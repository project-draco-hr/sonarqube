{
  DbSession dbSession=dbClient.openSession(false);
  try {
    UserDto user=dbClient.userDao().selectByLogin(dbSession,updateUser.login());
    updateUserDto(dbSession,updateUser,user);
    updateUser(dbSession,user);
    dbSession.commit();
    notifyNewUser(user.getLogin(),user.getName(),user.getEmail());
    userIndexer.index();
  }
  finally {
    dbSession.close();
  }
}
