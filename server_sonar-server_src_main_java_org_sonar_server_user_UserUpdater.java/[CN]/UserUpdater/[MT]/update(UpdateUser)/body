{
  DbSession dbSession=dbClient.openSession(false);
  try {
    UserDto user=dbClient.userDao().selectNullableByLogin(dbSession,updateUser.login());
    if (user != null) {
      updateUserDto(dbSession,updateUser,user);
      updateUser(dbSession,user);
    }
 else {
      throw new NotFoundException(String.format("User '%s' does not exists",updateUser.login()));
    }
    dbSession.commit();
    notifyNewUser(user.getLogin(),user.getName(),user.getEmail());
  }
  finally {
    dbSession.close();
  }
}
