{
  if (pastIssue != null) {
    newIssue.setKey(pastIssue.getKey());
    if (pastIssue.isManualSeverity()) {
      newIssue.setSeverity(pastIssue.getSeverity());
    }
    newIssue.setCreatedAt(pastIssue.getCreatedAt());
    newIssue.setUpdatedAt(project.getAnalysisDate());
    newIssue.setNew(false);
    newIssue.setAuthorLogin(pastIssue.getAuthorLogin());
    lastIssuesByRule.remove(getRuleId(newIssue),pastIssue);
    issueMap.put(newIssue,pastIssue);
    unmappedLastIssues.remove(pastIssue);
  }
 else {
    newIssue.setNew(true);
    newIssue.setCreatedAt(project.getAnalysisDate());
  }
}
