{
  if (pastIssue != null) {
    newIssue.setKey(pastIssue.getKey());
    if (pastIssue.isManualSeverity()) {
      newIssue.setManualSeverity(true);
      newIssue.setSeverity(pastIssue.getSeverity());
    }
    newIssue.setResolution(pastIssue.getResolution());
    newIssue.setStatus(pastIssue.getStatus());
    newIssue.setCreatedAt(pastIssue.getCreatedAt());
    newIssue.setUpdatedAt(project.getAnalysisDate());
    newIssue.setNew(false);
    newIssue.setAlive(true);
    newIssue.setAuthorLogin(pastIssue.getAuthorLogin());
    if (pastIssue.getAttributes() != null) {
      newIssue.setAttributes(KeyValueFormat.parse(pastIssue.getAttributes()));
    }
    lastIssuesByRule.remove(getRuleId(newIssue),pastIssue);
    issueMap.put(newIssue,pastIssue);
    unmappedLastIssues.remove(pastIssue);
  }
 else {
    newIssue.setNew(true);
    newIssue.setCreatedAt(project.getAnalysisDate());
  }
}
