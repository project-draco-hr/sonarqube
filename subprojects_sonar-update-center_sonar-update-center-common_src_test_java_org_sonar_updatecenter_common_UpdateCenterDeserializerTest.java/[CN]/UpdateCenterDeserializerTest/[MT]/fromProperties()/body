{
  InputStream input=getClass().getResourceAsStream("/org/sonar/updatecenter/common/UpdateCenterDeserializerTest/updates.properties");
  try {
    Properties props=new Properties();
    props.load(input);
    UpdateCenter center=UpdateCenterDeserializer.fromProperties(props);
    assertThat(center.getSonar().getVersions(),hasItems(Version.create("2.2"),Version.create("2.3")));
    assertThat(center.getSonar().getRelease(Version.create("2.2")).getDownloadUrl(),is("http://dist.sonar.codehaus.org/sonar-2.2.zip"));
    Plugin clirr=center.getPlugin("clirr");
    assertThat(clirr.getName(),is("Clirr"));
    assertThat(clirr.getDescription(),is("Clirr Plugin"));
    assertThat(clirr.getVersions(),hasItems(Version.create("1.0"),Version.create("1.1")));
    assertThat(clirr.getRelease(Version.create("1.0")).getDownloadUrl(),is("http://dist.sonar-plugins.codehaus.org/clirr-1.0.jar"));
  }
  finally {
    IOUtils.closeQuietly(input);
  }
}
