{
  insertPermissionsForProject(DEFAULT_PROJECT_KEY);
  queue.add(DEFAULT_PROJECT_KEY,123L);
  queue.add(DEFAULT_PROJECT_KEY,123L);
  queue.add(DEFAULT_PROJECT_KEY,123L);
  List<AnalysisReportDto> reports=queue.all();
  for (  AnalysisReportDto report : reports) {
    report.succeed();
    queue.remove(report);
  }
  userSession.setGlobalPermissions(GlobalPermissions.SYSTEM_ADMIN);
  WsTester.TestRequest request=wsTester.newGetRequest(AnalysisReportWebService.API_ENDPOINT,AnalysisReportHistorySearchAction.SEARCH_ACTION);
  WsTester.Result result=request.execute();
  assertThat(result).isNotNull();
  result.assertJson(getClass(),"list_history_reports.json",false);
}
