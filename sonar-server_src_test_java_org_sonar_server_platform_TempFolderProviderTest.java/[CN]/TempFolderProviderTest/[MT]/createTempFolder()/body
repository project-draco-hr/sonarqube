{
  ServerFileSystem fs=mock(ServerFileSystem.class);
  File serverTempFolder=temp.newFolder();
  when(fs.getTempDir()).thenReturn(serverTempFolder);
  TempFolder tempUtils=new TempFolderProvider().provide(fs);
  tempUtils.newDir();
  tempUtils.newFile();
  assertThat(new File(serverTempFolder,"tmp")).exists();
  assertThat(new File(serverTempFolder,"tmp").list()).hasSize(2);
  ((DefaultTempFolder)tempUtils).stop();
  assertThat(new File(serverTempFolder,"tmp")).doesNotExist();
}
