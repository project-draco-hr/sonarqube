{
  CodeReader reader=new CodeReader(new StringReader("package org.sonar;"));
  StringBuilder result=new StringBuilder();
  reader.popTo(new EndMatcher(){
    public boolean match(    int endFlag){
      return 'r' == (char)endFlag;
    }
  }
,result);
  assertThat(result.toString(),is("package o"));
  assertThat(reader.peek(),is((int)'r'));
  CodeReader.Cursor previousCursor=reader.getPreviousCursor();
  assertThat(previousCursor.getColumn(),is(0));
  assertThat(previousCursor.getLine(),is(1));
}
