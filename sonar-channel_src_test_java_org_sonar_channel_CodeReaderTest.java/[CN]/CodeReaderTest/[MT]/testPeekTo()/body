{
  CodeReader reader=new CodeReader(new StringReader("package org.sonar;"));
  StringBuilder result=new StringBuilder();
  reader.peekTo(new EndMatcher(){
    public boolean match(    int endFlag){
      return 'r' == (char)endFlag;
    }
  }
,result);
  assertEquals("package o",result.toString());
  assertThat(reader.peek(),is((int)'p'));
}
