{
  db.prepareDbUnit(getClass(),"past_measures.xml");
  List<PastMeasureDto> fileMeasures=sut.selectByComponentUuidAndProjectSnapshotIdAndMetricIds(db.getSession(),"CDEF",1000L,ImmutableSet.of(1,2));
  assertThat(fileMeasures).hasSize(2);
  PastMeasureDto fileMeasure1=fileMeasures.get(0);
  assertThat(fileMeasure1.getValue()).isEqualTo(5d);
  assertThat(fileMeasure1.getMetricId()).isEqualTo(1);
  assertThat(fileMeasure1.getRuleId()).isNull();
  assertThat(fileMeasure1.getCharacteristicId()).isNull();
  assertThat(fileMeasure1.getPersonId()).isNull();
  PastMeasureDto fileMeasure2=fileMeasures.get(1);
  assertThat(fileMeasure2.getValue()).isEqualTo(60d);
  assertThat(fileMeasure2.getMetricId()).isEqualTo(2);
  List<PastMeasureDto> projectMeasures=sut.selectByComponentUuidAndProjectSnapshotIdAndMetricIds(db.getSession(),"ABCD",1000L,ImmutableSet.of(1,2));
  assertThat(projectMeasures).hasSize(2);
  PastMeasureDto projectMeasure1=projectMeasures.get(0);
  assertThat(projectMeasure1.getValue()).isEqualTo(60d);
  assertThat(projectMeasure1.getMetricId()).isEqualTo(1);
  PastMeasureDto projectMeasure2=projectMeasures.get(1);
  assertThat(projectMeasure2.getValue()).isEqualTo(80d);
  assertThat(projectMeasure2.getMetricId()).isEqualTo(2);
  assertThat(sut.selectByComponentUuidAndProjectSnapshotIdAndMetricIds(db.getSession(),"UNKNOWN",1000L,ImmutableSet.of(1,2))).isEmpty();
  assertThat(sut.selectByComponentUuidAndProjectSnapshotIdAndMetricIds(db.getSession(),"CDEF",987654L,ImmutableSet.of(1,2))).isEmpty();
  assertThat(sut.selectByComponentUuidAndProjectSnapshotIdAndMetricIds(db.getSession(),"CDEF",1000L,ImmutableSet.of(123,456))).isEmpty();
}
