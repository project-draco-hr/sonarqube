{
  db.prepareDbUnit(getClass(),"select_by_snapshot_and_metric_keys_with_characteristic_id.xml");
  List<MeasureDto> results=underTest.selectBySnapshotIdAndMetricKeys(SNAPSHOT_ID,newHashSet("ncloc"),dbSession);
  assertThat(results).hasSize(3);
  Map<Long,MeasureDto> measuresById=measuresById(results);
  assertThat(measuresById.get(1L).getCharacteristicId()).isNull();
  assertThat(measuresById.get(2L).getCharacteristicId()).isEqualTo(10);
  assertThat(measuresById.get(3L).getCharacteristicId()).isEqualTo(11);
}
