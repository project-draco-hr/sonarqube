{
  Map<String,String> props=Maps.newHashMap(ImmutableMap.of(CoreProperties.ANALYSIS_MODE,CoreProperties.ANALYSIS_MODE_PREVIEW));
  DefaultAnalysisMode mode=new DefaultAnalysisMode(props);
  assertThat(mode.isPreview()).isTrue();
  assertThat(mode.isIncremental()).isFalse();
  assertThat(props.get(CoreProperties.DRY_RUN)).isEqualTo("true");
}
