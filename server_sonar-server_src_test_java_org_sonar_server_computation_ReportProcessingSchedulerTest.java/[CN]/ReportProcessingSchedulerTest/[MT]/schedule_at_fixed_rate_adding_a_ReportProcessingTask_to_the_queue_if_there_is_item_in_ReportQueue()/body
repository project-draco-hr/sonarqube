{
  ReportQueue.Item item=mock(ReportQueue.Item.class);
  when(batchExecutorService.scheduleAtFixedRate(any(Runnable.class),eq(0L),eq(10L),eq(TimeUnit.SECONDS))).thenAnswer(new ExecuteFirstArgAsRunnable());
  when(queue.pop()).thenReturn(item);
  underTest.onServerStart(mock(Server.class));
  assertThat(processingQueue.getTasks()).hasSize(1);
  assertThat(processingQueue.getTasks().iterator().next()).isInstanceOf(ReportProcessingTask.class);
}
