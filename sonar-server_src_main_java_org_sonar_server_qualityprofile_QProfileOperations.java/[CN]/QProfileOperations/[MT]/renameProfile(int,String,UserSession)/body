{
  checkPermission(userSession);
  SqlSession session=myBatis.openSession();
  try {
    QualityProfileDto profile=findNotNull(profileId,session);
    if (!profile.getName().equals(newName)) {
      checkNotAlreadyExists(newName,profile.getLanguage(),session);
    }
    profile.setName(newName);
    dao.update(profile,session);
    session.commit();
  }
  finally {
    MyBatis.closeQuietly(session);
  }
}
