{
  RulesProfile profile=RulesProfile.create("repo","java");
  Rule rule=Rule.create("repo","org.sonar.api.checks.CheckWithPrimitiveProperties","");
  rule.createParameter("max");
  rule.createParameter("ignore");
  ActiveRule activeRule=profile.activateRule(rule,null);
  activeRule.setParameter("max","300");
  activeRule.setParameter("ignore","true");
  AnnotationCheckFactory factory=AnnotationCheckFactory.create(profile,"repo",Arrays.<Class>asList(CheckWithPrimitiveProperties.class));
  Object check=factory.getCheck(activeRule);
  assertThat(((CheckWithPrimitiveProperties)check).getMax()).isEqualTo(300);
  assertThat(((CheckWithPrimitiveProperties)check).isIgnore()).isTrue();
}
