{
  return new BaseMatcher<Measure>(){
    private Diff diff;
    public boolean matches(    Object obj){
      try {
        if (!ObjectUtils.equals(CoreMetrics.TEST_DATA,((Measure)obj).getMetric())) {
          return false;
        }
        File expectedXML=new File(getClass().getResource("/org/sonar/plugins/surefire/SurefireSensorTest/" + xmlBaseFile).toURI());
        XMLUnit.setIgnoreWhitespace(true);
        XMLUnit.setIgnoreDiffBetweenTextAndCDATA(true);
        XMLUnit.setNormalize(true);
        XMLUnit.setNormalizeWhitespace(true);
        diff=XMLUnit.compareXML(new FileReader(expectedXML),new StringReader(((Measure)obj).getData()));
        return diff.similar();
      }
 catch (      Exception e) {
        throw new RuntimeException(e);
      }
    }
    public void describeTo(    Description d){
      DetailedDiff dd=new DetailedDiff(diff);
      d.appendText("XML differences in " + xmlBaseFile + ": "+ dd.getAllDifferences());
    }
  }
;
}
