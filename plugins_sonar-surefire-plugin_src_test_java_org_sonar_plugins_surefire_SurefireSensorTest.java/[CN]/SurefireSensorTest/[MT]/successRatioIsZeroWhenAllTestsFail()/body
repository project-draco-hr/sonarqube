{
  SensorContext context=mockContext();
  new SurefireSensor().collect(new Project("key"),context,new File(getClass().getResource("/org/sonar/plugins/surefire/SurefireSensorTest/successRatioIsZeroWhenAllTestsFail/").toURI()));
  verify(context).saveMeasure(eq(new JavaFile("org.sonar.Foo",true)),eq(CoreMetrics.TESTS),eq(2d));
  verify(context).saveMeasure(eq(new JavaFile("org.sonar.Foo",true)),eq(CoreMetrics.TEST_FAILURES),eq(1d));
  verify(context).saveMeasure(eq(new JavaFile("org.sonar.Foo",true)),eq(CoreMetrics.TEST_ERRORS),eq(1d));
  verify(context).saveMeasure(eq(new JavaFile("org.sonar.Foo",true)),eq(CoreMetrics.TEST_SUCCESS_DENSITY),eq(0d));
}
