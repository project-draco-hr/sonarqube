{
  Project p=new Project("foo").setAnalysisDate(new Date(1234567L));
  ResourceCache resourceCache=new ResourceCache();
  sampleFile=org.sonar.api.resources.File.create("src/Foo.php").setEffectiveKey("foo:src/Foo.php");
  resourceCache.add(p,null).setSnapshot(new Snapshot().setId(2));
  resourceCache.add(sampleFile,null);
  measureCache=mock(MeasureCache.class);
  duplicationCache=mock(DuplicationCache.class);
  when(measureCache.byResource(any(Resource.class))).thenReturn(Collections.<Measure>emptyList());
  when(duplicationCache.byComponent(anyString())).thenReturn(Collections.<DefaultDuplication>emptyList());
  publisher=new MeasuresPublisher(resourceCache,measureCache,duplicationCache);
}
