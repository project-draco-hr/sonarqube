{
  setupData("should_apply_permission_template");
  assertThat(permissionFacade.selectGroupPermissions(session,"sonar-administrators",123L)).isEmpty();
  assertThat(permissionFacade.selectGroupPermissions(session,"sonar-users",123L)).isEmpty();
  assertThat(permissionFacade.selectGroupPermissions(session,"Anyone",123L)).isEmpty();
  assertThat(permissionFacade.selectUserPermissions(session,"marius",123L)).isEmpty();
  permissionFacade.applyPermissionTemplate(session,"default_20130101_010203",123L);
  assertThat(permissionFacade.selectGroupPermissions(session,"sonar-administrators",123L)).containsOnly("admin","issueadmin");
  assertThat(permissionFacade.selectGroupPermissions(session,"sonar-users",123L)).containsOnly("user","codeviewer");
  assertThat(permissionFacade.selectGroupPermissions(session,"Anyone",123L)).containsOnly("user","codeviewer");
  assertThat(permissionFacade.selectUserPermissions(session,"marius",123L)).containsOnly("admin");
  assertThat(resourceDao.getResource(123L,session).getAuthorizationUpdatedAt()).isEqualTo(123456789L);
}
