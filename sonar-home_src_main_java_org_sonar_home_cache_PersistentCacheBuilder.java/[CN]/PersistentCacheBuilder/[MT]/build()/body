{
  if (relativePath == null) {
    throw new IllegalStateException("area must be set before building");
  }
  if (cacheBasePath == null) {
    setSonarHome(findHome());
  }
  Path cachePath=cacheBasePath.resolve(relativePath);
  DirectoryLock lock=new DirectoryLock(cacheBasePath,logger);
  PersistentCacheInvalidation criteria=new TTLCacheInvalidation(DEFAULT_EXPIRE_DURATION);
  return new PersistentCache(cachePath,criteria,logger,lock);
}
