{
  Map<String,String> currentParentProperties=newHashMap();
  currentParentProperties.putAll(parentProperties);
  currentParentProperties.putAll(getPropertiesMap(propertiesDao.selectProjectProperties(projectKey,session),hasScanPerm));
  addSettings(ref,projectKey,currentParentProperties);
  for (  ComponentDto module : dbClient.componentDao().findModulesByProject(projectKey,session)) {
    addSettings(ref,module.key(),currentParentProperties);
    addSettingsToChildrenModules(ref,module.key(),currentParentProperties,hasScanPerm,session);
  }
}
