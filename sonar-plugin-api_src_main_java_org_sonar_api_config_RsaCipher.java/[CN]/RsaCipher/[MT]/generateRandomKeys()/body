{
  try {
    KeyPairGenerator gen=KeyPairGenerator.getInstance("RSA");
    gen.initialize(1024,new SecureRandom());
    KeyPair pair=gen.generateKeyPair();
    KeyFactory fact=KeyFactory.getInstance("RSA");
    RSAPublicKeySpec pub=fact.getKeySpec(pair.getPublic(),RSAPublicKeySpec.class);
    RSAPrivateKeySpec priv=fact.getKeySpec(pair.getPrivate(),RSAPrivateKeySpec.class);
    String publicKey=pub.getModulus() + "," + pub.getPublicExponent();
    String privateKey=priv.getModulus() + "," + priv.getPrivateExponent();
    return new String[]{publicKey,privateKey};
  }
 catch (  Exception e) {
    throw new IllegalStateException("Fail to generate random RSA keys",e);
  }
}
