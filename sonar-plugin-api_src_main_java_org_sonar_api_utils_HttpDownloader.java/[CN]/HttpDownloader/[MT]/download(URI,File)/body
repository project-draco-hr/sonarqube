{
  InputStream input=null;
  FileOutputStream output=null;
  try {
    HttpURLConnection connection=newHttpConnection(uri);
    output=new FileOutputStream(toFile,false);
    input=connection.getInputStream();
    IOUtils.copy(input,output);
  }
 catch (  Exception e) {
    IOUtils.closeQuietly(output);
    FileUtils.deleteQuietly(toFile);
    throw new SonarException("Fail to download the file: " + uri + " ("+ getProxySynthesis(uri)+ ")",e);
  }
 finally {
    IOUtils.closeQuietly(input);
    IOUtils.closeQuietly(output);
  }
}
