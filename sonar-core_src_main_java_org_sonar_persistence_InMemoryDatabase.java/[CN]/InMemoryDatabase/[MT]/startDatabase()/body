{
  try {
    Properties properties=new Properties();
    properties.put("driverClassName","org.apache.derby.jdbc.EmbeddedDriver");
    properties.put("username","sonar");
    properties.put("password","sonar");
    properties.put("url","jdbc:derby:memory:sonar;create=true;user=sonar;password=sonar");
    properties.put("maxActive","1");
    properties.put("maxIdle","1");
    datasource=(BasicDataSource)BasicDataSourceFactory.createDataSource(properties);
  }
 catch (  Exception e) {
    throw new IllegalStateException("Fail to start Derby",e);
  }
}
