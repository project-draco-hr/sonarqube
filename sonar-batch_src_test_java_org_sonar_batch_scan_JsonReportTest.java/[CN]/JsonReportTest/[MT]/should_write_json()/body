{
  DefaultIssue issue=new DefaultIssue().setKey("200").setComponentKey("struts:org.apache.struts.Action").setRuleKey(RuleKey.of("squid","AvoidCycles")).setMessage("SystemPrintln").setSeverity("MINOR").setStatus(Issue.STATUS_CLOSED).setResolution(Issue.RESOLUTION_FALSE_POSITIVE).setLine(1).setEffortToFix(3.14).setReporter("julien").setAssignee("simon").setRuleKey(RuleKey.of("squid","AvoidCycles")).setCreationDate(DateUtils.parseDate("2013-04-24")).setUpdateDate(DateUtils.parseDate("2013-04-25")).setCloseDate(DateUtils.parseDate("2013-04-26")).setNew(false);
  when(ruleI18nManager.getName("squid","AvoidCycles",Locale.getDefault())).thenReturn("Avoid Cycles");
  when(jsonReport.getIssues()).thenReturn(Lists.<DefaultIssue>newArrayList(issue));
  StringWriter writer=new StringWriter();
  jsonReport.writeJson(writer);
  JSONAssert.assertEquals(TestUtils.getResourceContent("/org/sonar/batch/scan/JsonReportTest/report.json"),writer.toString(),false);
}
